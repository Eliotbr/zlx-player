"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};(function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u=typeof require=="function"&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l;}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e);},c,c.exports,e,t,r,n);}return r[s].exports;}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++){i(n[s]);}return i;})({1:[function(e,t,r){(function(){"use strict";var t=e("video.js");var r=e("./src/Helper/DependencyInjector.js");var n=e("./src/Helper/VideoTorrent.js");var i=function e(i,o,s){var a=this;this._playerElement=i;this.dependencyInjector=new r(t);this.VideoTorrent=new n();try{this.opts={autoplay:true,controls:true,sources:{},prefer_quality:"high",adTagUrl:null,adLabel:"Advertising"};this._loadOptions(o);this._config={autoplay:this.opts.autoplay,controls:this.opts.controls,plugins:{}};this.dependencyInjector.loadDependencies().then(function(){a._createPlayer().then(function(e){a.player=e;a._loadAds();return s(a.player);});}).catch(function(e){console.log("[ZLX PLAYER] >> ERROR << "+e);});}catch(e){console.log("[ZLX PLAYER] >> ERROR << "+e);}};i.prototype._loadOptions=function e(t){t=t||{};for(var r in t){this.opts[r]=t[r];}};i.prototype._createPlayer=function e(){var r=this;return new Promise(function(e,n){var i=r._configPlayer();var o=t(r._playerElement,i,function(){var t=r.opts.sources||{};var n=[];for(var i in t){n.push({label:i.toUpperCase(),src:t[i].src,type:t[i].type});}o.updateSrc(n);e(o);});});};i.prototype._loadAds=function e(){var r=this;var n={id:this._playerElement,adTagUrl:this.opts.adTagUrl,adLabel:this.opts.adLabel};if(n.adTagUrl){t.Html5=t.getComponent("Html5");this.player.ima(n);var i=document.getElementById("content_video_html5_api");if((navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&i.hasAttribute("controls")){i.removeAttribute("controls");}if(this.player.autoplay()!==true){var o="click";if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i)){o="touchend";}this.player.one(o,function(){r.player.ima.initializeAdDisplayContainer();r.player.ima.requestAds();r.player.play();});}else{this.player.ima.initializeAdDisplayContainer();this.player.ima.requestAds();}}};i.prototype._configPlayer=function e(){var t=this;this._config.plugins["videoJsResolutionSwitcher"]=null;var r={default:this.opts.prefer_quality};if(this.VideoTorrent.isSupported()){r["customSourcePicker"]=this._customSourcePicker.bind(this);}this._config.plugins["videoJsResolutionSwitcher"]=r;return this._config;};i.prototype._fallbackToServer=function e(t,r,n){t.src({src:r,type:n});};i.prototype._customSourcePicker=function e(t,r,n,i){var o=this;try{var s=this.opts.sources[n.toLowerCase()];if(!s.magnet){throw"No magnet link to Quality "+n+". Falling back to Server only.";}this.VideoTorrent.change(s.magnet).then(function(e){e.renderTo(o._playerElement,{autoplay:o.opts.autoplay});}).catch(function(e){o._fallbackToServer(t,s.src,s.type);});}catch(e){console.log(e);this._fallbackToServer(t,s.src,s.type);}return t;};window.ZLXPlayer=i;})();},{"./src/Helper/DependencyInjector.js":375,"./src/Helper/VideoTorrent.js":376,"video.js":332}],2:[function(e,t,r){var n=/^\[?([^\]]+)\]?:(\d+)$/;var i={};var o=0;t.exports=function e(r){if(o===1e5)t.exports.reset();if(!i[r]){var s=n.exec(r);if(!s)throw new Error("invalid addr: "+r);i[r]=[s[1],Number(s[2])];o+=1;}return i[r];};t.exports.reset=function e(){i={};o=0;};},{}],3:[function(e,t,r){"use strict";r.byteLength=c;r.toByteArray=f;r.fromByteArray=h;var n=[];var i=[];var o=typeof Uint8Array!=="undefined"?Uint8Array:Array;var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var a=0,u=s.length;a<u;++a){n[a]=s[a];i[s.charCodeAt(a)]=a;}i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63;function l(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4");}return e[t-2]==="="?2:e[t-1]==="="?1:0;}function c(e){return e.length*3/4-l(e);}function f(e){var t,r,n,s,a;var u=e.length;s=l(e);a=new o(u*3/4-s);r=s>0?u-4:u;var c=0;for(t=0;t<r;t+=4){n=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)];a[c++]=n>>16&255;a[c++]=n>>8&255;a[c++]=n&255;}if(s===2){n=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4;a[c++]=n&255;}else if(s===1){n=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2;a[c++]=n>>8&255;a[c++]=n&255;}return a;}function d(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63];}function p(e,t,r){var n;var i=[];for(var o=t;o<r;o+=3){n=(e[o]<<16)+(e[o+1]<<8)+e[o+2];i.push(d(n));}return i.join("");}function h(e){var t;var r=e.length;var i=r%3;var o="";var s=[];var a=16383;for(var u=0,l=r-i;u<l;u+=a){s.push(p(e,u,u+a>l?l:u+a));}if(i===1){t=e[r-1];o+=n[t>>2];o+=n[t<<4&63];o+="==";}else if(i===2){t=(e[r-2]<<8)+e[r-1];o+=n[t>>10];o+=n[t>>4&63];o+=n[t<<2&63];o+="=";}s.push(o);return s.join("");}},{}],4:[function(e,t,r){(function(e){var r=105;var n=58;var i=100;var o=108;var s=101;function a(e,t,r){var n=0;var i=1;for(var o=t;o<r;o++){var s=e[o];if(s<58&&s>=48){n=n*10+(s-48);continue;}if(o===t&&s===43){continue;}if(o===t&&s===45){i=-1;continue;}if(s===46){break;}throw new Error("not a number: buffer["+o+"] = "+s);}return n*i;}function u(t,r,n,i){if(t==null||t.length===0){return null;}if(typeof r!=="number"&&i==null){i=r;r=undefined;}if(typeof n!=="number"&&i==null){i=n;n=undefined;}u.position=0;u.encoding=i||null;u.data=!e.isBuffer(t)?new e(t):t.slice(r,n);u.bytes=u.data.length;return u.next();}u.bytes=0;u.position=0;u.data=null;u.encoding=null;u.next=function(){switch(u.data[u.position]){case i:return u.dictionary();case o:return u.list();case r:return u.integer();default:return u.buffer();}};u.find=function(e){var t=u.position;var r=u.data.length;var n=u.data;while(t<r){if(n[t]===e)return t;t++;}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]");};u.dictionary=function(){u.position++;var e={};while(u.data[u.position]!==s){e[u.buffer()]=u.next();}u.position++;return e;};u.list=function(){u.position++;var e=[];while(u.data[u.position]!==s){e.push(u.next());}u.position++;return e;};u.integer=function(){var e=u.find(s);var t=a(u.data,u.position+1,e);u.position+=e+1-u.position;return t;};u.buffer=function(){var e=u.find(n);var t=a(u.data,u.position,e);var r=++e+t;u.position=r;return u.encoding?u.data.toString(u.encoding,e,r):u.data.slice(e,r);};t.exports=u;}).call(this,e("buffer").Buffer);},{buffer:41}],5:[function(e,t,r){var n=e("safe-buffer").Buffer;function i(e,t,r){var o=[];var s=null;i._encode(o,e);s=n.concat(o);i.bytes=s.length;if(n.isBuffer(t)){s.copy(t,r);return t;}return s;}i.bytes=-1;i._floatConversionDetected=false;i._encode=function(e,t){if(n.isBuffer(t)){e.push(n.from(t.length+":"));e.push(t);return;}if(t==null){return;}switch(typeof t==="undefined"?"undefined":_typeof(t)){case"string":i.buffer(e,t);break;case"number":i.number(e,t);break;case"object":t.constructor===Array?i.list(e,t):i.dict(e,t);break;case"boolean":i.number(e,t?1:0);break;}};var o=n.from("e");var s=n.from("d");var a=n.from("l");i.buffer=function(e,t){e.push(n.from(n.byteLength(t)+":"+t));};i.number=function(e,t){var r=2147483648;var o=t/r<<0;var s=t%r<<0;var a=o*r+s;e.push(n.from("i"+a+"e"));if(a!==t&&!i._floatConversionDetected){i._floatConversionDetected=true;console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+a+'"');console.trace();}};i.dict=function(e,t){e.push(s);var r=0;var n;var a=Object.keys(t).sort();var u=a.length;for(;r<u;r++){n=a[r];if(t[n]==null)continue;i.buffer(e,n);i._encode(e,t[n]);}e.push(o);};i.list=function(e,t){var r=0;var n=t.length;e.push(a);for(;r<n;r++){if(t[r]==null)continue;i._encode(e,t[r]);}e.push(o);};t.exports=i;},{"safe-buffer":177}],6:[function(e,t,r){var n=t.exports;n.encode=e("./encode");n.decode=e("./decode");n.byteLength=n.encodingLength=function(e){return n.encode(e).length;};},{"./decode":4,"./encode":5}],7:[function(e,t,r){t.exports=function(e,t,r,n,i){var o,s;if(n===undefined)n=0;else{n=n|0;if(n<0||n>=e.length)throw new RangeError("invalid lower bound");}if(i===undefined)i=e.length-1;else{i=i|0;if(i<n||i>=e.length)throw new RangeError("invalid upper bound");}while(n<=i){o=n+(i-n>>1);s=+r(e[o],t,o,e);if(s<0)n=o+1;else if(s>0)i=o-1;else return o;}return~n;};},{}],8:[function(e,t,r){(function(e){var r=typeof e!=="undefined"?e:typeof Int8Array!=="undefined"?Int8Array:function(e){var t=new Array(e);for(var r=0;r<e;r++){t[r]=0;}};function n(e,t){if(!(this instanceof n)){return new n(e,t);}if(arguments.length===0){e=0;}this.grow=t&&(isFinite(t.grow)&&i(t.grow)||t.grow)||0;if(typeof e==="number"||e===undefined){e=new r(i(e));if(e.fill&&!e._isBuffer)e.fill(0);}this.buffer=e;}function i(e){var t=e>>3;if(e%8!==0)t++;return t;}n.prototype.get=function(e){var t=e>>3;return t<this.buffer.length&&!!(this.buffer[t]&128>>e%8);};n.prototype.set=function(e,t){var r=e>>3;if(t||arguments.length===1){if(this.buffer.length<r+1)this._grow(Math.max(r+1,Math.min(2*this.buffer.length,this.grow)));this.buffer[r]|=128>>e%8;}else if(r<this.buffer.length){this.buffer[r]&=~(128>>e%8);}};n.prototype._grow=function(e){if(this.buffer.length<e&&e<=this.grow){var t=new r(e);if(t.fill)t.fill(0);if(this.buffer.copy)this.buffer.copy(t,0);else{for(var n=0;n<this.buffer.length;n++){t[n]=this.buffer[n];}}this.buffer=t;}};if(typeof t!=="undefined")t.exports=n;}).call(this,e("buffer").Buffer);},{buffer:41}],9:[function(e,t,r){t.exports=k;var n=e("unordered-array-remove");var i=e("bencode");var o=e("bitfield");var s=e("safe-buffer").Buffer;var a=e("debug")("bittorrent-protocol");var u=e("xtend");var l=e("inherits");var c=e("randombytes");var f=e("speedometer");var d=e("readable-stream");var p=4e5;var h=55e3;var v=s.from("BitTorrent protocol");var y=s.from([0,0,0,0]);var m=s.from([0,0,0,1,0]);var g=s.from([0,0,0,1,1]);var _=s.from([0,0,0,1,2]);var b=s.from([0,0,0,1,3]);var w=[0,0,0,0,0,0,0,0];var T=[0,0,0,3,9,0,0];function j(e,t,r,n){this.piece=e;this.offset=t;this.length=r;this.callback=n;}l(k,d.Duplex);function k(){if(!(this instanceof k))return new k();d.Duplex.call(this);this._debugId=c(4).toString("hex");this._debug("new wire");this.peerId=null;this.peerIdBuffer=null;this.type=null;this.amChoking=true;this.amInterested=false;this.peerChoking=true;this.peerInterested=false;this.peerPieces=new o(0,{grow:p});this.peerExtensions={};this.requests=[];this.peerRequests=[];this.extendedMapping={};this.peerExtendedMapping={};this.extendedHandshake={};this.peerExtendedHandshake={};this._ext={};this._nextExt=1;this.uploaded=0;this.downloaded=0;this.uploadSpeed=f();this.downloadSpeed=f();this._keepAliveInterval=null;this._timeout=null;this._timeoutMs=0;this.destroyed=false;this._finished=false;this._parserSize=0;this._parser=null;this._buffer=[];this._bufferSize=0;this.on("finish",this._onFinish);this._parseHandshake();}k.prototype.setKeepAlive=function(e){var t=this;t._debug("setKeepAlive %s",e);clearInterval(t._keepAliveInterval);if(e===false)return;t._keepAliveInterval=setInterval(function(){t.keepAlive();},h);};k.prototype.setTimeout=function(e,t){this._debug("setTimeout ms=%d unref=%s",e,t);this._clearTimeout();this._timeoutMs=e;this._timeoutUnref=!!t;this._updateTimeout();};k.prototype.destroy=function(){if(this.destroyed)return;this.destroyed=true;this._debug("destroy");this.emit("close");this.end();};k.prototype.end=function(){this._debug("end");this._onUninterested();this._onChoke();d.Duplex.prototype.end.apply(this,arguments);};k.prototype.use=function(e){var t=e.prototype.name;if(!t){throw new Error('Extension class requires a "name" property on the prototype');}this._debug("use extension.name=%s",t);var r=this._nextExt;var n=new e(this);function i(){}if(typeof n.onHandshake!=="function"){n.onHandshake=i;}if(typeof n.onExtendedHandshake!=="function"){n.onExtendedHandshake=i;}if(typeof n.onMessage!=="function"){n.onMessage=i;}this.extendedMapping[r]=t;this._ext[t]=n;this[t]=n;this._nextExt+=1;};k.prototype.keepAlive=function(){this._debug("keep-alive");this._push(y);};k.prototype.handshake=function(e,t,r){var n,i;if(typeof e==="string"){n=s.from(e,"hex");}else{n=e;e=n.toString("hex");}if(typeof t==="string"){i=s.from(t,"hex");}else{i=t;t=i.toString("hex");}if(n.length!==20||i.length!==20){throw new Error("infoHash and peerId MUST have length 20");}this._debug("handshake i=%s p=%s exts=%o",e,t,r);var o=s.from(w);o[5]|=16;if(r&&r.dht)o[7]|=1;this._push(s.concat([v,o,n,i]));this._handshakeSent=true;if(this.peerExtensions.extended&&!this._extendedHandshakeSent){this._sendExtendedHandshake();}};k.prototype._sendExtendedHandshake=function(){var e=u(this.extendedHandshake);e.m={};for(var t in this.extendedMapping){var r=this.extendedMapping[t];e.m[r]=Number(t);}this.extended(0,i.encode(e));this._extendedHandshakeSent=true;};k.prototype.choke=function(){if(this.amChoking)return;this.amChoking=true;this._debug("choke");while(this.peerRequests.length){this.peerRequests.pop();}this._push(m);};k.prototype.unchoke=function(){if(!this.amChoking)return;this.amChoking=false;this._debug("unchoke");this._push(g);};k.prototype.interested=function(){if(this.amInterested)return;this.amInterested=true;this._debug("interested");this._push(_);};k.prototype.uninterested=function(){if(!this.amInterested)return;this.amInterested=false;this._debug("uninterested");this._push(b);};k.prototype.have=function(e){this._debug("have %d",e);this._message(4,[e],null);};k.prototype.bitfield=function(e){this._debug("bitfield");if(!s.isBuffer(e))e=e.buffer;this._message(5,[],e);};k.prototype.request=function(e,t,r,n){if(!n)n=function n(){};if(this._finished)return n(new Error("wire is closed"));if(this.peerChoking)return n(new Error("peer is choking"));this._debug("request index=%d offset=%d length=%d",e,t,r);this.requests.push(new j(e,t,r,n));this._updateTimeout();this._message(6,[e,t,r],null);};k.prototype.piece=function(e,t,r){this._debug("piece index=%d offset=%d",e,t);this.uploaded+=r.length;this.uploadSpeed(r.length);this.emit("upload",r.length);this._message(7,[e,t],r);};k.prototype.cancel=function(e,t,r){this._debug("cancel index=%d offset=%d length=%d",e,t,r);this._callback(E(this.requests,e,t,r),new Error("request was cancelled"),null);this._message(8,[e,t,r],null);};k.prototype.port=function(e){this._debug("port %d",e);var t=s.from(T);t.writeUInt16BE(e,5);this._push(t);};k.prototype.extended=function(e,t){this._debug("extended ext=%s",e);if(typeof e==="string"&&this.peerExtendedMapping[e]){e=this.peerExtendedMapping[e];}if(typeof e==="number"){var r=s.from([e]);var n=s.isBuffer(t)?t:i.encode(t);this._message(20,[],s.concat([r,n]));}else{throw new Error("Unrecognized extension: "+e);}};k.prototype._read=function(){};k.prototype._message=function(e,t,r){var n=r?r.length:0;var i=s.allocUnsafe(5+4*t.length);i.writeUInt32BE(i.length+n-4,0);i[4]=e;for(var o=0;o<t.length;o++){i.writeUInt32BE(t[o],5+4*o);}this._push(i);if(r)this._push(r);};k.prototype._push=function(e){if(this._finished)return;return this.push(e);};k.prototype._onKeepAlive=function(){this._debug("got keep-alive");this.emit("keep-alive");};k.prototype._onHandshake=function(e,t,r){var n=e.toString("hex");var i=t.toString("hex");this._debug("got handshake i=%s p=%s exts=%o",n,i,r);this.peerId=i;this.peerIdBuffer=t;this.peerExtensions=r;this.emit("handshake",n,i,r);var o;for(o in this._ext){this._ext[o].onHandshake(n,i,r);}if(r.extended&&this._handshakeSent&&!this._extendedHandshakeSent){this._sendExtendedHandshake();}};k.prototype._onChoke=function(){this.peerChoking=true;this._debug("got choke");this.emit("choke");while(this.requests.length){this._callback(this.requests.pop(),new Error("peer is choking"),null);}};k.prototype._onUnchoke=function(){this.peerChoking=false;this._debug("got unchoke");this.emit("unchoke");};k.prototype._onInterested=function(){this.peerInterested=true;this._debug("got interested");this.emit("interested");};k.prototype._onUninterested=function(){this.peerInterested=false;this._debug("got uninterested");this.emit("uninterested");};k.prototype._onHave=function(e){if(this.peerPieces.get(e))return;this._debug("got have %d",e);this.peerPieces.set(e,true);this.emit("have",e);};k.prototype._onBitField=function(e){this.peerPieces=new o(e);this._debug("got bitfield");this.emit("bitfield",this.peerPieces);};k.prototype._onRequest=function(e,t,r){var n=this;if(n.amChoking)return;n._debug("got request index=%d offset=%d length=%d",e,t,r);var i=function i(_i,s){if(o!==E(n.peerRequests,e,t,r))return;if(_i)return n._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,r,_i.message);n.piece(e,t,s);};var o=new j(e,t,r,i);n.peerRequests.push(o);n.emit("request",e,t,r,i);};k.prototype._onPiece=function(e,t,r){this._debug("got piece index=%d offset=%d",e,t);this._callback(E(this.requests,e,t,r.length),null,r);this.downloaded+=r.length;this.downloadSpeed(r.length);this.emit("download",r.length);this.emit("piece",e,t,r);};k.prototype._onCancel=function(e,t,r){this._debug("got cancel index=%d offset=%d length=%d",e,t,r);E(this.peerRequests,e,t,r);this.emit("cancel",e,t,r);};k.prototype._onPort=function(e){this._debug("got port %d",e);this.emit("port",e);};k.prototype._onExtended=function(e,t){if(e===0){var r;try{r=i.decode(t);}catch(e){this._debug("ignoring invalid extended handshake: %s",e.message||e);}if(!r)return;this.peerExtendedHandshake=r;var n;if(_typeof(r.m)==="object"){for(n in r.m){this.peerExtendedMapping[n]=Number(r.m[n].toString());}}for(n in this._ext){if(this.peerExtendedMapping[n]){this._ext[n].onExtendedHandshake(this.peerExtendedHandshake);}}this._debug("got extended handshake");this.emit("extended","handshake",this.peerExtendedHandshake);}else{if(this.extendedMapping[e]){e=this.extendedMapping[e];if(this._ext[e]){this._ext[e].onMessage(t);}}this._debug("got extended message ext=%s",e);this.emit("extended",e,t);}};k.prototype._onTimeout=function(){this._debug("request timed out");this._callback(this.requests.shift(),new Error("request has timed out"),null);this.emit("timeout");};k.prototype._write=function(e,t,r){this._bufferSize+=e.length;this._buffer.push(e);while(this._bufferSize>=this._parserSize){var n=this._buffer.length===1?this._buffer[0]:s.concat(this._buffer);this._bufferSize-=this._parserSize;this._buffer=this._bufferSize?[n.slice(this._parserSize)]:[];this._parser(n.slice(0,this._parserSize));}r(null);};k.prototype._callback=function(e,t,r){if(!e)return;this._clearTimeout();if(!this.peerChoking&&!this._finished)this._updateTimeout();e.callback(t,r);};k.prototype._clearTimeout=function(){if(!this._timeout)return;clearTimeout(this._timeout);this._timeout=null;};k.prototype._updateTimeout=function(){var e=this;if(!e._timeoutMs||!e.requests.length||e._timeout)return;e._timeout=setTimeout(function(){e._onTimeout();},e._timeoutMs);if(e._timeoutUnref&&e._timeout.unref)e._timeout.unref();};k.prototype._parse=function(e,t){this._parserSize=e;this._parser=t;};k.prototype._onMessageLength=function(e){var t=e.readUInt32BE(0);if(t>0){this._parse(t,this._onMessage);}else{this._onKeepAlive();this._parse(4,this._onMessageLength);}};k.prototype._onMessage=function(e){this._parse(4,this._onMessageLength);switch(e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:this._debug("got unknown message");return this.emit("unknownmessage",e);}};k.prototype._parseHandshake=function(){var e=this;e._parse(1,function(t){var r=t.readUInt8(0);e._parse(r+48,function(t){var n=t.slice(0,r);if(n.toString()!=="BitTorrent protocol"){e._debug("Error: wire not speaking BitTorrent protocol (%s)",n.toString());e.end();return;}t=t.slice(r);e._onHandshake(t.slice(8,28),t.slice(28,48),{dht:!!(t[7]&1),extended:!!(t[5]&16)});e._parse(4,e._onMessageLength);});});};k.prototype._onFinish=function(){this._finished=true;this.push(null);while(this.read()){}clearInterval(this._keepAliveInterval);this._parse(Number.MAX_VALUE,function(){});while(this.peerRequests.length){this.peerRequests.pop();}while(this.requests.length){this._callback(this.requests.pop(),new Error("wire was closed"),null);}};k.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0];a.apply(null,e);};function E(e,t,r,i){for(var o=0;o<e.length;o++){var s=e[o];if(s.piece===t&&s.offset===r&&s.length===i){n(e,o);return s;}}return null;}},{bencode:6,bitfield:8,debug:69,inherits:94,randombytes:159,"readable-stream":19,"safe-buffer":177,speedometer:206,"unordered-array-remove":235,xtend:372}],10:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return n.call(e)=="[object Array]";};},{}],11:[function(e,t,r){"use strict";var n=e("process-nextick-args");var i=Object.keys||function(e){var t=[];for(var r in e){t.push(r);}return t;};t.exports=f;var o=e("core-util-is");o.inherits=e("inherits");var s=e("./_stream_readable");var a=e("./_stream_writable");o.inherits(f,s);var u=i(a.prototype);for(var l=0;l<u.length;l++){var c=u[l];if(!f.prototype[c])f.prototype[c]=a.prototype[c];}function f(e){if(!(this instanceof f))return new f(e);s.call(this,e);a.call(this,e);if(e&&e.readable===false)this.readable=false;if(e&&e.writable===false)this.writable=false;this.allowHalfOpen=true;if(e&&e.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",d);}function d(){if(this.allowHalfOpen||this._writableState.ended)return;n(p,this);}function p(e){e.end();}Object.defineProperty(f.prototype,"destroyed",{get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false;}return this._readableState.destroyed&&this._writableState.destroyed;},set:function set(e){if(this._readableState===undefined||this._writableState===undefined){return;}this._readableState.destroyed=e;this._writableState.destroyed=e;}});f.prototype._destroy=function(e,t){this.push(null);this.end();n(t,e);};function h(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r);}}},{"./_stream_readable":13,"./_stream_writable":15,"core-util-is":56,inherits:94,"process-nextick-args":152}],12:[function(e,t,r){"use strict";t.exports=o;var n=e("./_stream_transform");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(o,n);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e);}o.prototype._transform=function(e,t,r){r(null,e);};},{"./_stream_transform":14,"core-util-is":56,inherits:94}],13:[function(e,t,r){(function(r,n){"use strict";var i=e("process-nextick-args");t.exports=j;var o=e("isarray");var s;j.ReadableState=T;var a=e("events").EventEmitter;var u=function u(e,t){return e.listeners(t).length;};var l=e("./internal/streams/stream");var c=e("safe-buffer").Buffer;var f=n.Uint8Array||function(){};function d(e){return c.from(e);}function p(e){return c.isBuffer(e)||e instanceof f;}var h=e("core-util-is");h.inherits=e("inherits");var v=e("util");var y=void 0;if(v&&v.debuglog){y=v.debuglog("stream");}else{y=function y(){};}var m=e("./internal/streams/BufferList");var g=e("./internal/streams/destroy");var _;h.inherits(j,l);var b=["error","close","destroy","pause","resume"];function w(e,t,r){if(typeof e.prependListener==="function"){return e.prependListener(t,r);}else{if(!e._events||!e._events[t])e.on(t,r);else if(o(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]];}}function T(t,r){s=s||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof s)this.objectMode=this.objectMode||!!t.readableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new m();this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=t.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!_)_=e("string_decoder/").StringDecoder;this.decoder=new _(t.encoding);this.encoding=t.encoding;}}function j(t){s=s||e("./_stream_duplex");if(!(this instanceof j))return new j(t);this._readableState=new T(t,this);this.readable=true;if(t){if(typeof t.read==="function")this._read=t.read;if(typeof t.destroy==="function")this._destroy=t.destroy;}l.call(this);}Object.defineProperty(j.prototype,"destroyed",{get:function get(){if(this._readableState===undefined){return false;}return this._readableState.destroyed;},set:function set(e){if(!this._readableState){return;}this._readableState.destroyed=e;}});j.prototype.destroy=g.destroy;j.prototype._undestroy=g.undestroy;j.prototype._destroy=function(e,t){this.push(null);t(e);};j.prototype.push=function(e,t){var r=this._readableState;var n;if(!r.objectMode){if(typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=c.from(e,t);t="";}n=true;}}else{n=true;}return k(this,e,t,false,n);};j.prototype.unshift=function(e){return k(this,e,null,true,false);};function k(e,t,r,n,i){var o=e._readableState;if(t===null){o.reading=false;A(e,o);}else{var s;if(!i)s=C(o,t);if(s){e.emit("error",s);}else if(o.objectMode||t&&t.length>0){if(typeof t!=="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==c.prototype){t=d(t);}if(n){if(o.endEmitted)e.emit("error",new Error("stream.unshift() after end event"));else E(e,o,t,true);}else if(o.ended){e.emit("error",new Error("stream.push() after EOF"));}else{o.reading=false;if(o.decoder&&!r){t=o.decoder.write(t);if(o.objectMode||t.length!==0)E(e,o,t,false);else L(e,o);}else{E(e,o,t,false);}}}else if(!n){o.reading=false;}}return x(o);}function E(e,t,r,n){if(t.flowing&&t.length===0&&!t.sync){e.emit("data",r);e.read(0);}else{t.length+=t.objectMode?1:r.length;if(n)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)M(e);}L(e,t);}function C(e,t){var r;if(!p(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){r=new TypeError("Invalid non-string/buffer chunk");}return r;}function x(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0);}j.prototype.isPaused=function(){return this._readableState.flowing===false;};j.prototype.setEncoding=function(t){if(!_)_=e("string_decoder/").StringDecoder;this._readableState.decoder=new _(t);this._readableState.encoding=t;return this;};var S=8388608;function O(e){if(e>=S){e=S;}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++;}return e;}function P(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length;}if(e>t.highWaterMark)t.highWaterMark=O(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0;}return t.length;}j.prototype.read=function(e){y("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){y("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)z(this);else M(this);return null;}e=P(e,t);if(e===0&&t.ended){if(t.length===0)z(this);return null;}var n=t.needReadable;y("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;y("length less than watermark",n);}if(t.ended||t.reading){n=false;y("reading or ended",n);}else if(n){y("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=P(r,t);}var i;if(e>0)i=H(e,t);else i=null;if(i===null){t.needReadable=true;e=0;}else{t.length-=e;}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)z(this);}if(i!==null)this.emit("data",i);return i;};function A(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length;}}t.ended=true;M(e);}function M(e){var t=e._readableState;t.needReadable=false;if(!t.emittedReadable){y("emitReadable",t.flowing);t.emittedReadable=true;if(t.sync)i(I,e);else I(e);}}function I(e){y("emit readable");e.emit("readable");U(e);}function L(e,t){if(!t.readingMore){t.readingMore=true;i(R,e,t);}}function R(e,t){var r=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){y("maybeReadMore read 0");e.read(0);if(r===t.length)break;else r=t.length;}t.readingMore=false;}j.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"));};j.prototype.pipe=function(e,t){var n=this;var o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e);break;}o.pipesCount+=1;y("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||t.end!==false)&&e!==r.stdout&&e!==r.stderr;var a=s?c:b;if(o.endEmitted)i(a);else n.once("end",a);e.on("unpipe",l);function l(e,t){y("onunpipe");if(e===n){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;p();}}}function c(){y("onend");e.end();}var f=B(n);e.on("drain",f);var d=false;function p(){y("cleanup");e.removeListener("close",g);e.removeListener("finish",_);e.removeListener("drain",f);e.removeListener("error",m);e.removeListener("unpipe",l);n.removeListener("end",c);n.removeListener("end",b);n.removeListener("data",v);d=true;if(o.awaitDrain&&(!e._writableState||e._writableState.needDrain))f();}var h=false;n.on("data",v);function v(t){y("ondata");h=false;var r=e.write(t);if(false===r&&!h){if((o.pipesCount===1&&o.pipes===e||o.pipesCount>1&&G(o.pipes,e)!==-1)&&!d){y("false write response, pause",n._readableState.awaitDrain);n._readableState.awaitDrain++;h=true;}n.pause();}}function m(t){y("onerror",t);b();e.removeListener("error",m);if(u(e,"error")===0)e.emit("error",t);}w(e,"error",m);function g(){e.removeListener("finish",_);b();}e.once("close",g);function _(){y("onfinish");e.removeListener("close",g);b();}e.once("finish",_);function b(){y("unpipe");n.unpipe(e);}e.emit("pipe",n);if(!o.flowing){y("pipe resume");n.resume();}return e;};function B(e){return function(){var t=e._readableState;y("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&u(e,"data")){t.flowing=true;U(e);}};}j.prototype.unpipe=function(e){var t=this._readableState;var r={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,r);return this;}if(!e){var n=t.pipes;var i=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var o=0;o<i;o++){n[o].emit("unpipe",this,r);}return this;}var s=G(t.pipes,e);if(s===-1)return this;t.pipes.splice(s,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,r);return this;};j.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t);if(e==="data"){if(this._readableState.flowing!==false)this.resume();}else if(e==="readable"){var n=this._readableState;if(!n.endEmitted&&!n.readableListening){n.readableListening=n.needReadable=true;n.emittedReadable=false;if(!n.reading){i(D,this);}else if(n.length){M(this);}}}return r;};j.prototype.addListener=j.prototype.on;function D(e){y("readable nexttick read 0");e.read(0);}j.prototype.resume=function(){var e=this._readableState;if(!e.flowing){y("resume");e.flowing=true;N(this,e);}return this;};function N(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;i(F,e,t);}}function F(e,t){if(!t.reading){y("resume read 0");e.read(0);}t.resumeScheduled=false;t.awaitDrain=0;e.emit("resume");U(e);if(t.flowing&&!t.reading)e.read(0);}j.prototype.pause=function(){y("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){y("pause");this._readableState.flowing=false;this.emit("pause");}return this;};function U(e){var t=e._readableState;y("flow",t.flowing);while(t.flowing&&e.read()!==null){}}j.prototype.wrap=function(e){var t=this._readableState;var r=false;var n=this;e.on("end",function(){y("wrapped end");if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)n.push(e);}n.push(null);});e.on("data",function(i){y("wrapped data");if(t.decoder)i=t.decoder.write(i);if(t.objectMode&&(i===null||i===undefined))return;else if(!t.objectMode&&(!i||!i.length))return;var o=n.push(i);if(!o){r=true;e.pause();}});for(var i in e){if(this[i]===undefined&&typeof e[i]==="function"){this[i]=function(t){return function(){return e[t].apply(e,arguments);};}(i);}}for(var o=0;o<b.length;o++){e.on(b[o],n.emit.bind(n,b[o]));}n._read=function(t){y("wrapped _read",t);if(r){r=false;e.resume();}};return n;};j._fromList=H;function H(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.head.data;else r=t.buffer.concat(t.length);t.buffer.clear();}else{r=V(e,t.buffer,t.decoder);}return r;}function V(e,t,r){var n;if(e<t.head.data.length){n=t.head.data.slice(0,e);t.head.data=t.head.data.slice(e);}else if(e===t.head.data.length){n=t.shift();}else{n=r?W(e,t):q(e,t);}return n;}function W(e,t){var r=t.head;var n=1;var i=r.data;e-=i.length;while(r=r.next){var o=r.data;var s=e>o.length?o.length:e;if(s===o.length)i+=o;else i+=o.slice(0,e);e-=s;if(e===0){if(s===o.length){++n;if(r.next)t.head=r.next;else t.head=t.tail=null;}else{t.head=r;r.data=o.slice(s);}break;}++n;}t.length-=n;return i;}function q(e,t){var r=c.allocUnsafe(e);var n=t.head;var i=1;n.data.copy(r);e-=n.data.length;while(n=n.next){var o=n.data;var s=e>o.length?o.length:e;o.copy(r,r.length-e,0,s);e-=s;if(e===0){if(s===o.length){++i;if(n.next)t.head=n.next;else t.head=t.tail=null;}else{t.head=n;n.data=o.slice(s);}break;}++i;}t.length-=i;return r;}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!t.endEmitted){t.ended=true;i($,t,e);}}function $(e,t){if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");}}function X(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r);}}function G(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r;}return-1;}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./_stream_duplex":11,"./internal/streams/BufferList":16,"./internal/streams/destroy":17,"./internal/streams/stream":18,_process:40,"core-util-is":56,events:73,inherits:94,isarray:10,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":20,util:38}],14:[function(e,t,r){"use strict";t.exports=a;var n=e("./_stream_duplex");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(a,n);function o(e){this.afterTransform=function(t,r){return s(e,t,r);};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null;}function s(e,t,r){var n=e._transformState;n.transforming=false;var i=n.writecb;if(!i){return e.emit("error",new Error("write callback called multiple times"));}n.writechunk=null;n.writecb=null;if(r!==null&&r!==undefined)e.push(r);i(t);var o=e._readableState;o.reading=false;if(o.needReadable||o.length<o.highWaterMark){e._read(o.highWaterMark);}}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e);this._transformState=new o(this);var t=this;this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush;}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(e,r){u(t,e,r);});else u(t);});}a.prototype.push=function(e,t){this._transformState.needTransform=false;return n.prototype.push.call(this,e,t);};a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented");};a.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var i=this._readableState;if(n.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark);}};a.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&t.writecb&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform);}else{t.needTransform=true;}};a.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e);r.emit("close");});};function u(e,t,r){if(t)return e.emit("error",t);if(r!==null&&r!==undefined)e.push(r);var n=e._writableState;var i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null);}},{"./_stream_duplex":11,"core-util-is":56,inherits:94}],15:[function(e,t,r){(function(r,n){"use strict";var i=e("process-nextick-args");t.exports=b;function o(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null;}function s(e){var t=this;this.next=null;this.entry=null;this.finish=function(){D(t,e);};}var a=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:i;var u;b.WritableState=g;var l=e("core-util-is");l.inherits=e("inherits");var c={deprecate:e("util-deprecate")};var f=e("./internal/streams/stream");var d=e("safe-buffer").Buffer;var p=n.Uint8Array||function(){};function h(e){return d.from(e);}function v(e){return d.isBuffer(e)||e instanceof p;}var y=e("./internal/streams/destroy");l.inherits(b,f);function m(){}function g(t,r){u=u||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof u)this.objectMode=this.objectMode||!!t.writableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var o=t.decodeStrings===false;this.decodeStrings=!o;this.defaultEncoding=t.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){S(r,e);};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new s(this);}g.prototype.getBuffer=function e(){var t=this.bufferedRequest;var r=[];while(t){r.push(t);t=t.next;}return r;};(function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer();},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")});}catch(e){}})();var _;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){_=Function.prototype[Symbol.hasInstance];Object.defineProperty(b,Symbol.hasInstance,{value:function value(e){if(_.call(this,e))return true;return e&&e._writableState instanceof g;}});}else{_=function _(e){return e instanceof this;};}function b(t){u=u||e("./_stream_duplex");if(!_.call(b,this)&&!(this instanceof u)){return new b(t);}this._writableState=new g(t,this);this.writable=true;if(t){if(typeof t.write==="function")this._write=t.write;if(typeof t.writev==="function")this._writev=t.writev;if(typeof t.destroy==="function")this._destroy=t.destroy;if(typeof t.final==="function")this._final=t.final;}f.call(this);}b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"));};function w(e,t){var r=new Error("write after end");e.emit("error",r);i(t,r);}function T(e,t,r,n){var o=true;var s=false;if(r===null){s=new TypeError("May not write null values to stream");}else if(typeof r!=="string"&&r!==undefined&&!t.objectMode){s=new TypeError("Invalid non-string/buffer chunk");}if(s){e.emit("error",s);i(n,s);o=false;}return o;}b.prototype.write=function(e,t,r){var n=this._writableState;var i=false;var o=v(e)&&!n.objectMode;if(o&&!d.isBuffer(e)){e=h(e);}if(typeof t==="function"){r=t;t=null;}if(o)t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=m;if(n.ended)w(this,r);else if(o||T(this,n,e,r)){n.pendingcb++;i=k(this,n,o,e,t,r);}return i;};b.prototype.cork=function(){var e=this._writableState;e.corked++;};b.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest)A(this,e);}};b.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t;return this;};function j(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=d.from(t,r);}return t;}function k(e,t,r,n,i,o){if(!r){var s=j(t,n,i);if(n!==s){r=true;i="buffer";n=s;}}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(!u)t.needDrain=true;if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null};if(l){l.next=t.lastBufferedRequest;}else{t.bufferedRequest=t.lastBufferedRequest;}t.bufferedRequestCount+=1;}else{E(e,t,false,a,n,i,o);}return u;}function E(e,t,r,n,i,o,s){t.writelen=n;t.writecb=s;t.writing=true;t.sync=true;if(r)e._writev(i,t.onwrite);else e._write(i,o,t.onwrite);t.sync=false;}function C(e,t,r,n,o){--t.pendingcb;if(r){i(o,n);i(R,e,t);e._writableState.errorEmitted=true;e.emit("error",n);}else{o(n);e._writableState.errorEmitted=true;e.emit("error",n);R(e,t);}}function x(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0;}function S(e,t){var r=e._writableState;var n=r.sync;var i=r.writecb;x(r);if(t)C(e,r,n,t,i);else{var o=M(r);if(!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){A(e,r);}if(n){a(O,e,r,o,i);}else{O(e,r,o,i);}}}function O(e,t,r,n){if(!r)P(e,t);t.pendingcb--;n();R(e,t);}function P(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain");}}function A(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var i=new Array(n);var o=t.corkedRequestsFree;o.entry=r;var a=0;var u=true;while(r){i[a]=r;if(!r.isBuf)u=false;r=r.next;a+=1;}i.allBuffers=u;E(e,t,true,t.length,i,"",o.finish);t.pendingcb++;t.lastBufferedRequest=null;if(o.next){t.corkedRequestsFree=o.next;o.next=null;}else{t.corkedRequestsFree=new s(t);}}else{while(r){var l=r.chunk;var c=r.encoding;var f=r.callback;var d=t.objectMode?1:l.length;E(e,t,false,d,l,c,f);r=r.next;if(t.writing){break;}}if(r===null)t.lastBufferedRequest=null;}t.bufferedRequestCount=0;t.bufferedRequest=r;t.bufferProcessing=false;}b.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"));};b.prototype._writev=null;b.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null;}else if(typeof t==="function"){r=t;t=null;}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork();}if(!n.ending&&!n.finished)B(this,n,r);};function M(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing;}function I(e,t){e._final(function(r){t.pendingcb--;if(r){e.emit("error",r);}t.prefinished=true;e.emit("prefinish");R(e,t);});}function L(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"){t.pendingcb++;t.finalCalled=true;i(I,e,t);}else{t.prefinished=true;e.emit("prefinish");}}}function R(e,t){var r=M(t);if(r){L(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");}}return r;}function B(e,t,r){t.ending=true;R(e,t);if(r){if(t.finished)i(r);else e.once("finish",r);}t.ended=true;e.writable=false;}function D(e,t,r){var n=e.entry;e.entry=null;while(n){var i=n.callback;t.pendingcb--;i(r);n=n.next;}if(t.corkedRequestsFree){t.corkedRequestsFree.next=e;}else{t.corkedRequestsFree=e;}}Object.defineProperty(b.prototype,"destroyed",{get:function get(){if(this._writableState===undefined){return false;}return this._writableState.destroyed;},set:function set(e){if(!this._writableState){return;}this._writableState.destroyed=e;}});b.prototype.destroy=y.destroy;b.prototype._undestroy=y.undestroy;b.prototype._destroy=function(e,t){this.end();t(e);};}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./_stream_duplex":11,"./internal/streams/destroy":17,"./internal/streams/stream":18,_process:40,"core-util-is":56,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],16:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}var i=e("safe-buffer").Buffer;function o(e,t,r){e.copy(t,r);}t.exports=function(){function e(){n(this,e);this.head=null;this.tail=null;this.length=0;}e.prototype.push=function e(t){var r={data:t,next:null};if(this.length>0)this.tail.next=r;else this.head=r;this.tail=r;++this.length;};e.prototype.unshift=function e(t){var r={data:t,next:this.head};if(this.length===0)this.tail=r;this.head=r;++this.length;};e.prototype.shift=function e(){if(this.length===0)return;var t=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return t;};e.prototype.clear=function e(){this.head=this.tail=null;this.length=0;};e.prototype.join=function e(t){if(this.length===0)return"";var r=this.head;var n=""+r.data;while(r=r.next){n+=t+r.data;}return n;};e.prototype.concat=function e(t){if(this.length===0)return i.alloc(0);if(this.length===1)return this.head.data;var r=i.allocUnsafe(t>>>0);var n=this.head;var s=0;while(n){o(n.data,r,s);s+=n.data.length;n=n.next;}return r;};return e;}();},{"safe-buffer":177}],17:[function(e,t,r){"use strict";var n=e("process-nextick-args");function i(e,t){var r=this;var i=this._readableState&&this._readableState.destroyed;var o=this._writableState&&this._writableState.destroyed;if(i||o){if(t){t(e);}else if(e&&(!this._writableState||!this._writableState.errorEmitted)){n(s,this,e);}return;}if(this._readableState){this._readableState.destroyed=true;}if(this._writableState){this._writableState.destroyed=true;}this._destroy(e||null,function(e){if(!t&&e){n(s,r,e);if(r._writableState){r._writableState.errorEmitted=true;}}else if(t){t(e);}});}function o(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false;}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false;}}function s(e,t){e.emit("error",t);}t.exports={destroy:i,undestroy:o};},{"process-nextick-args":152}],18:[function(e,t,r){t.exports=e("events").EventEmitter;},{events:73}],19:[function(e,t,r){r=t.exports=e("./lib/_stream_readable.js");r.Stream=r;r.Readable=r;r.Writable=e("./lib/_stream_writable.js");r.Duplex=e("./lib/_stream_duplex.js");r.Transform=e("./lib/_stream_transform.js");r.PassThrough=e("./lib/_stream_passthrough.js");},{"./lib/_stream_duplex.js":11,"./lib/_stream_passthrough.js":12,"./lib/_stream_readable.js":13,"./lib/_stream_transform.js":14,"./lib/_stream_writable.js":15}],20:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;var i=n.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false;}};function o(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true;}}}function s(e){var t=o(e);if(typeof t!=="string"&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e;}r.StringDecoder=a;function a(e){this.encoding=s(e);var t;switch(this.encoding){case"utf16le":this.text=h;this.end=v;t=4;break;case"utf8":this.fillLast=f;t=4;break;case"base64":this.text=y;this.end=m;t=3;break;default:this.write=g;this.end=_;return;}this.lastNeed=0;this.lastTotal=0;this.lastChar=n.allocUnsafe(t);}a.prototype.write=function(e){if(e.length===0)return"";var t;var r;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";r=this.lastNeed;this.lastNeed=0;}else{r=0;}if(r<e.length)return t?t+this.text(e,r):this.text(e,r);return t||"";};a.prototype.end=p;a.prototype.text=d;a.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length;};function u(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return-1;}function l(e,t,r){var n=t.length-1;if(n<r)return 0;var i=u(t[n]);if(i>=0){if(i>0)e.lastNeed=i-1;return i;}if(--n<r)return 0;i=u(t[n]);if(i>=0){if(i>0)e.lastNeed=i-2;return i;}if(--n<r)return 0;i=u(t[n]);if(i>=0){if(i>0){if(i===2)i=0;else e.lastNeed=i-3;}return i;}return 0;}function c(e,t,r){if((t[0]&192)!==128){e.lastNeed=0;return"".repeat(r);}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return"".repeat(r+1);}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return"".repeat(r+2);}}}}function f(e){var t=this.lastTotal-this.lastNeed;var r=c(this,e,t);if(r!==undefined)return r;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal);}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length;}function d(e,t){var r=l(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);e.copy(this.lastChar,0,n);return e.toString("utf8",t,n);}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"".repeat(this.lastTotal-this.lastNeed);return t;}function h(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return r.slice(0,-1);}}return r;}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1);}function v(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r);}return t;}function y(e,t){var r=(e.length-t)%3;if(r===0)return e.toString("base64",t);this.lastNeed=3-r;this.lastTotal=3;if(r===1){this.lastChar[0]=e[e.length-1];}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];}return e.toString("base64",t,e.length-r);}function m(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t;}function g(e){return e.toString(this.encoding);}function _(e){return e&&e.length?this.write(e):"";}},{"safe-buffer":177}],21:[function(e,t,r){(function(r){t.exports=m;var n=e("safe-buffer").Buffer;var i=e("debug")("bittorrent-tracker:client");var o=e("events").EventEmitter;var s=e("xtend");var a=e("inherits");var u=e("once");var l=e("run-parallel");var c=e("simple-peer");var f=e("uniq");var d=e("url");var p=e("./lib/common");var h=e("./lib/client/http-tracker");var v=e("./lib/client/udp-tracker");var y=e("./lib/client/websocket-tracker");a(m,o);function m(e){var t=this;if(!(t instanceof m))return new m(e);o.call(t);if(!e)e={};if(!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");if(!r.browser&&!e.port)throw new Error("Option `port` is required");t.peerId=typeof e.peerId==="string"?e.peerId:e.peerId.toString("hex");t._peerIdBuffer=n.from(t.peerId,"hex");t._peerIdBinary=t._peerIdBuffer.toString("binary");t.infoHash=typeof e.infoHash==="string"?e.infoHash:e.infoHash.toString("hex");t._infoHashBuffer=n.from(t.infoHash,"hex");t._infoHashBinary=t._infoHashBuffer.toString("binary");i("new client %s",t.infoHash);t.destroyed=false;t._port=e.port;t._getAnnounceOpts=e.getAnnounceOpts;t._rtcConfig=e.rtcConfig;t._userAgent=e.userAgent;t._wrtc=typeof e.wrtc==="function"?e.wrtc():e.wrtc;var s=typeof e.announce==="string"?[e.announce]:e.announce==null?[]:e.announce;s=s.map(function(e){e=e.toString();if(e[e.length-1]==="/"){e=e.substring(0,e.length-1);}return e;});s=f(s);var a=t._wrtc!==false&&(!!t._wrtc||c.WEBRTC_SUPPORT);t._trackers=s.map(function(e){var r=d.parse(e).protocol;if((r==="http:"||r==="https:")&&typeof h==="function"){return new h(t,e);}else if(r==="udp:"&&typeof v==="function"){return new v(t,e);}else if((r==="ws:"||r==="wss:")&&a){if(r==="ws:"&&typeof window!=="undefined"&&window.location.protocol==="https:"){u(new Error("Unsupported tracker protocol: "+e));return null;}return new y(t,e);}else{u(new Error("Unsupported tracker protocol: "+e));return null;}}).filter(Boolean);function u(e){r.nextTick(function(){t.emit("warning",e);});}}m.scrape=function(e,t){t=u(t);if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");var r=s(e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:n.from("01234567890123456789"),port:6881});var i=new m(r);i.once("error",t);i.once("warning",t);var o=Array.isArray(e.infoHash)?e.infoHash.length:1;var a={};i.on("scrape",function(e){o-=1;a[e.infoHash]=e;if(o===0){i.destroy();var r=Object.keys(a);if(r.length===1){t(null,a[r[0]]);}else{t(null,a);}}});e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map(function(e){return n.from(e,"hex");}):n.from(e.infoHash,"hex");i.scrape({infoHash:e.infoHash});return i;};m.prototype.start=function(e){var t=this;i("send `start`");e=t._defaultAnnounceOpts(e);e.event="started";t._announce(e);t._trackers.forEach(function(e){e.setInterval();});};m.prototype.stop=function(e){var t=this;i("send `stop`");e=t._defaultAnnounceOpts(e);e.event="stopped";t._announce(e);};m.prototype.complete=function(e){var t=this;i("send `complete`");if(!e)e={};e=t._defaultAnnounceOpts(e);e.event="completed";t._announce(e);};m.prototype.update=function(e){var t=this;i("send `update`");e=t._defaultAnnounceOpts(e);if(e.event)delete e.event;t._announce(e);};m.prototype._announce=function(e){var t=this;t._trackers.forEach(function(t){t.announce(e);});};m.prototype.scrape=function(e){var t=this;i("send `scrape`");if(!e)e={};t._trackers.forEach(function(t){t.scrape(e);});};m.prototype.setInterval=function(e){var t=this;i("setInterval %d",e);t._trackers.forEach(function(t){t.setInterval(e);});};m.prototype.destroy=function(e){var t=this;if(t.destroyed)return;t.destroyed=true;i("destroy");var r=t._trackers.map(function(e){return function(t){e.destroy(t);};});l(r,e);t._trackers=[];t._getAnnounceOpts=null;};m.prototype._defaultAnnounceOpts=function(e){var t=this;if(!e)e={};if(e.numwant==null)e.numwant=p.DEFAULT_ANNOUNCE_PEERS;if(e.uploaded==null)e.uploaded=0;if(e.downloaded==null)e.downloaded=0;if(t._getAnnounceOpts)e=s(e,t._getAnnounceOpts());return e;};}).call(this,e("_process"));},{"./lib/client/http-tracker":38,"./lib/client/udp-tracker":38,"./lib/client/websocket-tracker":23,"./lib/common":24,_process:40,debug:69,events:73,inherits:94,once:146,"run-parallel":175,"safe-buffer":177,"simple-peer":181,uniq:234,url:236,xtend:372}],22:[function(e,t,r){t.exports=o;var n=e("events").EventEmitter;var i=e("inherits");i(o,n);function o(e,t){var r=this;n.call(r);r.client=e;r.announceUrl=t;r.interval=null;r.destroyed=false;}o.prototype.setInterval=function(e){var t=this;if(e==null)e=t.DEFAULT_ANNOUNCE_INTERVAL;clearInterval(t.interval);if(e){t.interval=setInterval(function(){t.announce(t.client._defaultAnnounceOpts());},e);if(t.interval.unref)t.interval.unref();}};},{events:73,inherits:94}],23:[function(e,t,r){t.exports=y;var n=e("debug")("bittorrent-tracker:websocket-tracker");var i=e("xtend");var o=e("inherits");var s=e("simple-peer");var a=e("randombytes");var u=e("simple-websocket");var l=e("../common");var c=e("./tracker");var f={};var d=15*1e3;var p=30*60*1e3;var h=30*1e3;var v=50*1e3;o(y,c);function y(e,t,r){var i=this;c.call(i,e,t);n("new websocket tracker %s",t);i.peers={};i.socket=null;i.reconnecting=false;i.retries=0;i.reconnectTimer=null;i.expectingResponse=false;i._openSocket();}y.prototype.DEFAULT_ANNOUNCE_INTERVAL=30*1e3;y.prototype.announce=function(e){var t=this;if(t.destroyed||t.reconnecting)return;if(!t.socket.connected){t.socket.once("connect",function(){t.announce(e);});return;}var r=i(e,{action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary});if(t._trackerId)r.trackerid=t._trackerId;if(e.event==="stopped"||e.event==="completed"){t._send(r);}else{var n=Math.min(e.numwant,10);t._generateOffers(n,function(e){r.numwant=n;r.offers=e;t._send(r);});}};y.prototype.scrape=function(e){var t=this;if(t.destroyed||t.reconnecting)return;if(!t.socket.connected){t.socket.once("connect",function(){t.scrape(e);});return;}var r=Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(function(e){return e.toString("binary");}):e.infoHash&&e.infoHash.toString("binary")||t.client._infoHashBinary;var n={action:"scrape",info_hash:r};t._send(n);};y.prototype.destroy=function(e){var t=this;if(!e)e=m;if(t.destroyed)return e(null);t.destroyed=true;clearInterval(t.interval);clearTimeout(t.reconnectTimer);for(var r in t.peers){var n=t.peers[r];clearTimeout(n.trackerTimeout);n.destroy();}t.peers=null;if(t.socket){t.socket.removeListener("connect",t._onSocketConnectBound);t.socket.removeListener("data",t._onSocketDataBound);t.socket.removeListener("close",t._onSocketCloseBound);t.socket.removeListener("error",t._onSocketErrorBound);t.socket=null;}t._onSocketConnectBound=null;t._onSocketErrorBound=null;t._onSocketDataBound=null;t._onSocketCloseBound=null;if(f[t.announceUrl]){f[t.announceUrl].consumers-=1;}if(f[t.announceUrl].consumers>0)return e();var i=f[t.announceUrl];delete f[t.announceUrl];i.on("error",m);i.once("close",e);if(!t.expectingResponse)return s();var o=setTimeout(s,l.DESTROY_TIMEOUT);i.once("data",s);function s(){if(o){clearTimeout(o);o=null;}i.removeListener("data",s);i.destroy();i=null;}};y.prototype._openSocket=function(){var e=this;e.destroyed=false;if(!e.peers)e.peers={};e._onSocketConnectBound=function(){e._onSocketConnect();};e._onSocketErrorBound=function(t){e._onSocketError(t);};e._onSocketDataBound=function(t){e._onSocketData(t);};e._onSocketCloseBound=function(){e._onSocketClose();};e.socket=f[e.announceUrl];if(e.socket){f[e.announceUrl].consumers+=1;}else{e.socket=f[e.announceUrl]=new u(e.announceUrl);e.socket.consumers=1;e.socket.once("connect",e._onSocketConnectBound);}e.socket.on("data",e._onSocketDataBound);e.socket.once("close",e._onSocketCloseBound);e.socket.once("error",e._onSocketErrorBound);};y.prototype._onSocketConnect=function(){var e=this;if(e.destroyed)return;if(e.reconnecting){e.reconnecting=false;e.retries=0;e.announce(e.client._defaultAnnounceOpts());}};y.prototype._onSocketData=function(e){var t=this;if(t.destroyed)return;t.expectingResponse=false;try{e=JSON.parse(e);}catch(e){t.client.emit("warning",new Error("Invalid tracker response"));return;}if(e.action==="announce"){t._onAnnounceResponse(e);}else if(e.action==="scrape"){t._onScrapeResponse(e);}else{t._onSocketError(new Error("invalid action in WS response: "+e.action));}};y.prototype._onAnnounceResponse=function(e){var t=this;if(e.info_hash!==t.client._infoHashBinary){n("ignoring websocket data from %s for %s (looking for %s: reused socket)",t.announceUrl,l.binaryToHex(e.info_hash),t.client.infoHash);return;}if(e.peer_id&&e.peer_id===t.client._peerIdBinary){return;}n("received %s from %s for %s",JSON.stringify(e),t.announceUrl,t.client.infoHash);var r=e["failure reason"];if(r)return t.client.emit("warning",new Error(r));var i=e["warning message"];if(i)t.client.emit("warning",new Error(i));var o=e.interval||e["min interval"];if(o)t.setInterval(o*1e3);var s=e["tracker id"];if(s){t._trackerId=s;}if(e.complete!=null){var a=Object.assign({},e,{announce:t.announceUrl,infoHash:l.binaryToHex(e.info_hash)});t.client.emit("update",a);}var u;if(e.offer&&e.peer_id){n("creating peer (from remote offer)");u=t._createPeer();u.id=l.binaryToHex(e.peer_id);u.once("signal",function(r){var n={action:"announce",info_hash:t.client._infoHashBinary,peer_id:t.client._peerIdBinary,to_peer_id:e.peer_id,answer:r,offer_id:e.offer_id};if(t._trackerId)n.trackerid=t._trackerId;t._send(n);});u.signal(e.offer);t.client.emit("peer",u);}if(e.answer&&e.peer_id){var c=l.binaryToHex(e.offer_id);u=t.peers[c];if(u){u.id=l.binaryToHex(e.peer_id);u.signal(e.answer);t.client.emit("peer",u);clearTimeout(u.trackerTimeout);u.trackerTimeout=null;delete t.peers[c];}else{n("got unexpected answer: "+JSON.stringify(e.answer));}}};y.prototype._onScrapeResponse=function(e){var t=this;e=e.files||{};var r=Object.keys(e);if(r.length===0){t.client.emit("warning",new Error("invalid scrape response"));return;}r.forEach(function(r){var n=Object.assign(e[r],{announce:t.announceUrl,infoHash:l.binaryToHex(r)});t.client.emit("scrape",n);});};y.prototype._onSocketClose=function(){var e=this;if(e.destroyed)return;e.destroy();e._startReconnectTimer();};y.prototype._onSocketError=function(e){var t=this;if(t.destroyed)return;t.destroy();t.client.emit("warning",e);t._startReconnectTimer();};y.prototype._startReconnectTimer=function(){var e=this;var t=Math.floor(Math.random()*h)+Math.min(Math.pow(2,e.retries)*d,p);e.reconnecting=true;clearTimeout(e.reconnectTimer);e.reconnectTimer=setTimeout(function(){e.retries++;e._openSocket();},t);if(e.reconnectTimer.unref)e.reconnectTimer.unref();n("reconnecting socket in %s ms",t);};y.prototype._send=function(e){var t=this;if(t.destroyed)return;t.expectingResponse=true;var r=JSON.stringify(e);n("send %s",r);t.socket.send(r);};y.prototype._generateOffers=function(e,t){var r=this;var i=[];n("generating %s offers",e);for(var o=0;o<e;++o){s();}u();function s(){var e=a(20).toString("hex");n("creating peer (from _generateOffers)");var t=r.peers[e]=r._createPeer({initiator:true});t.once("signal",function(t){i.push({offer:t,offer_id:l.hexToBinary(e)});u();});t.trackerTimeout=setTimeout(function(){n("tracker timeout: destroying peer");t.trackerTimeout=null;delete r.peers[e];t.destroy();},v);if(t.trackerTimeout.unref)t.trackerTimeout.unref();}function u(){if(i.length===e){n("generated %s offers",e);t(i);}}};y.prototype._createPeer=function(e){var t=this;e=Object.assign({trickle:false,config:t.client._rtcConfig,wrtc:t.client._wrtc},e);var r=new s(e);r.once("error",n);r.once("connect",i);return r;function n(e){t.client.emit("warning",new Error("Connection error: "+e.message));r.destroy();}function i(){r.removeListener("error",n);r.removeListener("connect",i);}};function m(){}},{"../common":24,"./tracker":22,debug:69,inherits:94,randombytes:159,"simple-peer":181,"simple-websocket":194,xtend:372}],24:[function(e,t,r){var n=e("safe-buffer").Buffer;var i=e("xtend/mutable");r.DEFAULT_ANNOUNCE_PEERS=50;r.MAX_ANNOUNCE_PEERS=82;r.binaryToHex=function(e){if(typeof e!=="string"){e=String(e);}return n.from(e,"binary").toString("hex");};r.hexToBinary=function(e){if(typeof e!=="string"){e=String(e);}return n.from(e,"hex").toString("binary");};var o=e("./common-node");i(r,o);},{"./common-node":38,"safe-buffer":177,"xtend/mutable":373}],25:[function(e,t,r){(function(e){t.exports=function t(r,n){if(typeof Blob==="undefined"||!(r instanceof Blob)){throw new Error("first argument must be a Blob");}if(typeof n!=="function"){throw new Error("second argument must be a function");}var i=new FileReader();function o(t){i.removeEventListener("loadend",o,false);if(t.error)n(t.error);else n(null,new e(i.result));}i.addEventListener("loadend",o,false);i.readAsArrayBuffer(r);};}).call(this,e("buffer").Buffer);},{buffer:41}],26:[function(e,t,r){(function(r){var n=e("inherits");var i=e("readable-stream").Transform;var o=e("defined");t.exports=s;n(s,i);function s(e,t){if(!(this instanceof s))return new s(e,t);i.call(this);if(!t)t={};if((typeof e==="undefined"?"undefined":_typeof(e))==="object"){t=e;e=t.size;}this.size=e||512;if(t.nopad)this._zeroPadding=false;else this._zeroPadding=o(t.zeroPadding,true);this._buffered=[];this._bufferedBytes=0;}s.prototype._transform=function(e,t,n){this._bufferedBytes+=e.length;this._buffered.push(e);while(this._bufferedBytes>=this.size){var i=r.concat(this._buffered);this._bufferedBytes-=this.size;this.push(i.slice(0,this.size));this._buffered=[i.slice(this.size,i.length)];}n();};s.prototype._flush=function(){if(this._bufferedBytes&&this._zeroPadding){var e=new r(this.size-this._bufferedBytes);e.fill(0);this._buffered.push(e);this.push(r.concat(this._buffered));this._buffered=null;}else if(this._bufferedBytes){this.push(r.concat(this._buffered));this._buffered=null;}this.push(null);};}).call(this,e("buffer").Buffer);},{buffer:41,defined:71,inherits:94,"readable-stream":36}],27:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],28:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":30,"./_stream_writable":32,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],29:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":31,"core-util-is":56,dup:12,inherits:94}],30:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":28,"./internal/streams/BufferList":33,"./internal/streams/destroy":34,"./internal/streams/stream":35,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:27,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":37,util:38}],31:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":28,"core-util-is":56,dup:14,inherits:94}],32:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":28,"./internal/streams/destroy":34,"./internal/streams/stream":35,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],33:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],34:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],35:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],36:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":28,"./lib/_stream_passthrough.js":29,"./lib/_stream_readable.js":30,"./lib/_stream_transform.js":31,"./lib/_stream_writable.js":32,dup:19}],37:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],38:[function(e,t,r){},{}],39:[function(e,t,r){arguments[4][38][0].apply(r,arguments);},{dup:38}],40:[function(e,t,r){var n=t.exports={};var i;var o;function s(){throw new Error("setTimeout has not been defined");}function a(){throw new Error("clearTimeout has not been defined");}(function(){try{if(typeof setTimeout==="function"){i=setTimeout;}else{i=s;}}catch(e){i=s;}try{if(typeof clearTimeout==="function"){o=clearTimeout;}else{o=a;}}catch(e){o=a;}})();function u(e){if(i===setTimeout){return setTimeout(e,0);}if((i===s||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0);}try{return i(e,0);}catch(t){try{return i.call(null,e,0);}catch(t){return i.call(this,e,0);}}}function l(e){if(o===clearTimeout){return clearTimeout(e);}if((o===a||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(e);}try{return o(e);}catch(t){try{return o.call(null,e);}catch(t){return o.call(this,e);}}}var c=[];var f=false;var d;var p=-1;function h(){if(!f||!d){return;}f=false;if(d.length){c=d.concat(c);}else{p=-1;}if(c.length){v();}}function v(){if(f){return;}var e=u(h);f=true;var t=c.length;while(t){d=c;c=[];while(++p<t){if(d){d[p].run();}}p=-1;t=c.length;}d=null;f=false;l(e);}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r];}}c.push(new y(e,t));if(c.length===1&&!f){u(v);}};function y(e,t){this.fun=e;this.array=t;}y.prototype.run=function(){this.fun.apply(null,this.array);};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function m(){}n.on=m;n.addListener=m;n.once=m;n.off=m;n.removeListener=m;n.removeAllListeners=m;n.emit=m;n.prependListener=m;n.prependOnceListener=m;n.listeners=function(e){return[];};n.binding=function(e){throw new Error("process.binding is not supported");};n.cwd=function(){return"/";};n.chdir=function(e){throw new Error("process.chdir is not supported");};n.umask=function(){return 0;};},{}],41:[function(e,t,r){"use strict";var n=e("base64-js");var i=e("ieee754");r.Buffer=u;r.SlowBuffer=g;r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o;u.TYPED_ARRAY_SUPPORT=s();if(!u.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.");}function s(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42;}};return e.foo()===42;}catch(e){return false;}}function a(e){if(e>o){throw new RangeError("Invalid typed array length");}var t=new Uint8Array(e);t.__proto__=u.prototype;return t;}function u(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string");}return d(e);}return l(e,t,r);}if(typeof Symbol!=="undefined"&&Symbol.species&&u[Symbol.species]===u){Object.defineProperty(u,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false});}u.poolSize=8192;function l(e,t,r){if(typeof e==="number"){throw new TypeError('"value" argument must not be a number');}if(J(e)){return v(e,t,r);}if(typeof e==="string"){return p(e,t);}return y(e);}u.from=function(e,t,r){return l(e,t,r);};u.prototype.__proto__=Uint8Array.prototype;u.__proto__=Uint8Array;function c(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number');}else if(e<0){throw new RangeError('"size" argument must not be negative');}}function f(e,t,r){c(e);if(e<=0){return a(e);}if(t!==undefined){return typeof r==="string"?a(e).fill(t,r):a(e).fill(t);}return a(e);}u.alloc=function(e,t,r){return f(e,t,r);};function d(e){c(e);return a(e<0?0:m(e)|0);}u.allocUnsafe=function(e){return d(e);};u.allocUnsafeSlow=function(e){return d(e);};function p(e,t){if(typeof t!=="string"||t===""){t="utf8";}if(!u.isEncoding(t)){throw new TypeError('"encoding" must be a valid string encoding');}var r=_(e,t)|0;var n=a(r);var i=n.write(e,t);if(i!==r){n=n.slice(0,i);}return n;}function h(e){var t=e.length<0?0:m(e.length)|0;var r=a(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255;}return r;}function v(e,t,r){if(t<0||e.byteLength<t){throw new RangeError("'offset' is out of bounds");}if(e.byteLength<t+(r||0)){throw new RangeError("'length' is out of bounds");}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e);}else if(r===undefined){n=new Uint8Array(e,t);}else{n=new Uint8Array(e,t,r);}n.__proto__=u.prototype;return n;}function y(e){if(u.isBuffer(e)){var t=m(e.length)|0;var r=a(t);if(r.length===0){return r;}e.copy(r,0,0,t);return r;}if(e){if(Q(e)||"length"in e){if(typeof e.length!=="number"||Z(e.length)){return a(0);}return h(e);}if(e.type==="Buffer"&&Array.isArray(e.data)){return h(e.data);}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function m(e){if(e>=o){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+o.toString(16)+" bytes");}return e|0;}function g(e){if(+e!=e){e=0;}return u.alloc(+e);}u.isBuffer=function e(t){return t!=null&&t._isBuffer===true;};u.compare=function e(t,r){if(!u.isBuffer(t)||!u.isBuffer(r)){throw new TypeError("Arguments must be Buffers");}if(t===r)return 0;var n=t.length;var i=r.length;for(var o=0,s=Math.min(n,i);o<s;++o){if(t[o]!==r[o]){n=t[o];i=r[o];break;}}if(n<i)return-1;if(i<n)return 1;return 0;};u.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false;}};u.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers');}if(t.length===0){return u.alloc(0);}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length;}}var i=u.allocUnsafe(r);var o=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s)){throw new TypeError('"list" argument must be an Array of Buffers');}s.copy(i,o);o+=s.length;}return i;};function _(e,t){if(u.isBuffer(e)){return e.length;}if(Q(e)||J(e)){return e.byteLength;}if(typeof e!=="string"){e=""+e;}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return K(e).length;default:if(n)return $(e).length;t=(""+t).toLowerCase();n=true;}}}u.byteLength=_;function b(e,t,r){var n=false;if(t===undefined||t<0){t=0;}if(t>this.length){return"";}if(r===undefined||r>this.length){r=this.length;}if(r<=0){return"";}r>>>=0;t>>>=0;if(r<=t){return"";}if(!e)e="utf8";while(true){switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true;}}}u.prototype._isBuffer=true;function w(e,t,r){var n=e[t];e[t]=e[r];e[r]=n;}u.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits");}for(var r=0;r<t;r+=2){w(this,r,r+1);}return this;};u.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits");}for(var r=0;r<t;r+=4){w(this,r,r+3);w(this,r+1,r+2);}return this;};u.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits");}for(var r=0;r<t;r+=8){w(this,r,r+7);w(this,r+1,r+6);w(this,r+2,r+5);w(this,r+3,r+4);}return this;};u.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return A(this,0,t);return b.apply(this,arguments);};u.prototype.equals=function e(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return u.compare(this,t)===0;};u.prototype.inspect=function e(){var t="";var n=r.INSPECT_MAX_BYTES;if(this.length>0){t=this.toString("hex",0,n).match(/.{2}/g).join(" ");if(this.length>n)t+=" ... ";}return"<Buffer "+t+">";};u.prototype.compare=function e(t,r,n,i,o){if(!u.isBuffer(t)){throw new TypeError("Argument must be a Buffer");}if(r===undefined){r=0;}if(n===undefined){n=t?t.length:0;}if(i===undefined){i=0;}if(o===undefined){o=this.length;}if(r<0||n>t.length||i<0||o>this.length){throw new RangeError("out of range index");}if(i>=o&&r>=n){return 0;}if(i>=o){return-1;}if(r>=n){return 1;}r>>>=0;n>>>=0;i>>>=0;o>>>=0;if(this===t)return 0;var s=o-i;var a=n-r;var l=Math.min(s,a);var c=this.slice(i,o);var f=t.slice(r,n);for(var d=0;d<l;++d){if(c[d]!==f[d]){s=c[d];a=f[d];break;}}if(s<a)return-1;if(a<s)return 1;return 0;};function T(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0;}else if(r>2147483647){r=2147483647;}else if(r<-2147483648){r=-2147483648;}r=+r;if(Z(r)){r=i?0:e.length-1;}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1;}else if(r<0){if(i)r=0;else return-1;}if(typeof t==="string"){t=u.from(t,n);}if(u.isBuffer(t)){if(t.length===0){return-1;}return j(e,t,r,n,i);}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r);}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r);}}return j(e,[t],r,n,i);}throw new TypeError("val must be string, number or Buffer");}function j(e,t,r,n,i){var o=1;var s=e.length;var a=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1;}o=2;s/=2;a/=2;r/=2;}}function u(e,t){if(o===1){return e[t];}else{return e.readUInt16BE(t*o);}}var l;if(i){var c=-1;for(l=r;l<s;l++){if(u(e,l)===u(t,c===-1?0:l-c)){if(c===-1)c=l;if(l-c+1===a)return c*o;}else{if(c!==-1)l-=l-c;c=-1;}}}else{if(r+a>s)r=s-a;for(l=r;l>=0;l--){var f=true;for(var d=0;d<a;d++){if(u(e,l+d)!==u(t,d)){f=false;break;}}if(f)return l;}}return-1;}u.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1;};u.prototype.indexOf=function e(t,r,n){return T(this,t,r,n,true);};u.prototype.lastIndexOf=function e(t,r,n){return T(this,t,r,n,false);};function k(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i;}else{n=Number(n);if(n>i){n=i;}}var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");if(n>o/2){n=o/2;}for(var s=0;s<n;++s){var a=parseInt(t.substr(s*2,2),16);if(Z(a))return s;e[r+s]=a;}return s;}function E(e,t,r,n){return Y($(t,e.length-r),e,r,n);}function C(e,t,r,n){return Y(X(t),e,r,n);}function x(e,t,r,n){return C(e,t,r,n);}function S(e,t,r,n){return Y(K(t),e,r,n);}function O(e,t,r,n){return Y(G(t,e.length-r),e,r,n);}u.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0;}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0;}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8";}else{i=n;n=undefined;}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");}var o=this.length-r;if(n===undefined||n>o)n=o;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds");}if(!i)i="utf8";var s=false;for(;;){switch(i){case"hex":return k(this,t,r,n);case"utf8":case"utf-8":return E(this,t,r,n);case"ascii":return C(this,t,r,n);case"latin1":case"binary":return x(this,t,r,n);case"base64":return S(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();s=true;}}};u.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};};function P(e,t,r){if(t===0&&r===e.length){return n.fromByteArray(e);}else{return n.fromByteArray(e.slice(t,r));}}function A(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var o=e[i];var s=null;var a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,l,c,f;switch(a){case 1:if(o<128){s=o;}break;case 2:u=e[i+1];if((u&192)===128){f=(o&31)<<6|u&63;if(f>127){s=f;}}break;case 3:u=e[i+1];l=e[i+2];if((u&192)===128&&(l&192)===128){f=(o&15)<<12|(u&63)<<6|l&63;if(f>2047&&(f<55296||f>57343)){s=f;}}break;case 4:u=e[i+1];l=e[i+2];c=e[i+3];if((u&192)===128&&(l&192)===128&&(c&192)===128){f=(o&15)<<18|(u&63)<<12|(l&63)<<6|c&63;if(f>65535&&f<1114112){s=f;}}}}if(s===null){s=65533;a=1;}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023;}n.push(s);i+=a;}return I(n);}var M=4096;function I(e){var t=e.length;if(t<=M){return String.fromCharCode.apply(String,e);}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=M));}return r;}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127);}return n;}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]);}return n;}function B(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var o=t;o<r;++o){i+=z(e[o]);}return i;}function D(e,t,r){var n=e.slice(t,r);var i="";for(var o=0;o<n.length;o+=2){i+=String.fromCharCode(n[o]+n[o+1]*256);}return i;}u.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0;}else if(t>n){t=n;}if(r<0){r+=n;if(r<0)r=0;}else if(r>n){r=n;}if(r<t)r=t;var i=this.subarray(t,r);i.__proto__=u.prototype;return i;};function N(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length");}u.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)N(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[t+s]*o;}return i;};u.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){N(t,r,this.length);}var i=this[t+--r];var o=1;while(r>0&&(o*=256)){i+=this[t+--r]*o;}return i;};u.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)N(t,1,this.length);return this[t];};u.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);return this[t]|this[t+1]<<8;};u.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);return this[t]<<8|this[t+1];};u.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216;};u.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3]);};u.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)N(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[t+s]*o;}o*=128;if(i>=o)i-=Math.pow(2,8*r);return i;};u.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)N(t,r,this.length);var i=r;var o=1;var s=this[t+--i];while(i>0&&(o*=256)){s+=this[t+--i]*o;}o*=128;if(s>=o)s-=Math.pow(2,8*r);return s;};u.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)N(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1;};u.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n;};u.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n;};u.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24;};u.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3];};u.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return i.read(this,t,true,23,4);};u.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return i.read(this,t,false,23,4);};u.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)N(t,8,this.length);return i.read(this,t,true,52,8);};u.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)N(t,8,this.length);return i.read(this,t,false,52,8);};function F(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range");}u.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;F(this,t,r,n,o,0);}var s=1;var a=0;this[r]=t&255;while(++a<n&&(s*=256)){this[r+a]=t/s&255;}return r+n;};u.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;F(this,t,r,n,o,0);}var s=n-1;var a=1;this[r+s]=t&255;while(--s>=0&&(a*=256)){this[r+s]=t/a&255;}return r+n;};u.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,1,255,0);this[r]=t&255;return r+1;};u.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2;};u.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2;};u.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4;};u.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4;};u.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);F(this,t,r,n,o-1,-o);}var s=0;var a=1;var u=0;this[r]=t&255;while(++s<n&&(a*=256)){if(t<0&&u===0&&this[r+s-1]!==0){u=1;}this[r+s]=(t/a>>0)-u&255;}return r+n;};u.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);F(this,t,r,n,o-1,-o);}var s=n-1;var a=1;var u=0;this[r+s]=t&255;while(--s>=0&&(a*=256)){if(t<0&&u===0&&this[r+s+1]!==0){u=1;}this[r+s]=(t/a>>0)-u&255;}return r+n;};u.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1;};u.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2;};u.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2;};u.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4;};u.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)F(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4;};function U(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range");}function H(e,t,r,n,o){t=+t;r=r>>>0;if(!o){U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38);}i.write(e,t,r,n,23,4);return r+4;}u.prototype.writeFloatLE=function e(t,r,n){return H(this,t,r,true,n);};u.prototype.writeFloatBE=function e(t,r,n){return H(this,t,r,false,n);};function V(e,t,r,n,o){t=+t;r=r>>>0;if(!o){U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308);}i.write(e,t,r,n,52,8);return r+8;}u.prototype.writeDoubleLE=function e(t,r,n){return V(this,t,r,true,n);};u.prototype.writeDoubleBE=function e(t,r,n){return V(this,t,r,false,n);};u.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds");}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n;}var o=i-n;var s;if(this===t&&n<r&&r<i){for(s=o-1;s>=0;--s){t[s+r]=this[s+n];}}else if(o<1e3){for(s=0;s<o;++s){t[s+r]=this[s+n];}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);}return o;};u.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length;}else if(typeof n==="string"){i=n;n=this.length;}if(t.length===1){var o=t.charCodeAt(0);if(o<256){t=o;}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string");}if(typeof i==="string"&&!u.isEncoding(i)){throw new TypeError("Unknown encoding: "+i);}}else if(typeof t==="number"){t=t&255;}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index");}if(n<=r){return this;}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var s;if(typeof t==="number"){for(s=r;s<n;++s){this[s]=t;}}else{var a=u.isBuffer(t)?t:new u(t,i);var l=a.length;for(s=0;s<n-r;++s){this[s+r]=a[s%l];}}return this;};var W=/[^+/0-9A-Za-z-_]/g;function q(e){e=e.trim().replace(W,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"=";}return e;}function z(e){if(e<16)return"0"+e.toString(16);return e.toString(16);}function $(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var o=[];for(var s=0;s<n;++s){r=e.charCodeAt(s);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)o.push(239,191,189);continue;}else if(s+1===n){if((t-=3)>-1)o.push(239,191,189);continue;}i=r;continue;}if(r<56320){if((t-=3)>-1)o.push(239,191,189);i=r;continue;}r=(i-55296<<10|r-56320)+65536;}else if(i){if((t-=3)>-1)o.push(239,191,189);}i=null;if(r<128){if((t-=1)<0)break;o.push(r);}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128);}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128);}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128);}else{throw new Error("Invalid code point");}}return o;}function X(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255);}return t;}function G(e,t){var r,n,i;var o=[];for(var s=0;s<e.length;++s){if((t-=2)<0)break;r=e.charCodeAt(s);n=r>>8;i=r%256;o.push(i);o.push(n);}return o;}function K(e){return n.toByteArray(q(e));}function Y(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i];}return i;}function J(e){return e instanceof ArrayBuffer||e!=null&&e.constructor!=null&&e.constructor.name==="ArrayBuffer"&&typeof e.byteLength==="number";}function Q(e){return typeof ArrayBuffer.isView==="function"&&ArrayBuffer.isView(e);}function Z(e){return e!==e;}},{"base64-js":3,ieee754:92}],42:[function(e,t,r){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};},{}],43:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],44:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":46,"./_stream_writable":48,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],45:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":47,"core-util-is":56,dup:12,inherits:94}],46:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":44,"./internal/streams/BufferList":49,"./internal/streams/destroy":50,"./internal/streams/stream":51,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:43,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":53,util:38}],47:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":44,"core-util-is":56,dup:14,inherits:94}],48:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":44,"./internal/streams/destroy":50,"./internal/streams/stream":51,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],49:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],50:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],51:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],52:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":44,"./lib/_stream_passthrough.js":45,"./lib/_stream_readable.js":46,"./lib/_stream_transform.js":47,"./lib/_stream_writable.js":48,dup:19}],53:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],54:[function(e,t,r){t.exports=s;var n=e("block-stream2");var i=e("inherits");var o=e("readable-stream");i(s,o.Writable);function s(e,t,r){var i=this;if(!(i instanceof s)){return new s(e,t,r);}o.Writable.call(i,r);if(!r)r={};if(!e||!e.put||!e.get){throw new Error("First argument must be an abstract-chunk-store compliant store");}t=Number(t);if(!t)throw new Error("Second argument must be a chunk length");i._blockstream=new n(t,{zeroPadding:false});i._blockstream.on("data",u).on("error",function(e){i.destroy(e);});var a=0;function u(t){if(i.destroyed)return;e.put(a,t);a+=1;}i.on("finish",function(){this._blockstream.end();});}s.prototype._write=function(e,t,r){this._blockstream.write(e,t,r);};s.prototype.destroy=function(e){if(this.destroyed)return;this.destroyed=true;if(e)this.emit("error",e);this.emit("close");};},{"block-stream2":26,inherits:94,"readable-stream":52}],55:[function(e,t,r){var n=Math.abs;t.exports=i;function i(e,t,r){var i,o,s,a=Infinity;var u=0,l=t.length-1;while(u<=l){i=u+(l-u>>1);s=t[i]-e;s<0?u=i+1:s>0?l=i-1:void 0;s=n(s);if(s<a)a=s,o=i;if(t[i]===e)break;}return r?o:t[o];}},{}],56:[function(e,t,r){(function(e){function t(e){if(Array.isArray){return Array.isArray(e);}return y(e)==="[object Array]";}r.isArray=t;function n(e){return typeof e==="boolean";}r.isBoolean=n;function i(e){return e===null;}r.isNull=i;function o(e){return e==null;}r.isNullOrUndefined=o;function s(e){return typeof e==="number";}r.isNumber=s;function a(e){return typeof e==="string";}r.isString=a;function u(e){return(typeof e==="undefined"?"undefined":_typeof(e))==="symbol";}r.isSymbol=u;function l(e){return e===void 0;}r.isUndefined=l;function c(e){return y(e)==="[object RegExp]";}r.isRegExp=c;function f(e){return(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e!==null;}r.isObject=f;function d(e){return y(e)==="[object Date]";}r.isDate=d;function p(e){return y(e)==="[object Error]"||e instanceof Error;}r.isError=p;function h(e){return typeof e==="function";}r.isFunction=h;function v(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||(typeof e==="undefined"?"undefined":_typeof(e))==="symbol"||typeof e==="undefined";}r.isPrimitive=v;r.isBuffer=e.isBuffer;function y(e){return Object.prototype.toString.call(e);}}).call(this,{isBuffer:e("../../is-buffer/index.js")});},{"../../is-buffer/index.js":96}],57:[function(e,t,r){(function(r,n,i){t.exports=b;t.exports.parseInput=w;t.exports.announceList=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.fastcast.nz"]];var o=e("bencode");var s=e("block-stream2");var a=e("piece-length");var u=e("path");var l=e("xtend");var c=e("filestream/read");var f=e("flatten");var d=e("fs");var p=e("is-file");var h=e("junk");var v=e("multistream");var y=e("once");var m=e("run-parallel");var g=e("simple-sha1");var _=e("readable-stream");function b(e,t,r){if(typeof t==="function")return b(e,null,t);t=t?l(t):{};T(e,t,function(e,n,i){if(e)return r(e);t.singleFileTorrent=i;S(n,t,r);});}function w(e,t,r){if(typeof t==="function")return w(e,null,t);t=t?l(t):{};T(e,t,r);}function T(e,t,n){if(Array.isArray(e)&&e.length===0)throw new Error("invalid input type");if(A(e))e=Array.prototype.slice.call(e);if(!Array.isArray(e))e=[e];e=e.map(function(e){if(P(e)&&typeof e.path==="string"&&typeof d.stat==="function")return e.path;return e;});if(e.length===1&&typeof e[0]!=="string"&&!e[0].name)e[0].name=t.name;var o=null;e.forEach(function(t,r){if(typeof t==="string"){return;}var n=t.fullPath||t.name;if(!n){n="Unknown File "+(r+1);t.unknownName=true;}t.path=n.split("/");if(!t.path[0]){t.path.shift();}if(t.path.length<2){o=null;}else if(r===0&&e.length>1){o=t.path[0];}else if(t.path[0]!==o){o=null;}});e=e.filter(function(e){if(typeof e==="string"){return true;}var t=e.path[e.path.length-1];return C(t)&&h.not(t);});if(o){e.forEach(function(e){var t=(i.isBuffer(e)||M(e))&&!e.path;if(typeof e==="string"||t)return;e.path.shift();});}if(!t.name&&o){t.name=o;}if(!t.name){e.some(function(e){if(typeof e==="string"){t.name=u.basename(e);return true;}else if(!e.unknownName){t.name=e.path[e.path.length-1];return true;}});}if(!t.name){t.name="Unnamed Torrent "+Date.now();}var s=e.reduce(function(e,t){return e+Number(typeof t==="string");},0);var a=e.length===1;if(e.length===1&&typeof e[0]==="string"){if(typeof d.stat!=="function"){throw new Error("filesystem paths do not work in the browser");}p(e[0],function(e,t){if(e)return n(e);a=t;l();});}else{r.nextTick(function(){l();});}function l(){m(e.map(function(e){return function(t){var r={};if(P(e)){r.getStream=I(e);r.length=e.size;}else if(i.isBuffer(e)){r.getStream=L(e);r.length=e.length;}else if(M(e)){r.getStream=B(e,r);r.length=0;}else if(typeof e==="string"){if(typeof d.stat!=="function"){throw new Error("filesystem paths do not work in the browser");}var n=s>1||a;j(e,n,t);return;}else{throw new Error("invalid input type");}r.path=e.path;t(null,r);};}),function(e,t){if(e)return n(e);t=f(t);n(null,t,a);});}}function j(e,t,r){E(e,k,function(n,i){if(n)return r(n);if(Array.isArray(i))i=f(i);else i=[i];e=u.normalize(e);if(t){e=e.slice(0,e.lastIndexOf(u.sep)+1);}if(e[e.length-1]!==u.sep)e+=u.sep;i.forEach(function(t){t.getStream=R(t.path);t.path=t.path.replace(e,"").split(u.sep);});r(null,i);});}function k(e,t){t=y(t);d.stat(e,function(r,n){if(r)return t(r);var i={length:n.size,path:e};t(null,i);});}function E(e,t,r){d.stat(e,function(n,i){if(n)return r(n);if(i.isDirectory()){d.readdir(e,function(n,i){if(n)return r(n);m(i.filter(C).filter(h.not).map(function(r){return function(n){E(u.join(e,r),t,n);};}),r);});}else if(i.isFile()){t(e,r);}});}function C(e){return e[0]!==".";}function x(e,t,r){r=y(r);var n=[];var o=0;var a=e.map(function(e){return e.getStream;});var u=0;var l=0;var c=false;var f=new v(a);var d=new s(t,{zeroPadding:false});f.on("error",m);f.pipe(d).on("data",p).on("end",h).on("error",m);function p(e){o+=e.length;var t=l;g(e,function(e){n[t]=e;u-=1;b();});u+=1;l+=1;}function h(){c=true;b();}function m(e){_();r(e);}function _(){f.removeListener("error",m);d.removeListener("data",p);d.removeListener("end",h);d.removeListener("error",m);}function b(){if(c&&u===0){_();r(null,i.from(n.join(""),"hex"),o);}}}function S(e,r,i){var s=r.announceList;if(!s){if(typeof r.announce==="string")s=[[r.announce]];else if(Array.isArray(r.announce)){s=r.announce.map(function(e){return[e];});}}if(!s)s=[];if(n.WEBTORRENT_ANNOUNCE){if(typeof n.WEBTORRENT_ANNOUNCE==="string"){s.push([[n.WEBTORRENT_ANNOUNCE]]);}else if(Array.isArray(n.WEBTORRENT_ANNOUNCE)){s=s.concat(n.WEBTORRENT_ANNOUNCE.map(function(e){return[e];}));}}if(r.announce===undefined&&r.announceList===undefined){s=s.concat(t.exports.announceList);}if(typeof r.urlList==="string")r.urlList=[r.urlList];var u={info:{name:r.name},"creation date":Math.ceil((Number(r.creationDate)||Date.now())/1e3),encoding:"UTF-8"};if(s.length!==0){u.announce=s[0][0];u["announce-list"]=s;}if(r.comment!==undefined)u.comment=r.comment;if(r.createdBy!==undefined)u["created by"]=r.createdBy;if(r.private!==undefined)u.info.private=Number(r.private);if(r.sslCert!==undefined)u.info["ssl-cert"]=r.sslCert;if(r.urlList!==undefined)u["url-list"]=r.urlList;var l=r.pieceLength||a(e.reduce(O,0));u.info["piece length"]=l;x(e,l,function(t,n,s){if(t)return i(t);u.info.pieces=n;e.forEach(function(e){delete e.getStream;});if(r.singleFileTorrent){u.info.length=s;}else{u.info.files=e;}i(null,o.encode(u));});}function O(e,t){return e+t.length;}function P(e){return typeof Blob!=="undefined"&&e instanceof Blob;}function A(e){return typeof FileList!=="undefined"&&e instanceof FileList;}function M(e){return(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e!=null&&typeof e.pipe==="function";}function I(e){return function(){return new c(e);};}function L(e){return function(){var t=new _.PassThrough();t.end(e);return t;};}function R(e){return function(){return d.createReadStream(e);};}function B(e,t){return function(){var r=new _.Transform();r._transform=function(e,r,n){t.length+=e.length;this.push(e);n();};e.pipe(r);return r;};}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer);},{_process:40,bencode:6,"block-stream2":26,buffer:41,"filestream/read":85,flatten:86,fs:39,"is-file":97,junk:100,multistream:133,once:146,path:150,"piece-length":151,"readable-stream":67,"run-parallel":175,"simple-sha1":193,xtend:372}],58:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],59:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":61,"./_stream_writable":63,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],60:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":62,"core-util-is":56,dup:12,inherits:94}],61:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":59,"./internal/streams/BufferList":64,"./internal/streams/destroy":65,"./internal/streams/stream":66,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:58,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":68,util:38}],62:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":59,"core-util-is":56,dup:14,inherits:94}],63:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":59,"./internal/streams/destroy":65,"./internal/streams/stream":66,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],64:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],65:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],66:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],67:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":59,"./lib/_stream_passthrough.js":60,"./lib/_stream_readable.js":61,"./lib/_stream_transform.js":62,"./lib/_stream_writable.js":63,dup:19}],68:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],69:[function(e,t,r){(function(n){r=t.exports=e("./debug");r.log=s;r.formatArgs=o;r.save=a;r.load=u;r.useColors=i;r.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l();r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function i(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true;}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);}r.formatters.j=function(e){try{return JSON.stringify(e);}catch(e){return"[UnexpectedJSONParseError]: "+e.message;}};function o(e){var t=this.useColors;e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff);if(!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0;var o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){if("%%"===e)return;i++;if("%c"===e){o=i;}});e.splice(o,0,n);}function s(){return"object"===(typeof console==="undefined"?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments);}function a(e){try{if(null==e){r.storage.removeItem("debug");}else{r.storage.debug=e;}}catch(e){}}function u(){var e;try{e=r.storage.debug;}catch(e){}if(!e&&typeof n!=="undefined"&&"env"in n){e=n.env.DEBUG;}return e;}r.enable(u());function l(){try{return window.localStorage;}catch(e){}}}).call(this,e("_process"));},{"./debug":70,_process:40}],70:[function(e,t,r){r=t.exports=o.debug=o["default"]=o;r.coerce=l;r.disable=a;r.enable=s;r.enabled=u;r.humanize=e("ms");r.names=[];r.skips=[];r.formatters={};var n;function i(e){var t=0,n;for(n in e){t=(t<<5)-t+e.charCodeAt(n);t|=0;}return r.colors[Math.abs(t)%r.colors.length];}function o(e){function t(){if(!t.enabled)return;var e=t;var i=+new Date();var o=i-(n||i);e.diff=o;e.prev=n;e.curr=i;n=i;var s=new Array(arguments.length);for(var a=0;a<s.length;a++){s[a]=arguments[a];}s[0]=r.coerce(s[0]);if("string"!==typeof s[0]){s.unshift("%O");}var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(t,n){if(t==="%%")return t;u++;var i=r.formatters[n];if("function"===typeof i){var o=s[u];t=i.call(e,o);s.splice(u,1);u--;}return t;});r.formatArgs.call(e,s);var l=t.log||r.log||console.log.bind(console);l.apply(e,s);}t.namespace=e;t.enabled=r.enabled(e);t.useColors=r.useColors();t.color=i(e);if("function"===typeof r.init){r.init(t);}return t;}function s(e){r.save(e);r.names=[];r.skips=[];var t=(typeof e==="string"?e:"").split(/[\s,]+/);var n=t.length;for(var i=0;i<n;i++){if(!t[i])continue;e=t[i].replace(/\*/g,".*?");if(e[0]==="-"){r.skips.push(new RegExp("^"+e.substr(1)+"$"));}else{r.names.push(new RegExp("^"+e+"$"));}}}function a(){r.enable("");}function u(e){var t,n;for(t=0,n=r.skips.length;t<n;t++){if(r.skips[t].test(e)){return false;}}for(t=0,n=r.names.length;t<n;t++){if(r.names[t].test(e)){return true;}}return false;}function l(e){if(e instanceof Error)return e.stack||e.message;return e;}},{ms:132}],71:[function(e,t,r){t.exports=function(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined)return arguments[e];}};},{}],72:[function(e,t,r){var n=e("once");var i=function i(){};var o=function o(e){return e.setHeader&&typeof e.abort==="function";};var s=function s(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3;};var a=function a(e,t,r){if(typeof t==="function")return a(e,null,t);if(!t)t={};r=n(r||i);var u=e._writableState;var l=e._readableState;var c=t.readable||t.readable!==false&&e.readable;var f=t.writable||t.writable!==false&&e.writable;var d=function d(){if(!e.writable)p();};var p=function p(){f=false;if(!c)r.call(e);};var h=function h(){c=false;if(!f)r.call(e);};var v=function v(t){r.call(e,t?new Error("exited with error code: "+t):null);};var y=function y(){if(c&&!(l&&l.ended))return r.call(e,new Error("premature close"));if(f&&!(u&&u.ended))return r.call(e,new Error("premature close"));};var m=function m(){e.req.on("finish",p);};if(o(e)){e.on("complete",p);e.on("abort",y);if(e.req)m();else e.on("request",m);}else if(f&&!u){e.on("end",d);e.on("close",d);}if(s(e))e.on("exit",v);e.on("end",h);e.on("finish",p);if(t.error!==false)e.on("error",r);e.on("close",y);return function(){e.removeListener("complete",p);e.removeListener("abort",y);e.removeListener("request",m);if(e.req)e.req.removeListener("finish",p);e.removeListener("end",d);e.removeListener("close",d);e.removeListener("finish",p);e.removeListener("exit",v);e.removeListener("end",h);e.removeListener("error",r);e.removeListener("close",y);};};t.exports=a;},{once:146}],73:[function(e,t,r){function n(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined;}t.exports=n;n.EventEmitter=n;n.prototype._events=undefined;n.prototype._maxListeners=undefined;n.defaultMaxListeners=10;n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this;};n.prototype.emit=function(e){var t,r,n,o,u,l;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||s(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t;}else{var c=new Error('Uncaught, unspecified "error" event. ('+t+")");c.context=t;throw c;}}}r=this._events[e];if(a(r))return false;if(i(r)){switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1);r.apply(this,o);}}else if(s(r)){o=Array.prototype.slice.call(arguments,1);l=r.slice();n=l.length;for(u=0;u<n;u++){l[u].apply(this,o);}}return true;};n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,i(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(s(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(s(this._events[e])&&!this._events[e].warned){if(!a(this._maxListeners)){r=this._maxListeners;}else{r=n.defaultMaxListeners;}if(r&&r>0&&this._events[e].length>r){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace();}}}return this;};n.prototype.on=n.prototype.addListener;n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=false;function n(){this.removeListener(e,n);if(!r){r=true;t.apply(this,arguments);}}n.listener=t;this.on(e,n);return this;};n.prototype.removeListener=function(e,t){var r,n,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];o=r.length;n=-1;if(r===t||i(r.listener)&&r.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t);}else if(s(r)){for(a=o;a-->0;){if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break;}}if(n<0)return this;if(r.length===1){r.length=0;delete this._events[e];}else{r.splice(n,1);}if(this._events.removeListener)this.emit("removeListener",e,t);}return this;};n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this;}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t);}this.removeAllListeners("removeListener");this._events={};return this;}r=this._events[e];if(i(r)){this.removeListener(e,r);}else if(r){while(r.length){this.removeListener(e,r[r.length-1]);}}delete this._events[e];return this;};n.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(i(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t;};n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;else if(t)return t.length;}return 0;};n.listenerCount=function(e,t){return e.listenerCount(t);};function i(e){return typeof e==="function";}function o(e){return typeof e==="number";}function s(e){return(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e!==null;}function a(e){return e===void 0;}},{}],74:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],75:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":77,"./_stream_writable":79,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],76:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":78,"core-util-is":56,dup:12,inherits:94}],77:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":75,"./internal/streams/BufferList":80,"./internal/streams/destroy":81,"./internal/streams/stream":82,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:74,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":84,util:38}],78:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":75,"core-util-is":56,dup:14,inherits:94}],79:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":75,"./internal/streams/destroy":81,"./internal/streams/stream":82,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],80:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],81:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],82:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],83:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":75,"./lib/_stream_passthrough.js":76,"./lib/_stream_readable.js":77,"./lib/_stream_transform.js":78,"./lib/_stream_writable.js":79,dup:19}],84:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],85:[function(e,t,r){var n=e("readable-stream").Readable;var i=e("inherits");var o=/^.*\.(\w+)$/;var s=e("typedarray-to-buffer");function a(e,t){var r=this;if(!(this instanceof a)){return new a(e,t);}t=t||{};n.call(this,t);this._offset=0;this._ready=false;this._file=e;this._size=e.size;this._chunkSize=t.chunkSize||Math.max(this._size/1e3,200*1024);this.reader=new FileReader();this._generateHeaderBlocks(e,t,function(e,t){if(e){return r.emit("error",e);}if(Array.isArray(t)){t.forEach(function(e){r.push(e);});}r._ready=true;r.emit("_ready");});}i(a,n);t.exports=a;a.prototype._generateHeaderBlocks=function(e,t,r){r(null,[]);};a.prototype._read=function(){if(!this._ready){this.once("_ready",this._read.bind(this));return;}var e=this;var t=this.reader;var r=this._offset;var n=this._offset+this._chunkSize;if(n>this._size)n=this._size;if(r===this._size){this.destroy();this.push(null);return;}t.onload=function(){e._offset=n;e.push(s(t.result));};t.onerror=function(){e.emit("error",t.error);};t.readAsArrayBuffer(this._file.slice(r,n));};a.prototype.destroy=function(){this._file=null;if(this.reader){this.reader.onload=null;this.reader.onerror=null;try{this.reader.abort();}catch(e){}}this.reader=null;};},{inherits:94,"readable-stream":83,"typedarray-to-buffer":232}],86:[function(e,t,r){t.exports=function e(t,r){r=typeof r=="number"?r:Infinity;if(!r){if(Array.isArray(t)){return t.map(function(e){return e;});}return t;}return n(t,1);function n(e,t){return e.reduce(function(e,i){if(Array.isArray(i)&&t<r){return e.concat(n(i,t+1));}else{return e.concat(i);}},[]);}};},{}],87:[function(e,t,r){var n=e("is-function");t.exports=s;var i=Object.prototype.toString;var o=Object.prototype.hasOwnProperty;function s(e,t,r){if(!n(t)){throw new TypeError("iterator must be a function");}if(arguments.length<3){r=this;}if(i.call(e)==="[object Array]")a(e,t,r);else if(typeof e==="string")u(e,t,r);else l(e,t,r);}function a(e,t,r){for(var n=0,i=e.length;n<i;n++){if(o.call(e,n)){t.call(r,e[n],n,e);}}}function u(e,t,r){for(var n=0,i=e.length;n<i;n++){t.call(r,e.charAt(n),n,e);}}function l(e,t,r){for(var n in e){if(o.call(e,n)){t.call(r,e[n],n,e);}}}},{"is-function":98}],88:[function(e,t,r){t.exports=function e(){if(typeof window==="undefined")return null;var t={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};if(!t.RTCPeerConnection)return null;return t;};},{}],89:[function(e,t,r){(function(r){var n=typeof r!=="undefined"?r:typeof window!=="undefined"?window:{};var i=e("min-document");if(typeof document!=="undefined"){t.exports=document;}else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];if(!o){o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i;}t.exports=o;}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"min-document":38}],90:[function(e,t,r){(function(e){if(typeof window!=="undefined"){t.exports=window;}else if(typeof e!=="undefined"){t.exports=e;}else if(typeof self!=="undefined"){t.exports=self;}else{t.exports={};}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],91:[function(e,t,r){var n=e("http");var i=e("url");var o=t.exports;for(var s in n){if(n.hasOwnProperty(s))o[s]=n[s];}o.request=function(e,t){e=a(e);return n.request.call(this,e,t);};o.get=function(e,t){e=a(e);return n.get.call(this,e,t);};function a(e){if(typeof e==="string"){e=i.parse(e);}if(!e.protocol){e.protocol="https:";}if(e.protocol!=="https:"){throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');}return e;}},{http:207,url:236}],92:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s;var a=i*8-n-1;var u=(1<<a)-1;var l=u>>1;var c=-7;var f=r?i-1:0;var d=r?-1:1;var p=e[t+f];f+=d;o=p&(1<<-c)-1;p>>=-c;c+=a;for(;c>0;o=o*256+e[t+f],f+=d,c-=8){}s=o&(1<<-c)-1;o>>=-c;c+=n;for(;c>0;s=s*256+e[t+f],f+=d,c-=8){}if(o===0){o=1-l;}else if(o===u){return s?NaN:(p?-1:1)*Infinity;}else{s=s+Math.pow(2,n);o=o-l;}return(p?-1:1)*s*Math.pow(2,o-n);};r.write=function(e,t,r,n,i,o){var s,a,u;var l=o*8-i-1;var c=(1<<l)-1;var f=c>>1;var d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=n?0:o-1;var h=n?1:-1;var v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){a=isNaN(t)?1:0;s=c;}else{s=Math.floor(Math.log(t)/Math.LN2);if(t*(u=Math.pow(2,-s))<1){s--;u*=2;}if(s+f>=1){t+=d/u;}else{t+=d*Math.pow(2,1-f);}if(t*u>=2){s++;u/=2;}if(s+f>=c){a=0;s=c;}else if(s+f>=1){a=(t*u-1)*Math.pow(2,i);s=s+f;}else{a=t*Math.pow(2,f-1)*Math.pow(2,i);s=0;}}for(;i>=8;e[r+p]=a&255,p+=h,a/=256,i-=8){}s=s<<i|a;l+=i;for(;l>0;e[r+p]=s&255,p+=h,s/=256,l-=8){}e[r+p-h]|=v*128;};},{}],93:[function(e,t,r){(function(e){t.exports=r;function r(e){if(!(this instanceof r))return new r(e);this.store=e;this.chunkLength=e.chunkLength;if(!this.store||!this.store.get||!this.store.put){throw new Error("First argument must be abstract-chunk-store compliant");}this.mem=[];}r.prototype.put=function(e,t,r){var n=this;n.mem[e]=t;n.store.put(e,t,function(t){n.mem[e]=null;if(r)r(t);});};r.prototype.get=function(e,t,r){if(typeof t==="function")return this.get(e,null,t);var i=t&&t.offset||0;var o=t&&t.length&&i+t.length;var s=this.mem[e];if(s)return n(r,null,t?s.slice(i,o):s);this.store.get(e,t,r);};r.prototype.close=function(e){this.store.close(e);};r.prototype.destroy=function(e){this.store.destroy(e);};function n(t,r,n){e.nextTick(function(){if(t)t(r,n);});}}).call(this,e("_process"));},{_process:40}],94:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function e(t,r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});};}else{t.exports=function e(t,r){t.super_=r;var n=function n(){};n.prototype=r.prototype;t.prototype=new n();t.prototype.constructor=t;};}},{}],95:[function(e,t,r){var n=127;t.exports=function e(t){for(var r=0,i=t.length;r<i;++r){if(t.charCodeAt(r)>n)return false;}return true;};},{}],96:[function(e,t,r){t.exports=function(e){return e!=null&&(n(e)||i(e)||!!e._isBuffer);};function n(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e);}function i(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&n(e.slice(0,0));}},{}],97:[function(e,t,r){"use strict";var n=e("fs");t.exports=function e(t,r){if(!r)return i(t);n.stat(t,function(e,t){if(e)return r(e);return r(null,t.isFile());});};t.exports.sync=i;function i(e){return n.existsSync(e)&&n.statSync(e).isFile();}},{fs:39}],98:[function(e,t,r){t.exports=i;var n=Object.prototype.toString;function i(e){var t=n.call(e);return t==="[object Function]"||typeof e==="function"&&t!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt);}},{}],99:[function(e,t,r){t.exports=o;o.strict=s;o.loose=a;var n=Object.prototype.toString;var i={"[object Int8Array]":true,"[object Int16Array]":true,"[object Int32Array]":true,"[object Uint8Array]":true,"[object Uint8ClampedArray]":true,"[object Uint16Array]":true,"[object Uint32Array]":true,"[object Float32Array]":true,"[object Float64Array]":true};function o(e){return s(e)||a(e);}function s(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array;}function a(e){return i[n.call(e)];}},{}],100:[function(e,t,r){"use strict";r.regex=r.re=/^npm-debug\.log$|^\..*\.swp$|^\.DS_Store$|^\.AppleDouble$|^\.LSOverride$|^Icon\r$|^\._.*|^\.Spotlight-V100(?:$|\/)|\.Trashes|^__MACOSX$|~$|^Thumbs\.db$|^ehthumbs\.db$|^Desktop\.ini$|^@eaDir$/;r.is=function(e){return r.re.test(e);};r.not=function(e){return!r.is(e);};},{}],101:[function(e,t,r){t.exports=a;t.exports.decode=a;t.exports.encode=u;var n=e("thirty-two");var i=e("safe-buffer").Buffer;var o=e("xtend");var s=e("uniq");function a(e){var t={};var r=e.split("magnet:?")[1];var o=r&&r.length>=0?r.split("&"):[];o.forEach(function(e){var r=e.split("=");if(r.length!==2)return;var n=r[0];var i=r[1];if(n==="dn")i=decodeURIComponent(i).replace(/\+/g," ");if(n==="tr"||n==="xs"||n==="as"||n==="ws"){i=decodeURIComponent(i);}if(n==="kt")i=decodeURIComponent(i).split("+");if(n==="ix")i=Number(i);if(t[n]){if(Array.isArray(t[n])){t[n].push(i);}else{var o=t[n];t[n]=[o,i];}}else{t[n]=i;}});var a;if(t.xt){var u=Array.isArray(t.xt)?t.xt:[t.xt];u.forEach(function(e){if(a=e.match(/^urn:btih:(.{40})/)){t.infoHash=a[1].toLowerCase();}else if(a=e.match(/^urn:btih:(.{32})/)){var r=n.decode(a[1]);t.infoHash=i.from(r,"binary").toString("hex");}});}if(t.infoHash)t.infoHashBuffer=i.from(t.infoHash,"hex");if(t.dn)t.name=t.dn;if(t.kt)t.keywords=t.kt;if(typeof t.tr==="string")t.announce=[t.tr];else if(Array.isArray(t.tr))t.announce=t.tr;else t.announce=[];t.urlList=[];if(typeof t.as==="string"||Array.isArray(t.as)){t.urlList=t.urlList.concat(t.as);}if(typeof t.ws==="string"||Array.isArray(t.ws)){t.urlList=t.urlList.concat(t.ws);}s(t.announce);s(t.urlList);return t;}function u(e){e=o(e);if(e.infoHashBuffer)e.xt="urn:btih:"+e.infoHashBuffer.toString("hex");if(e.infoHash)e.xt="urn:btih:"+e.infoHash;if(e.name)e.dn=e.name;if(e.keywords)e.kt=e.keywords;if(e.announce)e.tr=e.announce;if(e.urlList){e.ws=e.urlList;delete e.as;}var t="magnet:?";Object.keys(e).filter(function(e){return e.length===2;}).forEach(function(r,n){var i=Array.isArray(e[r])?e[r]:[e[r]];i.forEach(function(e,i){if((n>0||i>0)&&(r!=="kt"||i===0))t+="&";if(r==="dn")e=encodeURIComponent(e).replace(/%20/g,"+");if(r==="tr"||r==="xs"||r==="as"||r==="ws"){e=encodeURIComponent(e);}if(r==="kt")e=encodeURIComponent(e);if(r==="kt"&&i>0)t+="+"+e;else t+=r+"="+e;});});return t;}},{"safe-buffer":177,"thirty-two":225,uniq:234,xtend:372}],102:[function(e,t,r){t.exports=u;var n=e("inherits");var i=e("readable-stream");var o=e("to-arraybuffer");var s=typeof window!=="undefined"&&window.MediaSource;var a=60;function u(e,t){var r=this;if(!(r instanceof u))return new u(e,t);if(!s)throw new Error("web browser lacks MediaSource support");if(!t)t={};r._bufferDuration=t.bufferDuration||a;r._elem=e;r._mediaSource=new s();r._streams=[];r.detailedError=null;r._errorHandler=function(){r._elem.removeEventListener("error",r._errorHandler);var e=r._streams.slice();e.forEach(function(e){e.destroy(r._elem.error);});};r._elem.addEventListener("error",r._errorHandler);r._elem.src=window.URL.createObjectURL(r._mediaSource);}u.prototype.createWriteStream=function(e){var t=this;return new l(t,e);};u.prototype.error=function(e){var t=this;if(!t.detailedError){t.detailedError=e;}try{t._mediaSource.endOfStream("decode");}catch(e){}};n(l,i.Writable);function l(e,t){var r=this;i.Writable.call(r);r._wrapper=e;r._elem=e._elem;r._mediaSource=e._mediaSource;r._allStreams=e._streams;r._allStreams.push(r);r._bufferDuration=e._bufferDuration;r._sourceBuffer=null;r._openHandler=function(){r._onSourceOpen();};r._flowHandler=function(){r._flow();};if(typeof t==="string"){r._type=t;if(r._mediaSource.readyState==="open"){r._createSourceBuffer();}else{r._mediaSource.addEventListener("sourceopen",r._openHandler);}}else if(t._sourceBuffer===null){t.destroy();r._type=t._type;r._mediaSource.addEventListener("sourceopen",r._openHandler);}else if(t._sourceBuffer){t.destroy();r._type=t._type;r._sourceBuffer=t._sourceBuffer;r._sourceBuffer.addEventListener("updateend",r._flowHandler);}else{throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");}r._elem.addEventListener("timeupdate",r._flowHandler);r.on("error",function(e){r._wrapper.error(e);});r.on("finish",function(){if(r.destroyed)return;r._finished=true;if(r._allStreams.every(function(e){return e._finished;})){try{r._mediaSource.endOfStream();}catch(e){}}});}l.prototype._onSourceOpen=function(){var e=this;if(e.destroyed)return;e._mediaSource.removeEventListener("sourceopen",e._openHandler);e._createSourceBuffer();};l.prototype.destroy=function(e){var t=this;if(t.destroyed)return;t.destroyed=true;t._allStreams.splice(t._allStreams.indexOf(t),1);t._mediaSource.removeEventListener("sourceopen",t._openHandler);t._elem.removeEventListener("timeupdate",t._flowHandler);if(t._sourceBuffer){t._sourceBuffer.removeEventListener("updateend",t._flowHandler);if(t._mediaSource.readyState==="open"){t._sourceBuffer.abort();}}if(e)t.emit("error",e);t.emit("close");};l.prototype._createSourceBuffer=function(){var e=this;if(e.destroyed)return;if(s.isTypeSupported(e._type)){e._sourceBuffer=e._mediaSource.addSourceBuffer(e._type);e._sourceBuffer.addEventListener("updateend",e._flowHandler);if(e._cb){var t=e._cb;e._cb=null;t();}}else{e.destroy(new Error("The provided type is not supported"));}};l.prototype._write=function(e,t,r){var n=this;if(n.destroyed)return;if(!n._sourceBuffer){n._cb=function(i){if(i)return r(i);n._write(e,t,r);};return;}if(n._sourceBuffer.updating){return r(new Error("Cannot append buffer while source buffer updating"));}try{n._sourceBuffer.appendBuffer(o(e));}catch(e){n.destroy(e);return;}n._cb=r;};l.prototype._flow=function(){var e=this;if(e.destroyed||!e._sourceBuffer||e._sourceBuffer.updating){return;}if(e._mediaSource.readyState==="open"){if(e._getBufferDuration()>e._bufferDuration){return;}}if(e._cb){var t=e._cb;e._cb=null;t();}};var c=0;l.prototype._getBufferDuration=function(){var e=this;var t=e._sourceBuffer.buffered;var r=e._elem.currentTime;var n=-1;for(var i=0;i<t.length;i++){var o=t.start(i);var s=t.end(i)+c;if(o>r){break;}else if(n>=0||r<=s){n=s;}}var a=n-r;if(a<0){a=0;}return a;};},{inherits:94,"readable-stream":112,"to-arraybuffer":227}],103:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],104:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":106,"./_stream_writable":108,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],105:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":107,"core-util-is":56,dup:12,inherits:94}],106:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":104,"./internal/streams/BufferList":109,"./internal/streams/destroy":110,"./internal/streams/stream":111,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:103,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":113,util:38}],107:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":104,"core-util-is":56,dup:14,inherits:94}],108:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":104,"./internal/streams/destroy":110,"./internal/streams/stream":111,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],109:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],110:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],111:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],112:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":104,"./lib/_stream_passthrough.js":105,"./lib/_stream_readable.js":106,"./lib/_stream_transform.js":107,"./lib/_stream_writable.js":108,dup:19}],113:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],114:[function(e,t,r){(function(e){t.exports=r;function r(e,t){if(!(this instanceof r))return new r(e,t);if(!t)t={};this.chunkLength=Number(e);if(!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[];this.closed=false;this.length=Number(t.length)||Infinity;if(this.length!==Infinity){this.lastChunkLength=this.length%this.chunkLength||this.chunkLength;this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1;}}r.prototype.put=function(e,t,r){if(this.closed)return n(r,new Error("Storage is closed"));var i=e===this.lastChunkIndex;if(i&&t.length!==this.lastChunkLength){return n(r,new Error("Last chunk length must be "+this.lastChunkLength));}if(!i&&t.length!==this.chunkLength){return n(r,new Error("Chunk length must be "+this.chunkLength));}this.chunks[e]=t;n(r,null);};r.prototype.get=function(e,t,r){if(typeof t==="function")return this.get(e,null,t);if(this.closed)return n(r,new Error("Storage is closed"));var i=this.chunks[e];if(!i){var o=new Error("Chunk not found");o.notFound=true;return n(r,o);}if(!t)return n(r,null,i);var s=t.offset||0;var a=t.length||i.length-s;n(r,null,i.slice(s,a+s));};r.prototype.close=r.prototype.destroy=function(e){if(this.closed)return n(e,new Error("Storage is closed"));this.closed=true;this.chunks=null;n(e,null);};function n(t,r,n){e.nextTick(function(){if(t)t(r,n);});}}).call(this,e("_process"));},{_process:40}],115:[function(e,t,r){(function(t){var n=e("./index");var i=e("./descriptor");var o=20828448e5;r.fullBoxes={};var s=["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"];s.forEach(function(e){r.fullBoxes[e]=true;});r.ftyp={};r.ftyp.encode=function(e,n,i){n=n?n.slice(i):new t(r.ftyp.encodingLength(e));var o=e.compatibleBrands||[];n.write(e.brand,0,4,"ascii");n.writeUInt32BE(e.brandVersion,4);for(var s=0;s<o.length;s++){n.write(o[s],8+s*4,4,"ascii");}r.ftyp.encode.bytes=8+o.length*4;return n;};r.ftyp.decode=function(e,t){e=e.slice(t);var r=e.toString("ascii",0,4);var n=e.readUInt32BE(4);var i=[];for(var o=8;o<e.length;o+=4){i.push(e.toString("ascii",o,o+4));}return{brand:r,brandVersion:n,compatibleBrands:i};};r.ftyp.encodingLength=function(e){return 8+(e.compatibleBrands||[]).length*4;};r.mvhd={};r.mvhd.encode=function(e,n,i){n=n?n.slice(i):new t(96);u(e.ctime||new Date(),n,0);u(e.mtime||new Date(),n,4);n.writeUInt32BE(e.timeScale||0,8);n.writeUInt32BE(e.duration||0,12);l(e.preferredRate||0,n,16);c(e.preferredVolume||0,n,20);a(n,22,32);f(e.matrix,n,32);n.writeUInt32BE(e.previewTime||0,68);n.writeUInt32BE(e.previewDuration||0,72);n.writeUInt32BE(e.posterTime||0,76);n.writeUInt32BE(e.selectionTime||0,80);n.writeUInt32BE(e.selectionDuration||0,84);n.writeUInt32BE(e.currentTime||0,88);n.writeUInt32BE(e.nextTrackId||0,92);r.mvhd.encode.bytes=96;return n;};r.mvhd.decode=function(e,t){e=e.slice(t);return{ctime:h(e,0),mtime:h(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),preferredRate:v(e,16),preferredVolume:y(e,20),matrix:p(e.slice(32,68)),previewTime:e.readUInt32BE(68),previewDuration:e.readUInt32BE(72),posterTime:e.readUInt32BE(76),selectionTime:e.readUInt32BE(80),selectionDuration:e.readUInt32BE(84),currentTime:e.readUInt32BE(88),nextTrackId:e.readUInt32BE(92)};};r.mvhd.encodingLength=function(e){return 96;};r.tkhd={};r.tkhd.encode=function(e,n,i){n=n?n.slice(i):new t(80);u(e.ctime||new Date(),n,0);u(e.mtime||new Date(),n,4);n.writeUInt32BE(e.trackId||0,8);a(n,12,16);n.writeUInt32BE(e.duration||0,16);a(n,20,28);n.writeUInt16BE(e.layer||0,28);n.writeUInt16BE(e.alternateGroup||0,30);n.writeUInt16BE(e.volume||0,32);f(e.matrix,n,36);n.writeUInt32BE(e.trackWidth||0,72);n.writeUInt32BE(e.trackHeight||0,76);r.tkhd.encode.bytes=80;return n;};r.tkhd.decode=function(e,t){e=e.slice(t);return{ctime:h(e,0),mtime:h(e,4),trackId:e.readUInt32BE(8),duration:e.readUInt32BE(16),layer:e.readUInt16BE(28),alternateGroup:e.readUInt16BE(30),volume:e.readUInt16BE(32),matrix:p(e.slice(36,72)),trackWidth:e.readUInt32BE(72),trackHeight:e.readUInt32BE(76)};};r.tkhd.encodingLength=function(e){return 80;};r.mdhd={};r.mdhd.encode=function(e,n,i){n=n?n.slice(i):new t(20);u(e.ctime||new Date(),n,0);u(e.mtime||new Date(),n,4);n.writeUInt32BE(e.timeScale||0,8);n.writeUInt32BE(e.duration||0,12);n.writeUInt16BE(e.language||0,16);n.writeUInt16BE(e.quality||0,18);r.mdhd.encode.bytes=20;return n;};r.mdhd.decode=function(e,t){e=e.slice(t);return{ctime:h(e,0),mtime:h(e,4),timeScale:e.readUInt32BE(8),duration:e.readUInt32BE(12),language:e.readUInt16BE(16),quality:e.readUInt16BE(18)};};r.mdhd.encodingLength=function(e){return 20;};r.vmhd={};r.vmhd.encode=function(e,n,i){n=n?n.slice(i):new t(8);n.writeUInt16BE(e.graphicsMode||0,0);var o=e.opcolor||[0,0,0];n.writeUInt16BE(o[0],2);n.writeUInt16BE(o[1],4);n.writeUInt16BE(o[2],6);r.vmhd.encode.bytes=8;return n;};r.vmhd.decode=function(e,t){e=e.slice(t);return{graphicsMode:e.readUInt16BE(0),opcolor:[e.readUInt16BE(2),e.readUInt16BE(4),e.readUInt16BE(6)]};};r.vmhd.encodingLength=function(e){return 8;};r.smhd={};r.smhd.encode=function(e,n,i){n=n?n.slice(i):new t(4);n.writeUInt16BE(e.balance||0,0);a(n,2,4);r.smhd.encode.bytes=4;return n;};r.smhd.decode=function(e,t){e=e.slice(t);return{balance:e.readUInt16BE(0)};};r.smhd.encodingLength=function(e){return 4;};r.stsd={};r.stsd.encode=function(e,i,o){i=i?i.slice(o):new t(r.stsd.encodingLength(e));var s=e.entries||[];i.writeUInt32BE(s.length,0);var a=4;for(var u=0;u<s.length;u++){var l=s[u];n.encode(l,i,a);a+=n.encode.bytes;}r.stsd.encode.bytes=a;return i;};r.stsd.decode=function(e,t,r){e=e.slice(t);var i=e.readUInt32BE(0);var o=new Array(i);var s=4;for(var a=0;a<i;a++){var u=n.decode(e,s,r);o[a]=u;s+=u.length;}return{entries:o};};r.stsd.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var r=0;r<e.entries.length;r++){t+=n.encodingLength(e.entries[r]);}return t;};r.avc1=r.VisualSampleEntry={};r.VisualSampleEntry.encode=function(e,i,o){i=i?i.slice(o):new t(r.VisualSampleEntry.encodingLength(e));a(i,0,6);i.writeUInt16BE(e.dataReferenceIndex||0,6);a(i,8,24);i.writeUInt16BE(e.width||0,24);i.writeUInt16BE(e.height||0,26);i.writeUInt32BE(e.hResolution||4718592,28);i.writeUInt32BE(e.vResolution||4718592,32);a(i,36,40);i.writeUInt16BE(e.frameCount||1,40);var s=e.compressorName||"";var u=Math.min(s.length,31);i.writeUInt8(u,42);i.write(s,43,u,"utf8");i.writeUInt16BE(e.depth||24,74);i.writeInt16BE(-1,76);var l=78;var c=e.children||[];c.forEach(function(e){n.encode(e,i,l);l+=n.encode.bytes;});r.VisualSampleEntry.encode.bytes=l;};r.VisualSampleEntry.decode=function(e,t,r){e=e.slice(t);var i=r-t;var o=Math.min(e.readUInt8(42),31);var s={dataReferenceIndex:e.readUInt16BE(6),width:e.readUInt16BE(24),height:e.readUInt16BE(26),hResolution:e.readUInt32BE(28),vResolution:e.readUInt32BE(32),frameCount:e.readUInt16BE(40),compressorName:e.toString("utf8",43,43+o),depth:e.readUInt16BE(74),children:[]};var a=78;while(i-a>=8){var u=n.decode(e,a,i);s.children.push(u);s[u.type]=u;a+=u.length;}return s;};r.VisualSampleEntry.encodingLength=function(e){var t=78;var r=e.children||[];r.forEach(function(e){t+=n.encodingLength(e);});return t;};r.avcC={};r.avcC.encode=function(e,n,i){n=n?n.slice(i):t(e.buffer.length);e.buffer.copy(n);r.avcC.encode.bytes=e.buffer.length;};r.avcC.decode=function(e,r,n){e=e.slice(r,n);return{mimeCodec:e.toString("hex",1,4),buffer:new t(e)};};r.avcC.encodingLength=function(e){return e.buffer.length;};r.mp4a=r.AudioSampleEntry={};r.AudioSampleEntry.encode=function(e,i,o){i=i?i.slice(o):new t(r.AudioSampleEntry.encodingLength(e));a(i,0,6);i.writeUInt16BE(e.dataReferenceIndex||0,6);a(i,8,16);i.writeUInt16BE(e.channelCount||2,16);i.writeUInt16BE(e.sampleSize||16,18);a(i,20,24);i.writeUInt32BE(e.sampleRate||0,24);var s=28;var u=e.children||[];u.forEach(function(e){n.encode(e,i,s);s+=n.encode.bytes;});r.AudioSampleEntry.encode.bytes=s;};r.AudioSampleEntry.decode=function(e,t,r){e=e.slice(t,r);var i=r-t;var o={dataReferenceIndex:e.readUInt16BE(6),channelCount:e.readUInt16BE(16),sampleSize:e.readUInt16BE(18),sampleRate:e.readUInt32BE(24),children:[]};var s=28;while(i-s>=8){var a=n.decode(e,s,i);o.children.push(a);o[a.type]=a;s+=a.length;}return o;};r.AudioSampleEntry.encodingLength=function(e){var t=28;var r=e.children||[];r.forEach(function(e){t+=n.encodingLength(e);});return t;};r.esds={};r.esds.encode=function(e,n,i){n=n?n.slice(i):t(e.buffer.length);e.buffer.copy(n,0);r.esds.encode.bytes=e.buffer.length;};r.esds.decode=function(e,r,n){e=e.slice(r,n);var o=i.Descriptor.decode(e,0,e.length);var s=o.tagName==="ESDescriptor"?o:{};var a=s.DecoderConfigDescriptor||{};var u=a.oti||0;var l=a.DecoderSpecificInfo;var c=l?(l.buffer.readUInt8(0)&248)>>3:0;var f=null;if(u){f=u.toString(16);if(c){f+="."+c;}}return{mimeCodec:f,buffer:new t(e.slice(0))};};r.esds.encodingLength=function(e){return e.buffer.length;};r.stsz={};r.stsz.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):t(r.stsz.encodingLength(e));n.writeUInt32BE(0,0);n.writeUInt32BE(o.length,4);for(var s=0;s<o.length;s++){n.writeUInt32BE(o[s],s*4+8);}r.stsz.encode.bytes=8+o.length*4;return n;};r.stsz.decode=function(e,t){e=e.slice(t);var r=e.readUInt32BE(0);var n=e.readUInt32BE(4);var i=new Array(n);for(var o=0;o<n;o++){if(r===0){i[o]=e.readUInt32BE(o*4+8);}else{i[o]=r;}}return{entries:i};};r.stsz.encodingLength=function(e){return 8+e.entries.length*4;};r.stss=r.stco={};r.stco.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.stco.encodingLength(e));n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){n.writeUInt32BE(o[s],s*4+4);}r.stco.encode.bytes=4+o.length*4;return n;};r.stco.decode=function(e,t){e=e.slice(t);var r=e.readUInt32BE(0);var n=new Array(r);for(var i=0;i<r;i++){n[i]=e.readUInt32BE(i*4+4);}return{entries:n};};r.stco.encodingLength=function(e){return 4+e.entries.length*4;};r.stts={};r.stts.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.stts.encodingLength(e));n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=s*8+4;n.writeUInt32BE(o[s].count||0,a);n.writeUInt32BE(o[s].duration||0,a+4);}r.stts.encode.bytes=4+e.entries.length*8;return n;};r.stts.decode=function(e,t){e=e.slice(t);var r=e.readUInt32BE(0);var n=new Array(r);for(var i=0;i<r;i++){var o=i*8+4;n[i]={count:e.readUInt32BE(o),duration:e.readUInt32BE(o+4)};}return{entries:n};};r.stts.encodingLength=function(e){return 4+e.entries.length*8;};r.ctts={};r.ctts.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.ctts.encodingLength(e));n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=s*8+4;n.writeUInt32BE(o[s].count||0,a);n.writeUInt32BE(o[s].compositionOffset||0,a+4);}r.ctts.encode.bytes=4+o.length*8;return n;};r.ctts.decode=function(e,t){e=e.slice(t);var r=e.readUInt32BE(0);var n=new Array(r);for(var i=0;i<r;i++){var o=i*8+4;n[i]={count:e.readUInt32BE(o),compositionOffset:e.readInt32BE(o+4)};}return{entries:n};};r.ctts.encodingLength=function(e){return 4+e.entries.length*8;};r.stsc={};r.stsc.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.stsc.encodingLength(e));n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=s*12+4;n.writeUInt32BE(o[s].firstChunk||0,a);n.writeUInt32BE(o[s].samplesPerChunk||0,a+4);n.writeUInt32BE(o[s].sampleDescriptionId||0,a+8);}r.stsc.encode.bytes=4+o.length*12;return n;};r.stsc.decode=function(e,t){e=e.slice(t);var r=e.readUInt32BE(0);var n=new Array(r);for(var i=0;i<r;i++){var o=i*12+4;n[i]={firstChunk:e.readUInt32BE(o),samplesPerChunk:e.readUInt32BE(o+4),sampleDescriptionId:e.readUInt32BE(o+8)};}return{entries:n};};r.stsc.encodingLength=function(e){return 4+e.entries.length*12;};r.dref={};r.dref.encode=function(e,n,i){n=n?n.slice(i):new t(r.dref.encodingLength(e));var o=e.entries||[];n.writeUInt32BE(o.length,0);var s=4;for(var a=0;a<o.length;a++){var u=o[a];var l=(u.buf?u.buf.length:0)+4+4;n.writeUInt32BE(l,s);s+=4;n.write(u.type,s,4,"ascii");s+=4;if(u.buf){u.buf.copy(n,s);s+=u.buf.length;}}r.dref.encode.bytes=s;return n;};r.dref.decode=function(e,t){e=e.slice(t);var r=e.readUInt32BE(0);var n=new Array(r);var i=4;for(var o=0;o<r;o++){var s=e.readUInt32BE(i);var a=e.toString("ascii",i+4,i+8);var u=e.slice(i+8,i+s);i+=s;n[o]={type:a,buf:u};}return{entries:n};};r.dref.encodingLength=function(e){var t=4;if(!e.entries)return t;for(var r=0;r<e.entries.length;r++){var n=e.entries[r].buf;t+=(n?n.length:0)+4+4;}return t;};r.elst={};r.elst.encode=function(e,n,i){var o=e.entries||[];n=n?n.slice(i):new t(r.elst.encodingLength(e));n.writeUInt32BE(o.length,0);for(var s=0;s<o.length;s++){var a=s*12+4;n.writeUInt32BE(o[s].trackDuration||0,a);n.writeUInt32BE(o[s].mediaTime||0,a+4);l(o[s].mediaRate||0,n,a+8);}r.elst.encode.bytes=4+o.length*12;return n;};r.elst.decode=function(e,t){e=e.slice(t);var r=e.readUInt32BE(0);var n=new Array(r);for(var i=0;i<r;i++){var o=i*12+4;n[i]={trackDuration:e.readUInt32BE(o),mediaTime:e.readInt32BE(o+4),mediaRate:v(e,o+8)};}return{entries:n};};r.elst.encodingLength=function(e){return 4+e.entries.length*12;};r.hdlr={};r.hdlr.encode=function(e,n,i){n=n?n.slice(i):new t(r.hdlr.encodingLength(e));var o=21+(e.name||"").length;n.fill(0,0,o);n.write(e.handlerType||"",4,4,"ascii");d(e.name||"",n,20);r.hdlr.encode.bytes=o;return n;};r.hdlr.decode=function(e,t,r){e=e.slice(t);return{handlerType:e.toString("ascii",4,8),name:m(e,20,r)};};r.hdlr.encodingLength=function(e){return 21+(e.name||"").length;};r.mehd={};r.mehd.encode=function(e,n,i){n=n?n.slice(i):new t(4);n.writeUInt32BE(e.fragmentDuration||0,0);r.mehd.encode.bytes=4;return n;};r.mehd.decode=function(e,t){e=e.slice(t);return{fragmentDuration:e.readUInt32BE(0)};};r.mehd.encodingLength=function(e){return 4;};r.trex={};r.trex.encode=function(e,n,i){n=n?n.slice(i):new t(20);n.writeUInt32BE(e.trackId||0,0);n.writeUInt32BE(e.defaultSampleDescriptionIndex||0,4);n.writeUInt32BE(e.defaultSampleDuration||0,8);n.writeUInt32BE(e.defaultSampleSize||0,12);n.writeUInt32BE(e.defaultSampleFlags||0,16);r.trex.encode.bytes=20;return n;};r.trex.decode=function(e,t){e=e.slice(t);return{trackId:e.readUInt32BE(0),defaultSampleDescriptionIndex:e.readUInt32BE(4),defaultSampleDuration:e.readUInt32BE(8),defaultSampleSize:e.readUInt32BE(12),defaultSampleFlags:e.readUInt32BE(16)};};r.trex.encodingLength=function(e){return 20;};r.mfhd={};r.mfhd.encode=function(e,n,i){n=n?n.slice(i):new t(4);n.writeUInt32BE(e.sequenceNumber||0,0);r.mfhd.encode.bytes=4;return n;};r.mfhd.decode=function(e,t){return{sequenceNumber:e.readUint32BE(0)};};r.mfhd.encodingLength=function(e){return 4;};r.tfhd={};r.tfhd.encode=function(e,n,i){n=n?n.slice(i):new t(4);n.writeUInt32BE(e.trackId,0);r.tfhd.encode.bytes=4;return n;};r.tfhd.decode=function(e,t){};r.tfhd.encodingLength=function(e){return 4;};r.tfdt={};r.tfdt.encode=function(e,n,i){n=n?n.slice(i):new t(4);n.writeUInt32BE(e.baseMediaDecodeTime||0,0);r.tfdt.encode.bytes=4;return n;};r.tfdt.decode=function(e,t){};r.tfdt.encodingLength=function(e){return 4;};r.trun={};r.trun.encode=function(e,n,i){n=n?n.slice(i):new t(8+e.entries.length*16);n.writeUInt32BE(e.entries.length,0);n.writeInt32BE(e.dataOffset,4);var o=8;for(var s=0;s<e.entries.length;s++){var a=e.entries[s];n.writeUInt32BE(a.sampleDuration,o);o+=4;n.writeUInt32BE(a.sampleSize,o);o+=4;n.writeUInt32BE(a.sampleFlags,o);o+=4;n.writeUInt32BE(a.sampleCompositionTimeOffset,o);o+=4;}r.trun.encode.bytes=o;};r.trun.decode=function(e,t){};r.trun.encodingLength=function(e){return 8+e.entries.length*16;};r.mdat={};r.mdat.encode=function(e,t,n){if(e.buffer){e.buffer.copy(t,n);r.mdat.encode.bytes=e.buffer.length;}else{r.mdat.encode.bytes=r.mdat.encodingLength(e);}};r.mdat.decode=function(e,r,n){return{buffer:new t(e.slice(r,n))};};r.mdat.encodingLength=function(e){return e.buffer?e.buffer.length:e.contentLength;};function a(e,t,r){for(var n=t;n<r;n++){e[n]=0;}}function u(e,t,r){t.writeUInt32BE(Math.floor((e.getTime()+o)/1e3),r);}function l(e,t,r){t.writeUInt16BE(Math.floor(e)%(256*256),r);t.writeUInt16BE(Math.floor(e*256*256)%(256*256),r+2);}function c(e,t,r){t[r]=Math.floor(e)%256;t[r+1]=Math.floor(e*256)%256;}function f(e,t,r){if(!e)e=[0,0,0,0,0,0,0,0,0];for(var n=0;n<e.length;n++){l(e[n],t,r+n*4);}}function d(e,r,n){var i=new t(e,"utf8");i.copy(r,n);r[n+i.length]=0;}function p(e){var t=new Array(e.length/4);for(var r=0;r<t.length;r++){t[r]=v(e,r*4);}return t;}function h(e,t){return new Date(e.readUInt32BE(t)*1e3-o);}function v(e,t){return e.readUInt16BE(t)+e.readUInt16BE(t+2)/(256*256);}function y(e,t){return e[t]+e[t+1]/256;}function m(e,t,r){var n;for(n=0;n<r;n++){if(e[t+n]===0){break;}}return e.toString("utf8",t,t+n);}}).call(this,e("buffer").Buffer);},{"./descriptor":116,"./index":117,buffer:41}],116:[function(e,t,r){(function(e){var t={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};r.Descriptor={};r.Descriptor.decode=function(n,i,o){var s=n.readUInt8(i);var a=i+1;var u;var l=0;do{u=n.readUInt8(a++);l=l<<7|u&127;}while(u&128);var c;var f=t[s];if(r[f]){c=r[f].decode(n,a,o);}else{c={buffer:new e(n.slice(a,a+l))};}c.tag=s;c.tagName=f;c.length=a-i+l;c.contentsLen=l;return c;};r.DescriptorArray={};r.DescriptorArray.decode=function(e,n,i){var o=n;var s={};while(o+2<=i){var a=r.Descriptor.decode(e,o,i);o+=a.length;var u=t[a.tag]||"Descriptor"+a.tag;s[u]=a;}return s;};r.ESDescriptor={};r.ESDescriptor.decode=function(e,t,n){var i=e.readUInt8(t+2);var o=t+3;if(i&128){o+=2;}if(i&64){var s=e.readUInt8(o);o+=s+1;}if(i&32){o+=2;}return r.DescriptorArray.decode(e,o,n);};r.DecoderConfigDescriptor={};r.DecoderConfigDescriptor.decode=function(e,t,n){var i=e.readUInt8(t);var o=r.DescriptorArray.decode(e,t+13,n);o.oti=i;return o;};}).call(this,e("buffer").Buffer);},{buffer:41}],117:[function(e,t,r){(function(t){var n=e("uint64be");var i=e("./boxes");var o=4294967295;var s=r;var a=r.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","trun","sbgps","sgpds","subss","saizs","saios","tfdt","meta"]};s.encode=function(e,r,n){s.encodingLength(e);n=n||0;r=r||new t(e.length);return s._encode(e,r,n);};s._encode=function(e,t,r){var u=e.type;var l=e.length;if(l>o){l=1;}t.writeUInt32BE(l,r);t.write(e.type,r+4,4,"ascii");var c=r+8;if(l===1){n.encode(e.length,t,c);c+=8;}if(i.fullBoxes[u]){t.writeUInt32BE(e.flags||0,c);t.writeUInt8(e.version||0,c);c+=4;}if(a[u]){var f=a[u];f.forEach(function(r){if(r.length===5){var n=e[r]||[];r=r.substr(0,4);n.forEach(function(e){s._encode(e,t,c);c+=s.encode.bytes;});}else if(e[r]){s._encode(e[r],t,c);c+=s.encode.bytes;}});if(e.otherBoxes){e.otherBoxes.forEach(function(e){s._encode(e,t,c);c+=s.encode.bytes;});}}else if(i[u]){var d=i[u].encode;d(e,t,c);c+=d.bytes;}else if(e.buffer){var p=e.buffer;p.copy(t,c);c+=e.buffer.length;}else{throw new Error("Either `type` must be set to a known type (not'"+u+"') or `buffer` must be set");}s.encode.bytes=c-r;return t;};s.readHeaders=function(e,t,r){t=t||0;r=r||e.length;if(r-t<8){return 8;}var o=e.readUInt32BE(t);var s=e.toString("ascii",t+4,t+8);var a=t+8;if(o===1){if(r-t<16){return 16;}o=n.decode(e,a);a+=8;}var u;var l;if(i.fullBoxes[s]){u=e.readUInt8(a);l=e.readUInt32BE(a)&16777215;a+=4;}return{length:o,headersLen:a-t,contentLen:o-(a-t),type:s,version:u,flags:l};};s.decode=function(e,t,r){t=t||0;r=r||e.length;var n=s.readHeaders(e,t,r);if(!n||n.length>r-t){throw new Error("Data too short");}return s.decodeWithoutHeaders(n,e,t+n.headersLen,t+n.length);};s.decodeWithoutHeaders=function(e,r,n,o){n=n||0;o=o||r.length;var u=e.type;var l={};if(a[u]){l.otherBoxes=[];var c=a[u];var f=n;while(o-f>=8){var d=s.decode(r,f,o);f+=d.length;if(c.indexOf(d.type)>=0){l[d.type]=d;}else if(c.indexOf(d.type+"s")>=0){var p=d.type+"s";var h=l[p]=l[p]||[];h.push(d);}else{l.otherBoxes.push(d);}}}else if(i[u]){var v=i[u].decode;l=v(r,n,o);}else{l.buffer=new t(r.slice(n,o));}l.length=e.length;l.contentLen=e.contentLen;l.type=e.type;l.version=e.version;l.flags=e.flags;return l;};s.encodingLength=function(e){var t=e.type;var r=8;if(i.fullBoxes[t]){r+=4;}if(a[t]){var n=a[t];n.forEach(function(t){if(t.length===5){var n=e[t]||[];t=t.substr(0,4);n.forEach(function(e){e.type=t;r+=s.encodingLength(e);});}else if(e[t]){var i=e[t];i.type=t;r+=s.encodingLength(i);}});if(e.otherBoxes){e.otherBoxes.forEach(function(e){r+=s.encodingLength(e);});}}else if(i[t]){r+=i[t].encodingLength(e);}else if(e.buffer){r+=e.buffer.length;}else{throw new Error("Either `type` must be set to a known type (not'"+t+"') or `buffer` must be set");}if(r>o){r+=8;}e.length=r;return r;};}).call(this,e("buffer").Buffer);},{"./boxes":115,buffer:41,uint64be:233}],118:[function(e,t,r){(function(r){var n=e("readable-stream");var i=e("inherits");var o=e("next-event");var s=e("mp4-box-encoding");var a=new r(0);t.exports=u;function u(){if(!(this instanceof u))return new u();n.Writable.call(this);this.destroyed=false;this._pending=0;this._missing=0;this._buf=null;this._str=null;this._cb=null;this._ondrain=null;this._writeBuffer=null;this._writeCb=null;this._ondrain=null;this._kick();}i(u,n.Writable);u.prototype.destroy=function(e){if(this.destroyed)return;this.destroyed=true;if(e)this.emit("error",e);this.emit("close");};u.prototype._write=function(e,t,r){if(this.destroyed)return;var n=!this._str||!this._str._writableState.needDrain;while(e.length&&!this.destroyed){if(!this._missing){this._writeBuffer=e;this._writeCb=r;return;}var i=e.length<this._missing?e.length:this._missing;if(this._buf)e.copy(this._buf,this._buf.length-this._missing);else if(this._str)n=this._str.write(i===e.length?e:e.slice(0,i));this._missing-=i;if(!this._missing){var o=this._buf;var s=this._cb;var u=this._str;this._buf=this._cb=this._str=this._ondrain=null;n=true;if(u)u.end();if(s)s(o);}e=i===e.length?a:e.slice(i);}if(this._pending&&!this._missing){this._writeBuffer=e;this._writeCb=r;return;}if(n)r();else this._ondrain(r);};u.prototype._buffer=function(e,t){this._missing=e;this._buf=new r(e);this._cb=t;};u.prototype._stream=function(e,t){var r=this;this._missing=e;this._str=new l(this);this._ondrain=o(this._str,"drain");this._pending++;this._str.on("end",function(){r._pending--;r._kick();});this._cb=t;return this._str;};u.prototype._readBox=function(){var e=this;t(8);function t(n,i){e._buffer(n,function(n){if(i){i=r.concat([i,n]);}else{i=n;}var o=s.readHeaders(i);if(typeof o==="number"){t(o-i.length,i);}else{e._pending++;e._headers=o;e.emit("box",o);}});}};u.prototype.stream=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;e._headers=null;return e._stream(t.contentLen,null);};u.prototype.decode=function(e){var t=this;if(!t._headers)throw new Error("this function can only be called once after 'box' is emitted");var r=t._headers;t._headers=null;t._buffer(r.contentLen,function(n){var i=s.decodeWithoutHeaders(r,n);e(i);t._pending--;t._kick();});};u.prototype.ignore=function(){var e=this;if(!e._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=e._headers;e._headers=null;this._missing=t.contentLen;this._cb=function(){e._pending--;e._kick();};};u.prototype._kick=function(){if(this._pending)return;if(!this._buf&&!this._str)this._readBox();if(this._writeBuffer){var e=this._writeCb;var t=this._writeBuffer;this._writeBuffer=null;this._writeCb=null;this._write(t,null,e);}};function l(e){this._parent=e;this.destroyed=false;n.PassThrough.call(this);}i(l,n.PassThrough);l.prototype.destroy=function(e){if(this.destroyed)return;this.destroyed=true;this._parent.destroy(e);if(e)this.emit("error",e);this.emit("close");};}).call(this,e("buffer").Buffer);},{buffer:41,inherits:94,"mp4-box-encoding":117,"next-event":145,"readable-stream":130}],119:[function(e,t,r){(function(r,n){var i=e("readable-stream");var o=e("inherits");var s=e("mp4-box-encoding");t.exports=u;function a(){}function u(){if(!(this instanceof u))return new u();i.Readable.call(this);this.destroyed=false;this._reading=false;this._stream=null;this._drain=null;this._want=false;this._onreadable=t;this._onend=r;var e=this;function t(){if(!e._want)return;e._want=false;e._read();}function r(){e._stream=null;}}o(u,i.Readable);u.prototype.mediaData=u.prototype.mdat=function(e,t){var r=new l(this);this.box({type:"mdat",contentLength:e,encodeBufferLen:8,stream:r},t);return r;};u.prototype.box=function(e,t){if(!t)t=a;if(this.destroyed)return t(new Error("Encoder is destroyed"));var i;if(e.encodeBufferLen){i=new n(e.encodeBufferLen);}if(e.stream){e.buffer=null;i=s.encode(e,i);this.push(i);this._stream=e.stream;this._stream.on("readable",this._onreadable);this._stream.on("end",this._onend);this._stream.on("end",t);this._forward();}else{i=s.encode(e,i);var o=this.push(i);if(o)return r.nextTick(t);this._drain=t;}};u.prototype.destroy=function(e){if(this.destroyed)return;this.destroyed=true;if(this._stream&&this._stream.destroy)this._stream.destroy();this._stream=null;if(this._drain){var t=this._drain;this._drain=null;t(e);}if(e)this.emit("error",e);this.emit("close");};u.prototype.finalize=function(){this.push(null);};u.prototype._forward=function(){if(!this._stream)return;while(!this.destroyed){var e=this._stream.read();if(!e){this._want=!!this._stream;return;}if(!this.push(e))return;}};u.prototype._read=function(){if(this._reading||this.destroyed)return;this._reading=true;if(this._stream)this._forward();if(this._drain){var e=this._drain;this._drain=null;e();}this._reading=false;};function l(e){this._parent=e;this.destroyed=false;i.PassThrough.call(this);}o(l,i.PassThrough);l.prototype.destroy=function(e){if(this.destroyed)return;this.destroyed=true;this._parent.destroy(e);if(e)this.emit("error",e);this.emit("close");};}).call(this,e("_process"),e("buffer").Buffer);},{_process:40,buffer:41,inherits:94,"mp4-box-encoding":117,"readable-stream":130}],120:[function(e,t,r){r.decode=e("./decode");r.encode=e("./encode");},{"./decode":118,"./encode":119}],121:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],122:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":124,"./_stream_writable":126,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],123:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":125,"core-util-is":56,dup:12,inherits:94}],124:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":122,"./internal/streams/BufferList":127,"./internal/streams/destroy":128,"./internal/streams/stream":129,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:121,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":131,util:38}],125:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":122,"core-util-is":56,dup:14,inherits:94}],126:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":122,"./internal/streams/destroy":128,"./internal/streams/stream":129,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],127:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],128:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],129:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],130:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":122,"./lib/_stream_passthrough.js":123,"./lib/_stream_readable.js":124,"./lib/_stream_transform.js":125,"./lib/_stream_writable.js":126,dup:19}],131:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],132:[function(e,t,r){var n=1e3;var i=n*60;var o=i*60;var s=o*24;var a=s*365.25;t.exports=function(e,t){t=t||{};var r=typeof e==="undefined"?"undefined":_typeof(e);if(r==="string"&&e.length>0){return u(e);}else if(r==="number"&&isNaN(e)===false){return t.long?c(e):l(e);}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e));};function u(e){e=String(e);if(e.length>100){return;}var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t){return;}var r=parseFloat(t[1]);var u=(t[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return r*a;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined;}}function l(e){if(e>=s){return Math.round(e/s)+"d";}if(e>=o){return Math.round(e/o)+"h";}if(e>=i){return Math.round(e/i)+"m";}if(e>=n){return Math.round(e/n)+"s";}return e+"ms";}function c(e){return f(e,s,"day")||f(e,o,"hour")||f(e,i,"minute")||f(e,n,"second")||e+" ms";}function f(e,t,r){if(e<t){return;}if(e<t*1.5){return Math.floor(e/t)+" "+r;}return Math.ceil(e/t)+" "+r+"s";}},{}],133:[function(e,t,r){t.exports=o;var n=e("inherits");var i=e("readable-stream");n(o,i.Readable);function o(e,t){var r=this;if(!(r instanceof o))return new o(e,t);i.Readable.call(r,t);r.destroyed=false;r._drained=false;r._forwarding=false;r._current=null;if(typeof e==="function"){r._queue=e;}else{r._queue=e.map(s);r._queue.forEach(function(e){if(typeof e!=="function")r._attachErrorListener(e);});}r._next();}o.obj=function(e){return new o(e,{objectMode:true,highWaterMark:16});};o.prototype._read=function(){this._drained=true;this._forward();};o.prototype._forward=function(){if(this._forwarding||!this._drained||!this._current)return;this._forwarding=true;var e;while((e=this._current.read())!==null){this._drained=this.push(e);}this._forwarding=false;};o.prototype.destroy=function(e){if(this.destroyed)return;this.destroyed=true;if(this._current&&this._current.destroy)this._current.destroy();if(typeof this._queue!=="function"){this._queue.forEach(function(e){if(e.destroy)e.destroy();});}if(e)this.emit("error",e);this.emit("close");};o.prototype._next=function(){var e=this;e._current=null;if(typeof e._queue==="function"){e._queue(function(t,r){if(t)return e.destroy(t);r=s(r);e._attachErrorListener(r);e._gotNextStream(r);});}else{var t=e._queue.shift();if(typeof t==="function"){t=s(t());e._attachErrorListener(t);}e._gotNextStream(t);}};o.prototype._gotNextStream=function(e){var t=this;if(!e){t.push(null);t.destroy();return;}t._current=e;t._forward();e.on("readable",r);e.once("end",i);e.once("close",n);function r(){t._forward();}function n(){if(!e._readableState.ended){t.destroy();}}function i(){t._current=null;e.removeListener("readable",r);e.removeListener("end",i);e.removeListener("close",n);t._next();}};o.prototype._attachErrorListener=function(e){var t=this;if(!e)return;e.once("error",r);function r(n){e.removeListener("error",r);t.destroy(n);}};function s(e){if(!e||typeof e==="function"||e._readableState)return e;var t=new i.Readable().wrap(e);if(e.destroy){t.destroy=e.destroy.bind(e);}return t;}},{inherits:94,"readable-stream":143}],134:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],135:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":137,"./_stream_writable":139,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],136:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":138,"core-util-is":56,dup:12,inherits:94}],137:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":135,"./internal/streams/BufferList":140,"./internal/streams/destroy":141,"./internal/streams/stream":142,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:134,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":144,util:38}],138:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":135,"core-util-is":56,dup:14,inherits:94}],139:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":135,"./internal/streams/destroy":141,"./internal/streams/stream":142,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],140:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],141:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],142:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],143:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":135,"./lib/_stream_passthrough.js":136,"./lib/_stream_readable.js":137,"./lib/_stream_transform.js":138,"./lib/_stream_writable.js":139,dup:19}],144:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],145:[function(e,t,r){t.exports=n;function n(e,t){var r=null;e.on(t,function(e){if(!r)return;var t=r;r=null;t(e);});return function(e){r=e;};}},{}],146:[function(e,t,r){var n=e("wrappy");t.exports=n(i);t.exports.strict=n(o);i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function value(){return i(this);},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function value(){return o(this);},configurable:true});});function i(e){var t=function t(){if(t.called)return t.value;t.called=true;return t.value=e.apply(this,arguments);};t.called=false;return t;}function o(e){var t=function t(){if(t.called)throw new Error(t.onceError);t.called=true;return t.value=e.apply(this,arguments);};var r=e.name||"Function wrapped with `once`";t.onceError=r+" shouldn't be called more than once";t.called=false;return t;}},{wrappy:370}],147:[function(e,t,r){var n=e("trim"),i=e("for-each"),o=function o(e){return Object.prototype.toString.call(e)==="[object Array]";};t.exports=function(e){if(!e)return{};var t={};i(n(e).split("\n"),function(e){var r=e.indexOf(":"),i=n(e.slice(0,r)).toLowerCase(),s=n(e.slice(r+1));if(typeof t[i]==="undefined"){t[i]=s;}else if(o(t[i])){t[i].push(s);}else{t[i]=[t[i],s];}});return t;};},{"for-each":87,trim:230}],148:[function(e,t,r){(function(r){t.exports=a;t.exports.decode=a;t.exports.encode=u;var n=e("bencode");var i=e("path");var o=e("simple-sha1");var s=e("uniq");function a(e){if(r.isBuffer(e)){e=n.decode(e);}f(e.info,"info");f(e.info["name.utf-8"]||e.info.name,"info.name");f(e.info["piece length"],"info['piece length']");f(e.info.pieces,"info.pieces");if(e.info.files){e.info.files.forEach(function(e){f(typeof e.length==="number","info.files[0].length");f(e["path.utf-8"]||e.path,"info.files[0].path");});}else{f(typeof e.info.length==="number","info.length");}var t={};t.info=e.info;t.infoBuffer=n.encode(e.info);t.infoHash=o.sync(t.infoBuffer);t.infoHashBuffer=r.from(t.infoHash,"hex");t.name=(e.info["name.utf-8"]||e.info.name).toString();if(e.info.private!==undefined)t.private=!!e.info.private;if(e["creation date"])t.created=new Date(e["creation date"]*1e3);if(e["created by"])t.createdBy=e["created by"].toString();if(r.isBuffer(e.comment))t.comment=e.comment.toString();t.announce=[];if(e["announce-list"]&&e["announce-list"].length){e["announce-list"].forEach(function(e){e.forEach(function(e){t.announce.push(e.toString());});});}else if(e.announce){t.announce.push(e.announce.toString());}if(r.isBuffer(e["url-list"])){e["url-list"]=e["url-list"].length>0?[e["url-list"]]:[];}t.urlList=(e["url-list"]||[]).map(function(e){return e.toString();});s(t.announce);s(t.urlList);var a=e.info.files||[e.info];t.files=a.map(function(e,r){var n=[].concat(t.name,e["path.utf-8"]||e.path||[]).map(function(e){return e.toString();});return{path:i.join.apply(null,[i.sep].concat(n)).slice(1),name:n[n.length-1],length:e.length,offset:a.slice(0,r).reduce(l,0)};});t.length=a.reduce(l,0);var u=t.files[t.files.length-1];t.pieceLength=e.info["piece length"];t.lastPieceLength=(u.offset+u.length)%t.pieceLength||t.pieceLength;t.pieces=c(e.info.pieces);return t;}function u(e){var t={info:e.info};t["announce-list"]=(e.announce||[]).map(function(e){if(!t.announce)t.announce=e;e=r.from(e,"utf8");return[e];});t["url-list"]=e.urlList||[];if(e.created){t["creation date"]=e.created.getTime()/1e3|0;}if(e.createdBy){t["created by"]=e.createdBy;}if(e.comment){t.comment=e.comment;}return n.encode(t);}function l(e,t){return e+t.length;}function c(e){var t=[];for(var r=0;r<e.length;r+=20){t.push(e.slice(r,r+20).toString("hex"));}return t;}function f(e,t){if(!e)throw new Error("Torrent is missing required field: "+t);}}).call(this,e("buffer").Buffer);},{bencode:6,buffer:41,path:150,"simple-sha1":193,uniq:234}],149:[function(e,t,r){(function(r,n){t.exports=l;t.exports.remote=c;var i=e("blob-to-buffer");var o=e("fs");var s=e("simple-get");var a=e("magnet-uri");var u=e("parse-torrent-file");t.exports.toMagnetURI=a.encode;t.exports.toTorrentFile=u.encode;function l(e){if(typeof e==="string"&&/^(stream-)?magnet:/.test(e)){return a(e);}else if(typeof e==="string"&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e))){return a("magnet:?xt=urn:btih:"+e);}else if(n.isBuffer(e)&&e.length===20){return a("magnet:?xt=urn:btih:"+e.toString("hex"));}else if(n.isBuffer(e)){return u(e);}else if(e&&e.infoHash){if(!e.announce)e.announce=[];if(typeof e.announce==="string"){e.announce=[e.announce];}if(!e.urlList)e.urlList=[];return e;}else{throw new Error("Invalid torrent identifier");}}function c(e,t){var n;if(typeof t!=="function")throw new Error("second argument must be a Function");try{n=l(e);}catch(e){}if(n&&n.infoHash){r.nextTick(function(){t(null,n);});}else if(f(e)){i(e,function(e,r){if(e)return t(new Error("Error converting Blob: "+e.message));a(r);});}else if(typeof s==="function"&&/^https?:/.test(e)){s.concat({url:e,timeout:30*1e3,headers:{"user-agent":"WebTorrent (http://webtorrent.io)"}},function(e,r,n){if(e)return t(new Error("Error downloading torrent: "+e.message));a(n);});}else if(typeof o.readFile==="function"&&typeof e==="string"){o.readFile(e,function(e,r){if(e)return t(new Error("Invalid torrent identifier"));a(r);});}else{r.nextTick(function(){t(new Error("Invalid torrent identifier"));});}function a(e){try{n=l(e);}catch(e){return t(e);}if(n&&n.infoHash)t(null,n);else t(new Error("Invalid torrent identifier"));}}function f(e){return typeof Blob!=="undefined"&&e instanceof Blob;}(function(){n.alloc(0);})();}).call(this,e("_process"),e("buffer").Buffer);},{_process:40,"blob-to-buffer":25,buffer:41,fs:39,"magnet-uri":101,"parse-torrent-file":148,"simple-get":180}],150:[function(e,t,r){(function(e){function t(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1);}else if(i===".."){e.splice(n,1);r++;}else if(r){e.splice(n,1);r--;}}if(t){for(;r--;r){e.unshift("..");}}return e;}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var i=function i(e){return n.exec(e).slice(1);};r.resolve=function(){var r="",n=false;for(var i=arguments.length-1;i>=-1&&!n;i--){var s=i>=0?arguments[i]:e.cwd();if(typeof s!=="string"){throw new TypeError("Arguments to path.resolve must be strings");}else if(!s){continue;}r=s+"/"+r;n=s.charAt(0)==="/";}r=t(o(r.split("/"),function(e){return!!e;}),!n).join("/");return(n?"/":"")+r||".";};r.normalize=function(e){var n=r.isAbsolute(e),i=s(e,-1)==="/";e=t(o(e.split("/"),function(e){return!!e;}),!n).join("/");if(!e&&!n){e=".";}if(e&&i){e+="/";}return(n?"/":"")+e;};r.isAbsolute=function(e){return e.charAt(0)==="/";};r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(o(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings");}return e;}).join("/"));};r.relative=function(e,t){e=r.resolve(e).substr(1);t=r.resolve(t).substr(1);function n(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break;}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break;}if(t>r)return[];return e.slice(t,r-t+1);}var i=n(e.split("/"));var o=n(t.split("/"));var s=Math.min(i.length,o.length);var a=s;for(var u=0;u<s;u++){if(i[u]!==o[u]){a=u;break;}}var l=[];for(var u=a;u<i.length;u++){l.push("..");}l=l.concat(o.slice(a));return l.join("/");};r.sep="/";r.delimiter=":";r.dirname=function(e){var t=i(e),r=t[0],n=t[1];if(!r&&!n){return".";}if(n){n=n.substr(0,n.length-1);}return r+n;};r.basename=function(e,t){var r=i(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length);}return r;};r.extname=function(e){return i(e)[3];};function o(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n]);}return r;}var s="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r);}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r);};}).call(this,e("_process"));},{_process:40}],151:[function(e,t,r){var n=e("closest-to");var i=Math.pow(2,10);var o=13,s=[];while(o++<22){s.push(Math.pow(2,o));}t.exports=function(e){return n(e/i,s);};},{"closest-to":55}],152:[function(e,t,r){(function(e){"use strict";if(!e.version||e.version.indexOf("v0.")===0||e.version.indexOf("v1.")===0&&e.version.indexOf("v1.8.")!==0){t.exports=r;}else{t.exports=e.nextTick;}function r(t,r,n,i){if(typeof t!=="function"){throw new TypeError('"callback" argument must be a function');}var o=arguments.length;var s,a;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function e(){t.call(null,r);});case 3:return e.nextTick(function e(){t.call(null,r,n);});case 4:return e.nextTick(function e(){t.call(null,r,n,i);});default:s=new Array(o-1);a=0;while(a<s.length){s[a++]=arguments[a];}return e.nextTick(function e(){t.apply(null,s);});}}}).call(this,e("_process"));},{_process:40}],153:[function(e,t,r){var n=e("once");var i=e("end-of-stream");var o=e("fs");var s=function s(){};var a=function a(e){return typeof e==="function";};var u=function u(e){if(!o)return false;return(e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&a(e.close);};var l=function l(e){return e.setHeader&&a(e.abort);};var c=function c(e,t,r,o){o=n(o);var s=false;e.on("close",function(){s=true;});i(e,{readable:t,writable:r},function(e){if(e)return o(e);s=true;o();});var c=false;return function(t){if(s)return;if(c)return;c=true;if(u(e))return e.close();if(l(e))return e.abort();if(a(e.destroy))return e.destroy();o(t||new Error("stream was destroyed"));};};var f=function f(e){e();};var d=function d(e,t){return e.pipe(t);};var p=function p(){var e=Array.prototype.slice.call(arguments);var t=a(e[e.length-1]||s)&&e.pop()||s;if(Array.isArray(e[0]))e=e[0];if(e.length<2)throw new Error("pump requires two streams per minimum");var r;var n=e.map(function(i,o){var s=o<e.length-1;var a=o>0;return c(i,s,a,function(e){if(!r)r=e;if(e)n.forEach(f);if(s)return;n.forEach(f);t(r);});});return e.reduce(d);};t.exports=p;},{"end-of-stream":72,fs:38,once:146}],154:[function(e,t,r){(function(e){(function(n){var i=(typeof r==="undefined"?"undefined":_typeof(r))=="object"&&r&&!r.nodeType&&r;var o=(typeof t==="undefined"?"undefined":_typeof(t))=="object"&&t&&!t.nodeType&&t;var s=(typeof e==="undefined"?"undefined":_typeof(e))=="object"&&e;if(s.global===s||s.window===s||s.self===s){n=s;}var a,u=2147483647,l=36,c=1,f=26,d=38,p=700,h=72,v=128,y="-",m=/^xn--/,g=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-c,T=Math.floor,j=String.fromCharCode,k;function E(e){throw new RangeError(b[e]);}function C(e,t){var r=e.length;var n=[];while(r--){n[r]=t(e[r]);}return n;}function x(e,t){var r=e.split("@");var n="";if(r.length>1){n=r[0]+"@";e=r[1];}e=e.replace(_,".");var i=e.split(".");var o=C(i,t).join(".");return n+o;}function S(e){var t=[],r=0,n=e.length,i,o;while(r<n){i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){o=e.charCodeAt(r++);if((o&64512)==56320){t.push(((i&1023)<<10)+(o&1023)+65536);}else{t.push(i);r--;}}else{t.push(i);}}return t;}function O(e){return C(e,function(e){var t="";if(e>65535){e-=65536;t+=j(e>>>10&1023|55296);e=56320|e&1023;}t+=j(e);return t;}).join("");}function P(e){if(e-48<10){return e-22;}if(e-65<26){return e-65;}if(e-97<26){return e-97;}return l;}function A(e,t){return e+22+75*(e<26)-((t!=0)<<5);}function M(e,t,r){var n=0;e=r?T(e/p):e>>1;e+=T(e/t);for(;e>w*f>>1;n+=l){e=T(e/w);}return T(n+(w+1)*e/(e+d));}function I(e){var t=[],r=e.length,n,i=0,o=v,s=h,a,d,p,m,g,_,b,w,j;a=e.lastIndexOf(y);if(a<0){a=0;}for(d=0;d<a;++d){if(e.charCodeAt(d)>=128){E("not-basic");}t.push(e.charCodeAt(d));}for(p=a>0?a+1:0;p<r;){for(m=i,g=1,_=l;;_+=l){if(p>=r){E("invalid-input");}b=P(e.charCodeAt(p++));if(b>=l||b>T((u-i)/g)){E("overflow");}i+=b*g;w=_<=s?c:_>=s+f?f:_-s;if(b<w){break;}j=l-w;if(g>T(u/j)){E("overflow");}g*=j;}n=t.length+1;s=M(i-m,n,m==0);if(T(i/n)>u-o){E("overflow");}o+=T(i/n);i%=n;t.splice(i++,0,o);}return O(t);}function L(e){var t,r,n,i,o,s,a,d,p,m,g,_=[],b,w,k,C;e=S(e);b=e.length;t=v;r=0;o=h;for(s=0;s<b;++s){g=e[s];if(g<128){_.push(j(g));}}n=i=_.length;if(i){_.push(y);}while(n<b){for(a=u,s=0;s<b;++s){g=e[s];if(g>=t&&g<a){a=g;}}w=n+1;if(a-t>T((u-r)/w)){E("overflow");}r+=(a-t)*w;t=a;for(s=0;s<b;++s){g=e[s];if(g<t&&++r>u){E("overflow");}if(g==t){for(d=r,p=l;;p+=l){m=p<=o?c:p>=o+f?f:p-o;if(d<m){break;}C=d-m;k=l-m;_.push(j(A(m+C%k,0)));d=T(C/k);}_.push(j(A(d,0)));o=M(r,w,n==i);r=0;++n;}}++r;++t;}return _.join("");}function R(e){return x(e,function(e){return m.test(e)?I(e.slice(4).toLowerCase()):e;});}function B(e){return x(e,function(e){return g.test(e)?"xn--"+L(e):e;});}a={version:"1.4.1",ucs2:{decode:S,encode:O},decode:I,encode:L,toASCII:B,toUnicode:R};if(typeof define=="function"&&_typeof(define.amd)=="object"&&define.amd){define("punycode",function(){return a;});}else if(i&&o){if(t.exports==i){o.exports=a;}else{for(k in a){a.hasOwnProperty(k)&&(i[k]=a[k]);}}}else{n.punycode=a;}})(this);}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],155:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t);}t.exports=function(e,t,r,o){t=t||"&";r=r||"=";var s={};if(typeof e!=="string"||e.length===0){return s;}var a=/\+/g;e=e.split(t);var u=1e3;if(o&&typeof o.maxKeys==="number"){u=o.maxKeys;}var l=e.length;if(u>0&&l>u){l=u;}for(var c=0;c<l;++c){var f=e[c].replace(a,"%20"),d=f.indexOf(r),p,h,v,y;if(d>=0){p=f.substr(0,d);h=f.substr(d+1);}else{p=f;h="";}v=decodeURIComponent(p);y=decodeURIComponent(h);if(!n(s,v)){s[v]=y;}else if(i(s[v])){s[v].push(y);}else{s[v]=[s[v],y];}}return s;};var i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]";};},{}],156:[function(e,t,r){"use strict";var n=function n(e){switch(typeof e==="undefined"?"undefined":_typeof(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return"";}};t.exports=function(e,t,r,a){t=t||"&";r=r||"=";if(e===null){e=undefined;}if((typeof e==="undefined"?"undefined":_typeof(e))==="object"){return o(s(e),function(s){var a=encodeURIComponent(n(s))+r;if(i(e[s])){return o(e[s],function(e){return a+encodeURIComponent(n(e));}).join(t);}else{return a+encodeURIComponent(n(e[s]));}}).join(t);}if(!a)return"";return encodeURIComponent(n(a))+r+encodeURIComponent(n(e));};var i=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]";};function o(e,t){if(e.map)return e.map(t);var r=[];for(var n=0;n<e.length;n++){r.push(t(e[n],n));}return r;}var s=Object.keys||function(e){var t=[];for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t.push(r);}return t;};},{}],157:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode");r.encode=r.stringify=e("./encode");},{"./decode":155,"./encode":156}],158:[function(e,t,r){var n=function n(e){var t=0;return function(){if(t===e.length)return null;var r=e.length-t;var n=Math.random()*r|0;var i=e[t+n];var o=e[t];e[t]=i;e[t+n]=o;t++;return i;};};t.exports=n;},{}],159:[function(e,t,r){(function(r,n){"use strict";function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}var o=e("safe-buffer").Buffer;var s=n.crypto||n.msCrypto;if(s&&s.getRandomValues){t.exports=a;}else{t.exports=i;}function a(e,t){if(e>65536)throw new Error("requested too many random bytes");var i=new n.Uint8Array(e);if(e>0){s.getRandomValues(i);}var a=o.from(i.buffer);if(typeof t==="function"){return r.nextTick(function(){t(null,a);});}return a;}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{_process:40,"safe-buffer":177}],160:[function(e,t,r){var n=e("inherits");var i=e("readable-stream");t.exports=o;n(o,i.Writable);function o(e,t){var r=this;if(!(r instanceof o))return new o(e);i.Writable.call(r,t);r.destroyed=false;r._queue=[];r._position=e||0;r._cb=null;r._buffer=null;r._out=null;}o.prototype._write=function(e,t,r){var n=this;var i=true;while(true){if(n.destroyed){return;}if(n._queue.length===0){n._buffer=e;n._cb=r;return;}n._buffer=null;var o=n._queue[0];var s=Math.max(o.start-n._position,0);var a=o.end-n._position;if(s>=e.length){n._position+=e.length;return r(null);}var u;if(a>e.length){n._position+=e.length;if(s===0){u=e;}else{u=e.slice(s);}i=o.stream.write(u)&&i;break;}n._position+=a;if(s===0&&a===e.length){u=e;}else{u=e.slice(s,a);}i=o.stream.write(u)&&i;if(o.last){o.stream.end();}e=e.slice(a);n._queue.shift();}if(i){r(null);}else{o.stream.once("drain",r.bind(null,null));}};o.prototype.slice=function(e){var t=this;if(t.destroyed)return null;if(!(e instanceof Array)){e=[e];}var r=new i.PassThrough();e.forEach(function(n,i){t._queue.push({start:n.start,end:n.end,stream:r,last:i===e.length-1});});if(t._buffer){t._write(t._buffer,null,t._cb);}return r;};o.prototype.destroy=function(e){var t=this;if(t.destroyed)return;t.destroyed=true;if(e)t.emit("error",e);};},{inherits:94,"readable-stream":170}],161:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],162:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":164,"./_stream_writable":166,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],163:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":165,"core-util-is":56,dup:12,inherits:94}],164:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":162,"./internal/streams/BufferList":167,"./internal/streams/destroy":168,"./internal/streams/stream":169,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:161,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":171,util:38}],165:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":162,"core-util-is":56,dup:14,inherits:94}],166:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":162,"./internal/streams/destroy":168,"./internal/streams/stream":169,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],167:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],168:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],169:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],170:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":162,"./lib/_stream_passthrough.js":163,"./lib/_stream_readable.js":164,"./lib/_stream_transform.js":165,"./lib/_stream_writable.js":166,dup:19}],171:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],172:[function(e,t,r){r.render=g;r.append=_;r.mime=e("./lib/mime.json");var n=e("debug")("render-media");var i=e("is-ascii");var o=e("mediasource");var s=e("path");var a=e("stream-to-blob-url");var u=e("videostream");var l=[".m4a",".m4v",".mp4"];var c=[".m4v",".mkv",".mp4",".webm"];var f=[".m4a",".mp3"];var d=[].concat(c,f);var p=[".aac",".oga",".ogg",".wav"];var h=[".bmp",".gif",".jpeg",".jpg",".png",".svg"];var v=[".css",".html",".js",".md",".pdf",".txt"];var y=200*1e3*1e3;var m=typeof window!=="undefined"&&window.MediaSource;function g(e,t,r,n){if(typeof r==="function"){n=r;r={};}if(!r)r={};if(!n)n=function n(){};T(e);k(r);if(typeof t==="string")t=document.querySelector(t);b(e,function(r){if(t.nodeName!==r.toUpperCase()){var n=s.extname(e.name).toLowerCase();throw new Error('Cannot render "'+n+'" inside a "'+t.nodeName.toLowerCase()+'" element, expected "'+r+'"');}return t;},r,n);}function _(e,t,r,n){if(typeof r==="function"){n=r;r={};}if(!r)r={};if(!n)n=function n(){};T(e);k(r);if(typeof t==="string")t=document.querySelector(t);if(t&&(t.nodeName==="VIDEO"||t.nodeName==="AUDIO")){throw new Error("Invalid video/audio node argument. Argument must be root element that "+"video/audio tag will be appended to.");}b(e,i,r,a);function i(e){if(e==="video"||e==="audio")return o(e);else return s(e);}function o(e){var n=s(e);if(r.controls)n.controls=true;if(r.autoplay)n.autoplay=true;t.appendChild(n);return n;}function s(e){var r=document.createElement(e);t.appendChild(r);return r;}function a(e,t){if(e&&t)t.remove();n(e,t);}}function b(e,t,r,a){var f=s.extname(e.name).toLowerCase();var y=0;var g;if(d.indexOf(f)>=0){_();}else if(p.indexOf(f)>=0){b();}else if(h.indexOf(f)>=0){E();}else if(v.indexOf(f)>=0){C();}else{x();}function _(){var i=c.indexOf(f)>=0?"video":"audio";if(m){if(l.indexOf(f)>=0){s();}else{a();}}else{d();}function s(){n("Use `videostream` package for "+e.name);v();g.addEventListener("error",p);g.addEventListener("loadstart",T);g.addEventListener("canplay",k);u(e,g);}function a(){n("Use MediaSource API for "+e.name);v();g.addEventListener("error",h);g.addEventListener("loadstart",T);g.addEventListener("canplay",k);var t=new o(g);var r=t.createWriteStream(j(e.name));e.createReadStream().pipe(r);if(y)g.currentTime=y;}function d(){n("Use Blob URL for "+e.name);v();g.addEventListener("error",S);g.addEventListener("loadstart",T);g.addEventListener("canplay",k);w(e,function(e,t){if(e)return S(e);g.src=t;if(y)g.currentTime=y;});}function p(e){n("videostream error: fallback to MediaSource API: %o",e.message||e);g.removeEventListener("error",p);g.removeEventListener("canplay",k);a();}function h(t){n("MediaSource API error: fallback to Blob URL: %o",t.message||t);if(typeof e.length==="number"&&e.length>r.maxBlobLength){n("File length too large for Blob URL approach: %d (max: %d)",e.length,r.maxBlobLength);return S(new Error("File length too large for Blob URL approach: "+e.length+" (max: "+r.maxBlobLength+")"));}g.removeEventListener("error",h);g.removeEventListener("canplay",k);d();}function v(){if(!g){g=t(i);g.addEventListener("progress",function(){y=g.currentTime;});}}}function b(){g=t("audio");w(e,function(e,t){if(e)return S(e);g.addEventListener("error",S);g.addEventListener("loadstart",T);g.addEventListener("canplay",k);g.src=t;});}function T(){g.removeEventListener("loadstart",T);if(r.autoplay)g.play();}function k(){g.removeEventListener("canplay",k);a(null,g);}function E(){g=t("img");w(e,function(t,r){if(t)return S(t);g.src=r;g.alt=e.name;a(null,g);});}function C(){g=t("iframe");w(e,function(e,t){if(e)return S(e);g.src=t;if(f!==".pdf")g.sandbox="allow-forms allow-scripts";a(null,g);});}function x(){n('Unknown file extension "%s" - will attempt to render into iframe',f);var t="";e.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",function(e){t+=e;}).on("end",r).on("error",a);function r(){if(i(t)){n('File extension "%s" appears ascii, so will render.',f);C();}else{n('File extension "%s" appears non-ascii, will not render.',f);a(new Error('Unsupported file type "'+f+'": Cannot append to DOM'));}}}function S(t){t.message='Error rendering file "'+e.name+'": '+t.message;n(t.message);a(t);}}function w(e,t){var n=s.extname(e.name).toLowerCase();a(e.createReadStream(),r.mime[n],t);}function T(e){if(e==null){throw new Error("file cannot be null or undefined");}if(typeof e.name!=="string"){throw new Error("missing or invalid file.name property");}if(typeof e.createReadStream!=="function"){throw new Error("missing or invalid file.createReadStream property");}}function j(e){var t=s.extname(e).toLowerCase();return{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[t];}function k(e){if(e.autoplay==null)e.autoplay=true;if(e.controls==null)e.controls=true;if(e.maxBlobLength==null)e.maxBlobLength=y;}},{"./lib/mime.json":173,debug:69,"is-ascii":95,mediasource:102,path:150,"stream-to-blob-url":222,videostream:350}],173:[function(e,t,r){t.exports={".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/mp4",".m4v":"video/mp4",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"};},{}],174:[function(e,t,r){(function(e){t.exports=function(t,r,n){if(typeof r!=="number")throw new Error("second argument must be a Number");var i,o,s,a,u;var l=true;if(Array.isArray(t)){i=[];s=o=t.length;}else{a=Object.keys(t);i={};s=o=a.length;}function c(t){function r(){if(n)n(t,i);n=null;}if(l)e.nextTick(r);else r();}function f(e,r,n){i[e]=n;if(r)u=true;if(--s===0||r){c(r);}else if(!u&&d<o){var l;if(a){l=a[d];d+=1;t[l](function(e,t){f(l,e,t);});}else{l=d;d+=1;t[l](function(e,t){f(l,e,t);});}}}var d=r;if(!s){c(null);}else if(a){a.some(function(e,n){t[e](function(t,r){f(e,t,r);});if(n===r-1)return true;});}else{t.some(function(e,t){e(function(e,r){f(t,e,r);});if(t===r-1)return true;});}l=false;};}).call(this,e("_process"));},{_process:40}],175:[function(e,t,r){(function(e){t.exports=function(t,r){var n,i,o;var s=true;if(Array.isArray(t)){n=[];i=t.length;}else{o=Object.keys(t);n={};i=o.length;}function a(t){function i(){if(r)r(t,n);r=null;}if(s)e.nextTick(i);else i();}function u(e,t,r){n[e]=r;if(--i===0||t){a(t);}}if(!i){a(null);}else if(o){o.forEach(function(e){t[e](function(t,r){u(e,t,r);});});}else{t.forEach(function(e,t){e(function(e,r){u(t,e,r);});});}s=false;};}).call(this,e("_process"));},{_process:40}],176:[function(e,t,r){(function(e){(function(){var r={getDataType:function getDataType(t){if(typeof t==="string"){return"string";}if(t instanceof Array){return"array";}if(typeof e!=="undefined"&&e.Buffer&&e.Buffer.isBuffer(t)){return"buffer";}if(t instanceof ArrayBuffer){return"arraybuffer";}if(t.buffer instanceof ArrayBuffer){return"view";}if(t instanceof Blob){return"blob";}throw new Error("Unsupported data type.");}};function n(e){"use strict";var t={fill:0};var o=function o(e){for(e+=9;e%64>0;e+=1){}return e;};var s=function s(e,t){var r=new Uint8Array(e.buffer);var n=t%4,i=t-n;switch(n){case 0:r[i+3]=0;case 1:r[i+2]=0;case 2:r[i+1]=0;case 3:r[i+0]=0;}for(var o=(t>>2)+1;o<e.length;o++){e[o]=0;}};var a=function a(e,t,r){e[t>>2]|=128<<24-(t%4<<3);e[((t>>2)+2&~15)+14]=r/(1<<29)|0;e[((t>>2)+2&~15)+15]=r<<3;};var u=function u(e,t,r,n,i){var o=this,s,a=i%4,u=(n+a)%4,l=n-u;switch(a){case 0:e[i]=o.charCodeAt(r+3);case 1:e[i+1-(a<<1)|0]=o.charCodeAt(r+2);case 2:e[i+2-(a<<1)|0]=o.charCodeAt(r+1);case 3:e[i+3-(a<<1)|0]=o.charCodeAt(r);}if(n<u+a){return;}for(s=4-a;s<l;s=s+4|0){t[i+s>>2]=o.charCodeAt(r+s)<<24|o.charCodeAt(r+s+1)<<16|o.charCodeAt(r+s+2)<<8|o.charCodeAt(r+s+3);}switch(u){case 3:e[i+l+1|0]=o.charCodeAt(r+l+2);case 2:e[i+l+2|0]=o.charCodeAt(r+l+1);case 1:e[i+l+3|0]=o.charCodeAt(r+l);}};var l=function l(e,t,r,n,i){var o=this,s,a=i%4,u=(n+a)%4,l=n-u;switch(a){case 0:e[i]=o[r+3];case 1:e[i+1-(a<<1)|0]=o[r+2];case 2:e[i+2-(a<<1)|0]=o[r+1];case 3:e[i+3-(a<<1)|0]=o[r];}if(n<u+a){return;}for(s=4-a;s<l;s=s+4|0){t[i+s>>2|0]=o[r+s]<<24|o[r+s+1]<<16|o[r+s+2]<<8|o[r+s+3];}switch(u){case 3:e[i+l+1|0]=o[r+l+2];case 2:e[i+l+2|0]=o[r+l+1];case 1:e[i+l+3|0]=o[r+l];}};var c=function c(e,t,r,n,o){var s=this,a,u=o%4,l=(n+u)%4,c=n-l;var f=new Uint8Array(i.readAsArrayBuffer(s.slice(r,r+n)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0];}if(n<l+u){return;}for(a=4-u;a<c;a=a+4|0){t[o+a>>2|0]=f[a]<<24|f[a+1]<<16|f[a+2]<<8|f[a+3];}switch(l){case 3:e[o+c+1|0]=f[c+2];case 2:e[o+c+2|0]=f[c+1];case 1:e[o+c+3|0]=f[c];}};var f=function f(e){switch(r.getDataType(e)){case"string":return u.bind(e);case"array":return l.bind(e);case"buffer":return l.bind(e);case"arraybuffer":return l.bind(new Uint8Array(e));case"view":return l.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return c.bind(e);}};var d=function d(e,t){switch(r.getDataType(e)){case"string":return e.slice(t);case"array":return e.slice(t);case"buffer":return e.slice(t);case"arraybuffer":return e.slice(t);case"view":return e.buffer.slice(t);}};var p=new Array(256);for(var h=0;h<256;h++){p[h]=(h<16?"0":"")+h.toString(16);}var v=function v(e){var t=new Uint8Array(e);var r=new Array(e.byteLength);for(var n=0;n<r.length;n++){r[n]=p[t[n]];}return r.join("");};var y=function y(e){var t;if(e<=65536)return 65536;if(e<16777216){for(t=1;t<e;t=t<<1){}}else{for(t=16777216;t<e;t+=16777216){}}return t;};var m=function m(e){if(e%64>0){throw new Error("Chunk size must be a multiple of 128 bit");}t.offset=0;t.maxChunkLen=e;t.padMaxChunkLen=o(e);t.heap=new ArrayBuffer(y(t.padMaxChunkLen+320+20));t.h32=new Int32Array(t.heap);t.h8=new Int8Array(t.heap);t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap);t.buffer=null;};m(e||64*1024);var g=function g(e,r){t.offset=0;var n=new Int32Array(e,r+320,5);n[0]=1732584193;n[1]=-271733879;n[2]=-1732584194;n[3]=271733878;n[4]=-1009589776;};var _=function _(e,r){var n=o(e);var i=new Int32Array(t.heap,0,n>>2);s(i,e);a(i,e,r);return n;};var b=function b(e,r,n,i){f(e)(t.h8,t.h32,r,n,i||0);};var w=function w(e,r,n,i,o){var s=n;b(e,r,n);if(o){s=_(n,i);}t.core.hash(s,t.padMaxChunkLen);};var T=function T(e,t){var r=new Int32Array(e,t+320,5);var n=new Int32Array(5);var i=new DataView(n.buffer);i.setInt32(0,r[0],false);i.setInt32(4,r[1],false);i.setInt32(8,r[2],false);i.setInt32(12,r[3],false);i.setInt32(16,r[4],false);return n;};var j=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;g(t.heap,t.padMaxChunkLen);var n=0,i=t.maxChunkLen;for(n=0;r>n+i;n+=i){w(e,n,i,r,false);}w(e,n,r-n,r,true);return T(t.heap,t.padMaxChunkLen);};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return v(j(e).buffer);};this.resetState=function(){g(t.heap,t.padMaxChunkLen);return this;};this.append=function(e){var r=0;var n=e.byteLength||e.length||e.size||0;var i=t.offset%t.maxChunkLen;var o;t.offset+=n;while(r<n){o=Math.min(n-r,t.maxChunkLen-i);b(e,r,o,i);i+=o;r+=o;if(i===t.maxChunkLen){t.core.hash(t.maxChunkLen,t.padMaxChunkLen);i=0;}}return this;};this.getState=function(){var e=t.offset%t.maxChunkLen;var r;if(!e){var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);r=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);}else{r=t.heap.slice(0);}return{offset:t.offset,heap:r};};this.setState=function(e){t.offset=e.offset;if(e.heap.byteLength===20){var r=new Int32Array(t.heap,t.padMaxChunkLen+320,5);r.set(new Int32Array(e.heap));}else{t.h32.set(new Int32Array(e.heap));}return this;};var k=this.rawEnd=function(){var e=t.offset;var r=e%t.maxChunkLen;var n=_(r,e);t.core.hash(n,t.padMaxChunkLen);var i=T(t.heap,t.padMaxChunkLen);g(t.heap,t.padMaxChunkLen);return i;};this.end=function(){return v(k().buffer);};}n._core=function e(t,r,n){"use asm";var i=new t.Int32Array(n);function o(e,t){e=e|0;t=t|0;var r=0,n=0,o=0,s=0,a=0,u=0,l=0,c=0,f=0,d=0,p=0,h=0,v=0,y=0;o=i[t+320>>2]|0;a=i[t+324>>2]|0;l=i[t+328>>2]|0;f=i[t+332>>2]|0;p=i[t+336>>2]|0;for(r=0;(r|0)<(e|0);r=r+64|0){s=o;u=a;c=l;d=f;h=p;for(n=0;(n|0)<64;n=n+4|0){y=i[r+n>>2]|0;v=((o<<5|o>>>27)+(a&l|~a&f)|0)+((y+p|0)+1518500249|0)|0;p=f;f=l;l=a<<30|a>>>2;a=o;o=v;i[e+n>>2]=y;}for(n=e+64|0;(n|0)<(e+80|0);n=n+4|0){y=(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])<<1|(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])>>>31;v=((o<<5|o>>>27)+(a&l|~a&f)|0)+((y+p|0)+1518500249|0)|0;p=f;f=l;l=a<<30|a>>>2;a=o;o=v;i[n>>2]=y;}for(n=e+80|0;(n|0)<(e+160|0);n=n+4|0){y=(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])<<1|(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])>>>31;v=((o<<5|o>>>27)+(a^l^f)|0)+((y+p|0)+1859775393|0)|0;p=f;f=l;l=a<<30|a>>>2;a=o;o=v;i[n>>2]=y;}for(n=e+160|0;(n|0)<(e+240|0);n=n+4|0){y=(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])<<1|(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])>>>31;v=((o<<5|o>>>27)+(a&l|a&f|l&f)|0)+((y+p|0)-1894007588|0)|0;p=f;f=l;l=a<<30|a>>>2;a=o;o=v;i[n>>2]=y;}for(n=e+240|0;(n|0)<(e+320|0);n=n+4|0){y=(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])<<1|(i[n-12>>2]^i[n-32>>2]^i[n-56>>2]^i[n-64>>2])>>>31;v=((o<<5|o>>>27)+(a^l^f)|0)+((y+p|0)-899497514|0)|0;p=f;f=l;l=a<<30|a>>>2;a=o;o=v;i[n>>2]=y;}o=o+s|0;a=a+u|0;l=l+c|0;f=f+d|0;p=p+h|0;}i[t+320>>2]=o;i[t+324>>2]=a;i[t+328>>2]=l;i[t+332>>2]=f;i[t+336>>2]=p;}return{hash:o};};if(typeof t!=="undefined"){t.exports=n;}else if(typeof window!=="undefined"){window.Rusha=n;}if(typeof FileReaderSync!=="undefined"){var i=new FileReaderSync();var o=function e(t,r,n){try{return n(null,t.digest(r));}catch(e){return n(e);}};var s=function e(t,r,n,i,o){var a=new self.FileReader();a.onloadend=function e(){var u=a.result;r+=a.result.byteLength;try{t.append(u);}catch(e){o(e);return;}if(r<i.size){s(t,r,n,i,o);}else{o(null,t.end());}};a.readAsArrayBuffer(i.slice(r,r+n));};self.onmessage=function e(t){var r=t.data.data,i=t.data.file,a=t.data.id;if(typeof a==="undefined")return;if(!i&&!r)return;var u=t.data.blockSize||4*1024*1024;var l=new n(u);l.resetState();var c=function e(t,r){if(!t){self.postMessage({id:a,hash:r});}else{self.postMessage({id:a,error:t.name});}};if(r)o(l,r,c);if(i)s(l,0,u,i,c);};}})();}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],177:[function(e,t,r){var n=e("buffer");var i=n.Buffer;function o(e,t){for(var r in e){t[r]=e[r];}}if(i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow){t.exports=n;}else{o(n,r);r.Buffer=s;}function s(e,t,r){return i(e,t,r);}o(i,s);s.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number");}return i(e,t,r);};s.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number");}var n=i(e);if(t!==undefined){if(typeof r==="string"){n.fill(t,r);}else{n.fill(t);}}else{n.fill(0);}return n;};s.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number");}return i(e);};s.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number");}return n.SlowBuffer(e);};},{buffer:41}],178:[function(e,t,r){t.exports=n;function n(e,t){var r;var n=null;try{r=JSON.parse(e,t);}catch(e){n=e;}return[n,r];}},{}],179:[function(e,t,r){(function(e){t.exports=function(t,r){var n=[];t.on("data",function(e){n.push(e);});t.once("end",function(){if(r)r(null,e.concat(n));r=null;});t.once("error",function(e){if(r)r(e);r=null;});};}).call(this,e("buffer").Buffer);},{buffer:41}],180:[function(e,t,r){(function(r){t.exports=c;var n=e("simple-concat");var i=e("http");var o=e("https");var s=e("once");var a=e("querystring");var u=e("decompress-response");var l=e("url");function c(e,t){e=typeof e==="string"?{url:e}:Object.assign({},e);e.headers=Object.assign({},e.headers);t=s(t);if(e.url)f(e);if(e.maxRedirects==null)e.maxRedirects=10;var n;if(e.form)n=typeof e.form==="string"?e.form:a.stringify(e.form);if(e.body)n=e.json&&!d(e.body)?JSON.stringify(e.body):e.body;if(e.json)e.headers.accept="application/json";if(e.json&&n)e.headers["content-type"]="application/json";if(e.form)e.headers["content-type"]="application/x-www-form-urlencoded";if(n&&!d(n))e.headers["content-length"]=r.byteLength(n);delete e.body;delete e.form;if(n&&!e.method)e.method="POST";if(e.method)e.method=e.method.toUpperCase();var l=Object.keys(e.headers).some(function(e){return e.toLowerCase()==="accept-encoding";});if(!l)e.headers["accept-encoding"]="gzip, deflate";var p=e.protocol==="https:"?o:i;var h=p.request(e,function(r){if(r.statusCode>=300&&r.statusCode<400&&"location"in r.headers){e.url=r.headers.location;r.resume();if(e.maxRedirects>0){e.maxRedirects-=1;c(e,t);}else{t(new Error("too many redirects"));}return;}var n=typeof u==="function"&&e.method!=="HEAD";t(null,n?u(r):r);});h.on("timeout",function(){h.abort();t(new Error("Request timed out"));});h.on("error",t);if(n&&d(n))n.on("error",t).pipe(h);else h.end(n);return h;}c.concat=function(e,t){return c(e,function(r,i){if(r)return t(r);n(i,function(r,n){if(r)return t(r);if(e.json){try{n=JSON.parse(n.toString());}catch(r){return t(r,i,n);}}t(null,i,n);});});};["get","post","put","patch","head","delete"].forEach(function(e){c[e]=function(t,r){if(typeof t==="string")t={url:t};t.method=e.toUpperCase();return c(t,r);};});function f(e){var t=l.parse(e.url);if(t.hostname)e.hostname=t.hostname;if(t.port)e.port=t.port;if(t.protocol)e.protocol=t.protocol;if(t.auth)e.auth=t.auth;e.path=t.path;delete e.url;}function d(e){return typeof e.pipe==="function";}}).call(this,e("buffer").Buffer);},{buffer:41,"decompress-response":38,http:207,https:91,once:146,querystring:157,"simple-concat":179,url:236}],181:[function(e,t,r){(function(r){t.exports=l;var n=e("debug")("simple-peer");var i=e("get-browser-rtc");var o=e("inherits");var s=e("randombytes");var a=e("readable-stream");var u=64*1024;o(l,a.Duplex);function l(e){var t=this;if(!(t instanceof l))return new l(e);t._id=s(4).toString("hex").slice(0,7);t._debug("new peer %o",e);e=Object.assign({allowHalfOpen:false},e);a.Duplex.call(t,e);t.channelName=e.initiator?e.channelName||s(20).toString("hex"):null;t._isChromium=typeof window!=="undefined"&&!!window.webkitRTCPeerConnection;t.initiator=e.initiator||false;t.channelConfig=e.channelConfig||l.channelConfig;t.config=e.config||l.config;t.constraints=t._transformConstraints(e.constraints||l.constraints);t.offerConstraints=t._transformConstraints(e.offerConstraints||{});t.answerConstraints=t._transformConstraints(e.answerConstraints||{});t.reconnectTimer=e.reconnectTimer||false;t.sdpTransform=e.sdpTransform||function(e){return e;};t.stream=e.stream||false;t.trickle=e.trickle!==undefined?e.trickle:true;t._earlyMessage=null;t.destroyed=false;t.connected=false;t.remoteAddress=undefined;t.remoteFamily=undefined;t.remotePort=undefined;t.localAddress=undefined;t.localPort=undefined;t._wrtc=e.wrtc&&_typeof(e.wrtc)==="object"?e.wrtc:i();if(!t._wrtc){if(typeof window==="undefined"){throw new Error("No WebRTC support: Specify `opts.wrtc` option in this environment");}else{throw new Error("No WebRTC support: Not a supported browser");}}t._pcReady=false;t._channelReady=false;t._iceComplete=false;t._channel=null;t._pendingCandidates=[];t._previousStreams=[];t._chunk=null;t._cb=null;t._interval=null;t._reconnectTimeout=null;t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints);t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates);t._isReactNativeWebrtc=typeof t._pc._peerConnectionId==="number";t._pc.oniceconnectionstatechange=function(){t._onIceStateChange();};t._pc.onicegatheringstatechange=function(){t._onIceStateChange();};t._pc.onsignalingstatechange=function(){t._onSignalingStateChange();};t._pc.onicecandidate=function(e){t._onIceCandidate(e);};if(t.initiator){var r=false;t._pc.onnegotiationneeded=function(){if(!r)t._createOffer();r=true;};t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)});}else{t._pc.ondatachannel=function(e){t._setupData(e);};}if("addTrack"in t._pc){if(t.stream){t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream);});}t._pc.ontrack=function(e){t._onTrack(e);};}else{if(t.stream)t._pc.addStream(t.stream);t._pc.onaddstream=function(e){t._onAddStream(e);};}if(t.initiator&&t._isWrtc){t._pc.onnegotiationneeded();}t._onFinishBound=function(){t._onFinish();};t.once("finish",t._onFinishBound);}l.WEBRTC_SUPPORT=!!i();l.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]};l.constraints={};l.channelConfig={};Object.defineProperty(l.prototype,"bufferSize",{get:function get(){var e=this;return e._channel&&e._channel.bufferedAmount||0;}});l.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress};};l.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if(typeof e==="string"){try{e=JSON.parse(e);}catch(t){e={};}}t._debug("signal()");if(e.candidate){if(t._pc.remoteDescription)t._addIceCandidate(e.candidate);else t._pendingCandidates.push(e.candidate);}if(e.sdp){t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){if(t.destroyed)return;t._pendingCandidates.forEach(function(e){t._addIceCandidate(e);});t._pendingCandidates=[];if(t._pc.remoteDescription.type==="offer")t._createAnswer();},function(e){t._destroy(e);});}if(!e.sdp&&!e.candidate){t._destroy(new Error("signal() called with invalid signal data"));}};l.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),c,function(e){t._destroy(e);});}catch(e){t._destroy(new Error("error adding candidate: "+e.message));}};l.prototype.send=function(e){var t=this;if(t._isWrtc&&r.isBuffer(e)){e=new Uint8Array(e);}t._channel.send(e);};l.prototype.destroy=function(e){var t=this;t._destroy(null,e);};l.prototype._destroy=function(e,t){var r=this;if(r.destroyed)return;if(t)r.once("close",t);r._debug("destroy (error: %s)",e&&(e.message||e));r.readable=r.writable=false;if(!r._readableState.ended)r.push(null);if(!r._writableState.finished)r.end();r.destroyed=true;r.connected=false;r._pcReady=false;r._channelReady=false;r._previousStreams=null;r._earlyMessage=null;clearInterval(r._interval);clearTimeout(r._reconnectTimeout);r._interval=null;r._reconnectTimeout=null;r._chunk=null;r._cb=null;if(r._onFinishBound)r.removeListener("finish",r._onFinishBound);r._onFinishBound=null;if(r._pc){try{r._pc.close();}catch(e){}r._pc.oniceconnectionstatechange=null;r._pc.onicegatheringstatechange=null;r._pc.onsignalingstatechange=null;r._pc.onicecandidate=null;if("addTrack"in r._pc){r._pc.ontrack=null;}else{r._pc.onaddstream=null;}r._pc.onnegotiationneeded=null;r._pc.ondatachannel=null;}if(r._channel){try{r._channel.close();}catch(e){}r._channel.onmessage=null;r._channel.onopen=null;r._channel.onclose=null;r._channel.onerror=null;}r._pc=null;r._channel=null;if(e)r.emit("error",e);r.emit("close");};l.prototype._setupData=function(e){var t=this;if(!e.channel){return t._destroy(new Error("Data channel event is missing `channel` property"));}t._channel=e.channel;t._channel.binaryType="arraybuffer";if(typeof t._channel.bufferedAmountLowThreshold==="number"){t._channel.bufferedAmountLowThreshold=u;}t.channelName=t._channel.label;t._channel.onmessage=function(e){if(!t._channelReady){t._earlyMessage=e;t._onChannelOpen();}else{t._onChannelMessage(e);}};t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow();};t._channel.onopen=function(){if(!t._channelReady)t._onChannelOpen();};t._channel.onclose=function(){t._onChannelClose();};t._channel.onerror=function(e){t._destroy(e);};};l.prototype._read=function(){};l.prototype._write=function(e,t,r){var n=this;if(n.destroyed)return r(new Error("cannot write after peer is destroyed"));if(n.connected){try{n.send(e);}catch(e){return n._destroy(e);}if(n._channel.bufferedAmount>u){n._debug("start backpressure: bufferedAmount %d",n._channel.bufferedAmount);n._cb=r;}else{r(null);}}else{n._debug("write before connect");n._chunk=e;n._cb=r;}};l.prototype._onFinish=function(){var e=this;if(e.destroyed)return;if(e.connected){t();}else{e.once("connect",t);}function t(){setTimeout(function(){e._destroy();},1e3);}};l.prototype._createOffer=function(){var e=this;if(e.destroyed)return;e._pc.createOffer(function(t){if(e.destroyed)return;t.sdp=e.sdpTransform(t.sdp);e._pc.setLocalDescription(t,r,n);function r(){if(e.destroyed)return;if(e.trickle||e._iceComplete)i();else e.once("_iceComplete",i);}function n(t){e._destroy(t);}function i(){var r=e._pc.localDescription||t;e._debug("signal");e.emit("signal",{type:r.type,sdp:r.sdp});}},function(t){e._destroy(t);},e.offerConstraints);};l.prototype._createAnswer=function(){var e=this;if(e.destroyed)return;e._pc.createAnswer(function(t){if(e.destroyed)return;t.sdp=e.sdpTransform(t.sdp);e._pc.setLocalDescription(t,r,n);function r(){if(e.destroyed)return;if(e.trickle||e._iceComplete)i();else e.once("_iceComplete",i);}function n(t){e._destroy(t);}function i(){var r=e._pc.localDescription||t;e._debug("signal");e.emit("signal",{type:r.type,sdp:r.sdp});}},function(t){e._destroy(t);},e.answerConstraints);};l.prototype._onIceStateChange=function(){var e=this;if(e.destroyed)return;var t=e._pc.iceConnectionState;var r=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,r);e.emit("iceStateChange",t,r);if(t==="connected"||t==="completed"){clearTimeout(e._reconnectTimeout);e._pcReady=true;e._maybeReady();}if(t==="disconnected"){if(e.reconnectTimer){clearTimeout(e._reconnectTimeout);e._reconnectTimeout=setTimeout(function(){e._destroy();},e.reconnectTimer);}else{e._destroy();}}if(t==="failed"){e._destroy(new Error("Ice connection failed."));}if(t==="closed"){e._destroy();}};l.prototype.getStats=function(e){var t=this;if(t._pc.getStats.length===0){t._pc.getStats().then(function(t){var r=[];t.forEach(function(e){r.push(e);});e(null,r);},function(t){e(t);});}else if(t._isReactNativeWebrtc){t._pc.getStats(null,function(t){var r=[];t.forEach(function(e){r.push(e);});e(null,r);},function(t){e(t);});}else if(t._pc.getStats.length>0){t._pc.getStats(function(t){var r=[];t.result().forEach(function(e){var t={};e.names().forEach(function(r){t[r]=e.stat(r);});t.id=e.id;t.type=e.type;t.timestamp=e.timestamp;r.push(t);});e(null,r);},function(t){e(t);});}else{e(null,[]);}};l.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady);if(e.connected||e._connecting||!e._pcReady||!e._channelReady)return;e._connecting=true;e.getStats(function(t,r){if(e.destroyed)return;if(t)r=[];e._connecting=false;e.connected=true;var n={};var i={};var o={};r.forEach(function(e){if(e.type==="remotecandidate"||e.type==="remote-candidate"){n[e.id]=e;}if(e.type==="localcandidate"||e.type==="local-candidate"){i[e.id]=e;}if(e.type==="candidatepair"||e.type==="candidate-pair"){o[e.id]=e;}});r.forEach(function(e){if(e.type==="transport"){s(o[e.selectedCandidatePairId]);}if(e.type==="googCandidatePair"&&e.googActiveConnection==="true"||(e.type==="candidatepair"||e.type==="candidate-pair")&&e.selected){s(e);}});function s(t){var r=i[t.localCandidateId];if(r&&r.ip){e.localAddress=r.ip;e.localPort=Number(r.port);}else if(r&&r.ipAddress){e.localAddress=r.ipAddress;e.localPort=Number(r.portNumber);}else if(typeof t.googLocalAddress==="string"){r=t.googLocalAddress.split(":");e.localAddress=r[0];e.localPort=Number(r[1]);}var o=n[t.remoteCandidateId];if(o&&o.ip){e.remoteAddress=o.ip;e.remotePort=Number(o.port);}else if(o&&o.ipAddress){e.remoteAddress=o.ipAddress;e.remotePort=Number(o.portNumber);}else if(typeof t.googRemoteAddress==="string"){o=t.googRemoteAddress.split(":");e.remoteAddress=o[0];e.remotePort=Number(o[1]);}e.remoteFamily="IPv4";e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort);}if(e._chunk){try{e.send(e._chunk);}catch(t){return e._destroy(t);}e._chunk=null;e._debug('sent chunk from "write before connect"');var a=e._cb;e._cb=null;a(null);}if(typeof e._channel.bufferedAmountLowThreshold!=="number"){e._interval=setInterval(function(){e._onInterval();},150);if(e._interval.unref)e._interval.unref();}e._debug("connect");e.emit("connect");if(e._earlyMessage){e._onChannelMessage(e._earlyMessage);e._earlyMessage=null;}});};l.prototype._onInterval=function(){if(!this._cb||!this._channel||this._channel.bufferedAmount>u){return;}this._onChannelBufferedAmountLow();};l.prototype._onSignalingStateChange=function(){var e=this;if(e.destroyed)return;e._debug("signalingStateChange %s",e._pc.signalingState);e.emit("signalingStateChange",e._pc.signalingState);};l.prototype._onIceCandidate=function(e){var t=this;if(t.destroyed)return;if(e.candidate&&t.trickle){t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}});}else if(!e.candidate){t._iceComplete=true;t.emit("_iceComplete");}};l.prototype._onChannelMessage=function(e){var t=this;if(t.destroyed)return;var n=e.data;if(n instanceof ArrayBuffer)n=r.from(n);t.push(n);};l.prototype._onChannelBufferedAmountLow=function(){var e=this;if(e.destroyed||!e._cb)return;e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null;t(null);};l.prototype._onChannelOpen=function(){var e=this;if(e.connected||e.destroyed)return;e._debug("on channel open");e._channelReady=true;e._maybeReady();};l.prototype._onChannelClose=function(){var e=this;if(e.destroyed)return;e._debug("on channel close");e._destroy();};l.prototype._onAddStream=function(e){var t=this;if(t.destroyed)return;t._debug("on add stream");t.emit("stream",e.stream);};l.prototype._onTrack=function(e){var t=this;if(t.destroyed)return;t._debug("on track");var r=e.streams[0].id;if(t._previousStreams.indexOf(r)!==-1)return;t._previousStreams.push(r);t.emit("stream",e.streams[0]);};l.prototype._debug=function(){var e=this;var t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0];n.apply(null,t);};l.prototype._transformConstraints=function(e){var t=this;if(Object.keys(e).length===0){return e;}if((e.mandatory||e.optional)&&!t._isChromium){var r=Object.assign({},e.optional,e.mandatory);if(r.OfferToReceiveVideo!==undefined){r.offerToReceiveVideo=r.OfferToReceiveVideo;delete r["OfferToReceiveVideo"];}if(r.OfferToReceiveAudio!==undefined){r.offerToReceiveAudio=r.OfferToReceiveAudio;delete r["OfferToReceiveAudio"];}return r;}else if(!e.mandatory&&!e.optional&&t._isChromium){if(e.offerToReceiveVideo!==undefined){e.OfferToReceiveVideo=e.offerToReceiveVideo;delete e["offerToReceiveVideo"];}if(e.offerToReceiveAudio!==undefined){e.OfferToReceiveAudio=e.offerToReceiveAudio;delete e["offerToReceiveAudio"];}return{mandatory:e};}return e;};function c(){}}).call(this,e("buffer").Buffer);},{buffer:41,debug:69,"get-browser-rtc":88,inherits:94,randombytes:159,"readable-stream":191}],182:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],183:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":185,"./_stream_writable":187,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],184:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":186,"core-util-is":56,dup:12,inherits:94}],185:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":183,"./internal/streams/BufferList":188,"./internal/streams/destroy":189,"./internal/streams/stream":190,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:182,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":192,util:38}],186:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":183,"core-util-is":56,dup:14,inherits:94}],187:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":183,"./internal/streams/destroy":189,"./internal/streams/stream":190,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],188:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],189:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],190:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],191:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":183,"./lib/_stream_passthrough.js":184,"./lib/_stream_readable.js":185,"./lib/_stream_transform.js":186,"./lib/_stream_writable.js":187,dup:19}],192:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],193:[function(e,t,r){var n=e("rusha");var i=new n();var o=typeof window!=="undefined"?window:self;var s=o.crypto||o.msCrypto||{};var a=s.subtle||s.webkitSubtle;function u(e){return i.digest(e);}try{a.digest({name:"sha-1"},new Uint8Array()).catch(function(){a=false;});}catch(e){a=false;}function l(e,t){if(!a){setTimeout(t,0,u(e));return;}if(typeof e==="string"){e=c(e);}a.digest({name:"sha-1"},e).then(function e(r){t(f(new Uint8Array(r)));},function r(n){t(u(e));});}function c(e){var t=e.length;var r=new Uint8Array(t);for(var n=0;n<t;n++){r[n]=e.charCodeAt(n);}return r;}function f(e){var t=e.length;var r=[];for(var n=0;n<t;n++){var i=e[n];r.push((i>>>4).toString(16));r.push((i&15).toString(16));}return r.join("");}t.exports=l;t.exports.sync=u;},{rusha:176}],194:[function(e,t,r){(function(r){t.exports=f;var n=e("safe-buffer").Buffer;var i=e("debug")("simple-websocket");var o=e("inherits");var s=e("randombytes");var a=e("readable-stream");var u=e("ws");var l=typeof u!=="function"?WebSocket:u;var c=64*1024;o(f,a.Duplex);function f(e){var t=this;if(!(t instanceof f))return new f(e);if(!e)e={};if(typeof e==="string"){e={url:e};}if(e.url==null&&e.socket==null){throw new Error("Missing required `url` or `socket` option");}if(e.url!=null&&e.socket!=null){throw new Error("Must specify either `url` or `socket` option, not both");}t._id=s(4).toString("hex").slice(0,7);t._debug("new websocket: %o",e);e=Object.assign({allowHalfOpen:false},e);a.Duplex.call(t,e);t.connected=false;t.destroyed=false;t._chunk=null;t._cb=null;t._interval=null;if(e.socket){t.url=e.socket.url;t._ws=e.socket;}else{t.url=e.url;try{if(typeof u==="function"){t._ws=new l(e.url,e);}else{t._ws=new l(e.url);}}catch(e){r.nextTick(function(){t._destroy(e);});return;}}t._ws.binaryType="arraybuffer";t._ws.onopen=function(){t._onOpen();};t._ws.onmessage=function(e){t._onMessage(e);};t._ws.onclose=function(){t._onClose();};t._ws.onerror=function(){t._destroy(new Error("connection error to "+t.url));};t._onFinishBound=function(){t._onFinish();};t.once("finish",t._onFinishBound);}f.WEBSOCKET_SUPPORT=!!l;f.prototype.send=function(e){this._ws.send(e);};f.prototype.destroy=function(e){this._destroy(null,e);};f.prototype._destroy=function(e,t){var r=this;if(r.destroyed)return;if(t)r.once("close",t);r._debug("destroy (error: %s)",e&&(e.message||e));r.readable=r.writable=false;if(!r._readableState.ended)r.push(null);if(!r._writableState.finished)r.end();r.connected=false;r.destroyed=true;clearInterval(r._interval);r._interval=null;r._chunk=null;r._cb=null;if(r._onFinishBound)r.removeListener("finish",r._onFinishBound);r._onFinishBound=null;if(r._ws){var n=r._ws;var i=function i(){n.onclose=null;};if(n.readyState===l.CLOSED){i();}else{try{n.onclose=i;n.close();}catch(e){i();}}n.onopen=null;n.onmessage=null;n.onerror=null;}r._ws=null;if(e)r.emit("error",e);r.emit("close");};f.prototype._read=function(){};f.prototype._write=function(e,t,r){if(this.destroyed)return r(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e);}catch(e){return this._destroy(e);}if(typeof u!=="function"&&this._ws.bufferedAmount>c){this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount);this._cb=r;}else{r(null);}}else{this._debug("write before connect");this._chunk=e;this._cb=r;}};f.prototype._onFinish=function(){var e=this;if(e.destroyed)return;if(e.connected){t();}else{e.once("connect",t);}function t(){setTimeout(function(){e._destroy();},1e3);}};f.prototype._onMessage=function(e){if(this.destroyed)return;var t=e.data;if(t instanceof ArrayBuffer)t=n.from(t);this.push(t);};f.prototype._onOpen=function(){var e=this;if(e.connected||e.destroyed)return;e.connected=true;if(e._chunk){try{e.send(e._chunk);}catch(t){return e._destroy(t);}e._chunk=null;e._debug('sent chunk from "write before connect"');var t=e._cb;e._cb=null;t(null);}if(typeof u!=="function"){e._interval=setInterval(function(){e._onInterval();},150);if(e._interval.unref)e._interval.unref();}e._debug("connect");e.emit("connect");};f.prototype._onInterval=function(){if(!this._cb||!this._ws||this._ws.bufferedAmount>c){return;}this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);var e=this._cb;this._cb=null;e(null);};f.prototype._onClose=function(){if(this.destroyed)return;this._debug("on close");this._destroy();};f.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0];i.apply(null,e);};}).call(this,e("_process"));},{_process:40,debug:69,inherits:94,randombytes:159,"readable-stream":204,"safe-buffer":177,ws:38}],195:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],196:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":198,"./_stream_writable":200,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],197:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":199,"core-util-is":56,dup:12,inherits:94}],198:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":196,"./internal/streams/BufferList":201,"./internal/streams/destroy":202,"./internal/streams/stream":203,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:195,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":205,util:38}],199:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":196,"core-util-is":56,dup:14,inherits:94}],200:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":196,"./internal/streams/destroy":202,"./internal/streams/stream":203,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],201:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],202:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],203:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],204:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":196,"./lib/_stream_passthrough.js":197,"./lib/_stream_readable.js":198,"./lib/_stream_transform.js":199,"./lib/_stream_writable.js":200,dup:19}],205:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],206:[function(e,t,r){var n=1;var i=65535;var o=4;var s=function s(){n=n+1&i;};var a=setInterval(s,1e3/o|0);if(a.unref)a.unref();t.exports=function(e){var t=o*(e||5);var r=[0];var s=1;var a=n-1&i;return function(e){var u=n-a&i;if(u>t)u=t;a=n;while(u--){if(s===t)s=0;r[s]=r[s===0?t-1:s-1];s++;}if(e)r[s-1]+=e;var l=r[s-1];var c=r.length<t?0:r[s===t?0:s];return r.length<o?l:(l-c)*o/r.length;};};},{}],207:[function(e,t,r){(function(t){var n=e("./lib/request");var i=e("xtend");var o=e("builtin-status-codes");var s=e("url");var a=r;a.request=function(e,r){if(typeof e==="string")e=s.parse(e);else e=i(e);var o=t.location.protocol.search(/^https?:$/)===-1?"http:":"";var a=e.protocol||o;var u=e.hostname||e.host;var l=e.port;var c=e.path||"/";if(u&&u.indexOf(":")!==-1)u="["+u+"]";e.url=(u?a+"//"+u:"")+(l?":"+l:"")+c;e.method=(e.method||"GET").toUpperCase();e.headers=e.headers||{};var f=new n(e);if(r)f.on("response",r);return f;};a.get=function e(t,r){var n=a.request(t,r);n.end();return n;};a.Agent=function(){};a.Agent.defaultMaxSockets=4;a.STATUS_CODES=o;a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./lib/request":209,"builtin-status-codes":42,url:236,xtend:372}],208:[function(e,t,r){(function(e){r.fetch=a(e.fetch)&&a(e.ReadableStream);r.blobConstructor=false;try{new Blob([new ArrayBuffer(1)]);r.blobConstructor=true;}catch(e){}var t;function n(){if(t!==undefined)return t;if(e.XMLHttpRequest){t=new e.XMLHttpRequest();try{t.open("GET",e.XDomainRequest?"/":"https://example.com");}catch(e){t=null;}}else{t=null;}return t;}function i(e){var t=n();if(!t)return false;try{t.responseType=e;return t.responseType===e;}catch(e){}return false;}var o=typeof e.ArrayBuffer!=="undefined";var s=o&&a(e.ArrayBuffer.prototype.slice);r.arraybuffer=r.fetch||o&&i("arraybuffer");r.msstream=!r.fetch&&s&&i("ms-stream");r.mozchunkedarraybuffer=!r.fetch&&o&&i("moz-chunked-arraybuffer");r.overrideMimeType=r.fetch||(n()?a(n().overrideMimeType):false);r.vbArray=a(e.VBArray);function a(e){return typeof e==="function";}t=null;}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],209:[function(e,t,r){(function(r,n,i){var o=e("./capability");var s=e("inherits");var a=e("./response");var u=e("readable-stream");var l=e("to-arraybuffer");var c=a.IncomingMessage;var f=a.readyStates;function d(e,t){if(o.fetch&&t){return"fetch";}else if(o.mozchunkedarraybuffer){return"moz-chunked-arraybuffer";}else if(o.msstream){return"ms-stream";}else if(o.arraybuffer&&e){return"arraybuffer";}else if(o.vbArray&&e){return"text:vbarray";}else{return"text";}}var p=t.exports=function(e){var t=this;u.Writable.call(t);t._opts=e;t._body=[];t._headers={};if(e.auth)t.setHeader("Authorization","Basic "+new i(e.auth).toString("base64"));Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r]);});var r;var n=true;if(e.mode==="disable-fetch"||"timeout"in e){n=false;r=true;}else if(e.mode==="prefer-streaming"){r=false;}else if(e.mode==="allow-wrong-content-type"){r=!o.overrideMimeType;}else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast"){r=true;}else{throw new Error("Invalid value for opts.mode");}t._mode=d(r,n);t.on("finish",function(){t._onFinish();});};s(p,u.Writable);p.prototype.setHeader=function(e,t){var r=this;var n=e.toLowerCase();if(v.indexOf(n)!==-1)return;r._headers[n]={name:e,value:t};};p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];if(t)return t.value;return null;};p.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()];};p.prototype._onFinish=function(){var e=this;if(e._destroyed)return;var t=e._opts;var s=e._headers;var a=null;if(t.method!=="GET"&&t.method!=="HEAD"){if(o.blobConstructor){a=new n.Blob(e._body.map(function(e){return l(e);}),{type:(s["content-type"]||{}).value||""});}else{a=i.concat(e._body).toString();}}var u=[];Object.keys(s).forEach(function(e){var t=s[e].name;var r=s[e].value;if(Array.isArray(r)){r.forEach(function(e){u.push([t,e]);});}else{u.push([t,r]);}});if(e._mode==="fetch"){n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:a||undefined,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t;e._connect();},function(t){e.emit("error",t);});}else{var c=e._xhr=new n.XMLHttpRequest();try{c.open(e._opts.method,e._opts.url,true);}catch(t){r.nextTick(function(){e.emit("error",t);});return;}if("responseType"in c)c.responseType=e._mode.split(":")[0];if("withCredentials"in c)c.withCredentials=!!t.withCredentials;if(e._mode==="text"&&"overrideMimeType"in c)c.overrideMimeType("text/plain; charset=x-user-defined");if("timeout"in t){c.timeout=t.timeout;c.ontimeout=function(){e.emit("timeout");};}u.forEach(function(e){c.setRequestHeader(e[0],e[1]);});e._response=null;c.onreadystatechange=function(){switch(c.readyState){case f.LOADING:case f.DONE:e._onXHRProgress();break;}};if(e._mode==="moz-chunked-arraybuffer"){c.onprogress=function(){e._onXHRProgress();};}c.onerror=function(){if(e._destroyed)return;e.emit("error",new Error("XHR error"));};try{c.send(a);}catch(t){r.nextTick(function(){e.emit("error",t);});return;}}};function h(e){try{var t=e.status;return t!==null&&t!==0;}catch(e){return false;}}p.prototype._onXHRProgress=function(){var e=this;if(!h(e._xhr)||e._destroyed)return;if(!e._response)e._connect();e._response._onXHRProgress();};p.prototype._connect=function(){var e=this;if(e._destroyed)return;e._response=new c(e._xhr,e._fetchResponse,e._mode);e._response.on("error",function(t){e.emit("error",t);});e.emit("response",e._response);};p.prototype._write=function(e,t,r){var n=this;n._body.push(e);r();};p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=true;if(e._response)e._response._destroyed=true;if(e._xhr)e._xhr.abort();};p.prototype.end=function(e,t,r){var n=this;if(typeof e==="function"){r=e;e=undefined;}u.Writable.prototype.end.call(n,e,t,r);};p.prototype.flushHeaders=function(){};p.prototype.setTimeout=function(){};p.prototype.setNoDelay=function(){};p.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer);},{"./capability":208,"./response":210,_process:40,buffer:41,inherits:94,"readable-stream":220,"to-arraybuffer":227}],210:[function(e,t,r){(function(t,n,i){var o=e("./capability");var s=e("inherits");var a=e("readable-stream");var u=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var l=r.IncomingMessage=function(e,r,n){var s=this;a.Readable.call(s);s._mode=n;s.headers={};s.rawHeaders=[];s.trailers={};s.rawTrailers=[];s.on("end",function(){t.nextTick(function(){s.emit("close");});});if(n==="fetch"){var _l=function _l(){u.read().then(function(e){if(s._destroyed)return;if(e.done){s.push(null);return;}s.push(new i(e.value));_l();}).catch(function(e){s.emit("error",e);});};s._fetchResponse=r;s.url=r.url;s.statusCode=r.status;s.statusMessage=r.statusText;r.headers.forEach(function(e,t){s.headers[t.toLowerCase()]=e;s.rawHeaders.push(t,e);});var u=r.body.getReader();_l();}else{s._xhr=e;s._pos=0;s.url=e.responseURL;s.statusCode=e.status;s.statusMessage=e.statusText;var c=e.getAllResponseHeaders().split(/\r?\n/);c.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();if(r==="set-cookie"){if(s.headers[r]===undefined){s.headers[r]=[];}s.headers[r].push(t[2]);}else if(s.headers[r]!==undefined){s.headers[r]+=", "+t[2];}else{s.headers[r]=t[2];}s.rawHeaders.push(t[1],t[2]);}});s._charset="x-user-defined";if(!o.overrideMimeType){var f=s.rawHeaders["mime-type"];if(f){var d=f.match(/;\s*charset=([^;])(;|$)/);if(d){s._charset=d[1].toLowerCase();}}if(!s._charset)s._charset="utf-8";}}};s(l,a.Readable);l.prototype._read=function(){};l.prototype._onXHRProgress=function(){var e=this;var t=e._xhr;var r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new n.VBArray(t.responseBody).toArray();}catch(e){}if(r!==null){e.push(new i(r));break;}case"text":try{r=t.responseText;}catch(t){e._mode="text:vbarray";break;}if(r.length>e._pos){var o=r.substr(e._pos);if(e._charset==="x-user-defined"){var s=new i(o.length);for(var a=0;a<o.length;a++){s[a]=o.charCodeAt(a)&255;}e.push(s);}else{e.push(o,e._charset);}e._pos=r.length;}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response;e.push(new i(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":r=t.response;if(t.readyState!==u.LOADING||!r)break;e.push(new i(new Uint8Array(r)));break;case"ms-stream":r=t.response;if(t.readyState!==u.LOADING)break;var l=new n.MSStreamReader();l.onprogress=function(){if(l.result.byteLength>e._pos){e.push(new i(new Uint8Array(l.result.slice(e._pos))));e._pos=l.result.byteLength;}};l.onload=function(){e.push(null);};l.readAsArrayBuffer(r);break;}if(e._xhr.readyState===u.DONE&&e._mode!=="ms-stream"){e.push(null);}};}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer);},{"./capability":208,_process:40,buffer:41,inherits:94,"readable-stream":220}],211:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],212:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":214,"./_stream_writable":216,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],213:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":215,"core-util-is":56,dup:12,inherits:94}],214:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":212,"./internal/streams/BufferList":217,"./internal/streams/destroy":218,"./internal/streams/stream":219,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:211,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":221,util:38}],215:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":212,"core-util-is":56,dup:14,inherits:94}],216:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":212,"./internal/streams/destroy":218,"./internal/streams/stream":219,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],217:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],218:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],219:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],220:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":212,"./lib/_stream_passthrough.js":213,"./lib/_stream_readable.js":214,"./lib/_stream_transform.js":215,"./lib/_stream_writable.js":216,dup:19}],221:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],222:[function(e,t,r){var n=e("stream-to-blob");t.exports=function e(t,r,i){if(typeof r==="function")return e(t,null,r);n(t,r,function(e,t){if(e)return i(e);var r=URL.createObjectURL(t);i(null,r);});};},{"stream-to-blob":223}],223:[function(e,t,r){var n=e("once");t.exports=function e(t,r,i){if(typeof r==="function")return e(t,null,r);i=n(i);var o=[];t.on("data",function(e){o.push(e);}).on("end",function(){var e=r?new Blob(o,{type:r}):new Blob(o);i(null,e);}).on("error",i);};},{once:146}],224:[function(e,t,r){(function(r){var n=e("once");t.exports=function e(t,i,o){o=n(o);var s=new r(i);var a=0;t.on("data",function(e){e.copy(s,a);a+=e.length;}).on("end",function(){o(null,s);}).on("error",o);};}).call(this,e("buffer").Buffer);},{buffer:41,once:146}],225:[function(e,t,r){var n=e("./thirty-two");r.encode=n.encode;r.decode=n.decode;},{"./thirty-two":226}],226:[function(e,t,r){(function(e){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";var n=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function i(e){var t=Math.floor(e.length/5);return e.length%5===0?t:t+1;}r.encode=function(r){if(!e.isBuffer(r)){r=new e(r);}var n=0;var o=0;var s=0;var a=0;var u=new e(i(r)*8);while(n<r.length){var l=r[n];if(s>3){a=l&255>>s;s=(s+5)%8;a=a<<s|(n+1<r.length?r[n+1]:0)>>8-s;n++;}else{a=l>>8-(s+5)&31;s=(s+5)%8;if(s===0)n++;}u[o]=t.charCodeAt(a);o++;}for(n=o;n<u.length;n++){u[n]=61;}return u;};r.decode=function(t){var r=0;var i=0;var o;var s=0;if(!e.isBuffer(t)){t=new e(t);}var a=new e(Math.ceil(t.length*5/8));for(var u=0;u<t.length;u++){if(t[u]===61){break;}var l=t[u]-48;if(l<n.length){i=n[l];if(r<=3){r=(r+5)%8;if(r===0){o|=i;a[s]=o;s++;o=0;}else{o|=255&i<<8-r;}}else{r=(r+5)%8;o|=255&i>>>r;a[s]=o;s++;o=255&i<<8-r;}}else{throw new Error("Invalid input - it is not base32 encoded string");}}return a.slice(0,s);};}).call(this,e("buffer").Buffer);},{buffer:41}],227:[function(e,t,r){var n=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength){return e.buffer;}else if(typeof e.buffer.slice==="function"){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);}}if(n.isBuffer(e)){var t=new Uint8Array(e.length);var r=e.length;for(var i=0;i<r;i++){t[i]=e[i];}return t.buffer;}else{throw new Error("Argument must be a Buffer");}};},{buffer:41}],228:[function(e,t,r){(function(r){t.exports=c;var n=e("debug")("torrent-discovery");var i=e("bittorrent-dht/client");var o=e("events").EventEmitter;var s=e("xtend");var a=e("inherits");var u=e("run-parallel");var l=e("bittorrent-tracker/client");a(c,o);function c(e){var t=this;if(!(t instanceof c))return new c(e);o.call(t);if(!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!r.browser&&!e.port)throw new Error("Option `port` is required");t.peerId=typeof e.peerId==="string"?e.peerId:e.peerId.toString("hex");t.infoHash=typeof e.infoHash==="string"?e.infoHash:e.infoHash.toString("hex");t._port=e.port;t._userAgent=e.userAgent;t.destroyed=false;t._announce=e.announce||[];t._intervalMs=e.intervalMs||15*60*1e3;t._trackerOpts=null;t._dhtAnnouncing=false;t._dhtTimeout=false;t._internalDHT=false;t._onWarning=function(e){t.emit("warning",e);};t._onError=function(e){t.emit("error",e);};t._onDHTPeer=function(e,r){if(r.toString("hex")!==t.infoHash)return;t.emit("peer",e.host+":"+e.port,"dht");};t._onTrackerPeer=function(e){t.emit("peer",e,"tracker");};t._onTrackerAnnounce=function(){t.emit("trackerAnnounce");};if(e.tracker===false){t.tracker=null;}else if(e.tracker&&_typeof(e.tracker)==="object"){t._trackerOpts=s(e.tracker);t.tracker=t._createTracker();}else{t.tracker=t._createTracker();}if(e.dht===false||typeof i!=="function"){t.dht=null;}else if(e.dht&&typeof e.dht.addNode==="function"){t.dht=e.dht;}else if(e.dht&&_typeof(e.dht)==="object"){t.dht=n(e.dhtPort,e.dht);}else{t.dht=n(e.dhtPort);}if(t.dht){t.dht.on("peer",t._onDHTPeer);t._dhtAnnounce();}function n(e,r){var n=new i(r);n.on("warning",t._onWarning);n.on("error",t._onError);n.listen(e);t._internalDHT=true;return n;}}c.prototype.updatePort=function(e){var t=this;if(e===t._port)return;t._port=e;if(t.dht)t._dhtAnnounce();if(t.tracker){t.tracker.stop();t.tracker.destroy(function(){t.tracker=t._createTracker();});}};c.prototype.complete=function(e){if(this.tracker){this.tracker.complete(e);}};c.prototype.destroy=function(e){var t=this;if(t.destroyed)return;t.destroyed=true;clearTimeout(t._dhtTimeout);var r=[];if(t.tracker){t.tracker.stop();t.tracker.removeListener("warning",t._onWarning);t.tracker.removeListener("error",t._onError);t.tracker.removeListener("peer",t._onTrackerPeer);t.tracker.removeListener("update",t._onTrackerAnnounce);r.push(function(e){t.tracker.destroy(e);});}if(t.dht){t.dht.removeListener("peer",t._onDHTPeer);}if(t._internalDHT){t.dht.removeListener("warning",t._onWarning);t.dht.removeListener("error",t._onError);r.push(function(e){t.dht.destroy(e);});}u(r,e);t.dht=null;t.tracker=null;t._announce=null;};c.prototype._createTracker=function(){var e=s(this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent});var t=new l(e);t.on("warning",this._onWarning);t.on("error",this._onError);t.on("peer",this._onTrackerPeer);t.on("update",this._onTrackerAnnounce);t.setInterval(this._intervalMs);t.start();return t;};c.prototype._dhtAnnounce=function(){var e=this;if(e._dhtAnnouncing)return;n("dht announce");e._dhtAnnouncing=true;clearTimeout(e._dhtTimeout);e.dht.announce(e.infoHash,e._port,function(r){e._dhtAnnouncing=false;n("dht announce complete");if(r)e.emit("warning",r);e.emit("dhtAnnounce");if(!e.destroyed){e._dhtTimeout=setTimeout(function(){e._dhtAnnounce();},t());if(e._dhtTimeout.unref)e._dhtTimeout.unref();}});function t(){return e._intervalMs+Math.floor(Math.random()*e._intervalMs/5);}};}).call(this,e("_process"));},{_process:40,"bittorrent-dht/client":38,"bittorrent-tracker/client":21,debug:69,events:73,inherits:94,"run-parallel":175,xtend:372}],229:[function(e,t,r){(function(e){t.exports=n;var r=1<<14;function n(e){if(!(this instanceof n))return new n(e);this.length=e;this.missing=e;this.sources=null;this._chunks=Math.ceil(e/r);this._remainder=e%r||r;this._buffered=0;this._buffer=null;this._cancellations=null;this._reservations=0;this._flushed=false;}n.BLOCK_LENGTH=r;n.prototype.chunkLength=function(e){return e===this._chunks-1?this._remainder:r;};n.prototype.chunkLengthRemaining=function(e){return this.length-e*r;};n.prototype.chunkOffset=function(e){return e*r;};n.prototype.reserve=function(){if(!this.init())return-1;if(this._cancellations.length)return this._cancellations.pop();if(this._reservations<this._chunks)return this._reservations++;return-1;};n.prototype.reserveRemaining=function(){if(!this.init())return-1;if(this._reservations<this._chunks){var e=this._reservations;this._reservations=this._chunks;return e;}return-1;};n.prototype.cancel=function(e){if(!this.init())return;this._cancellations.push(e);};n.prototype.cancelRemaining=function(e){if(!this.init())return;this._reservations=e;};n.prototype.get=function(e){if(!this.init())return null;return this._buffer[e];};n.prototype.set=function(e,t,n){if(!this.init())return false;var i=t.length;var o=Math.ceil(i/r);for(var s=0;s<o;s++){if(!this._buffer[e+s]){var a=s*r;var u=t.slice(a,a+r);this._buffered++;this._buffer[e+s]=u;this.missing-=u.length;if(this.sources.indexOf(n)===-1){this.sources.push(n);}}}return this._buffered===this._chunks;};n.prototype.flush=function(){if(!this._buffer||this._chunks!==this._buffered)return null;var t=e.concat(this._buffer,this.length);this._buffer=null;this._cancellations=null;this.sources=null;this._flushed=true;return t;};n.prototype.init=function(){if(this._flushed)return false;if(this._buffer)return true;this._buffer=new Array(this._chunks);this._cancellations=[];this.sources=[];return true;};}).call(this,e("buffer").Buffer);},{buffer:41}],230:[function(e,t,r){r=t.exports=n;function n(e){return e.replace(/^\s*|\s*$/g,"");}r.left=function(e){return e.replace(/^\s*/,"");};r.right=function(e){return e.replace(/\s*$/,"");};},{}],231:[function(e,t,r){function n(e){return e.replace(/\n\r?\s*/g,"");}t.exports=function e(t){var r="",i=0;for(;i<arguments.length;i++){r+=n(t[i])+(arguments[i+1]||"");}return r;};},{}],232:[function(e,t,r){(function(r){var n=e("is-typedarray").strict;t.exports=function e(t){if(n(t)){var i=new r(t.buffer);if(t.byteLength!==t.buffer.byteLength){i=i.slice(t.byteOffset,t.byteOffset+t.byteLength);}return i;}else{return new r(t);}};}).call(this,e("buffer").Buffer);},{buffer:41,"is-typedarray":99}],233:[function(e,t,r){(function(e){var t=4294967295;r.encodingLength=function(){return 8;};r.encode=function(r,n,i){if(!n)n=new e(8);if(!i)i=0;var o=Math.floor(r/t);var s=r-o*t;n.writeUInt32BE(o,i);n.writeUInt32BE(s,i+4);return n;};r.decode=function(r,n){if(!n)n=0;if(!r)r=new e(4);if(!n)n=0;var i=r.readUInt32BE(n);var o=r.readUInt32BE(n+4);return i*t+o;};r.encode.bytes=8;r.decode.bytes=8;}).call(this,e("buffer").Buffer);},{buffer:41}],234:[function(e,t,r){"use strict";function n(e,t){var r=1,n=e.length,i=e[0],o=e[0];for(var s=1;s<n;++s){o=i;i=e[s];if(t(i,o)){if(s===r){r++;continue;}e[r++]=i;}}e.length=r;return e;}function i(e){var t=1,r=e.length,n=e[0],i=e[0];for(var o=1;o<r;++o,i=n){i=n;n=e[o];if(n!==i){if(o===t){t++;continue;}e[t++]=n;}}e.length=t;return e;}function o(e,t,r){if(e.length===0){return e;}if(t){if(!r){e.sort(t);}return n(e,t);}if(!r){e.sort();}return i(e);}t.exports=o;},{}],235:[function(e,t,r){t.exports=n;function n(e,t){if(t>=e.length||t<0)return;var r=e.pop();if(t<e.length){var n=e[t];e[t]=r;return n;}return r;}},{}],236:[function(e,t,r){"use strict";var n=e("punycode");var i=e("./util");r.parse=w;r.resolve=j;r.resolveObject=k;r.format=T;r.Url=o;function o(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null;}var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],c=["{","}","|","\\","^","`"].concat(l),f=["'"].concat(c),d=["%","/","?",";","#"].concat(f),p=["/","?","#"],h=255,v=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:true,"javascript:":true},g={javascript:true,"javascript:":true},_={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},b=e("querystring");function w(e,t,r){if(e&&i.isObject(e)&&e instanceof o)return e;var n=new o();n.parse(e,t,r);return n;}o.prototype.parse=function(e,t,r){if(!i.isString(e)){throw new TypeError("Parameter 'url' must be a string, not "+(typeof e==="undefined"?"undefined":_typeof(e)));}var o=e.indexOf("?"),a=o!==-1&&o<e.indexOf("#")?"?":"#",l=e.split(a),c=/\\/g;l[0]=l[0].replace(c,"/");e=l.join(a);var w=e;w=w.trim();if(!r&&e.split("#").length===1){var T=u.exec(w);if(T){this.path=w;this.href=w;this.pathname=T[1];if(T[2]){this.search=T[2];if(t){this.query=b.parse(this.search.substr(1));}else{this.query=this.search.substr(1);}}else if(t){this.search="";this.query={};}return this;}}var j=s.exec(w);if(j){j=j[0];var k=j.toLowerCase();this.protocol=k;w=w.substr(j.length);}if(r||j||w.match(/^\/\/[^@\/]+@[^@\/]+/)){var E=w.substr(0,2)==="//";if(E&&!(j&&g[j])){w=w.substr(2);this.slashes=true;}}if(!g[j]&&(E||j&&!_[j])){var C=-1;for(var x=0;x<p.length;x++){var S=w.indexOf(p[x]);if(S!==-1&&(C===-1||S<C))C=S;}var O,P;if(C===-1){P=w.lastIndexOf("@");}else{P=w.lastIndexOf("@",C);}if(P!==-1){O=w.slice(0,P);w=w.slice(P+1);this.auth=decodeURIComponent(O);}C=-1;for(var x=0;x<d.length;x++){var S=w.indexOf(d[x]);if(S!==-1&&(C===-1||S<C))C=S;}if(C===-1)C=w.length;this.host=w.slice(0,C);w=w.slice(C);this.parseHost();this.hostname=this.hostname||"";var A=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!A){var M=this.hostname.split(/\./);for(var x=0,I=M.length;x<I;x++){var L=M[x];if(!L)continue;if(!L.match(v)){var R="";for(var B=0,D=L.length;B<D;B++){if(L.charCodeAt(B)>127){R+="x";}else{R+=L[B];}}if(!R.match(v)){var N=M.slice(0,x);var F=M.slice(x+1);var U=L.match(y);if(U){N.push(U[1]);F.unshift(U[2]);}if(F.length){w="/"+F.join(".")+w;}this.hostname=N.join(".");break;}}}}if(this.hostname.length>h){this.hostname="";}else{this.hostname=this.hostname.toLowerCase();}if(!A){this.hostname=n.toASCII(this.hostname);}var H=this.port?":"+this.port:"";var V=this.hostname||"";this.host=V+H;this.href+=this.host;if(A){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(w[0]!=="/"){w="/"+w;}}}if(!m[k]){for(var x=0,I=f.length;x<I;x++){var W=f[x];if(w.indexOf(W)===-1)continue;var q=encodeURIComponent(W);if(q===W){q=escape(W);}w=w.split(W).join(q);}}var z=w.indexOf("#");if(z!==-1){this.hash=w.substr(z);w=w.slice(0,z);}var $=w.indexOf("?");if($!==-1){this.search=w.substr($);this.query=w.substr($+1);if(t){this.query=b.parse(this.query);}w=w.slice(0,$);}else if(t){this.search="";this.query={};}if(w)this.pathname=w;if(_[k]&&this.hostname&&!this.pathname){this.pathname="/";}if(this.pathname||this.search){var H=this.pathname||"";var X=this.search||"";this.path=H+X;}this.href=this.format();return this;};function T(e){if(i.isString(e))e=w(e);if(!(e instanceof o))return o.prototype.format.call(e);return e.format();}o.prototype.format=function(){var e=this.auth||"";if(e){e=encodeURIComponent(e);e=e.replace(/%3A/i,":");e+="@";}var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=false,s="";if(this.host){o=e+this.host;}else if(this.hostname){o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){o+=":"+this.port;}}if(this.query&&i.isObject(this.query)&&Object.keys(this.query).length){s=b.stringify(this.query);}var a=this.search||s&&"?"+s||"";if(t&&t.substr(-1)!==":")t+=":";if(this.slashes||(!t||_[t])&&o!==false){o="//"+(o||"");if(r&&r.charAt(0)!=="/")r="/"+r;}else if(!o){o="";}if(n&&n.charAt(0)!=="#")n="#"+n;if(a&&a.charAt(0)!=="?")a="?"+a;r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e);});a=a.replace("#","%23");return t+o+r+a+n;};function j(e,t){return w(e,false,true).resolve(t);}o.prototype.resolve=function(e){return this.resolveObject(w(e,false,true)).format();};function k(e,t){if(!e)return t;return w(e,false,true).resolveObject(t);}o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o();t.parse(e,false,true);e=t;}var r=new o();var n=Object.keys(this);for(var s=0;s<n.length;s++){var a=n[s];r[a]=this[a];}r.hash=e.hash;if(e.href===""){r.href=r.format();return r;}if(e.slashes&&!e.protocol){var u=Object.keys(e);for(var l=0;l<u.length;l++){var c=u[l];if(c!=="protocol")r[c]=e[c];}if(_[r.protocol]&&r.hostname&&!r.pathname){r.path=r.pathname="/";}r.href=r.format();return r;}if(e.protocol&&e.protocol!==r.protocol){if(!_[e.protocol]){var f=Object.keys(e);for(var d=0;d<f.length;d++){var p=f[d];r[p]=e[p];}r.href=r.format();return r;}r.protocol=e.protocol;if(!e.host&&!g[e.protocol]){var h=(e.pathname||"").split("/");while(h.length&&!(e.host=h.shift())){}if(!e.host)e.host="";if(!e.hostname)e.hostname="";if(h[0]!=="")h.unshift("");if(h.length<2)h.unshift("");r.pathname=h.join("/");}else{r.pathname=e.pathname;}r.search=e.search;r.query=e.query;r.host=e.host||"";r.auth=e.auth;r.hostname=e.hostname||e.host;r.port=e.port;if(r.pathname||r.search){var v=r.pathname||"";var y=r.search||"";r.path=v+y;}r.slashes=r.slashes||e.slashes;r.href=r.format();return r;}var m=r.pathname&&r.pathname.charAt(0)==="/",b=e.host||e.pathname&&e.pathname.charAt(0)==="/",w=b||m||r.host&&e.pathname,T=w,j=r.pathname&&r.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],k=r.protocol&&!_[r.protocol];if(k){r.hostname="";r.port=null;if(r.host){if(j[0]==="")j[0]=r.host;else j.unshift(r.host);}r.host="";if(e.protocol){e.hostname=null;e.port=null;if(e.host){if(h[0]==="")h[0]=e.host;else h.unshift(e.host);}e.host=null;}w=w&&(h[0]===""||j[0]==="");}if(b){r.host=e.host||e.host===""?e.host:r.host;r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname;r.search=e.search;r.query=e.query;j=h;}else if(h.length){if(!j)j=[];j.pop();j=j.concat(h);r.search=e.search;r.query=e.query;}else if(!i.isNullOrUndefined(e.search)){if(k){r.hostname=r.host=j.shift();var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(E){r.auth=E.shift();r.host=r.hostname=E.shift();}}r.search=e.search;r.query=e.query;if(!i.isNull(r.pathname)||!i.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"");}r.href=r.format();return r;}if(!j.length){r.pathname=null;if(r.search){r.path="/"+r.search;}else{r.path=null;}r.href=r.format();return r;}var C=j.slice(-1)[0];var x=(r.host||e.host||j.length>1)&&(C==="."||C==="..")||C==="";var S=0;for(var O=j.length;O>=0;O--){C=j[O];if(C==="."){j.splice(O,1);}else if(C===".."){j.splice(O,1);S++;}else if(S){j.splice(O,1);S--;}}if(!w&&!T){for(;S--;S){j.unshift("..");}}if(w&&j[0]!==""&&(!j[0]||j[0].charAt(0)!=="/")){j.unshift("");}if(x&&j.join("/").substr(-1)!=="/"){j.push("");}var P=j[0]===""||j[0]&&j[0].charAt(0)==="/";if(k){r.hostname=r.host=P?"":j.length?j.shift():"";var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):false;if(E){r.auth=E.shift();r.host=r.hostname=E.shift();}}w=w||r.host&&j.length;if(w&&!P){j.unshift("");}if(!j.length){r.pathname=null;r.path=null;}else{r.pathname=j.join("/");}if(!i.isNull(r.pathname)||!i.isNull(r.search)){r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"");}r.auth=e.auth||r.auth;r.slashes=r.slashes||e.slashes;r.href=r.format();return r;};o.prototype.parseHost=function(){var e=this.host;var t=a.exec(e);if(t){t=t[0];if(t!==":"){this.port=t.substr(1);}e=e.substr(0,e.length-t.length);}if(e)this.hostname=e;};},{"./util":237,punycode:154,querystring:157}],237:[function(e,t,r){"use strict";t.exports={isString:function isString(e){return typeof e==="string";},isObject:function isObject(e){return(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e!==null;},isNull:function isNull(e){return e===null;},isNullOrUndefined:function isNullOrUndefined(e){return e==null;}};},{}],238:[function(e,t,r){var n=e("bencode");var i=e("bitfield");var o=e("safe-buffer").Buffer;var s=e("debug")("ut_metadata");var a=e("events").EventEmitter;var u=e("inherits");var l=e("simple-sha1");var c=1e7;var f=1e3;var d=16*1024;t.exports=function(e){u(t,a);function t(t){a.call(this);this._wire=t;this._metadataComplete=false;this._metadataSize=null;this._remainingRejects=null;this._fetching=false;this._bitfield=new i(0,{grow:f});if(o.isBuffer(e)){this.setMetadata(e);}}t.prototype.name="ut_metadata";t.prototype.onHandshake=function(e,t,r){this._infoHash=e;};t.prototype.onExtendedHandshake=function(e){if(!e.m||!e.m.ut_metadata){return this.emit("warning",new Error("Peer does not support ut_metadata"));}if(!e.metadata_size){return this.emit("warning",new Error("Peer does not have metadata"));}if(typeof e.metadata_size!=="number"||c<e.metadata_size||e.metadata_size<=0){return this.emit("warning",new Error("Peer gave invalid metadata size"));}this._metadataSize=e.metadata_size;this._numPieces=Math.ceil(this._metadataSize/d);this._remainingRejects=this._numPieces*2;if(this._fetching){this._requestPieces();}};t.prototype.onMessage=function(e){var t,r;try{var i=e.toString();var o=i.indexOf("ee")+2;t=n.decode(i.substring(0,o));r=e.slice(o);}catch(e){return;}switch(t.msg_type){case 0:this._onRequest(t.piece);break;case 1:this._onData(t.piece,r,t.total_size);break;case 2:this._onReject(t.piece);break;}};t.prototype.fetch=function(){if(this._metadataComplete){return;}this._fetching=true;if(this._metadataSize){this._requestPieces();}};t.prototype.cancel=function(){this._fetching=false;};t.prototype.setMetadata=function(e){if(this._metadataComplete)return true;s("set metadata");try{var t=n.decode(e).info;if(t){e=n.encode(t);}}catch(e){}if(this._infoHash&&this._infoHash!==l.sync(e)){return false;}this.cancel();this.metadata=e;this._metadataComplete=true;this._metadataSize=this.metadata.length;this._wire.extendedHandshake.metadata_size=this._metadataSize;this.emit("metadata",n.encode({info:n.decode(this.metadata)}));return true;};t.prototype._send=function(e,t){var r=n.encode(e);if(o.isBuffer(t)){r=o.concat([r,t]);}this._wire.extended("ut_metadata",r);};t.prototype._request=function(e){this._send({msg_type:0,piece:e});};t.prototype._data=function(e,t,r){var n={msg_type:1,piece:e};if(typeof r==="number"){n.total_size=r;}this._send(n,t);};t.prototype._reject=function(e){this._send({msg_type:2,piece:e});};t.prototype._onRequest=function(e){if(!this._metadataComplete){this._reject(e);return;}var t=e*d;var r=t+d;if(r>this._metadataSize){r=this._metadataSize;}var n=this.metadata.slice(t,r);this._data(e,n,this._metadataSize);};t.prototype._onData=function(e,t,r){if(t.length>d){return;}t.copy(this.metadata,e*d);this._bitfield.set(e);this._checkDone();};t.prototype._onReject=function(e){if(this._remainingRejects>0&&this._fetching){this._request(e);this._remainingRejects-=1;}else{this.emit("warning",new Error('Peer sent "reject" too much'));}};t.prototype._requestPieces=function(){this.metadata=o.alloc(this._metadataSize);for(var e=0;e<this._numPieces;e++){this._request(e);}};t.prototype._checkDone=function(){var e=true;for(var t=0;t<this._numPieces;t++){if(!this._bitfield.get(t)){e=false;break;}}if(!e)return;var r=this.setMetadata(this.metadata);if(!r){this._failedMetadata();}};t.prototype._failedMetadata=function(){this._bitfield=new i(0,{grow:f});this._remainingRejects-=this._numPieces;if(this._remainingRejects>0){this._requestPieces();}else{this.emit("warning",new Error("Peer sent invalid metadata"));}};return t;};},{bencode:6,bitfield:8,debug:69,events:73,inherits:94,"safe-buffer":177,"simple-sha1":193}],239:[function(e,t,r){(function(e){t.exports=r;function r(e,t){if(n("noDeprecation")){return e;}var r=false;function i(){if(!r){if(n("throwDeprecation")){throw new Error(t);}else if(n("traceDeprecation")){console.trace(t);}else{console.warn(t);}r=true;}return e.apply(this,arguments);}return i;}function n(t){try{if(!e.localStorage)return false;}catch(e){return false;}var r=e.localStorage[t];if(null==r)return false;return String(r).toLowerCase()==="true";}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],240:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./button.js");var i=a(n);var o=e("./component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(){u(this,t);return l(this,e.apply(this,arguments));}t.prototype.buildCSSClass=function e(){return"vjs-big-play-button";};t.prototype.handleClick=function e(t){this.player_.play();var r=this.player_.getChild("controlBar");var n=r&&r.getChild("playToggle");if(!n){this.player_.focus();return;}this.setTimeout(function(){n.focus();},1);};return t;}(i["default"]);f.prototype.controlText_="Play Video";s["default"].registerComponent("BigPlayButton",f);r["default"]=f;},{"./button.js":241,"./component.js":244}],241:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./clickable-component.js");var i=c(n);var o=e("./component");var s=c(o);var a=e("./utils/log.js");var u=c(a);var l=e("./utils/obj");function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(){f(this,t);return d(this,e.apply(this,arguments));}t.prototype.createEl=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"button";var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};r=(0,l.assign)({className:this.buildCSSClass()},r);if(t!=="button"){u["default"].warn("Creating a Button with an HTML element of "+t+" is deprecated; use ClickableComponent instead.");r=(0,l.assign)({tabIndex:0},r);n=(0,l.assign)({role:"button"},n);}n=(0,l.assign)({type:"button","aria-live":"polite"},n);var i=s["default"].prototype.createEl.call(this,t,r,n);this.createControlTextEl(i);return i;};t.prototype.addChild=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this.constructor.name;u["default"].warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead.");return s["default"].prototype.addChild.call(this,t,r);};t.prototype.enable=function t(){e.prototype.enable.call(this);this.el_.removeAttribute("disabled");};t.prototype.disable=function t(){e.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled");};t.prototype.handleKeyPress=function t(r){if(r.which===32||r.which===13){return;}e.prototype.handleKeyPress.call(this,r);};return t;}(i["default"]);s["default"].registerComponent("Button",h);r["default"]=h;},{"./clickable-component.js":242,"./component":244,"./utils/log.js":325,"./utils/obj":327}],242:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./component");var i=m(n);var o=e("./utils/dom.js");var s=y(o);var a=e("./utils/events.js");var u=y(a);var l=e("./utils/fn.js");var c=y(l);var f=e("./utils/log.js");var d=m(f);var p=e("global/document");var h=m(p);var v=e("./utils/obj");function y(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function m(e){return e&&e.__esModule?e:{default:e};}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function _(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function b(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var w=function(e){b(t,e);function t(r,n){g(this,t);var i=_(this,e.call(this,r,n));i.emitTapEvents();i.enable();return i;}t.prototype.createEl=function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div";var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};n=(0,v.assign)({className:this.buildCSSClass(),tabIndex:0},n);if(r==="button"){d["default"].error("Creating a ClickableComponent with an HTML element of "+r+" is not supported; use a Button instead.");}i=(0,v.assign)({role:"button","aria-live":"polite"},i);this.tabIndex_=n.tabIndex;var o=e.prototype.createEl.call(this,r,n,i);this.createControlTextEl(o);return o;};t.prototype.createControlTextEl=function e(t){this.controlTextEl_=s.createEl("span",{className:"vjs-control-text"});if(t){t.appendChild(this.controlTextEl_);}this.controlText(this.controlText_,t);return this.controlTextEl_;};t.prototype.controlText=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.el();if(!t){return this.controlText_||"Need Text";}var n=this.localize(t);this.controlText_=t;this.controlTextEl_.innerHTML=n;if(!this.nonIconControl){r.setAttribute("title",n);}return this;};t.prototype.buildCSSClass=function t(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this);};t.prototype.enable=function e(){this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_);}this.on("tap",this.handleClick);this.on("click",this.handleClick);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);return this;};t.prototype.disable=function e(){this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex");}this.off("tap",this.handleClick);this.off("click",this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);return this;};t.prototype.handleClick=function e(t){};t.prototype.handleFocus=function e(t){u.on(h["default"],"keydown",c.bind(this,this.handleKeyPress));};t.prototype.handleKeyPress=function t(r){if(r.which===32||r.which===13){r.preventDefault();this.handleClick(r);}else if(e.prototype.handleKeyPress){e.prototype.handleKeyPress.call(this,r);}};t.prototype.handleBlur=function e(t){u.off(h["default"],"keydown",c.bind(this,this.handleKeyPress));};return t;}(i["default"]);i["default"].registerComponent("ClickableComponent",w);r["default"]=w;},{"./component":244,"./utils/dom.js":320,"./utils/events.js":321,"./utils/fn.js":322,"./utils/log.js":325,"./utils/obj":327,"global/document":89}],243:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./button");var i=a(n);var o=e("./component");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r,n){u(this,t);var i=l(this,e.call(this,r,n));i.controlText(n&&n.controlText||i.localize("Close"));return i;}t.prototype.buildCSSClass=function t(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(t){this.trigger({type:"close",bubbles:false});};return t;}(i["default"]);s["default"].registerComponent("CloseButton",f);r["default"]=f;},{"./button":241,"./component":244}],244:[function(e,t,r){"use strict";r.__esModule=true;var n=e("global/window");var i=b(n);var o=e("./utils/dom.js");var s=_(o);var a=e("./utils/fn.js");var u=_(a);var l=e("./utils/guid.js");var c=_(l);var f=e("./utils/events.js");var d=_(f);var p=e("./utils/log.js");var h=b(p);var v=e("./utils/to-title-case.js");var y=b(v);var m=e("./utils/merge-options.js");var g=b(m);function _(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function b(e){return e&&e.__esModule?e:{default:e};}function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}var T=function(){function e(t,r,n){w(this,e);if(!t&&this.play){this.player_=t=this;}else{this.player_=t;}this.options_=(0,g["default"])({},this.options_);r=this.options_=(0,g["default"])(this.options_,r);this.id_=r.id||r.el&&r.el.id;if(!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+c.newGUID();}this.name_=r.name||null;if(r.el){this.el_=r.el;}else if(r.createEl!==false){this.el_=this.createEl();}this.children_=[];this.childIndex_={};this.childNameIndex_={};if(r.initChildren!==false){this.initChildren();}this.ready(n);if(r.reportTouchActivity!==false){this.enableTouchActivity();}}e.prototype.dispose=function e(){this.trigger({type:"dispose",bubbles:false});if(this.children_){for(var t=this.children_.length-1;t>=0;t--){if(this.children_[t].dispose){this.children_[t].dispose();}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.off();if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_);}s.removeElData(this.el_);this.el_=null;};e.prototype.player=function e(){return this.player_;};e.prototype.options=function e(t){h["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0");if(!t){return this.options_;}this.options_=(0,g["default"])(this.options_,t);return this.options_;};e.prototype.el=function e(){return this.el_;};e.prototype.createEl=function e(t,r,n){return s.createEl(t,r,n);};e.prototype.localize=function e(t){var r=this.player_.language&&this.player_.language();var n=this.player_.languages&&this.player_.languages();if(!r||!n){return t;}var i=n[r];if(i&&i[t]){return i[t];}var o=r.split("-")[0];var s=n[o];if(s&&s[t]){return s[t];}return t;};e.prototype.contentEl=function e(){return this.contentEl_||this.el_;};e.prototype.id=function e(){return this.id_;};e.prototype.name=function e(){return this.name_;};e.prototype.children=function e(){return this.children_;};e.prototype.getChildById=function e(t){return this.childIndex_[t];};e.prototype.getChild=function e(t){if(!t){return;}t=(0,y["default"])(t);return this.childNameIndex_[t];};e.prototype.addChild=function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.children_.length;var o=void 0;var s=void 0;if(typeof r==="string"){s=(0,y["default"])(r);if(!n){n={};}if(n===true){h["default"].warn("Initializing a child component with `true` is deprecated."+"Children should be defined in an array when possible, "+"but if necessary use an object instead of `true`.");n={};}var a=n.componentClass||s;n.name=s;var u=e.getComponent(a);if(!u){throw new Error("Component "+a+" does not exist");}if(typeof u!=="function"){return null;}o=new u(this.player_||this,n);}else{o=r;}this.children_.splice(i,0,o);if(typeof o.id==="function"){this.childIndex_[o.id()]=o;}s=s||o.name&&(0,y["default"])(o.name());if(s){this.childNameIndex_[s]=o;}if(typeof o.el==="function"&&o.el()){var l=this.contentEl().children;var c=l[i]||null;this.contentEl().insertBefore(o.el(),c);}return o;};e.prototype.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t);}if(!t||!this.children_){return;}var r=false;for(var n=this.children_.length-1;n>=0;n--){if(this.children_[n]===t){r=true;this.children_.splice(n,1);break;}}if(!r){return;}this.childIndex_[t.id()]=null;this.childNameIndex_[t.name()]=null;var i=t.el();if(i&&i.parentNode===this.contentEl()){this.contentEl().removeChild(t.el());}};e.prototype.initChildren=function t(){var r=this;var n=this.options_.children;if(n){var i=this.options_;var o=function e(t){var n=t.name;var o=t.opts;if(i[n]!==undefined){o=i[n];}if(o===false){return;}if(o===true){o={};}o.playerOptions=r.options_.playerOptions;var s=r.addChild(n,o);if(s){r[n]=s;}};var s=void 0;var a=e.getComponent("Tech");if(Array.isArray(n)){s=n;}else{s=Object.keys(n);}s.concat(Object.keys(this.options_).filter(function(e){return!s.some(function(t){if(typeof t==="string"){return e===t;}return e===t.name;});})).map(function(e){var t=void 0;var i=void 0;if(typeof e==="string"){t=e;i=n[t]||r.options_[t]||{};}else{t=e.name;i=e;}return{name:t,opts:i};}).filter(function(t){var r=e.getComponent(t.opts.componentClass||(0,y["default"])(t.name));return r&&!a.isTech(r);}).forEach(o);}};e.prototype.buildCSSClass=function e(){return"";};e.prototype.on=function e(t,r,n){var i=this;if(typeof t==="string"||Array.isArray(t)){d.on(this.el_,t,u.bind(this,r));}else{var o=t;var s=r;var a=u.bind(this,n);var l=function e(){return i.off(o,s,a);};l.guid=a.guid;this.on("dispose",l);var c=function e(){return i.off("dispose",l);};c.guid=a.guid;if(t.nodeName){d.on(o,s,a);d.on(o,"dispose",c);}else if(typeof t.on==="function"){o.on(s,a);o.on("dispose",c);}}return this;};e.prototype.off=function e(t,r,n){if(!t||typeof t==="string"||Array.isArray(t)){d.off(this.el_,t,r);}else{var i=t;var o=r;var s=u.bind(this,n);this.off("dispose",s);if(t.nodeName){d.off(i,o,s);d.off(i,"dispose",s);}else{i.off(o,s);i.off("dispose",s);}}return this;};e.prototype.one=function e(t,r,n){var i=this,o=arguments;if(typeof t==="string"||Array.isArray(t)){d.one(this.el_,t,u.bind(this,r));}else{var s=t;var a=r;var l=u.bind(this,n);var c=function e(){i.off(s,a,e);l.apply(null,o);};c.guid=l.guid;this.on(s,a,c);}return this;};e.prototype.trigger=function e(t,r){d.trigger(this.el_,t,r);return this;};e.prototype.ready=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t){if(this.isReady_){if(r){t.call(this);}else{this.setTimeout(t,1);}}else{this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(t);}}return this;};e.prototype.triggerReady=function e(){this.isReady_=true;this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[];if(e&&e.length>0){e.forEach(function(e){e.call(this);},this);}this.trigger("ready");},1);};e.prototype.$=function e(t,r){return s.$(t,r||this.contentEl());};e.prototype.$$=function e(t,r){return s.$$(t,r||this.contentEl());};e.prototype.hasClass=function e(t){return s.hasElClass(this.el_,t);};e.prototype.addClass=function e(t){s.addElClass(this.el_,t);return this;};e.prototype.removeClass=function e(t){s.removeElClass(this.el_,t);return this;};e.prototype.toggleClass=function e(t,r){s.toggleElClass(this.el_,t,r);return this;};e.prototype.show=function e(){this.removeClass("vjs-hidden");return this;};e.prototype.hide=function e(){this.addClass("vjs-hidden");return this;};e.prototype.lockShowing=function e(){this.addClass("vjs-lock-showing");return this;};e.prototype.unlockShowing=function e(){this.removeClass("vjs-lock-showing");return this;};e.prototype.getAttribute=function e(t){return s.getAttribute(this.el_,t);};e.prototype.setAttribute=function e(t,r){s.setAttribute(this.el_,t,r);return this;};e.prototype.removeAttribute=function e(t){s.removeAttribute(this.el_,t);return this;};e.prototype.width=function e(t,r){return this.dimension("width",t,r);};e.prototype.height=function e(t,r){return this.dimension("height",t,r);};e.prototype.dimensions=function e(t,r){return this.width(t,true).height(r);};e.prototype.dimension=function e(t,r,n){if(r!==undefined){if(r===null||r!==r){r=0;}if((""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1){this.el_.style[t]=r;}else if(r==="auto"){this.el_.style[t]="";}else{this.el_.style[t]=r+"px";}if(!n){this.trigger("resize");}return this;}if(!this.el_){return 0;}var i=this.el_.style[t];var o=i.indexOf("px");if(o!==-1){return parseInt(i.slice(0,o),10);}return parseInt(this.el_["offset"+(0,y["default"])(t)],10);};e.prototype.currentDimension=function e(t){var r=0;if(t!=="width"&&t!=="height"){throw new Error("currentDimension only accepts width or height value");}if(typeof i["default"].getComputedStyle==="function"){var n=i["default"].getComputedStyle(this.el_);r=n.getPropertyValue(t)||n[t];}r=parseFloat(r);if(r===0){var o="offset"+(0,y["default"])(t);r=this.el_[o];}return r;};e.prototype.currentDimensions=function e(){return{width:this.currentDimension("width"),height:this.currentDimension("height")};};e.prototype.currentWidth=function e(){return this.currentDimension("width");};e.prototype.currentHeight=function e(){return this.currentDimension("height");};e.prototype.focus=function e(){this.el_.focus();};e.prototype.blur=function e(){this.el_.blur();};e.prototype.emitTapEvents=function e(){var t=0;var r=null;var n=10;var i=200;var o=void 0;this.on("touchstart",function(e){if(e.touches.length===1){r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};t=new Date().getTime();o=true;}});this.on("touchmove",function(e){if(e.touches.length>1){o=false;}else if(r){var t=e.touches[0].pageX-r.pageX;var i=e.touches[0].pageY-r.pageY;var s=Math.sqrt(t*t+i*i);if(s>n){o=false;}}});var s=function e(){o=false;};this.on("touchleave",s);this.on("touchcancel",s);this.on("touchend",function(e){r=null;if(o===true){var n=new Date().getTime()-t;if(n<i){e.preventDefault();this.trigger("tap");}}});};e.prototype.enableTouchActivity=function e(){if(!this.player()||!this.player().reportUserActivity){return;}var t=u.bind(this.player(),this.player().reportUserActivity);var r=void 0;this.on("touchstart",function(){t();this.clearInterval(r);r=this.setInterval(t,250);});var n=function e(n){t();this.clearInterval(r);};this.on("touchmove",t);this.on("touchend",n);this.on("touchcancel",n);};e.prototype.setTimeout=function e(t,r){t=u.bind(this,t);var n=i["default"].setTimeout(t,r);var o=function e(){this.clearTimeout(n);};o.guid="vjs-timeout-"+n;this.on("dispose",o);return n;};e.prototype.clearTimeout=function e(t){i["default"].clearTimeout(t);var r=function e(){};r.guid="vjs-timeout-"+t;this.off("dispose",r);return t;};e.prototype.setInterval=function e(t,r){t=u.bind(this,t);var n=i["default"].setInterval(t,r);var o=function e(){this.clearInterval(n);};o.guid="vjs-interval-"+n;this.on("dispose",o);return n;};e.prototype.clearInterval=function e(t){i["default"].clearInterval(t);var r=function e(){};r.guid="vjs-interval-"+t;this.off("dispose",r);return t;};e.registerComponent=function t(r,n){if(!r){return;}r=(0,y["default"])(r);if(!e.components_){e.components_={};}if(r==="Player"&&e.components_[r]){var i=e.components_[r];if(i.players&&Object.keys(i.players).length>0&&Object.keys(i.players).map(function(e){return i.players[e];}).every(Boolean)){throw new Error("Can not register Player component after player has been created");}}e.components_[r]=n;return n;};e.getComponent=function t(r){if(!r){return;}r=(0,y["default"])(r);if(e.components_&&e.components_[r]){return e.components_[r];}if(i["default"]&&i["default"].videojs&&i["default"].videojs[r]){h["default"].warn("The "+r+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)");return i["default"].videojs[r];}};e.extend=function t(r){r=r||{};h["default"].warn("Component.extend({}) has been deprecated, "+" use videojs.extend(Component, {}) instead");var n=r.init||r.init||this.prototype.init||this.prototype.init||function(){};var i=function e(){n.apply(this,arguments);};i.prototype=Object.create(this.prototype);i.prototype.constructor=i;i.extend=e.extend;for(var o in r){if(r.hasOwnProperty(o)){i.prototype[o]=r[o];}}return i;};return e;}();T.registerComponent("Component",T);r["default"]=T;},{"./utils/dom.js":320,"./utils/events.js":321,"./utils/fn.js":322,"./utils/guid.js":324,"./utils/log.js":325,"./utils/merge-options.js":326,"./utils/to-title-case.js":330,"global/window":90}],245:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../track-button.js");var i=l(n);var o=e("../../component.js");var s=l(o);var a=e("./audio-track-menu-item.js");var u=l(a);function l(e){return e&&e.__esModule?e:{default:e};}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var p=function(e){d(t,e);function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};c(this,t);n.tracks=r.audioTracks&&r.audioTracks();var i=f(this,e.call(this,r,n));i.el_.setAttribute("aria-label","Audio Menu");return i;}t.prototype.buildCSSClass=function t(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this);};t.prototype.createItems=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];this.hideThreshold_=1;var r=this.player_.audioTracks&&this.player_.audioTracks();if(!r){return t;}for(var n=0;n<r.length;n++){var i=r[n];t.push(new u["default"](this.player_,{track:i,selectable:true}));}return t;};return t;}(i["default"]);p.prototype.controlText_="Audio Track";s["default"].registerComponent("AudioTrackButton",p);r["default"]=p;},{"../../component.js":244,"../track-button.js":275,"./audio-track-menu-item.js":246}],246:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../menu/menu-item.js");var i=c(n);var o=e("../../component.js");var s=c(o);var a=e("../../utils/fn.js");var u=l(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=n.track;var o=r.audioTracks();n.label=i.label||i.language||"Unknown";n.selected=i.enabled;var s=d(this,e.call(this,r,n));s.track=i;if(o){var a=u.bind(s,s.handleTracksChange);o.addEventListener("change",a);s.on("dispose",function(){o.removeEventListener("change",a);});}return s;}t.prototype.handleClick=function t(r){var n=this.player_.audioTracks();e.prototype.handleClick.call(this,r);if(!n){return;}for(var i=0;i<n.length;i++){var o=n[i];o.enabled=o===this.track;}};t.prototype.handleTracksChange=function e(t){this.selected(this.track.enabled);};return t;}(i["default"]);s["default"].registerComponent("AudioTrackMenuItem",h);r["default"]=h;},{"../../component.js":244,"../../menu/menu-item.js":287,"../../utils/fn.js":322}],247:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component.js");var i=o(n);e("./play-toggle.js");e("./time-controls/current-time-display.js");e("./time-controls/duration-display.js");e("./time-controls/time-divider.js");e("./time-controls/remaining-time-display.js");e("./live-display.js");e("./progress-control/progress-control.js");e("./fullscreen-toggle.js");e("./volume-control/volume-control.js");e("./volume-menu-button.js");e("./mute-toggle.js");e("./text-track-controls/chapters-button.js");e("./text-track-controls/descriptions-button.js");e("./text-track-controls/subtitles-button.js");e("./text-track-controls/captions-button.js");e("./audio-track-controls/audio-track-button.js");e("./playback-rate-menu/playback-rate-menu-button.js");e("./spacer-controls/custom-control-spacer.js");function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var l=function(e){u(t,e);function t(){s(this,t);return a(this,e.apply(this,arguments));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"});};return t;}(i["default"]);l.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]};i["default"].registerComponent("ControlBar",l);r["default"]=l;},{"../component.js":244,"./audio-track-controls/audio-track-button.js":245,"./fullscreen-toggle.js":248,"./live-display.js":249,"./mute-toggle.js":250,"./play-toggle.js":251,"./playback-rate-menu/playback-rate-menu-button.js":252,"./progress-control/progress-control.js":257,"./spacer-controls/custom-control-spacer.js":260,"./text-track-controls/captions-button.js":263,"./text-track-controls/chapters-button.js":264,"./text-track-controls/descriptions-button.js":266,"./text-track-controls/subtitles-button.js":268,"./time-controls/current-time-display.js":271,"./time-controls/duration-display.js":272,"./time-controls/remaining-time-display.js":273,"./time-controls/time-divider.js":274,"./volume-control/volume-control.js":277,"./volume-menu-button.js":279}],248:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../button.js");var i=a(n);var o=e("../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r,n){u(this,t);var i=l(this,e.call(this,r,n));i.on(r,"fullscreenchange",i.handleFullscreenChange);return i;}t.prototype.buildCSSClass=function t(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this);};t.prototype.handleFullscreenChange=function e(t){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen");}else{this.controlText("Fullscreen");}};t.prototype.handleClick=function e(t){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();}else{this.player_.exitFullscreen();}};return t;}(i["default"]);f.prototype.controlText_="Fullscreen";s["default"].registerComponent("FullscreenToggle",f);r["default"]=f;},{"../button.js":241,"../component.js":244}],249:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component");var i=u(n);var o=e("../utils/dom.js");var s=a(o);function a(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function u(e){return e&&e.__esModule?e:{default:e};}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var d=function(e){f(t,e);function t(r,n){l(this,t);var i=c(this,e.call(this,r,n));i.updateShowing();i.on(i.player(),"durationchange",i.updateShowing);return i;}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=s.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateShowing=function e(t){if(this.player().duration()===Infinity){this.show();}else{this.hide();}};return t;}(i["default"]);i["default"].registerComponent("LiveDisplay",d);r["default"]=d;},{"../component":244,"../utils/dom.js":320}],250:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../button");var i=c(n);var o=e("../component");var s=c(o);var a=e("../utils/dom.js");var u=l(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=d(this,e.call(this,r,n));i.on(r,"volumechange",i.update);if(r.tech_&&r.tech_.featuresVolumeControl===false){i.addClass("vjs-hidden");}i.on(r,"loadstart",function(){this.update();if(r.tech_.featuresVolumeControl===false){this.addClass("vjs-hidden");}else{this.removeClass("vjs-hidden");}});return i;}t.prototype.buildCSSClass=function t(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(t){this.player_.muted(this.player_.muted()?false:true);};t.prototype.update=function e(t){var r=this.player_.volume();var n=3;if(r===0||this.player_.muted()){n=0;}else if(r<.33){n=1;}else if(r<.67){n=2;}var i=this.player_.muted()?"Unmute":"Mute";if(this.controlText()!==i){this.controlText(i);}for(var o=0;o<4;o++){u.removeElClass(this.el_,"vjs-vol-"+o);}u.addElClass(this.el_,"vjs-vol-"+n);};return t;}(i["default"]);h.prototype.controlText_="Mute";s["default"].registerComponent("MuteToggle",h);r["default"]=h;},{"../button":241,"../component":244,"../utils/dom.js":320}],251:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../button.js");var i=a(n);var o=e("../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r,n){u(this,t);var i=l(this,e.call(this,r,n));i.on(r,"play",i.handlePlay);i.on(r,"pause",i.handlePause);return i;}t.prototype.buildCSSClass=function t(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(t){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};t.prototype.handlePlay=function e(t){this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause");};t.prototype.handlePause=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play");};return t;}(i["default"]);f.prototype.controlText_="Play";s["default"].registerComponent("PlayToggle",f);r["default"]=f;},{"../button.js":241,"../component.js":244}],252:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../menu/menu-button.js");var i=h(n);var o=e("../../menu/menu.js");var s=h(o);var a=e("./playback-rate-menu-item.js");var u=h(a);var l=e("../../component.js");var c=h(l);var f=e("../../utils/dom.js");var d=p(f);function p(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function h(e){return e&&e.__esModule?e:{default:e};}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var g=function(e){m(t,e);function t(r,n){v(this,t);var i=y(this,e.call(this,r,n));i.updateVisibility();i.updateLabel();i.on(r,"loadstart",i.updateVisibility);i.on(r,"ratechange",i.updateLabel);return i;}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this);this.labelEl_=d.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1});r.appendChild(this.labelEl_);return r;};t.prototype.buildCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this);};t.prototype.createMenu=function e(){var t=new s["default"](this.player());var r=this.playbackRates();if(r){for(var n=r.length-1;n>=0;n--){t.addChild(new u["default"](this.player(),{rate:r[n]+"x"}));}}return t;};t.prototype.updateARIAAttributes=function e(){this.el().setAttribute("aria-valuenow",this.player().playbackRate());};t.prototype.handleClick=function e(t){var r=this.player().playbackRate();var n=this.playbackRates();var i=n[0];for(var o=0;o<n.length;o++){if(n[o]>r){i=n[o];break;}}this.player().playbackRate(i);};t.prototype.playbackRates=function e(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates;};t.prototype.playbackRateSupported=function e(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0;};t.prototype.updateVisibility=function e(t){if(this.playbackRateSupported()){this.removeClass("vjs-hidden");}else{this.addClass("vjs-hidden");}};t.prototype.updateLabel=function e(t){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x";}};return t;}(i["default"]);g.prototype.controlText_="Playback Rate";c["default"].registerComponent("PlaybackRateMenuButton",g);r["default"]=g;},{"../../component.js":244,"../../menu/menu-button.js":286,"../../menu/menu.js":288,"../../utils/dom.js":320,"./playback-rate-menu-item.js":253}],253:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../menu/menu-item.js");var i=a(n);var o=e("../../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r,n){u(this,t);var i=n.rate;var o=parseFloat(i,10);n.label=i;n.selected=o===1;n.selectable=true;var s=l(this,e.call(this,r,n));s.label=i;s.rate=o;s.on(r,"ratechange",s.update);return s;}t.prototype.handleClick=function t(r){e.prototype.handleClick.call(this);this.player().playbackRate(this.rate);};t.prototype.update=function e(t){this.selected(this.player().playbackRate()===this.rate);};return t;}(i["default"]);f.prototype.contentElType="button";s["default"].registerComponent("PlaybackRateMenuItem",f);r["default"]=f;},{"../../component.js":244,"../../menu/menu-item.js":287}],254:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=u(n);var o=e("../../utils/dom.js");var s=a(o);function a(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function u(e){return e&&e.__esModule?e:{default:e};}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var d=function(e){f(t,e);function t(r,n){l(this,t);var i=c(this,e.call(this,r,n));i.partEls_=[];i.on(r,"progress",i.update);return i;}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"});};t.prototype.update=function e(t){var r=this.player_.buffered();var n=this.player_.duration();var i=this.player_.bufferedEnd();var o=this.partEls_;var a=function e(t,r){var n=t/r||0;return(n>=1?1:n)*100+"%";};this.el_.style.width=a(i,n);for(var u=0;u<r.length;u++){var l=r.start(u);var c=r.end(u);var f=o[u];if(!f){f=this.el_.appendChild(s.createEl());o[u]=f;}f.style.left=a(l,i);f.style.width=a(c-l,i);}for(var d=o.length;d>r.length;d--){this.el_.removeChild(o[d-1]);}o.length=r.length;};return t;}(i["default"]);i["default"].registerComponent("LoadProgressBar",d);r["default"]=d;},{"../../component.js":244,"../../utils/dom.js":320}],255:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=h(n);var o=e("../../utils/dom.js");var s=p(o);var a=e("../../utils/fn.js");var u=p(a);var l=e("../../utils/format-time.js");var c=h(l);var f=e("../../utils/computed-style.js");var d=h(f);function p(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function h(e){return e&&e.__esModule?e:{default:e};}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var g=function(e){m(t,e);function t(r,n){v(this,t);var i=y(this,e.call(this,r,n));if(n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside){i.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside;}if(i.keepTooltipsInside){i.tooltip=s.createEl("div",{className:"vjs-time-tooltip"});i.el().appendChild(i.tooltip);i.addClass("vjs-keep-tooltips-inside");}i.update(0,0);r.on("ready",function(){i.on(r.controlBar.progressControl.el(),"mousemove",u.throttle(u.bind(i,i.handleMouseMove),25));});return i;}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"});};t.prototype.handleMouseMove=function e(t){var r=this.player_.duration();var n=this.calculateDistance(t)*r;var i=t.pageX-s.findElPosition(this.el().parentNode).left;this.update(n,i);};t.prototype.update=function e(t,r){var n=(0,c["default"])(t,this.player_.duration());this.el().style.left=r+"px";this.el().setAttribute("data-current-time",n);if(this.keepTooltipsInside){var i=this.clampPosition_(r);var o=r-i+1;var s=parseFloat((0,d["default"])(this.tooltip,"width"));var a=s/2;this.tooltip.innerHTML=n;this.tooltip.style.right="-"+(a-o)+"px";}};t.prototype.calculateDistance=function e(t){return s.getPointerPosition(this.el().parentNode,t).x;};t.prototype.clampPosition_=function e(t){if(!this.keepTooltipsInside){return t;}var r=parseFloat((0,d["default"])(this.player().el(),"width"));var n=parseFloat((0,d["default"])(this.tooltip,"width"));var i=n/2;var o=t;if(t<i){o=Math.ceil(i);}else if(t>r-i){o=Math.floor(r-i);}return o;};return t;}(i["default"]);i["default"].registerComponent("MouseTimeDisplay",g);r["default"]=g;},{"../../component.js":244,"../../utils/computed-style.js":319,"../../utils/dom.js":320,"../../utils/fn.js":322,"../../utils/format-time.js":323}],256:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=c(n);var o=e("../../utils/fn.js");var s=l(o);var a=e("../../utils/format-time.js");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=d(this,e.call(this,r,n));i.updateDataAttr();i.on(r,"timeupdate",i.updateDataAttr);r.ready(s.bind(i,i.updateDataAttr));if(n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside){i.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside;}if(i.keepTooltipsInside){i.addClass("vjs-keep-tooltips-inside");}return i;}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});};t.prototype.updateDataAttr=function e(t){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,u["default"])(r,this.player_.duration()));};return t;}(i["default"]);i["default"].registerComponent("PlayProgressBar",h);r["default"]=h;},{"../../component.js":244,"../../utils/fn.js":322,"../../utils/format-time.js":323}],257:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=o(n);e("./seek-bar.js");e("./mouse-time-display.js");function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var l=function(e){u(t,e);function t(){s(this,t);return a(this,e.apply(this,arguments));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"});};return t;}(i["default"]);l.prototype.options_={children:["seekBar"]};i["default"].registerComponent("ProgressControl",l);r["default"]=l;},{"../../component.js":244,"./mouse-time-display.js":255,"./seek-bar.js":258}],258:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../slider/slider.js");var i=h(n);var o=e("../../component.js");var s=h(o);var a=e("../../utils/fn.js");var u=p(a);var l=e("../../utils/format-time.js");var c=h(l);var f=e("../../utils/computed-style.js");var d=h(f);e("./load-progress-bar.js");e("./play-progress-bar.js");e("./tooltip-progress-bar.js");function p(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function h(e){return e&&e.__esModule?e:{default:e};}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var g=function(e){m(t,e);function t(r,n){v(this,t);var i=y(this,e.call(this,r,n));i.on(r,"timeupdate",i.updateProgress);i.on(r,"ended",i.updateProgress);r.ready(u.bind(i,i.updateProgress));if(n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside){i.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside;}if(i.keepTooltipsInside){i.tooltipProgressBar=i.addChild("TooltipProgressBar");}return i;}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"});};t.prototype.updateProgress=function e(t){this.updateAriaAttributes(this.el_);if(this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_);this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var r=parseFloat((0,d["default"])(this.player().el(),"width"));var n=parseFloat((0,d["default"])(this.tooltipProgressBar.tooltip,"width"));var i=this.tooltipProgressBar.el().style;i.maxWidth=Math.floor(r-n/2)+"px";i.minWidth=Math.ceil(n/2)+"px";i.right="-"+n/2+"px";}};t.prototype.updateAriaAttributes=function e(t){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();t.setAttribute("aria-valuenow",(this.getPercent()*100).toFixed(2));t.setAttribute("aria-valuetext",(0,c["default"])(r,this.player_.duration()));};t.prototype.getPercent=function e(){var t=this.player_.currentTime()/this.player_.duration();return t>=1?1:t;};t.prototype.handleMouseDown=function t(r){this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();e.prototype.handleMouseDown.call(this,r);};t.prototype.handleMouseMove=function e(t){var r=this.calculateDistance(t)*this.player_.duration();if(r===this.player_.duration()){r=r-.1;}this.player_.currentTime(r);};t.prototype.handleMouseUp=function t(r){e.prototype.handleMouseUp.call(this,r);this.player_.scrubbing(false);if(this.videoWasPlaying){this.player_.play();}};t.prototype.stepForward=function e(){this.player_.currentTime(this.player_.currentTime()+5);};t.prototype.stepBack=function e(){this.player_.currentTime(this.player_.currentTime()-5);};return t;}(i["default"]);g.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"};g.prototype.playerEvent="timeupdate";s["default"].registerComponent("SeekBar",g);r["default"]=g;},{"../../component.js":244,"../../slider/slider.js":296,"../../utils/computed-style.js":319,"../../utils/fn.js":322,"../../utils/format-time.js":323,"./load-progress-bar.js":254,"./play-progress-bar.js":256,"./tooltip-progress-bar.js":259}],259:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=c(n);var o=e("../../utils/fn.js");var s=l(o);var a=e("../../utils/format-time.js");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=d(this,e.call(this,r,n));i.updateDataAttr();i.on(r,"timeupdate",i.updateDataAttr);r.ready(s.bind(i,i.updateDataAttr));return i;}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});this.tooltip=r.querySelector(".vjs-time-tooltip");return r;};t.prototype.updateDataAttr=function e(t){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();var n=(0,u["default"])(r,this.player_.duration());this.el_.setAttribute("data-current-time",n);this.tooltip.innerHTML=n;};return t;}(i["default"]);i["default"].registerComponent("TooltipProgressBar",h);r["default"]=h;},{"../../component.js":244,"../../utils/fn.js":322,"../../utils/format-time.js":323}],260:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./spacer.js");var i=a(n);var o=e("../../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(){u(this,t);return l(this,e.apply(this,arguments));}t.prototype.buildCSSClass=function t(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this);};t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,{className:this.buildCSSClass()});r.innerHTML="&nbsp;";return r;};return t;}(i["default"]);s["default"].registerComponent("CustomControlSpacer",f);r["default"]=f;},{"../../component.js":244,"./spacer.js":261}],261:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var l=function(e){u(t,e);function t(){s(this,t);return a(this,e.apply(this,arguments));}t.prototype.buildCSSClass=function t(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this);};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()});};return t;}(i["default"]);i["default"].registerComponent("Spacer",l);r["default"]=l;},{"../../component.js":244}],262:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./text-track-menu-item.js");var i=a(n);var o=e("../../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r,n){u(this,t);n.track={player:r,kind:n.kind,label:n.kind+" settings",selectable:false,default:false,mode:"disabled"};n.selectable=false;var i=l(this,e.call(this,r,n));i.addClass("vjs-texttrack-settings");i.controlText(", opens "+n.kind+" settings dialog");return i;}t.prototype.handleClick=function e(t){this.player().getChild("textTrackSettings").show();this.player().getChild("textTrackSettings").el_.focus();};return t;}(i["default"]);s["default"].registerComponent("CaptionSettingsMenuItem",f);r["default"]=f;},{"../../component.js":244,"./text-track-menu-item.js":270}],263:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./text-track-button.js");var i=l(n);var o=e("../../component.js");var s=l(o);var a=e("./caption-settings-menu-item.js");var u=l(a);function l(e){return e&&e.__esModule?e:{default:e};}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var p=function(e){d(t,e);function t(r,n,i){c(this,t);var o=f(this,e.call(this,r,n,i));o.el_.setAttribute("aria-label","Captions Menu");return o;}t.prototype.buildCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this);};t.prototype.createItems=function t(){var r=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)){r.push(new u["default"](this.player_,{kind:this.kind_}));this.hideThreshold_+=1;}return e.prototype.createItems.call(this,r);};return t;}(i["default"]);p.prototype.kind_="captions";p.prototype.controlText_="Captions";s["default"].registerComponent("CaptionsButton",p);r["default"]=p;},{"../../component.js":244,"./caption-settings-menu-item.js":262,"./text-track-button.js":269}],264:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./text-track-button.js");var i=f(n);var o=e("../../component.js");var s=f(o);var a=e("./chapters-track-menu-item.js");var u=f(a);var l=e("../../utils/to-title-case.js");var c=f(l);function f(e){return e&&e.__esModule?e:{default:e};}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var v=function(e){h(t,e);function t(r,n,i){d(this,t);var o=p(this,e.call(this,r,n,i));o.el_.setAttribute("aria-label","Chapters Menu");return o;}t.prototype.buildCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this);};t.prototype.update=function t(r){if(!this.track_||r&&(r.type==="addtrack"||r.type==="removetrack")){this.setTrack(this.findChaptersTrack());}e.prototype.update.call(this);};t.prototype.setTrack=function e(t){if(this.track_===t){return;}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this);}if(this.track_){var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(r){r.removeEventListener("load",this.updateHandler_);}this.track_=null;}this.track_=t;if(this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(n){n.addEventListener("load",this.updateHandler_);}}};t.prototype.findChaptersTrack=function e(){var t=this.player_.textTracks()||[];for(var r=t.length-1;r>=0;r--){var n=t[r];if(n.kind===this.kind_){return n;}}};t.prototype.getMenuCaption=function e(){if(this.track_&&this.track_.label){return this.track_.label;}return this.localize((0,c["default"])(this.kind_));};t.prototype.createMenu=function t(){this.options_.title=this.getMenuCaption();return e.prototype.createMenu.call(this);};t.prototype.createItems=function e(){var t=[];if(!this.track_){return t;}var r=this.track_.cues;if(!r){return t;}for(var n=0,i=r.length;n<i;n++){var o=r[n];var s=new u["default"](this.player_,{track:this.track_,cue:o});t.push(s);}return t;};return t;}(i["default"]);v.prototype.kind_="chapters";v.prototype.controlText_="Chapters";s["default"].registerComponent("ChaptersButton",v);r["default"]=v;},{"../../component.js":244,"../../utils/to-title-case.js":330,"./chapters-track-menu-item.js":265,"./text-track-button.js":269}],265:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../menu/menu-item.js");var i=c(n);var o=e("../../component.js");var s=c(o);var a=e("../../utils/fn.js");var u=l(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=n.track;var o=n.cue;var s=r.currentTime();n.selectable=true;n.label=o.text;n.selected=o.startTime<=s&&s<o.endTime;var a=d(this,e.call(this,r,n));a.track=i;a.cue=o;i.addEventListener("cuechange",u.bind(a,a.update));return a;}t.prototype.handleClick=function t(r){e.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime);};t.prototype.update=function e(t){var r=this.cue;var n=this.player_.currentTime();this.selected(r.startTime<=n&&n<r.endTime);};return t;}(i["default"]);s["default"].registerComponent("ChaptersTrackMenuItem",h);r["default"]=h;},{"../../component.js":244,"../../menu/menu-item.js":287,"../../utils/fn.js":322}],266:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./text-track-button.js");var i=c(n);var o=e("../../component.js");var s=c(o);var a=e("../../utils/fn.js");var u=l(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n,i){f(this,t);var o=d(this,e.call(this,r,n,i));o.el_.setAttribute("aria-label","Descriptions Menu");var s=r.textTracks();if(s){var a=u.bind(o,o.handleTracksChange);s.addEventListener("change",a);o.on("dispose",function(){s.removeEventListener("change",a);});}return o;}t.prototype.handleTracksChange=function e(t){var r=this.player().textTracks();var n=false;for(var i=0,o=r.length;i<o;i++){var s=r[i];if(s.kind!==this.kind_&&s.mode==="showing"){n=true;break;}}if(n){this.disable();}else{this.enable();}};t.prototype.buildCSSClass=function t(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this);};return t;}(i["default"]);h.prototype.kind_="descriptions";h.prototype.controlText_="Descriptions";s["default"].registerComponent("DescriptionsButton",h);r["default"]=h;},{"../../component.js":244,"../../utils/fn.js":322,"./text-track-button.js":269}],267:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./text-track-menu-item.js");var i=a(n);var o=e("../../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r,n){u(this,t);n.track={player:r,kind:n.kind,label:n.kind+" off",default:false,mode:"disabled"};n.selectable=true;var i=l(this,e.call(this,r,n));i.selected(true);return i;}t.prototype.handleTracksChange=function e(t){var r=this.player().textTracks();var n=true;for(var i=0,o=r.length;i<o;i++){var s=r[i];if(s.kind===this.track.kind&&s.mode==="showing"){n=false;break;}}this.selected(n);};return t;}(i["default"]);s["default"].registerComponent("OffTextTrackMenuItem",f);r["default"]=f;},{"../../component.js":244,"./text-track-menu-item.js":270}],268:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./text-track-button.js");var i=a(n);var o=e("../../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r,n,i){u(this,t);var o=l(this,e.call(this,r,n,i));o.el_.setAttribute("aria-label","Subtitles Menu");return o;}t.prototype.buildCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this);};return t;}(i["default"]);f.prototype.kind_="subtitles";f.prototype.controlText_="Subtitles";s["default"].registerComponent("SubtitlesButton",f);r["default"]=f;},{"../../component.js":244,"./text-track-button.js":269}],269:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../track-button.js");var i=f(n);var o=e("../../component.js");var s=f(o);var a=e("./text-track-menu-item.js");var u=f(a);var l=e("./off-text-track-menu-item.js");var c=f(l);function f(e){return e&&e.__esModule?e:{default:e};}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var v=function(e){h(t,e);function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};d(this,t);n.tracks=r.textTracks();return p(this,e.call(this,r,n));}t.prototype.createItems=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];t.push(new c["default"](this.player_,{kind:this.kind_}));this.hideThreshold_+=1;var r=this.player_.textTracks();if(!r){return t;}for(var n=0;n<r.length;n++){var i=r[n];if(i.kind===this.kind_){t.push(new u["default"](this.player_,{track:i,selectable:true}));}}return t;};return t;}(i["default"]);s["default"].registerComponent("TextTrackButton",v);r["default"]=v;},{"../../component.js":244,"../track-button.js":275,"./off-text-track-menu-item.js":267,"./text-track-menu-item.js":270}],270:[function(e,t,r){"use strict";r.__esModule=true;var n=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof(e);}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof(e);};var i=e("../../menu/menu-item.js");var o=v(i);var s=e("../../component.js");var a=v(s);var u=e("../../utils/fn.js");var l=h(u);var c=e("global/window");var f=v(c);var d=e("global/document");var p=v(d);function h(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function v(e){return e&&e.__esModule?e:{default:e};}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var _=function(e){g(t,e);function t(r,i){y(this,t);var o=i.track;var s=r.textTracks();i.label=o.label||o.language||"Unknown";i.selected=o["default"]||o.mode==="showing";var a=m(this,e.call(this,r,i));a.track=o;if(s){var u=l.bind(a,a.handleTracksChange);r.on(["loadstart","texttrackchange"],u);s.addEventListener("change",u);a.on("dispose",function(){s.removeEventListener("change",u);});}if(s&&s.onchange===undefined){var c=void 0;a.on(["tap","click"],function(){if(n(f["default"].Event)!=="object"){try{c=new f["default"].Event("change");}catch(e){}}if(!c){c=p["default"].createEvent("Event");c.initEvent("change",true,true);}s.dispatchEvent(c);});}return a;}t.prototype.handleClick=function t(r){var n=this.track.kind;var i=this.player_.textTracks();e.prototype.handleClick.call(this,r);if(!i){return;}for(var o=0;o<i.length;o++){var s=i[o];if(s.kind!==n){continue;}if(s===this.track){s.mode="showing";}else{s.mode="disabled";}}};t.prototype.handleTracksChange=function e(t){this.selected(this.track.mode==="showing");};return t;}(o["default"]);a["default"].registerComponent("TextTrackMenuItem",_);r["default"]=_;},{"../../component.js":244,"../../menu/menu-item.js":287,"../../utils/fn.js":322,"global/document":89,"global/window":90}],271:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=c(n);var o=e("../../utils/dom.js");var s=l(o);var a=e("../../utils/format-time.js");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=d(this,e.call(this,r,n));i.on(r,"timeupdate",i.updateContent);return i;}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});this.contentEl_=s.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>'+"0:00"},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateContent=function e(t){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();var n=this.localize("Current Time");var i=(0,u["default"])(r,this.player_.duration());if(i!==this.formattedTime_){this.formattedTime_=i;this.contentEl_.innerHTML='<span class="vjs-control-text">'+n+"</span> "+i;}};return t;}(i["default"]);i["default"].registerComponent("CurrentTimeDisplay",h);r["default"]=h;},{"../../component.js":244,"../../utils/dom.js":320,"../../utils/format-time.js":323}],272:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=c(n);var o=e("../../utils/dom.js");var s=l(o);var a=e("../../utils/format-time.js");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=d(this,e.call(this,r,n));i.on(r,"durationchange",i.updateContent);i.on(r,"timeupdate",i.updateContent);i.on(r,"loadedmetadata",i.updateContent);return i;}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});this.contentEl_=s.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateContent=function e(t){var r=this.player_.duration();if(r&&this.duration_!==r){this.duration_=r;var n=this.localize("Duration Time");var i=(0,u["default"])(r);this.contentEl_.innerHTML='<span class="vjs-control-text">'+n+"</span> "+i;}};return t;}(i["default"]);i["default"].registerComponent("DurationDisplay",h);r["default"]=h;},{"../../component.js":244,"../../utils/dom.js":320,"../../utils/format-time.js":323}],273:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=c(n);var o=e("../../utils/dom.js");var s=l(o);var a=e("../../utils/format-time.js");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=d(this,e.call(this,r,n));i.on(r,"timeupdate",i.updateContent);i.on(r,"durationchange",i.updateContent);return i;}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});this.contentEl_=s.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateContent=function e(t){if(this.player_.duration()){var r=this.localize("Remaining Time");var n=(0,u["default"])(this.player_.remainingTime());if(n!==this.formattedTime_){this.formattedTime_=n;this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span> -"+n;}}};return t;}(i["default"]);i["default"].registerComponent("RemainingTimeDisplay",h);r["default"]=h;},{"../../component.js":244,"../../utils/dom.js":320,"../../utils/format-time.js":323}],274:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var l=function(e){u(t,e);function t(){s(this,t);return a(this,e.apply(this,arguments));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"});};return t;}(i["default"]);i["default"].registerComponent("TimeDivider",l);r["default"]=l;},{"../../component.js":244}],275:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../menu/menu-button.js");var i=c(n);var o=e("../component.js");var s=c(o);var a=e("../utils/fn.js");var u=l(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=n.tracks;var o=d(this,e.call(this,r,n));if(o.items.length<=1){o.hide();}if(!i){return d(o);}var s=u.bind(o,o.update);i.addEventListener("removetrack",s);i.addEventListener("addtrack",s);o.player_.on("dispose",function(){i.removeEventListener("removetrack",s);i.removeEventListener("addtrack",s);});return o;}return t;}(i["default"]);s["default"].registerComponent("TrackButton",h);r["default"]=h;},{"../component.js":244,"../menu/menu-button.js":286,"../utils/fn.js":322}],276:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../slider/slider.js");var i=c(n);var o=e("../../component.js");var s=c(o);var a=e("../../utils/fn.js");var u=l(a);e("./volume-level.js");function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(r,n){f(this,t);var i=d(this,e.call(this,r,n));i.on(r,"volumechange",i.updateARIAAttributes);r.ready(u.bind(i,i.updateARIAAttributes));return i;}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"});};t.prototype.handleMouseMove=function e(t){this.checkMuted();this.player_.volume(this.calculateDistance(t));};t.prototype.checkMuted=function e(){if(this.player_.muted()){this.player_.muted(false);}};t.prototype.getPercent=function e(){if(this.player_.muted()){return 0;}return this.player_.volume();};t.prototype.stepForward=function e(){this.checkMuted();this.player_.volume(this.player_.volume()+.1);};t.prototype.stepBack=function e(){this.checkMuted();this.player_.volume(this.player_.volume()-.1);};t.prototype.updateARIAAttributes=function e(t){var r=(this.player_.volume()*100).toFixed(2);this.el_.setAttribute("aria-valuenow",r);this.el_.setAttribute("aria-valuetext",r+"%");};return t;}(i["default"]);h.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};h.prototype.playerEvent="volumechange";s["default"].registerComponent("VolumeBar",h);r["default"]=h;},{"../../component.js":244,"../../slider/slider.js":296,"../../utils/fn.js":322,"./volume-level.js":278}],277:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=o(n);e("./volume-bar.js");function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var l=function(e){u(t,e);function t(r,n){s(this,t);var i=a(this,e.call(this,r,n));if(r.tech_&&r.tech_.featuresVolumeControl===false){i.addClass("vjs-hidden");}i.on(r,"loadstart",function(){if(r.tech_.featuresVolumeControl===false){this.addClass("vjs-hidden");}else{this.removeClass("vjs-hidden");}});return i;}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"});};return t;}(i["default"]);l.prototype.options_={children:["volumeBar"]};i["default"].registerComponent("VolumeControl",l);r["default"]=l;},{"../../component.js":244,"./volume-bar.js":276}],278:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../../component.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var l=function(e){u(t,e);function t(){s(this,t);return a(this,e.apply(this,arguments));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'});};return t;}(i["default"]);i["default"].registerComponent("VolumeLevel",l);r["default"]=l;},{"../../component.js":244}],279:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../utils/fn.js");var i=y(n);var o=e("../component.js");var s=v(o);var a=e("../popup/popup.js");var u=v(a);var l=e("../popup/popup-button.js");var c=v(l);var f=e("./mute-toggle.js");var d=v(f);var p=e("./volume-control/volume-bar.js");var h=v(p);function v(e){return e&&e.__esModule?e:{default:e};}function y(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var b=function(e){_(t,e);function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};m(this,t);if(n.inline===undefined){n.inline=true;}if(n.vertical===undefined){if(n.inline){n.vertical=false;}else{n.vertical=true;}}n.volumeBar=n.volumeBar||{};n.volumeBar.vertical=!!n.vertical;var i=g(this,e.call(this,r,n));i.on(r,"volumechange",i.volumeUpdate);i.on(r,"loadstart",i.volumeUpdate);function o(){if(r.tech_&&r.tech_.featuresVolumeControl===false){this.addClass("vjs-hidden");}else{this.removeClass("vjs-hidden");}}o.call(i);i.on(r,"loadstart",o);i.on(i.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active");});i.on(i.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active");});i.on(i.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing");});i.on(i.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing");});return i;}t.prototype.buildCSSClass=function t(){var r="";if(this.options_.vertical){r="vjs-volume-menu-button-vertical";}else{r="vjs-volume-menu-button-horizontal";}return"vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+r;};t.prototype.createPopup=function e(){var t=new u["default"](this.player_,{contentElType:"div"});var r=new h["default"](this.player_,this.options_.volumeBar);t.addChild(r);this.menuContent=t;this.volumeBar=r;this.attachVolumeBarEvents();return t;};t.prototype.handleClick=function t(r){d["default"].prototype.handleClick.call(this);e.prototype.handleClick.call(this);};t.prototype.attachVolumeBarEvents=function e(){this.menuContent.on(["mousedown","touchdown"],i.bind(this,this.handleMouseDown));};t.prototype.handleMouseDown=function e(t){this.on(["mousemove","touchmove"],i.bind(this.volumeBar,this.volumeBar.handleMouseMove));this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp);};t.prototype.handleMouseUp=function e(t){this.off(["mousemove","touchmove"],i.bind(this.volumeBar,this.volumeBar.handleMouseMove));};return t;}(c["default"]);b.prototype.volumeUpdate=d["default"].prototype.update;b.prototype.controlText_="Mute";s["default"].registerComponent("VolumeMenuButton",b);r["default"]=b;},{"../component.js":244,"../popup/popup-button.js":292,"../popup/popup.js":293,"../utils/fn.js":322,"./mute-toggle.js":250,"./volume-control/volume-bar.js":276}],280:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./component");var i=l(n);var o=e("./modal-dialog");var s=l(o);var a=e("./utils/merge-options");var u=l(a);function l(e){return e&&e.__esModule?e:{default:e};}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var p=function(e){d(t,e);function t(r,n){c(this,t);var i=f(this,e.call(this,r,n));i.on(r,"error",i.open);return i;}t.prototype.buildCSSClass=function t(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this);};t.prototype.content=function e(){var t=this.player().error();return t?this.localize(t.message):"";};return t;}(s["default"]);p.prototype.options_=(0,u["default"])(s["default"].prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});i["default"].registerComponent("ErrorDisplay",p);r["default"]=p;},{"./component":244,"./modal-dialog":289,"./utils/merge-options":326}],281:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./utils/events.js");var i=o(n);function o(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}var s=function e(){};s.prototype.allowedEvents_={};s.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){};i.on(this,e,t);this.addEventListener=r;};s.prototype.addEventListener=s.prototype.on;s.prototype.off=function(e,t){i.off(this,e,t);};s.prototype.removeEventListener=s.prototype.off;s.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){};i.one(this,e,t);this.addEventListener=r;};s.prototype.trigger=function(e){var t=e.type||e;if(typeof e==="string"){e={type:t};}e=i.fixEvent(e);if(this.allowedEvents_[t]&&this["on"+t]){this["on"+t](e);}i.trigger(this,e);};s.prototype.dispatchEvent=s.prototype.trigger;r["default"]=s;},{"./utils/events.js":321}],282:[function(e,t,r){"use strict";r.__esModule=true;var n=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof(e);}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof(e);};var i=e("./utils/log");var o=a(i);var s=e("./utils/obj");function a(e){return e&&e.__esModule?e:{default:e};}var u=function e(t,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof r==="undefined"?"undefined":n(r)));}t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(r){t.super_=r;}};var l=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=function e(){t.apply(this,arguments);};var i={};if((0,s.isObject)(r)){if(typeof r.init==="function"){o["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead.");r.constructor=r.init;}if(r.constructor!==Object.prototype.constructor){n=r.constructor;}i=r;}else if(typeof r==="function"){n=r;}u(n,t);for(var a in i){if(i.hasOwnProperty(a)){n.prototype[a]=i[a];}}return n;};r["default"]=l;},{"./utils/log":325,"./utils/obj":327}],283:[function(e,t,r){"use strict";r.__esModule=true;var n=e("global/document");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}var s={};var a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var u=a[0];var l=void 0;for(var c=0;c<a.length;c++){if(a[c][1]in i["default"]){l=a[c];break;}}if(l){for(var f=0;f<l.length;f++){s[u[f]]=l[f];}}r["default"]=s;},{"global/document":89}],284:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./component");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function a(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var l=function(e){u(t,e);function t(){s(this,t);return a(this,e.apply(this,arguments));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});};return t;}(i["default"]);i["default"].registerComponent("LoadingSpinner",l);r["default"]=l;},{"./component":244}],285:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./utils/obj");function i(e){if(e instanceof i){return e;}if(typeof e==="number"){this.code=e;}else if(typeof e==="string"){this.message=e;}else if((0,n.isObject)(e)){if(typeof e.code==="number"){this.code=e.code;}(0,n.assign)(this,e);}if(!this.message){this.message=i.defaultMessages[this.code]||"";}}i.prototype.code=0;i.prototype.message="";i.prototype.status=null;i.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];i.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var o=0;o<i.errorTypes.length;o++){i[i.errorTypes[o]]=o;i.prototype[i.errorTypes[o]]=o;}r["default"]=i;},{"./utils/obj":327}],286:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../clickable-component.js");var i=y(n);var o=e("../component.js");var s=y(o);var a=e("./menu.js");var u=y(a);var l=e("../utils/dom.js");var c=v(l);var f=e("../utils/fn.js");var d=v(f);var p=e("../utils/to-title-case.js");var h=y(p);function v(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function y(e){return e&&e.__esModule?e:{default:e};}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var b=function(e){_(t,e);function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};m(this,t);var i=g(this,e.call(this,r,n));i.update();i.enabled_=true;i.el_.setAttribute("aria-haspopup","true");i.el_.setAttribute("role","menuitem");i.on("keydown",i.handleSubmenuKeyPress);return i;}t.prototype.update=function e(){var t=this.createMenu();if(this.menu){this.removeChild(this.menu);}this.menu=t;this.addChild(t);this.buttonPressed_=false;this.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide();}else{this.show();}};t.prototype.createMenu=function e(){var t=new u["default"](this.player_);this.hideThreshold_=0;if(this.options_.title){var r=c.createEl("li",{className:"vjs-menu-title",innerHTML:(0,h["default"])(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;t.children_.unshift(r);c.insertElFirst(r,t.contentEl());}this.items=this.createItems();if(this.items){for(var n=0;n<this.items.length;n++){t.addItem(this.items[n]);}}return t;};t.prototype.createItems=function e(){};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()});};t.prototype.buildCSSClass=function t(){var r="vjs-menu-button";if(this.options_.inline===true){r+="-inline";}else{r+="-popup";}return"vjs-menu-button "+r+" "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(t){this.one(this.menu.contentEl(),"mouseleave",d.bind(this,function(e){this.unpressButton();this.el_.blur();}));if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}};t.prototype.handleKeyPress=function t(r){if(r.which===27||r.which===9){if(this.buttonPressed_){this.unpressButton();}if(r.which!==9){r.preventDefault();}}else if(r.which===38||r.which===40){if(!this.buttonPressed_){this.pressButton();r.preventDefault();}}else{e.prototype.handleKeyPress.call(this,r);}};t.prototype.handleSubmenuKeyPress=function e(t){if(t.which===27||t.which===9){if(this.buttonPressed_){this.unpressButton();}if(t.which!==9){t.preventDefault();}}};t.prototype.pressButton=function e(){if(this.enabled_){this.buttonPressed_=true;this.menu.lockShowing();this.el_.setAttribute("aria-expanded","true");this.menu.focus();}};t.prototype.unpressButton=function e(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-expanded","false");this.el_.focus();}};t.prototype.disable=function t(){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-expanded","false");this.enabled_=false;return e.prototype.disable.call(this);};t.prototype.enable=function t(){this.enabled_=true;return e.prototype.enable.call(this);};return t;}(i["default"]);s["default"].registerComponent("MenuButton",b);r["default"]=b;},{"../clickable-component.js":242,"../component.js":244,"../utils/dom.js":320,"../utils/fn.js":322,"../utils/to-title-case.js":330,"./menu.js":288}],287:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../clickable-component.js");var i=u(n);var o=e("../component.js");var s=u(o);var a=e("../utils/obj");function u(e){return e&&e.__esModule?e:{default:e};}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var d=function(e){f(t,e);function t(r,n){l(this,t);var i=c(this,e.call(this,r,n));i.selectable=n.selectable;i.selected(n.selected);if(i.selectable){i.el_.setAttribute("role","menuitemcheckbox");}else{i.el_.setAttribute("role","menuitem");}return i;}t.prototype.createEl=function t(r,n,i){this.nonIconControl=true;return e.prototype.createEl.call(this,"li",(0,a.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},n),i);};t.prototype.handleClick=function e(t){this.selected(true);};t.prototype.selected=function e(t){if(this.selectable){if(t){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText(" ");}}};return t;}(i["default"]);s["default"].registerComponent("MenuItem",d);r["default"]=d;},{"../clickable-component.js":242,"../component.js":244,"../utils/obj":327}],288:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component.js");var i=d(n);var o=e("../utils/dom.js");var s=f(o);var a=e("../utils/fn.js");var u=f(a);var l=e("../utils/events.js");var c=f(l);function f(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function d(e){return e&&e.__esModule?e:{default:e};}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var y=function(e){v(t,e);function t(r,n){p(this,t);var i=h(this,e.call(this,r,n));i.focusedChild_=-1;i.on("keydown",i.handleKeyPress);return i;}t.prototype.addItem=function e(t){this.addChild(t);t.on("click",u.bind(this,function(e){this.unlockShowing();}));};t.prototype.createEl=function t(){var r=this.options_.contentElType||"ul";this.contentEl_=s.createEl(r,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});n.setAttribute("role","presentation");n.appendChild(this.contentEl_);c.on(n,"click",function(e){e.preventDefault();e.stopImmediatePropagation();});return n;};t.prototype.handleKeyPress=function e(t){if(t.which===37||t.which===40){t.preventDefault();this.stepForward();}else if(t.which===38||t.which===39){t.preventDefault();this.stepBack();}};t.prototype.stepForward=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_+1;}this.focus(t);};t.prototype.stepBack=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_-1;}this.focus(t);};t.prototype.focus=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=this.children().slice();var n=r.length&&r[0].className&&/vjs-menu-title/.test(r[0].className);if(n){r.shift();}if(r.length>0){if(t<0){t=0;}else if(t>=r.length){t=r.length-1;}this.focusedChild_=t;r[t].el_.focus();}};return t;}(i["default"]);i["default"].registerComponent("Menu",y);r["default"]=y;},{"../component.js":244,"../utils/dom.js":320,"../utils/events.js":321,"../utils/fn.js":322}],289:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./utils/dom");var i=c(n);var o=e("./utils/fn");var s=c(o);var a=e("./component");var u=l(a);function l(e){return e&&e.__esModule?e:{default:e};}function c(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h="vjs-modal-dialog";var v=27;var y=function(e){p(t,e);function t(r,n){f(this,t);var o=d(this,e.call(this,r,n));o.opened_=o.hasBeenOpened_=o.hasBeenFilled_=false;o.closeable(!o.options_.uncloseable);o.content(o.options_.content);o.contentEl_=i.createEl("div",{className:h+"-content"},{role:"document"});o.descEl_=i.createEl("p",{className:h+"-description vjs-offscreen",id:o.el().getAttribute("aria-describedby")});i.textContent(o.descEl_,o.description());o.el_.appendChild(o.descEl_);o.el_.appendChild(o.contentEl_);return o;}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"});};t.prototype.buildCSSClass=function t(){return h+" vjs-hidden "+e.prototype.buildCSSClass.call(this);};t.prototype.handleKeyPress=function e(t){if(t.which===v&&this.closeable()){this.close();}};t.prototype.label=function e(){return this.options_.label||this.localize("Modal Window");};t.prototype.description=function e(){var t=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.");}return t;};t.prototype.open=function e(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill();}this.wasPlaying_=!t.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){t.pause();}if(this.closeable()){this.on(this.el_.ownerDocument,"keydown",s.bind(this,this.handleKeyPress));}t.controls(false);this.show();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true;}return this;};t.prototype.opened=function e(t){if(typeof t==="boolean"){this[t?"open":"close"]();}return this.opened_;};t.prototype.close=function e(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){t.play();}if(this.closeable()){this.off(this.el_.ownerDocument,"keydown",s.bind(this,this.handleKeyPress));}t.controls(true);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");if(this.options_.temporary){this.dispose();}}return this;};t.prototype.closeable=function e(t){if(typeof t==="boolean"){var e=this.closeable_=!!t;var r=this.getChild("closeButton");if(e&&!r){var n=this.contentEl_;this.contentEl_=this.el_;r=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=n;this.on(r,"close",this.close);}if(!e&&r){this.off(r,"close",this.close);this.removeChild(r);r.dispose();}}return this.closeable_;};t.prototype.fill=function e(){return this.fillWith(this.content());};t.prototype.fillWith=function e(t){var r=this.contentEl();var n=r.parentNode;var o=r.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;n.removeChild(r);this.empty();i.insertContent(r,t);this.trigger("modalfill");if(o){n.insertBefore(r,o);}else{n.appendChild(r);}return this;};t.prototype.empty=function e(){this.trigger("beforemodalempty");i.emptyEl(this.contentEl());this.trigger("modalempty");return this;};t.prototype.content=function e(t){if(typeof t!=="undefined"){this.content_=t;}return this.content_;};return t;}(u["default"]);y.prototype.options_={pauseOnOpen:true,temporary:true};u["default"].registerComponent("ModalDialog",y);r["default"]=y;},{"./component":244,"./utils/dom":320,"./utils/fn":322}],290:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./component.js");var i=X(n);var o=e("global/document");var s=X(o);var a=e("global/window");var u=X(a);var l=e("./utils/events.js");var c=$(l);var f=e("./utils/dom.js");var d=$(f);var p=e("./utils/fn.js");var h=$(p);var v=e("./utils/guid.js");var y=$(v);var m=e("./utils/browser.js");var g=$(m);var _=e("./utils/log.js");var b=X(_);var w=e("./utils/to-title-case.js");var T=X(w);var j=e("./utils/time-ranges.js");var k=e("./utils/buffer.js");var E=e("./utils/stylesheet.js");var C=$(E);var x=e("./fullscreen-api.js");var S=X(x);var O=e("./media-error.js");var P=X(O);var A=e("safe-json-parse/tuple");var M=X(A);var I=e("./utils/obj");var L=e("./utils/merge-options.js");var R=X(L);var B=e("./tracks/text-track-list-converter.js");var D=X(B);var N=e("./modal-dialog");var F=X(N);var U=e("./tech/tech.js");var H=X(U);var V=e("./tracks/audio-track-list.js");var W=X(V);var q=e("./tracks/video-track-list.js");var z=X(q);e("./tech/loader.js");e("./tech/flash.js");e("./poster-image.js");e("./tracks/text-track-display.js");e("./loading-spinner.js");e("./big-play-button.js");e("./close-button.js");e("./control-bar/control-bar.js");e("./error-display.js");e("./tracks/text-track-settings.js");e("./tech/html5.js");function $(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function X(e){return e&&e.__esModule?e:{default:e};}function G(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function K(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function Y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var J=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"];var Q=function(e){Y(t,e);function t(r,n,i){G(this,t);r.id=r.id||"vjs_video_"+y.newGUID();n=(0,I.assign)(t.getTagSettings(r),n);n.initChildren=false;n.createEl=false;n.reportTouchActivity=false;if(!n.language){if(typeof r.closest==="function"){var o=r.closest("[lang]");if(o){n.language=o.getAttribute("lang");}}else{var s=r;while(s&&s.nodeType===1){if(d.getElAttributes(s).hasOwnProperty("lang")){n.language=s.getAttribute("lang");break;}s=s.parentNode;}}}var a=K(this,e.call(this,null,n,i));if(!a.options_||!a.options_.techOrder||!a.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?");}a.tag=r;a.tagAttributes=r&&d.getElAttributes(r);a.language(a.options_.language);if(n.languages){var u={};Object.getOwnPropertyNames(n.languages).forEach(function(e){u[e.toLowerCase()]=n.languages[e];});a.languages_=u;}else{a.languages_=t.prototype.options_.languages;}a.cache_={};a.poster_=n.poster||"";a.controls_=!!n.controls;r.controls=false;a.scrubbing_=false;a.el_=a.createEl();var l=(0,R["default"])(a.options_);if(n.plugins){var c=n.plugins;Object.getOwnPropertyNames(c).forEach(function(e){if(typeof this[e]==="function"){this[e](c[e]);}else{b["default"].error("Unable to find plugin:",e);}},a);}a.options_.playerOptions=l;a.initChildren();a.isAudio(r.nodeName.toLowerCase()==="audio");if(a.controls()){a.addClass("vjs-controls-enabled");}else{a.addClass("vjs-controls-disabled");}a.el_.setAttribute("role","region");if(a.isAudio()){a.el_.setAttribute("aria-label","audio player");}else{a.el_.setAttribute("aria-label","video player");}if(a.isAudio()){a.addClass("vjs-audio");}if(a.flexNotSupported_()){a.addClass("vjs-no-flex");}if(!g.IS_IOS){a.addClass("vjs-workinghover");}t.players[a.id_]=a;a.userActive(true);a.reportUserActivity();a.listenForUserActivity_();a.on("fullscreenchange",a.handleFullscreenChange_);a.on("stageclick",a.handleStageClick_);return a;}t.prototype.dispose=function r(){this.trigger("dispose");this.off("dispose");if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);}t.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null;}if(this.el_&&this.el_.player){this.el_.player=null;}if(this.tech_){this.tech_.dispose();}e.prototype.dispose.call(this);};t.prototype.createEl=function t(){var r=this.tag;var n=void 0;var i=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player");if(i){n=this.el_=r.parentNode;}else{n=this.el_=e.prototype.createEl.call(this,"div");}r.setAttribute("tabindex","-1");r.removeAttribute("width");r.removeAttribute("height");var o=d.getElAttributes(r);Object.getOwnPropertyNames(o).forEach(function(e){if(e==="class"){n.className+=" "+o[e];}else{n.setAttribute(e,o[e]);}});r.playerId=r.id;r.id+="_html5_api";r.className="vjs-tech";r.player=n.player=this;this.addClass("vjs-paused");if(u["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=C.createStyleElement("vjs-styles-dimensions");var s=d.$(".vjs-styles-defaults");var a=d.$("head");a.insertBefore(this.styleEl_,s?s.nextSibling:a.firstChild);}this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);var l=r.getElementsByTagName("a");for(var c=0;c<l.length;c++){var f=l.item(c);d.addElClass(f,"vjs-hidden");f.setAttribute("hidden","hidden");}r.initNetworkState_=r.networkState;if(r.parentNode&&!i){r.parentNode.insertBefore(n,r);}d.insertElFirst(r,n);this.children_.unshift(r);this.el_=n;return n;};t.prototype.width=function e(t){return this.dimension("width",t);};t.prototype.height=function e(t){return this.dimension("height",t);};t.prototype.dimension=function e(t,r){var n=t+"_";if(r===undefined){return this[n]||0;}if(r===""){this[n]=undefined;}else{var i=parseFloat(r);if(isNaN(i)){b["default"].error('Improper value "'+r+'" supplied for for '+t);return this;}this[n]=i;}this.updateStyleEl_();return this;};t.prototype.fluid=function e(t){if(t===undefined){return!!this.fluid_;}this.fluid_=!!t;if(t){this.addClass("vjs-fluid");}else{this.removeClass("vjs-fluid");}this.updateStyleEl_();};t.prototype.aspectRatio=function e(t){if(t===undefined){return this.aspectRatio_;}if(!/^\d+\:\d+$/.test(t)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");}this.aspectRatio_=t;this.fluid(true);this.updateStyleEl_();};t.prototype.updateStyleEl_=function e(){if(u["default"].VIDEOJS_NO_DYNAMIC_STYLE===true){var t=typeof this.width_==="number"?this.width_:this.options_.width;var r=typeof this.height_==="number"?this.height_:this.options_.height;var n=this.tech_&&this.tech_.el();if(n){if(t>=0){n.width=t;}if(r>=0){n.height=r;}}return;}var i=void 0;var o=void 0;var s=void 0;var a=void 0;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){s=this.aspectRatio_;}else if(this.videoWidth()>0){s=this.videoWidth()+":"+this.videoHeight();}else{s="16:9";}var l=s.split(":");var c=l[1]/l[0];if(this.width_!==undefined){i=this.width_;}else if(this.height_!==undefined){i=this.height_/c;}else{i=this.videoWidth()||300;}if(this.height_!==undefined){o=this.height_;}else{o=i*c;}if(/^[^a-zA-Z]/.test(this.id())){a="dimensions-"+this.id();}else{a=this.id()+"-dimensions";}this.addClass(a);C.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+i+"px;\n        height: "+o+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+c*100+"%;\n      }\n    ");};t.prototype.loadTech_=function e(t,r){var n=this;if(this.tech_){this.unloadTech_();}if(t!=="Html5"&&this.tag){H["default"].getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null;}this.techName_=t;this.isReady_=false;var o=(0,I.assign)({source:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+t+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"]},this.options_[t.toLowerCase()]);if(this.tag){o.tag=this.tag;}if(r){this.currentType_=r.type;if(r.src===this.cache_.src&&this.cache_.currentTime>0){o.startTime=this.cache_.currentTime;}this.cache_.sources=null;this.cache_.source=r;this.cache_.src=r.src;}var s=H["default"].getTech(t);if(!s){s=i["default"].getComponent(t);}this.tech_=new s(o);this.tech_.ready(h.bind(this,this.handleTechReady_),true);D["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_);J.forEach(function(e){n.on(n.tech_,e,n["handleTech"+(0,T["default"])(e)+"_"]);});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"canplay",this.handleTechCanPlay_);this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_);this.on(this.tech_,"playing",this.handleTechPlaying_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"seeked",this.handleTechSeeked_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_();}if(this.tech_.el().parentNode!==this.el()&&(t!=="Html5"||!this.tag)){d.insertElFirst(this.tech_.el(),this.el());}if(this.tag){this.tag.player=null;this.tag=null;}};t.prototype.unloadTech_=function e(){this.videoTracks_=this.videoTracks();this.textTracks_=this.textTracks();this.audioTracks_=this.audioTracks();this.textTracksJson_=D["default"].textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;};t.prototype.tech=function e(t){if(t&&t.IWillNotUseThisInPlugins){return this.tech_;}var r="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";u["default"].alert(r);throw new Error(r);};t.prototype.addTechControlsListeners_=function e(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_);};t.prototype.removeTechControlsListeners_=function e(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);};t.prototype.handleTechReady_=function e(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume);}this.handleTechPosterChange_();this.handleTechDurationChange_();if((this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster;}catch(e){(0,b["default"])("deleting tag.poster throws in some browsers",e);}this.play();}};t.prototype.handleTechLoadStart_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay");}else{this.hasStarted(false);this.trigger("loadstart");}};t.prototype.hasStarted=function e(t){if(t!==undefined){if(this.hasStarted_!==t){this.hasStarted_=t;if(t){this.addClass("vjs-has-started");this.trigger("firstplay");}else{this.removeClass("vjs-has-started");}}return this;}return!!this.hasStarted_;};t.prototype.handleTechPlay_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play");};t.prototype.handleTechWaiting_=function e(){var t=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",function(){return t.removeClass("vjs-waiting");});};t.prototype.handleTechCanPlay_=function e(){this.removeClass("vjs-waiting");this.trigger("canplay");};t.prototype.handleTechCanPlayThrough_=function e(){this.removeClass("vjs-waiting");this.trigger("canplaythrough");};t.prototype.handleTechPlaying_=function e(){this.removeClass("vjs-waiting");this.trigger("playing");};t.prototype.handleTechSeeking_=function e(){this.addClass("vjs-seeking");this.trigger("seeking");};t.prototype.handleTechSeeked_=function e(){this.removeClass("vjs-seeking");this.trigger("seeked");};t.prototype.handleTechFirstPlay_=function e(){if(this.options_.starttime){b["default"].warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime);}this.addClass("vjs-has-started");this.trigger("firstplay");};t.prototype.handleTechPause_=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause");};t.prototype.handleTechEnded_=function e(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play();}else if(!this.paused()){this.pause();}this.trigger("ended");};t.prototype.handleTechDurationChange_=function e(){this.duration(this.techGet_("duration"));};t.prototype.handleTechClick_=function e(t){if(t.button!==0){return;}if(this.controls()){if(this.paused()){this.play();}else{this.pause();}}};t.prototype.handleTechTap_=function e(){this.userActive(!this.userActive());};t.prototype.handleTechTouchStart_=function e(){this.userWasActive=this.userActive();};t.prototype.handleTechTouchMove_=function e(){if(this.userWasActive){this.reportUserActivity();}};t.prototype.handleTechTouchEnd_=function e(t){t.preventDefault();};t.prototype.handleFullscreenChange_=function e(){if(this.isFullscreen()){this.addClass("vjs-fullscreen");}else{this.removeClass("vjs-fullscreen");}};t.prototype.handleStageClick_=function e(){this.reportUserActivity();};t.prototype.handleTechFullscreenChange_=function e(t,r){if(r){this.isFullscreen(r.isFullscreen);}this.trigger("fullscreenchange");};t.prototype.handleTechError_=function e(){var t=this.tech_.error();this.error(t);};t.prototype.handleTechTextData_=function e(){var t=null;if(arguments.length>1){t=arguments[1];}this.trigger("textdata",t);};t.prototype.getCache=function e(){return this.cache_;};t.prototype.techCall_=function e(t,r){if(this.tech_&&!this.tech_.isReady_){this.tech_.ready(function(){this[t](r);},true);}else{try{if(this.tech_){this.tech_[t](r);}}catch(e){(0,b["default"])(e);throw e;}}};t.prototype.techGet_=function e(t){if(this.tech_&&this.tech_.isReady_){try{return this.tech_[t]();}catch(e){if(this.tech_[t]===undefined){(0,b["default"])("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e);}else if(e.name==="TypeError"){(0,b["default"])("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;}else{(0,b["default"])(e);}throw e;}}return;};t.prototype.play=function e(){if(this.src()||this.currentSrc()){this.techCall_("play");}else{this.tech_.one("loadstart",function(){this.play();});}return this;};t.prototype.pause=function e(){this.techCall_("pause");return this;};t.prototype.paused=function e(){return this.techGet_("paused")===false?false:true;};t.prototype.scrubbing=function e(t){if(t!==undefined){this.scrubbing_=!!t;if(t){this.addClass("vjs-scrubbing");}else{this.removeClass("vjs-scrubbing");}return this;}return this.scrubbing_;};t.prototype.currentTime=function e(t){if(t!==undefined){this.techCall_("setCurrentTime",t);return this;}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime;};t.prototype.duration=function e(t){if(t===undefined){return this.cache_.duration||0;}t=parseFloat(t)||0;if(t<0){t=Infinity;}if(t!==this.cache_.duration){this.cache_.duration=t;if(t===Infinity){this.addClass("vjs-live");}else{this.removeClass("vjs-live");}this.trigger("durationchange");}return this;};t.prototype.remainingTime=function e(){return this.duration()-this.currentTime();};t.prototype.buffered=function e(){var e=this.techGet_("buffered");if(!e||!e.length){e=(0,j.createTimeRange)(0,0);}return e;};t.prototype.bufferedPercent=function e(){return(0,k.bufferedPercent)(this.buffered(),this.duration());};t.prototype.bufferedEnd=function e(){var t=this.buffered();var r=this.duration();var n=t.end(t.length-1);if(n>r){n=r;}return n;};t.prototype.volume=function e(t){var r=void 0;if(t!==undefined){r=Math.max(0,Math.min(1,parseFloat(t)));this.cache_.volume=r;this.techCall_("setVolume",r);return this;}r=parseFloat(this.techGet_("volume"));return isNaN(r)?1:r;};t.prototype.muted=function e(t){if(t!==undefined){this.techCall_("setMuted",t);return this;}return this.techGet_("muted")||false;};t.prototype.supportsFullScreen=function e(){return this.techGet_("supportsFullScreen")||false;};t.prototype.isFullscreen=function e(t){if(t!==undefined){this.isFullscreen_=!!t;return this;}return!!this.isFullscreen_;};t.prototype.requestFullscreen=function e(){var t=S["default"];this.isFullscreen(true);if(t.requestFullscreen){c.on(s["default"],t.fullscreenchange,h.bind(this,function e(r){this.isFullscreen(s["default"][t.fullscreenElement]);if(this.isFullscreen()===false){c.off(s["default"],t.fullscreenchange,e);}this.trigger("fullscreenchange");}));this.el_[t.requestFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen");}else{this.enterFullWindow();this.trigger("fullscreenchange");}return this;};t.prototype.exitFullscreen=function e(){var t=S["default"];this.isFullscreen(false);if(t.requestFullscreen){s["default"][t.exitFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen");}else{this.exitFullWindow();this.trigger("fullscreenchange");}return this;};t.prototype.enterFullWindow=function e(){this.isFullWindow=true;this.docOrigOverflow=s["default"].documentElement.style.overflow;c.on(s["default"],"keydown",h.bind(this,this.fullWindowOnEscKey));s["default"].documentElement.style.overflow="hidden";d.addElClass(s["default"].body,"vjs-full-window");this.trigger("enterFullWindow");};t.prototype.fullWindowOnEscKey=function e(t){if(t.keyCode===27){if(this.isFullscreen()===true){this.exitFullscreen();}else{this.exitFullWindow();}}};t.prototype.exitFullWindow=function e(){this.isFullWindow=false;c.off(s["default"],"keydown",this.fullWindowOnEscKey);s["default"].documentElement.style.overflow=this.docOrigOverflow;d.removeElClass(s["default"].body,"vjs-full-window");this.trigger("exitFullWindow");};t.prototype.canPlayType=function e(t){var r=void 0;for(var n=0,o=this.options_.techOrder;n<o.length;n++){var s=(0,T["default"])(o[n]);var a=H["default"].getTech(s);if(!a){a=i["default"].getComponent(s);}if(!a){b["default"].error('The "'+s+'" tech is undefined. Skipped browser support check for that tech.');continue;}if(a.isSupported()){r=a.canPlayType(t);if(r){return r;}}}return"";};t.prototype.selectSource=function e(t){var r=this;var n=this.options_.techOrder.map(T["default"]).map(function(e){return[e,H["default"].getTech(e)||i["default"].getComponent(e)];}).filter(function(e){var t=e[0],r=e[1];if(r){return r.isSupported();}b["default"].error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.');return false;});var o=function e(t,r,n){var i=void 0;t.some(function(e){return r.some(function(t){i=n(e,t);if(i){return true;}});});return i;};var s=void 0;var a=function e(t){return function(e,r){return t(r,e);};};var u=function e(t,n){var i=t[0],o=t[1];if(o.canPlaySource(n,r.options_[i.toLowerCase()])){return{source:n,tech:i};}};if(this.options_.sourceOrder){s=o(t,n,a(u));}else{s=o(n,t,u);}return s||false;};t.prototype.src=function e(t){if(t===undefined){return this.techGet_("src");}var r=H["default"].getTech(this.techName_);if(!r){r=i["default"].getComponent(this.techName_);}if(Array.isArray(t)){this.sourceList_(t);}else if(typeof t==="string"){this.src({src:t});}else if(t instanceof Object){if(t.type&&!r.canPlaySource(t,this.options_[this.techName_.toLowerCase()])){this.sourceList_([t]);}else{this.cache_.sources=null;this.cache_.source=t;this.cache_.src=t.src;this.currentType_=t.type||"";this.ready(function(){if(r.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",t);}else{this.techCall_("src",t.src);}if(this.options_.preload==="auto"){this.load();}if(this.options_.autoplay){this.play();}},true);}}return this;};t.prototype.sourceList_=function e(t){var r=this.selectSource(t);if(r){if(r.tech===this.techName_){this.src(r.source);}else{this.loadTech_(r.tech,r.source);}this.cache_.sources=t;}else{this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);this.triggerReady();}};t.prototype.load=function e(){this.techCall_("load");return this;};t.prototype.reset=function e(){this.loadTech_((0,T["default"])(this.options_.techOrder[0]),null);this.techCall_("reset");return this;};t.prototype.currentSources=function e(){var t=this.currentSource();var r=[];if(Object.keys(t).length!==0){r.push(t);}return this.cache_.sources||r;};t.prototype.currentSource=function e(){var t={};var r=this.currentSrc();if(r){t.src=r;}return this.cache_.source||t;};t.prototype.currentSrc=function e(){return this.techGet_("currentSrc")||this.cache_.src||"";};t.prototype.currentType=function e(){return this.currentType_||"";};t.prototype.preload=function e(t){if(t!==undefined){this.techCall_("setPreload",t);this.options_.preload=t;return this;}return this.techGet_("preload");};t.prototype.autoplay=function e(t){if(t!==undefined){this.techCall_("setAutoplay",t);this.options_.autoplay=t;return this;}return this.techGet_("autoplay",t);};t.prototype.loop=function e(t){if(t!==undefined){this.techCall_("setLoop",t);this.options_.loop=t;return this;}return this.techGet_("loop");};t.prototype.poster=function e(t){if(t===undefined){return this.poster_;}if(!t){t="";}this.poster_=t;this.techCall_("setPoster",t);this.trigger("posterchange");return this;};t.prototype.handleTechPosterChange_=function e(){if(!this.poster_&&this.tech_&&this.tech_.poster){this.poster_=this.tech_.poster()||"";this.trigger("posterchange");}};t.prototype.controls=function e(t){if(t!==undefined){t=!!t;if(this.controls_!==t){this.controls_=t;if(this.usingNativeControls()){this.techCall_("setControls",t);}if(t){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_();}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_();}}}return this;}return!!this.controls_;};t.prototype.usingNativeControls=function e(t){if(t!==undefined){t=!!t;if(this.usingNativeControls_!==t){this.usingNativeControls_=t;if(t){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols");}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols");}}return this;}return!!this.usingNativeControls_;};t.prototype.error=function e(t){if(t===undefined){return this.error_||null;}if(t===null){this.error_=t;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close();}return this;}this.error_=new P["default"](t);this.addClass("vjs-error");b["default"].error("(CODE:"+this.error_.code+" "+P["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return this;};t.prototype.reportUserActivity=function e(t){this.userActivity_=true;};t.prototype.userActive=function e(t){if(t!==undefined){t=!!t;if(t!==this.userActive_){this.userActive_=t;if(t){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");}else{this.userActivity_=false;if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault();});}this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive");}}return this;}return this.userActive_;};t.prototype.listenForUserActivity_=function e(){var t=void 0;var r=void 0;var n=void 0;var i=h.bind(this,this.reportUserActivity);var o=function e(t){if(t.screenX!==r||t.screenY!==n){r=t.screenX;n=t.screenY;i();}};var s=function e(){i();this.clearInterval(t);t=this.setInterval(i,250);};var a=function e(r){i();this.clearInterval(t);};this.on("mousedown",s);this.on("mousemove",o);this.on("mouseup",a);this.on("keydown",i);this.on("keyup",i);var u=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=false;this.userActive(true);this.clearTimeout(u);var e=this.options_.inactivityTimeout;if(e>0){u=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false);}},e);}}},250);};t.prototype.playbackRate=function e(t){if(t!==undefined){this.techCall_("setPlaybackRate",t);return this;}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("playbackRate");}return 1;};t.prototype.isAudio=function e(t){if(t!==undefined){this.isAudio_=!!t;return this;}return!!this.isAudio_;};t.prototype.videoTracks=function e(){if(!this.tech_){this.videoTracks_=this.videoTracks_||new z["default"]();return this.videoTracks_;}return this.tech_.videoTracks();};t.prototype.audioTracks=function e(){if(!this.tech_){this.audioTracks_=this.audioTracks_||new W["default"]();return this.audioTracks_;}return this.tech_.audioTracks();};t.prototype.textTracks=function e(){if(this.tech_){return this.tech_.textTracks();}};t.prototype.remoteTextTracks=function e(){if(this.tech_){return this.tech_.remoteTextTracks();}};t.prototype.remoteTextTrackEls=function e(){if(this.tech_){return this.tech_.remoteTextTrackEls();}};t.prototype.addTextTrack=function e(t,r,n){if(this.tech_){return this.tech_.addTextTrack(t,r,n);}};t.prototype.addRemoteTextTrack=function e(t,r){if(this.tech_){return this.tech_.addRemoteTextTrack(t,r);}};t.prototype.removeRemoteTextTrack=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=t.track,n=r===undefined?arguments[0]:r;if(this.tech_){return this.tech_.removeRemoteTextTrack(n);}};t.prototype.videoWidth=function e(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0;};t.prototype.videoHeight=function e(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0;};t.prototype.language=function e(t){if(t===undefined){return this.language_;}this.language_=String(t).toLowerCase();return this;};t.prototype.languages=function e(){return(0,R["default"])(t.prototype.options_.languages,this.languages_);};t.prototype.toJSON=function e(){var t=(0,R["default"])(this.options_);var r=t.tracks;t.tracks=[];for(var n=0;n<r.length;n++){var i=r[n];i=(0,R["default"])(i);i.player=undefined;t.tracks[n]=i;}return t;};t.prototype.createModal=function e(t,r){var n=this;r=r||{};r.content=t||"";var i=new F["default"](this,r);this.addChild(i);i.on("dispose",function(){n.removeChild(i);});return i.open();};t.getTagSettings=function e(t){var r={sources:[],tracks:[]};var n=d.getElAttributes(t);var i=n["data-setup"];if(d.hasElClass(t,"vjs-fluid")){n.fluid=true;}if(i!==null){var o=(0,M["default"])(i||"{}"),s=o[0],a=o[1];if(s){b["default"].error(s);}(0,I.assign)(n,a);}(0,I.assign)(r,n);if(t.hasChildNodes()){var u=t.childNodes;for(var l=0,c=u.length;l<c;l++){var f=u[l];var p=f.nodeName.toLowerCase();if(p==="source"){r.sources.push(d.getElAttributes(f));}else if(p==="track"){r.tracks.push(d.getElAttributes(f));}}}return r;};t.prototype.flexNotSupported_=function e(){var t=s["default"].createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style);};return t;}(i["default"]);Q.players={};var Z=u["default"].navigator;Q.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Z&&(Z.languages&&Z.languages[0]||Z.userLanguage||Z.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Q.prototype[e]=function(){return this.techGet_(e);};});J.forEach(function(e){Q.prototype["handleTech"+(0,T["default"])(e)+"_"]=function(){return this.trigger(e);};});i["default"].registerComponent("Player",Q);r["default"]=Q;},{"./big-play-button.js":240,"./close-button.js":243,"./component.js":244,"./control-bar/control-bar.js":247,"./error-display.js":280,"./fullscreen-api.js":283,"./loading-spinner.js":284,"./media-error.js":285,"./modal-dialog":289,"./poster-image.js":294,"./tech/flash.js":298,"./tech/html5.js":299,"./tech/loader.js":300,"./tech/tech.js":301,"./tracks/audio-track-list.js":302,"./tracks/text-track-display.js":307,"./tracks/text-track-list-converter.js":308,"./tracks/text-track-settings.js":310,"./tracks/video-track-list.js":315,"./utils/browser.js":317,"./utils/buffer.js":318,"./utils/dom.js":320,"./utils/events.js":321,"./utils/fn.js":322,"./utils/guid.js":324,"./utils/log.js":325,"./utils/merge-options.js":326,"./utils/obj":327,"./utils/stylesheet.js":328,"./utils/time-ranges.js":329,"./utils/to-title-case.js":330,"global/document":89,"global/window":90,"safe-json-parse/tuple":178}],291:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./player.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}var s=function e(t,r){i["default"].prototype[t]=r;};r["default"]=s;},{"./player.js":290}],292:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../clickable-component.js");var i=a(n);var o=e("../component.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function l(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var f=function(e){c(t,e);function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};u(this,t);var i=l(this,e.call(this,r,n));i.update();return i;}t.prototype.update=function e(){var t=this.createPopup();if(this.popup){this.removeChild(this.popup);}this.popup=t;this.addChild(t);if(this.items&&this.items.length===0){this.hide();}else if(this.items&&this.items.length>1){this.show();}};t.prototype.createPopup=function e(){};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()});};t.prototype.buildCSSClass=function t(){var r="vjs-menu-button";if(this.options_.inline===true){r+="-inline";}else{r+="-popup";}return"vjs-menu-button "+r+" "+e.prototype.buildCSSClass.call(this);};return t;}(i["default"]);s["default"].registerComponent("PopupButton",f);r["default"]=f;},{"../clickable-component.js":242,"../component.js":244}],293:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component.js");var i=d(n);var o=e("../utils/dom.js");var s=f(o);var a=e("../utils/fn.js");var u=f(a);var l=e("../utils/events.js");var c=f(l);function f(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function d(e){return e&&e.__esModule?e:{default:e};}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var y=function(e){v(t,e);function t(){p(this,t);return h(this,e.apply(this,arguments));}t.prototype.addItem=function e(t){this.addChild(t);t.on("click",u.bind(this,function(){this.unlockShowing();}));};t.prototype.createEl=function t(){var r=this.options_.contentElType||"ul";this.contentEl_=s.createEl(r,{className:"vjs-menu-content"});var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});n.appendChild(this.contentEl_);c.on(n,"click",function(e){e.preventDefault();e.stopImmediatePropagation();});return n;};return t;}(i["default"]);i["default"].registerComponent("Popup",y);r["default"]=y;},{"../component.js":244,"../utils/dom.js":320,"../utils/events.js":321,"../utils/fn.js":322}],294:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./clickable-component.js");var i=h(n);var o=e("./component.js");var s=h(o);var a=e("./utils/fn.js");var u=p(a);var l=e("./utils/dom.js");var c=p(l);var f=e("./utils/browser.js");var d=p(f);function p(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function h(e){return e&&e.__esModule?e:{default:e};}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function y(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var g=function(e){m(t,e);function t(r,n){v(this,t);var i=y(this,e.call(this,r,n));i.update();r.on("posterchange",u.bind(i,i.update));return i;}t.prototype.dispose=function t(){this.player().off("posterchange",this.update);e.prototype.dispose.call(this);};t.prototype.createEl=function e(){var t=c.createEl("div",{className:"vjs-poster",tabIndex:-1});if(!d.BACKGROUND_SIZE_SUPPORTED){this.fallbackImg_=c.createEl("img");t.appendChild(this.fallbackImg_);}return t;};t.prototype.update=function e(t){var r=this.player().poster();this.setSrc(r);if(r){this.show();}else{this.hide();}};t.prototype.setSrc=function e(t){if(this.fallbackImg_){this.fallbackImg_.src=t;}else{var r="";if(t){r='url("'+t+'")';}this.el_.style.backgroundImage=r;}};t.prototype.handleClick=function e(t){if(!this.player_.controls()){return;}if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};return t;}(i["default"]);s["default"].registerComponent("PosterImage",g);r["default"]=g;},{"./clickable-component.js":242,"./component.js":244,"./utils/browser.js":317,"./utils/dom.js":320,"./utils/fn.js":322}],295:[function(e,t,r){"use strict";r.__esModule=true;r.hasLoaded=r.autoSetupTimeout=r.autoSetup=undefined;var n=e("./utils/dom");var i=d(n);var o=e("./utils/events.js");var s=d(o);var a=e("global/document");var u=f(a);var l=e("global/window");var c=f(l);function f(e){return e&&e.__esModule?e:{default:e};}function d(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}var p=false;var h=void 0;var v=function e(){if(!i.isReal()){return;}var t=u["default"].getElementsByTagName("video");var r=u["default"].getElementsByTagName("audio");var n=[];if(t&&t.length>0){for(var o=0,s=t.length;o<s;o++){n.push(t[o]);}}if(r&&r.length>0){for(var a=0,l=r.length;a<l;a++){n.push(r[a]);}}if(n&&n.length>0){for(var c=0,f=n.length;c<f;c++){var d=n[c];if(d&&d.getAttribute){if(d.player===undefined){var v=d.getAttribute("data-setup");if(v!==null){h(d);}}}else{y(1);break;}}}else if(!p){y(1);}};function y(e,t){if(t){h=t;}c["default"].setTimeout(v,e);}if(i.isReal()&&u["default"].readyState==="complete"){p=true;}else{s.one(c["default"],"load",function(){p=true;});}var m=function e(){return p;};r.autoSetup=v;r.autoSetupTimeout=y;r.hasLoaded=m;},{"./utils/dom":320,"./utils/events.js":321,"global/document":89,"global/window":90}],296:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component.js");var i=l(n);var o=e("../utils/dom.js");var s=u(o);var a=e("../utils/obj");function u(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function l(e){return e&&e.__esModule?e:{default:e};}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var p=function(e){d(t,e);function t(r,n){c(this,t);var i=f(this,e.call(this,r,n));i.bar=i.getChild(i.options_.barName);i.vertical(!!i.options_.vertical);i.on("mousedown",i.handleMouseDown);i.on("touchstart",i.handleMouseDown);i.on("focus",i.handleFocus);i.on("blur",i.handleBlur);i.on("click",i.handleClick);i.on(r,"controlsvisible",i.update);i.on(r,i.playerEvent,i.update);return i;}t.prototype.createEl=function t(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};n.className=n.className+" vjs-slider";n=(0,a.assign)({tabIndex:0},n);i=(0,a.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i);return e.prototype.createEl.call(this,r,n,i);};t.prototype.handleMouseDown=function e(t){var r=this.bar.el_.ownerDocument;t.preventDefault();s.blockTextSelection();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(r,"mousemove",this.handleMouseMove);this.on(r,"mouseup",this.handleMouseUp);this.on(r,"touchmove",this.handleMouseMove);this.on(r,"touchend",this.handleMouseUp);this.handleMouseMove(t);};t.prototype.handleMouseMove=function e(t){};t.prototype.handleMouseUp=function e(){var t=this.bar.el_.ownerDocument;s.unblockTextSelection();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.update();};t.prototype.update=function e(){if(!this.el_){return;}var t=this.getPercent();var r=this.bar;if(!r){return;}if(typeof t!=="number"||t!==t||t<0||t===Infinity){t=0;}var n=(t*100).toFixed(2)+"%";if(this.vertical()){r.el().style.height=n;}else{r.el().style.width=n;}};t.prototype.calculateDistance=function e(t){var r=s.getPointerPosition(this.el_,t);if(this.vertical()){return r.y;}return r.x;};t.prototype.handleFocus=function e(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress);};t.prototype.handleKeyPress=function e(t){if(t.which===37||t.which===40){t.preventDefault();this.stepBack();}else if(t.which===38||t.which===39){t.preventDefault();this.stepForward();}};t.prototype.handleBlur=function e(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress);};t.prototype.handleClick=function e(t){t.stopImmediatePropagation();t.preventDefault();};t.prototype.vertical=function e(t){if(t===undefined){return this.vertical_||false;}this.vertical_=!!t;if(this.vertical_){this.addClass("vjs-slider-vertical");}else{this.addClass("vjs-slider-horizontal");}return this;};return t;}(i["default"]);i["default"].registerComponent("Slider",p);r["default"]=p;},{"../component.js":244,"../utils/dom.js":320,"../utils/obj":327}],297:[function(e,t,r){"use strict";r.__esModule=true;function n(e){e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};e.streamFromParts=function(e,t){return e+"&"+t;};e.streamToParts=function(e){var t={connection:"",stream:""};if(!e){return t;}var r=e.search(/&(?!\w+=)/);var n=void 0;if(r!==-1){n=r+1;}else{r=n=e.lastIndexOf("/")+1;if(r===0){r=n=e.length;}}t.connection=e.substring(0,r);t.stream=e.substring(n,e.length);return t;};e.isStreamingType=function(t){return t in e.streamingFormats;};e.RTMP_RE=/^rtmp[set]?:\/\//i;e.isStreamingSrc=function(t){return e.RTMP_RE.test(t);};e.rtmpSourceHandler={};e.rtmpSourceHandler.canPlayType=function(t){if(e.isStreamingType(t)){return"maybe";}return"";};e.rtmpSourceHandler.canHandleSource=function(t,r){var n=e.rtmpSourceHandler.canPlayType(t.type);if(n){return n;}if(e.isStreamingSrc(t.src)){return"maybe";}return"";};e.rtmpSourceHandler.handleSource=function(t,r,n){var i=e.streamToParts(t.src);r.setRtmpConnection(i.connection);r.setRtmpStream(i.stream);};e.registerSourceHandler(e.rtmpSourceHandler);return e;}r["default"]=n;},{}],298:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./tech");var i=g(n);var o=e("../utils/dom.js");var s=m(o);var a=e("../utils/url.js");var u=m(a);var l=e("../utils/time-ranges.js");var c=e("./flash-rtmp");var f=g(c);var d=e("../component");var p=g(d);var h=e("global/window");var v=g(h);var y=e("../utils/obj");function m(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function g(e){return e&&e.__esModule?e:{default:e};}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var T=v["default"].navigator;var j=function(e){w(t,e);function t(r,n){_(this,t);var i=b(this,e.call(this,r,n));if(r.source){i.ready(function(){this.setSource(r.source);},true);}if(r.startTime){i.ready(function(){this.load();this.play();this.currentTime(r.startTime);},true);}v["default"].videojs=v["default"].videojs||{};v["default"].videojs.Flash=v["default"].videojs.Flash||{};v["default"].videojs.Flash.onReady=t.onReady;v["default"].videojs.Flash.onEvent=t.onEvent;v["default"].videojs.Flash.onError=t.onError;i.on("seeked",function(){this.lastSeekTarget_=undefined;});return i;}t.prototype.createEl=function e(){var r=this.options_;if(!r.swf){var n="5.3.0";r.swf="//vjs.zencdn.net/swf/"+n+"/video-js.swf";}var i=r.techId;var o=(0,y.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:r.autoplay,preload:r.preload,loop:r.loop,muted:r.muted},r.flashVars);var s=(0,y.assign)({wmode:"opaque",bgcolor:"#000000"},r.params);var a=(0,y.assign)({id:i,name:i,class:"vjs-tech"},r.attributes);this.el_=t.embed(r.swf,o,s,a);this.el_.tech=this;return this.el_;};t.prototype.play=function e(){if(this.ended()){this.setCurrentTime(0);}this.el_.vjs_play();};t.prototype.pause=function e(){this.el_.vjs_pause();};t.prototype.src=function e(t){if(t===undefined){return this.currentSrc();}return this.setSrc(t);};t.prototype.setSrc=function e(t){var r=this;t=u.getAbsoluteURL(t);this.el_.vjs_src(t);if(this.autoplay()){this.setTimeout(function(){return r.play();},0);}};t.prototype.seeking=function e(){return this.lastSeekTarget_!==undefined;};t.prototype.setCurrentTime=function t(r){var n=this.seekable();if(n.length){r=r>n.start(0)?r:n.start(0);r=r<n.end(n.length-1)?r:n.end(n.length-1);this.lastSeekTarget_=r;this.trigger("seeking");this.el_.vjs_setProperty("currentTime",r);e.prototype.setCurrentTime.call(this);}};t.prototype.currentTime=function e(){if(this.seeking()){return this.lastSeekTarget_||0;}return this.el_.vjs_getProperty("currentTime");};t.prototype.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src;}return this.el_.vjs_getProperty("currentSrc");};t.prototype.duration=function e(){if(this.readyState()===0){return NaN;}var e=this.el_.vjs_getProperty("duration");return e>=0?e:Infinity;};t.prototype.load=function e(){this.el_.vjs_load();};t.prototype.poster=function e(){this.el_.vjs_getProperty("poster");};t.prototype.setPoster=function e(){};t.prototype.seekable=function e(){var t=this.duration();if(t===0){return(0,l.createTimeRange)();}return(0,l.createTimeRange)(0,t);};t.prototype.buffered=function e(){var t=this.el_.vjs_getProperty("buffered");if(t.length===0){return(0,l.createTimeRange)();}return(0,l.createTimeRange)(t[0][0],t[0][1]);};t.prototype.supportsFullScreen=function e(){return false;};t.prototype.enterFullScreen=function e(){return false;};return t;}(i["default"]);var k=j.prototype;var E="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(",");var C="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(",");function x(e){var t=e.charAt(0).toUpperCase()+e.slice(1);k["set"+t]=function(t){return this.el_.vjs_setProperty(e,t);};}function S(e){k[e]=function(){return this.el_.vjs_getProperty(e);};}for(var O=0;O<E.length;O++){S(E[O]);x(E[O]);}for(var P=0;P<C.length;P++){S(C[P]);}j.isSupported=function(){return j.version()[0]>=10;};i["default"].withSourceHandlers(j);j.nativeSourceHandler={};j.nativeSourceHandler.canPlayType=function(e){if(e in j.formats){return"maybe";}return"";};j.nativeSourceHandler.canHandleSource=function(e,t){var r=void 0;function n(e){var t=u.getFileExtension(e);if(t){return"video/"+t;}return"";}if(!e.type){r=n(e.src);}else{r=e.type.replace(/;.*/,"").toLowerCase();}return j.nativeSourceHandler.canPlayType(r);};j.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src);};j.nativeSourceHandler.dispose=function(){};j.registerSourceHandler(j.nativeSourceHandler);j.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};j.onReady=function(e){var t=s.getEl(e);var r=t&&t.tech;if(r&&r.el()){j.checkReady(r);}};j.checkReady=function(e){if(!e.el()){return;}if(e.el().vjs_getProperty){e.triggerReady();}else{this.setTimeout(function(){j.checkReady(e);},50);}};j.onEvent=function(e,t){var r=s.getEl(e).tech;var n=Array.prototype.slice.call(arguments,2);r.setTimeout(function(){r.trigger(t,n);},1);};j.onError=function(e,t){var r=s.getEl(e).tech;if(t==="srcnotfound"){return r.error(4);}r.error("FLASH: "+t);};j.version=function(){var e="0,0,0";try{e=new v["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}catch(t){try{if(T.mimeTypes["application/x-shockwave-flash"].enabledPlugin){e=(T.plugins["Shockwave Flash 2.0"]||T.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}}catch(e){}}return e.split(",");};j.embed=function(e,t,r,n){var i=j.getEmbedCode(e,t,r,n);var o=s.createEl("div",{innerHTML:i}).childNodes[0];return o;};j.getEmbedCode=function(e,t,r,n){var i='<object type="application/x-shockwave-flash" ';var o="";var s="";var a="";if(t){Object.getOwnPropertyNames(t).forEach(function(e){o+=e+"="+t[e]+"&amp;";});}r=(0,y.assign)({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},r);Object.getOwnPropertyNames(r).forEach(function(e){s+='<param name="'+e+'" value="'+r[e]+'" />';});n=(0,y.assign)({data:e,width:"100%",height:"100%"},n);Object.getOwnPropertyNames(n).forEach(function(e){a+=e+'="'+n[e]+'" ';});return""+i+a+">"+s+"</object>";};(0,f["default"])(j);p["default"].registerComponent("Flash",j);i["default"].registerTech("Flash",j);r["default"]=j;},{"../component":244,"../utils/dom.js":320,"../utils/obj":327,"../utils/time-ranges.js":329,"../utils/url.js":331,"./flash-rtmp":297,"./tech":301,"global/window":90}],299:[function(e,t,r){"use strict";r.__esModule=true;var n=A(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);var i=e("./tech.js");var o=P(i);var s=e("../component");var a=P(s);var u=e("../utils/dom.js");var l=O(u);var c=e("../utils/url.js");var f=O(c);var d=e("../utils/fn.js");var p=O(d);var h=e("../utils/log.js");var v=P(h);var y=e("tsml");var m=P(y);var g=e("../utils/browser.js");var _=O(g);var b=e("global/document");var w=P(b);var T=e("global/window");var j=P(T);var k=e("../utils/obj");var E=e("../utils/merge-options.js");var C=P(E);var x=e("../utils/to-title-case.js");var S=P(x);function O(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function P(e){return e&&e.__esModule?e:{default:e};}function A(e,t){e.raw=t;return e;}function M(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function I(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function L(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var R=function(e){L(t,e);function t(r,i){M(this,t);var o=I(this,e.call(this,r,i));var s=r.source;var a=false;if(s&&(o.el_.currentSrc!==s.src||r.tag&&r.tag.initNetworkState_===3)){o.setSource(s);}else{o.handleLateInit_(o.el_);}if(o.el_.hasChildNodes()){var u=o.el_.childNodes;var l=u.length;var c=[];while(l--){var d=u[l];var h=d.nodeName.toLowerCase();if(h==="track"){if(!o.featuresNativeTextTracks){c.push(d);}else{o.remoteTextTrackEls().addTrackElement_(d);o.remoteTextTracks().addTrack_(d.track);if(!a&&!o.el_.hasAttribute("crossorigin")&&f.isCrossOrigin(d.src)){a=true;}}}}for(var y=0;y<c.length;y++){o.el_.removeChild(c[y]);}}var g=["audio","video"];g.forEach(function(e){var t=o.el()[e+"Tracks"];var r=o[e+"Tracks"]();var n=(0,S["default"])(e);if(!o["featuresNative"+n+"Tracks"]||!t||!t.addEventListener){return;}o["handle"+n+"TrackChange_"]=function(e){r.trigger({type:"change",target:r,currentTarget:r,srcElement:r});};o["handle"+n+"TrackAdd_"]=function(e){return r.addTrack(e.track);};o["handle"+n+"TrackRemove_"]=function(e){return r.removeTrack(e.track);};t.addEventListener("change",o["handle"+n+"TrackChange_"]);t.addEventListener("addtrack",o["handle"+n+"TrackAdd_"]);t.addEventListener("removetrack",o["handle"+n+"TrackRemove_"]);o["removeOld"+n+"Tracks_"]=function(e){return o.removeOldTracks_(r,t);};o.on("loadstart",o["removeOld"+n+"Tracks_"]);});if(o.featuresNativeTextTracks){if(a){v["default"].warn((0,m["default"])(n));}o.handleTextTrackChange_=p.bind(o,o.handleTextTrackChange);o.handleTextTrackAdd_=p.bind(o,o.handleTextTrackAdd);o.handleTextTrackRemove_=p.bind(o,o.handleTextTrackRemove);o.proxyNativeTextTracks_();}if((_.TOUCH_ENABLED||_.IS_IPHONE||_.IS_NATIVE_ANDROID)&&r.nativeControlsForTouch===true){o.setControls(true);}o.proxyWebkitFullscreen_();o.triggerReady();return o;}t.prototype.dispose=function r(){var n=this;["audio","video","text"].forEach(function(e){var t=(0,S["default"])(e);var r=n.el_[e+"Tracks"];if(r&&r.removeEventListener){r.removeEventListener("change",n["handle"+t+"TrackChange_"]);r.removeEventListener("addtrack",n["handle"+t+"TrackAdd_"]);r.removeEventListener("removetrack",n["handle"+t+"TrackRemove_"]);}if(r){n.off("loadstart",n["removeOld"+t+"Tracks_"]);}});t.disposeMediaElement(this.el_);e.prototype.dispose.call(this);};t.prototype.createEl=function e(){var r=this.options_.tag;if(!r||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(r){var n=r.cloneNode(true);if(r.parentNode){r.parentNode.insertBefore(n,r);}t.disposeMediaElement(r);r=n;}else{r=w["default"].createElement("video");var i=this.options_.tag&&l.getElAttributes(this.options_.tag);var o=(0,C["default"])({},i);if(!_.TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete o.controls;}l.setElAttributes(r,(0,k.assign)(o,{id:this.options_.techId,class:"vjs-tech"}));}r.playerId=this.options_.playerId;}var s=["autoplay","preload","loop","muted"];for(var a=s.length-1;a>=0;a--){var u=s[a];var c={};if(typeof this.options_[u]!=="undefined"){c[u]=this.options_[u];}l.setElAttributes(r,c);}return r;};t.prototype.handleLateInit_=function e(t){if(t.networkState===0||t.networkState===3){return;}if(t.readyState===0){var r=false;var n=function e(){r=true;};this.on("loadstart",n);var i=function e(){if(!r){this.trigger("loadstart");}};this.on("loadedmetadata",i);this.ready(function(){this.off("loadstart",n);this.off("loadedmetadata",i);if(!r){this.trigger("loadstart");}});return;}var o=["loadstart"];o.push("loadedmetadata");if(t.readyState>=2){o.push("loadeddata");}if(t.readyState>=3){o.push("canplay");}if(t.readyState>=4){o.push("canplaythrough");}this.ready(function(){o.forEach(function(e){this.trigger(e);},this);});};t.prototype.proxyNativeTextTracks_=function e(){var t=this.el().textTracks;if(t){for(var r=0;r<t.length;r++){this.textTracks().addTrack_(t[r]);}if(t.addEventListener){t.addEventListener("change",this.handleTextTrackChange_);t.addEventListener("addtrack",this.handleTextTrackAdd_);t.addEventListener("removetrack",this.handleTextTrackRemove_);}this.on("loadstart",this.removeOldTextTracks_);}};t.prototype.handleTextTrackChange=function e(t){var r=this.textTracks();this.textTracks().trigger({type:"change",target:r,currentTarget:r,srcElement:r});};t.prototype.handleTextTrackAdd=function e(t){this.textTracks().addTrack_(t.track);};t.prototype.handleTextTrackRemove=function e(t){this.textTracks().removeTrack_(t.track);};t.prototype.removeOldTracks_=function e(t,r){var n=[];if(!r){return;}for(var i=0;i<t.length;i++){var o=t[i];var s=false;for(var a=0;a<r.length;a++){if(r[a]===o){s=true;break;}}if(!s){n.push(o);}}for(var u=0;u<n.length;u++){var l=n[u];t.removeTrack_(l);}};t.prototype.removeOldTextTracks_=function e(t){var r=this.textTracks();var n=this.el().textTracks;this.removeOldTracks_(r,n);};t.prototype.play=function e(){var t=this.el_.play();if(t!==undefined&&typeof t.then==="function"){t.then(null,function(e){});}};t.prototype.setCurrentTime=function e(t){try{this.el_.currentTime=t;}catch(e){(0,v["default"])(e,"Video is not ready. (Video.js)");}};t.prototype.duration=function e(){var t=this;if(this.el_.duration===Infinity&&_.IS_ANDROID&&_.IS_CHROME){if(this.el_.currentTime===0){var r=function e(){if(t.el_.currentTime>0){if(t.el_.duration===Infinity){t.trigger("durationchange");}t.off("timeupdate",e);}};this.on("timeupdate",r);return NaN;}}return this.el_.duration||NaN;};t.prototype.width=function e(){return this.el_.offsetWidth;};t.prototype.height=function e(){return this.el_.offsetHeight;};t.prototype.proxyWebkitFullscreen_=function e(){var t=this;if(!("webkitDisplayingFullscreen"in this.el_)){return;}var r=function e(){this.trigger("fullscreenchange",{isFullscreen:false});};var n=function e(){this.one("webkitendfullscreen",r);this.trigger("fullscreenchange",{isFullscreen:true});};this.on("webkitbeginfullscreen",n);this.on("dispose",function(){t.off("webkitbeginfullscreen",n);t.off("webkitendfullscreen",r);});};t.prototype.supportsFullScreen=function e(){if(typeof this.el_.webkitEnterFullScreen==="function"){var t=j["default"].navigator&&j["default"].navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t)){return true;}}return false;};t.prototype.enterFullScreen=function e(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA){this.el_.play();this.setTimeout(function(){t.pause();t.webkitEnterFullScreen();},0);}else{t.webkitEnterFullScreen();}};t.prototype.exitFullScreen=function e(){this.el_.webkitExitFullScreen();};t.prototype.src=function e(t){if(t===undefined){return this.el_.src;}this.setSrc(t);};t.prototype.reset=function e(){t.resetMediaElement(this.el_);};t.prototype.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src;}return this.el_.currentSrc;};t.prototype.setControls=function e(t){this.el_.controls=!!t;};t.prototype.addTextTrack=function t(r,n,i){if(!this.featuresNativeTextTracks){return e.prototype.addTextTrack.call(this,r,n,i);}return this.el_.addTextTrack(r,n,i);};t.prototype.createRemoteTextTrack=function t(r){if(!this.featuresNativeTextTracks){return e.prototype.createRemoteTextTrack.call(this,r);}var n=w["default"].createElement("track");if(r.kind){n.kind=r.kind;}if(r.label){n.label=r.label;}if(r.language||r.srclang){n.srclang=r.language||r.srclang;}if(r["default"]){n["default"]=r["default"];}if(r.id){n.id=r.id;}if(r.src){n.src=r.src;}return n;};t.prototype.addRemoteTextTrack=function t(r,n){var i=e.prototype.addRemoteTextTrack.call(this,r,n);if(this.featuresNativeTextTracks){this.el().appendChild(i);}return i;};t.prototype.removeRemoteTextTrack=function t(r){e.prototype.removeRemoteTextTrack.call(this,r);if(this.featuresNativeTextTracks){var n=this.$$("track");var i=n.length;while(i--){if(r===n[i]||r===n[i].track){this.el().removeChild(n[i]);}}}};return t;}(o["default"]);if(l.isReal()){R.TEST_VID=w["default"].createElement("video");var B=w["default"].createElement("track");B.kind="captions";B.srclang="en";B.label="English";R.TEST_VID.appendChild(B);}R.isSupported=function(){try{R.TEST_VID.volume=.5;}catch(e){return false;}return!!(R.TEST_VID&&R.TEST_VID.canPlayType);};R.canControlVolume=function(){try{var e=R.TEST_VID.volume;R.TEST_VID.volume=e/2+.1;return e!==R.TEST_VID.volume;}catch(e){return false;}};R.canControlPlaybackRate=function(){if(_.IS_ANDROID&&_.IS_CHROME){return false;}try{var e=R.TEST_VID.playbackRate;R.TEST_VID.playbackRate=e/2+.1;return e!==R.TEST_VID.playbackRate;}catch(e){return false;}};R.supportsNativeTextTracks=function(){return _.IS_ANY_SAFARI;};R.supportsNativeVideoTracks=function(){return!!(R.TEST_VID&&R.TEST_VID.videoTracks);};R.supportsNativeAudioTracks=function(){return!!(R.TEST_VID&&R.TEST_VID.audioTracks);};R.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"];R.prototype.featuresVolumeControl=R.canControlVolume();R.prototype.featuresPlaybackRate=R.canControlPlaybackRate();R.prototype.movingMediaElementInDOM=!_.IS_IOS;R.prototype.featuresFullscreenResize=true;R.prototype.featuresProgressEvents=true;R.prototype.featuresTimeupdateEvents=true;R.prototype.featuresNativeTextTracks=R.supportsNativeTextTracks();R.prototype.featuresNativeVideoTracks=R.supportsNativeVideoTracks();R.prototype.featuresNativeAudioTracks=R.supportsNativeAudioTracks();var D=R.TEST_VID&&R.TEST_VID.constructor.prototype.canPlayType;var N=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;var F=/^video\/mp4/i;R.patchCanPlayType=function(){if(_.ANDROID_VERSION>=4&&!_.IS_FIREFOX){R.TEST_VID.constructor.prototype.canPlayType=function(e){if(e&&N.test(e)){return"maybe";}return D.call(this,e);};}else if(_.IS_OLD_ANDROID){R.TEST_VID.constructor.prototype.canPlayType=function(e){if(e&&F.test(e)){return"maybe";}return D.call(this,e);};}};R.unpatchCanPlayType=function(){var e=R.TEST_VID.constructor.prototype.canPlayType;R.TEST_VID.constructor.prototype.canPlayType=D;return e;};R.patchCanPlayType();R.disposeMediaElement=function(e){if(!e){return;}if(e.parentNode){e.parentNode.removeChild(e);}while(e.hasChildNodes()){e.removeChild(e.firstChild);}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load();}catch(e){}})();}};R.resetMediaElement=function(e){if(!e){return;}var t=e.querySelectorAll("source");var r=t.length;while(r--){e.removeChild(t[r]);}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load();}catch(e){}})();}};["paused","currentTime","buffered","volume","muted","poster","preload","autoplay","controls","loop","error","seeking","seekable","ended","defaultMuted","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){R.prototype[e]=function(){return this.el_[e];};});["volume","muted","src","poster","preload","autoplay","loop","playbackRate"].forEach(function(e){R.prototype["set"+(0,S["default"])(e)]=function(t){this.el_[e]=t;};});["pause","load"].forEach(function(e){R.prototype[e]=function(){return this.el_[e]();};});o["default"].withSourceHandlers(R);R.nativeSourceHandler={};R.nativeSourceHandler.canPlayType=function(e){try{return R.TEST_VID.canPlayType(e);}catch(e){return"";}};R.nativeSourceHandler.canHandleSource=function(e,t){if(e.type){return R.nativeSourceHandler.canPlayType(e.type);}else if(e.src){var r=f.getFileExtension(e.src);return R.nativeSourceHandler.canPlayType("video/"+r);}return"";};R.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src);};R.nativeSourceHandler.dispose=function(){};R.registerSourceHandler(R.nativeSourceHandler);a["default"].registerComponent("Html5",R);o["default"].registerTech("Html5",R);r["default"]=R;},{"../component":244,"../utils/browser.js":317,"../utils/dom.js":320,"../utils/fn.js":322,"../utils/log.js":325,"../utils/merge-options.js":326,"../utils/obj":327,"../utils/to-title-case.js":330,"../utils/url.js":331,"./tech.js":301,"global/document":89,"global/window":90,tsml:231}],300:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component.js");var i=l(n);var o=e("./tech.js");var s=l(o);var a=e("../utils/to-title-case.js");var u=l(a);function l(e){return e&&e.__esModule?e:{default:e};}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var p=function(e){d(t,e);function t(r,n,o){c(this,t);var a=f(this,e.call(this,r,n,o));if(!n.playerOptions.sources||n.playerOptions.sources.length===0){for(var l=0,d=n.playerOptions.techOrder;l<d.length;l++){var p=(0,u["default"])(d[l]);var h=s["default"].getTech(p);if(!p){h=i["default"].getComponent(p);}if(h&&h.isSupported()){r.loadTech_(p);break;}}}else{r.src(n.playerOptions.sources);}return a;}return t;}(i["default"]);i["default"].registerComponent("MediaLoader",p);r["default"]=p;},{"../component.js":244,"../utils/to-title-case.js":330,"./tech.js":301}],301:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component");var i=I(n);var o=e("../tracks/html-track-element");var s=I(o);var a=e("../tracks/html-track-element-list");var u=I(a);var l=e("../utils/merge-options.js");var c=I(l);var f=e("../tracks/text-track");var d=I(f);var p=e("../tracks/text-track-list");var h=I(p);var v=e("../tracks/video-track-list");var y=I(v);var m=e("../tracks/audio-track-list");var g=I(m);var _=e("../utils/fn.js");var b=M(_);var w=e("../utils/log.js");var T=I(w);var j=e("../utils/time-ranges.js");var k=e("../utils/buffer.js");var E=e("../media-error.js");var C=I(E);var x=e("global/window");var S=I(x);var O=e("global/document");var P=I(O);var A=e("../utils/obj");function M(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function I(e){return e&&e.__esModule?e:{default:e};}function L(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function R(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function B(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}function D(e,t,r,n){var i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var o=e.textTracks();i.kind=t;if(r){i.label=r;}if(n){i.language=n;}i.tech=e;var s=new d["default"](i);o.addTrack_(s);return s;}var N=function(t){B(r,t);function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};L(this,r);e.reportTouchActivity=false;var i=R(this,t.call(this,null,e,n));i.hasStarted_=false;i.on("playing",function(){this.hasStarted_=true;});i.on("loadstart",function(){this.hasStarted_=false;});i.textTracks_=e.textTracks;i.videoTracks_=e.videoTracks;i.audioTracks_=e.audioTracks;if(!i.featuresProgressEvents){i.manualProgressOn();}if(!i.featuresTimeupdateEvents){i.manualTimeUpdatesOn();}["Text","Audio","Video"].forEach(function(t){if(e["native"+t+"Tracks"]===false){i["featuresNative"+t+"Tracks"]=false;}});if(e.nativeCaptions===false){i.featuresNativeTextTracks=false;}if(!i.featuresNativeTextTracks){i.emulateTextTracks();}i.autoRemoteTextTracks_=new h["default"]();i.initTextTrackListeners();i.initTrackListeners();if(!e.nativeControlsForTouch){i.emitTapEvents();}if(i.constructor){i.name_=i.constructor.name||"Unknown Tech";}return i;}r.prototype.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress);};r.prototype.manualProgressOff=function e(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange);};r.prototype.trackProgress=function e(t){this.stopTrackingProgress();this.progressInterval=this.setInterval(b.bind(this,function(){var e=this.bufferedPercent();if(this.bufferedPercent_!==e){this.trigger("progress");}this.bufferedPercent_=e;if(e===1){this.stopTrackingProgress();}}),500);};r.prototype.onDurationChange=function e(t){this.duration_=this.duration();};r.prototype.buffered=function e(){return(0,j.createTimeRange)(0,0);};r.prototype.bufferedPercent=function e(){return(0,k.bufferedPercent)(this.buffered(),this.duration_);};r.prototype.stopTrackingProgress=function e(){this.clearInterval(this.progressInterval);};r.prototype.manualTimeUpdatesOn=function e(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime);};r.prototype.manualTimeUpdatesOff=function e(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime);};r.prototype.trackCurrentTime=function e(){if(this.currentTimeInterval){this.stopTrackingCurrentTime();}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});},250);};r.prototype.stopTrackingCurrentTime=function e(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});};r.prototype.dispose=function e(){this.clearTracks(["audio","video","text"]);if(this.manualProgress){this.manualProgressOff();}if(this.manualTimeUpdates){this.manualTimeUpdatesOff();}t.prototype.dispose.call(this);};r.prototype.clearTracks=function e(t){var r=this;t=[].concat(t);t.forEach(function(e){var t=r[e+"Tracks"]()||[];var n=t.length;while(n--){var i=t[n];if(e==="text"){r.removeRemoteTextTrack(i);}t.removeTrack_(i);}});};r.prototype.cleanupAutoTextTracks=function e(){var t=this.autoRemoteTextTracks_||[];var r=t.length;while(r--){var n=t[r];this.removeRemoteTextTrack(n);}};r.prototype.reset=function e(){};r.prototype.error=function e(t){if(t!==undefined){this.error_=new C["default"](t);this.trigger("error");}return this.error_;};r.prototype.played=function e(){if(this.hasStarted_){return(0,j.createTimeRange)(0,0);}return(0,j.createTimeRange)();};r.prototype.setCurrentTime=function e(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});}};r.prototype.initTextTrackListeners=function e(){var t=b.bind(this,function(){this.trigger("texttrackchange");});var r=this.textTracks();if(!r){return;}r.addEventListener("removetrack",t);r.addEventListener("addtrack",t);this.on("dispose",b.bind(this,function(){r.removeEventListener("removetrack",t);r.removeEventListener("addtrack",t);}));};r.prototype.initTrackListeners=function e(){var t=this;var r=["video","audio"];r.forEach(function(e){var r=function r(){t.trigger(e+"trackchange");};var n=t[e+"Tracks"]();n.addEventListener("removetrack",r);n.addEventListener("addtrack",r);t.on("dispose",function(){n.removeEventListener("removetrack",r);n.removeEventListener("addtrack",r);});});};r.prototype.addWebVttScript_=function t(){var r=this;if(S["default"].WebVTT){return;}if(P["default"].body.contains(this.el())){var n=e("videojs-vtt.js");if(!this.options_["vtt.js"]&&(0,A.isPlain)(n)&&Object.keys(n).length>0){this.trigger("vttjsloaded");return;}var i=P["default"].createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.3/vtt.min.js";i.onload=function(){r.trigger("vttjsloaded");};i.onerror=function(){r.trigger("vttjserror");};this.on("dispose",function(){i.onload=null;i.onerror=null;});S["default"].WebVTT=true;this.el().parentNode.appendChild(i);}else{this.ready(this.addWebVttScript_);}};r.prototype.emulateTextTracks=function e(){var t=this;var r=this.textTracks();if(!r){return;}var n=this.remoteTextTracks();var i=function e(t){return r.addTrack_(t.track);};var o=function e(t){return r.removeTrack_(t.track);};n.on("addtrack",i);n.on("removetrack",o);this.addWebVttScript_();var s=function e(){return t.trigger("texttrackchange");};var a=function e(){s();for(var t=0;t<r.length;t++){var n=r[t];n.removeEventListener("cuechange",s);if(n.mode==="showing"){n.addEventListener("cuechange",s);}}};a();r.addEventListener("change",a);r.addEventListener("addtrack",a);r.addEventListener("removetrack",a);this.on("dispose",function(){n.off("addtrack",i);n.off("removetrack",o);r.removeEventListener("change",a);r.removeEventListener("addtrack",a);r.removeEventListener("removetrack",a);for(var e=0;e<r.length;e++){var t=r[e];t.removeEventListener("cuechange",s);}});};r.prototype.videoTracks=function e(){this.videoTracks_=this.videoTracks_||new y["default"]();return this.videoTracks_;};r.prototype.audioTracks=function e(){this.audioTracks_=this.audioTracks_||new g["default"]();return this.audioTracks_;};r.prototype.textTracks=function e(){this.textTracks_=this.textTracks_||new h["default"]();return this.textTracks_;};r.prototype.remoteTextTracks=function e(){this.remoteTextTracks_=this.remoteTextTracks_||new h["default"]();return this.remoteTextTracks_;};r.prototype.remoteTextTrackEls=function e(){this.remoteTextTrackEls_=this.remoteTextTrackEls_||new u["default"]();return this.remoteTextTrackEls_;};r.prototype.addTextTrack=function e(t,r,n){if(!t){throw new Error("TextTrack kind is required but was not provided");}return D(this,t,r,n);};r.prototype.createRemoteTextTrack=function e(t){var r=(0,c["default"])(t,{tech:this});return new s["default"](r);};r.prototype.addRemoteTextTrack=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];var n=this.createRemoteTextTrack(t);if(r!==true&&r!==false){T["default"].warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');r=true;}this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack_(n.track);if(r!==true){this.autoRemoteTextTracks_.addTrack_(n.track);}return n;};r.prototype.removeRemoteTextTrack=function e(t){var r=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(r);this.remoteTextTracks().removeTrack_(t);this.autoRemoteTextTracks_.removeTrack_(t);};r.prototype.setPoster=function e(){};r.prototype.canPlayType=function e(){return"";};r.isTech=function e(t){return t.prototype instanceof r||t instanceof r||t===r;};r.registerTech=function e(t,n){if(!r.techs_){r.techs_={};}if(!r.isTech(n)){throw new Error("Tech "+t+" must be a Tech");}r.techs_[t]=n;return n;};r.getTech=function e(t){if(r.techs_&&r.techs_[t]){return r.techs_[t];}if(S["default"]&&S["default"].videojs&&S["default"].videojs[t]){T["default"].warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return S["default"].videojs[t];}};return r;}(i["default"]);N.prototype.textTracks_;N.prototype.audioTracks_;N.prototype.videoTracks_;N.prototype.featuresVolumeControl=true;N.prototype.featuresFullscreenResize=false;N.prototype.featuresPlaybackRate=false;N.prototype.featuresProgressEvents=false;N.prototype.featuresTimeupdateEvents=false;N.prototype.featuresNativeTextTracks=false;N.withSourceHandlers=function(e){e.registerSourceHandler=function(t,r){var n=e.sourceHandlers;if(!n){n=e.sourceHandlers=[];}if(r===undefined){r=n.length;}n.splice(r,0,t);};e.canPlayType=function(t){var r=e.sourceHandlers||[];var n=void 0;for(var i=0;i<r.length;i++){n=r[i].canPlayType(t);if(n){return n;}}return"";};e.selectSourceHandler=function(t,r){var n=e.sourceHandlers||[];var i=void 0;for(var o=0;o<n.length;o++){i=n[o].canHandleSource(t,r);if(i){return n[o];}}return null;};e.canPlaySource=function(t,r){var n=e.selectSourceHandler(t,r);if(n){return n.canHandleSource(t,r);}return"";};var t=["seekable","duration"];t.forEach(function(e){var t=this[e];if(typeof t!=="function"){return;}this[e]=function(){if(this.sourceHandler_&&this.sourceHandler_[e]){return this.sourceHandler_[e].apply(this.sourceHandler_,arguments);}return t.apply(this,arguments);};},e.prototype);e.prototype.setSource=function(t){var r=e.selectSourceHandler(t,this.options_);if(!r){if(e.nativeSourceHandler){r=e.nativeSourceHandler;}else{T["default"].error("No source hander found for the current source.");}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(r!==e.nativeSourceHandler){this.currentSource_=t;this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_);this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_);this.one(this.el_,"loadstart",e.prototype.firstLoadStartListener_);}this.sourceHandler_=r.handleSource(t,this,this.options_);this.on("dispose",this.disposeSourceHandler);return this;};e.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_);};e.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler();this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_);};e.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null;}this.cleanupAutoTextTracks();if(this.sourceHandler_){this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_);this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_);if(this.sourceHandler_.dispose){this.sourceHandler_.dispose();}this.sourceHandler_=null;}};};i["default"].registerComponent("Tech",N);i["default"].registerComponent("MediaTechController",N);N.registerTech("Tech",N);r["default"]=N;},{"../component":244,"../media-error.js":285,"../tracks/audio-track-list":302,"../tracks/html-track-element":305,"../tracks/html-track-element-list":304,"../tracks/text-track":311,"../tracks/text-track-list":309,"../tracks/video-track-list":315,"../utils/buffer.js":318,"../utils/fn.js":322,"../utils/log.js":325,"../utils/merge-options.js":326,"../utils/obj":327,"../utils/time-ranges.js":329,"global/document":89,"global/window":90,"videojs-vtt.js":343}],302:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./track-list");var i=c(n);var o=e("../utils/browser.js");var s=l(o);var a=e("global/document");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function e(t,r){for(var n=0;n<t.length;n++){if(r.id===t[n].id){continue;}t[n].enabled=false;}};var v=function(e){p(t,e);function t(){var r,n;var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];f(this,t);var a=void 0;for(var l=o.length-1;l>=0;l--){if(o[l].enabled){h(o,o[l]);break;}}if(s.IS_IE8){a=u["default"].createElement("custom");for(var c in i["default"].prototype){if(c!=="constructor"){a[c]=i["default"].prototype[c];}}for(var p in t.prototype){if(p!=="constructor"){a[p]=t.prototype[p];}}}a=(r=d(this,e.call(this,o,a)),r);a.changing_=false;return n=a,d(r,n);}t.prototype.addTrack_=function t(r){var n=this;if(r.enabled){h(this,r);}e.prototype.addTrack_.call(this,r);if(!r.addEventListener){return;}r.addEventListener("enabledchange",function(){if(n.changing_){return;}n.changing_=true;h(n,r);n.changing_=false;n.trigger("change");});};t.prototype.addTrack=function e(t){this.addTrack_(t);};t.prototype.removeTrack=function t(r){e.prototype.removeTrack_.call(this,r);};return t;}(i["default"]);r["default"]=v;},{"../utils/browser.js":317,"./track-list":313,"global/document":89}],303:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./track-enums");var i=e("./track");var o=f(i);var s=e("../utils/merge-options");var a=f(s);var u=e("../utils/browser.js");var l=c(u);function c(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function f(e){return e&&e.__esModule?e:{default:e};}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var v=function(e){h(t,e);function t(){var r,i;var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};d(this,t);var s=(0,a["default"])(o,{kind:n.AudioTrackKind[o.kind]||""});var u=(r=p(this,e.call(this,s)),r);var c=false;if(l.IS_IE8){for(var f in t.prototype){if(f!=="constructor"){u[f]=t.prototype[f];}}}Object.defineProperty(u,"enabled",{get:function e(){return c;},set:function e(t){if(typeof t!=="boolean"||t===c){return;}c=t;this.trigger("enabledchange");}});if(s.enabled){u.enabled=s.enabled;}u.loaded_=true;return i=u,p(r,i);}return t;}(o["default"]);r["default"]=v;},{"../utils/browser.js":317,"../utils/merge-options":326,"./track":314,"./track-enums":312}],304:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../utils/browser.js");var i=u(n);var o=e("global/document");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}var c=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];l(this,e);var r=this;if(i.IS_IE8){r=s["default"].createElement("custom");for(var n in e.prototype){if(n!=="constructor"){r[n]=e.prototype[n];}}}r.trackElements_=[];Object.defineProperty(r,"length",{get:function e(){return this.trackElements_.length;}});for(var o=0,a=t.length;o<a;o++){r.addTrackElement_(t[o]);}if(i.IS_IE8){return r;}}e.prototype.addTrackElement_=function e(t){var r=this.trackElements_.length;if(!(""+r in this)){Object.defineProperty(this,r,{get:function e(){return this.trackElements_[r];}});}if(this.trackElements_.indexOf(t)===-1){this.trackElements_.push(t);}};e.prototype.getTrackElementByTrack_=function e(t){var r=void 0;for(var n=0,i=this.trackElements_.length;n<i;n++){if(t===this.trackElements_[n].track){r=this.trackElements_[n];break;}}return r;};e.prototype.removeTrackElement_=function e(t){for(var r=0,n=this.trackElements_.length;r<n;r++){if(t===this.trackElements_[r]){this.trackElements_.splice(r,1);break;}}};return e;}();r["default"]=c;},{"../utils/browser.js":317,"global/document":89}],305:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../utils/browser.js");var i=d(n);var o=e("global/document");var s=f(o);var a=e("../event-target");var u=f(a);var l=e("../tracks/text-track");var c=f(l);function f(e){return e&&e.__esModule?e:{default:e};}function d(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var y=0;var m=1;var g=2;var _=3;var b=function(e){v(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};p(this,t);var n=h(this,e.call(this));var o=void 0;var a=n;if(i.IS_IE8){a=s["default"].createElement("custom");for(var u in t.prototype){if(u!=="constructor"){a[u]=t.prototype[u];}}}var l=new c["default"](r);a.kind=l.kind;a.src=l.src;a.srclang=l.language;a.label=l.label;a["default"]=l["default"];Object.defineProperty(a,"readyState",{get:function e(){return o;}});Object.defineProperty(a,"track",{get:function e(){return l;}});o=y;l.addEventListener("loadeddata",function(){o=g;a.trigger({type:"load",target:a});});if(i.IS_IE8){var f;return f=a,h(n,f);}return n;}return t;}(u["default"]);b.prototype.allowedEvents_={load:"load"};b.NONE=y;b.LOADING=m;b.LOADED=g;b.ERROR=_;r["default"]=b;},{"../event-target":281,"../tracks/text-track":311,"../utils/browser.js":317,"global/document":89}],306:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../utils/browser.js");var i=u(n);var o=e("global/document");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}var c=function(){function e(t){l(this,e);var r=this;if(i.IS_IE8){r=s["default"].createElement("custom");for(var n in e.prototype){if(n!=="constructor"){r[n]=e.prototype[n];}}}e.prototype.setCues_.call(r,t);Object.defineProperty(r,"length",{get:function e(){return this.length_;}});if(i.IS_IE8){return r;}}e.prototype.setCues_=function e(t){var r=this.length||0;var n=0;var i=t.length;this.cues_=t;this.length_=t.length;var o=function e(t){if(!(""+t in this)){Object.defineProperty(this,""+t,{get:function e(){return this.cues_[t];}});}};if(r<i){n=r;for(;n<i;n++){o.call(this,n);}}};e.prototype.getCueById=function e(t){var r=null;for(var n=0,i=this.length;n<i;n++){var o=this[n];if(o.id===t){r=o;break;}}return r;};return e;}();r["default"]=c;},{"../utils/browser.js":317,"global/document":89}],307:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../component");var i=c(n);var o=e("../utils/fn.js");var s=l(o);var a=e("global/window");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h="#222";var v="#ccc";var y={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function m(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")";}function g(e,t,r){try{e.style[t]=r;}catch(e){return;}}var _=function(e){p(t,e);function t(r,n,i){f(this,t);var o=d(this,e.call(this,r,n,i));r.on("loadstart",s.bind(o,o.toggleDisplay));r.on("texttrackchange",s.bind(o,o.updateDisplay));r.ready(s.bind(o,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return;}r.on("fullscreenchange",s.bind(this,this.updateDisplay));var e=this.options_.playerOptions.tracks||[];for(var t=0;t<e.length;t++){this.player_.addRemoteTextTrack(e[t],true);}var n={captions:1,subtitles:1};var i=this.player_.textTracks();var o=void 0;var a=void 0;if(i){for(var u=0;u<i.length;u++){var l=i[u];if(l["default"]){if(l.kind==="descriptions"&&!o){o=l;}else if(l.kind in n&&!a){a=l;}}}if(a){a.mode="showing";}else if(o){o.mode="showing";}}}));return o;}t.prototype.toggleDisplay=function e(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide();}else{this.show();}};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"});};t.prototype.clearDisplay=function e(){if(typeof u["default"].WebVTT==="function"){u["default"].WebVTT.processCues(u["default"],[],this.el_);}};t.prototype.updateDisplay=function e(){var t=this.player_.textTracks();this.clearDisplay();if(!t){return;}var r=null;var n=null;var i=t.length;while(i--){var o=t[i];if(o.mode==="showing"){if(o.kind==="descriptions"){r=o;}else{n=o;}}}if(n){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off");}this.updateForTrack(n);}else if(r){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive");}this.updateForTrack(r);}};t.prototype.updateForTrack=function e(t){if(typeof u["default"].WebVTT!=="function"||!t.activeCues){return;}var r=this.player_.textTrackSettings.getValues();var n=[];for(var i=0;i<t.activeCues.length;i++){n.push(t.activeCues[i]);}u["default"].WebVTT.processCues(u["default"],n,this.el_);var o=n.length;while(o--){var s=n[o];if(!s){continue;}var a=s.displayState;if(r.color){a.firstChild.style.color=r.color;}if(r.textOpacity){g(a.firstChild,"color",m(r.color||"#fff",r.textOpacity));}if(r.backgroundColor){a.firstChild.style.backgroundColor=r.backgroundColor;}if(r.backgroundOpacity){g(a.firstChild,"backgroundColor",m(r.backgroundColor||"#000",r.backgroundOpacity));}if(r.windowColor){if(r.windowOpacity){g(a,"backgroundColor",m(r.windowColor,r.windowOpacity));}else{a.style.backgroundColor=r.windowColor;}}if(r.edgeStyle){if(r.edgeStyle==="dropshadow"){a.firstChild.style.textShadow="2px 2px 3px "+h+", 2px 2px 4px "+h+", 2px 2px 5px "+h;}else if(r.edgeStyle==="raised"){a.firstChild.style.textShadow="1px 1px "+h+", 2px 2px "+h+", 3px 3px "+h;}else if(r.edgeStyle==="depressed"){a.firstChild.style.textShadow="1px 1px "+v+", 0 1px "+v+", -1px -1px "+h+", 0 -1px "+h;}else if(r.edgeStyle==="uniform"){a.firstChild.style.textShadow="0 0 4px "+h+", 0 0 4px "+h+", 0 0 4px "+h+", 0 0 4px "+h;}}if(r.fontPercent&&r.fontPercent!==1){var l=u["default"].parseFloat(a.style.fontSize);a.style.fontSize=l*r.fontPercent+"px";a.style.height="auto";a.style.top="auto";a.style.bottom="2px";}if(r.fontFamily&&r.fontFamily!=="default"){if(r.fontFamily==="small-caps"){a.firstChild.style.fontVariant="small-caps";}else{a.firstChild.style.fontFamily=y[r.fontFamily];}}}};return t;}(i["default"]);i["default"].registerComponent("TextTrackDisplay",_);r["default"]=_;},{"../component":244,"../utils/fn.js":322,"global/window":90}],308:[function(e,t,r){"use strict";r.__esModule=true;var n=function e(t){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,r,n){if(t[r]){e[r]=t[r];}return e;},{cues:t.cues&&Array.prototype.map.call(t.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id};})});return r;};var i=function e(t){var r=t.$$("track");var i=Array.prototype.map.call(r,function(e){return e.track;});var o=Array.prototype.map.call(r,function(e){var t=n(e.track);if(e.src){t.src=e.src;}return t;});return o.concat(Array.prototype.filter.call(t.textTracks(),function(e){return i.indexOf(e)===-1;}).map(n));};var o=function e(t,r){t.forEach(function(e){var t=r.addRemoteTextTrack(e).track;if(!e.src&&e.cues){e.cues.forEach(function(e){return t.addCue(e);});}});return r.textTracks();};r["default"]={textTracksToJson:i,jsonToTextTracks:o,trackToJson_:n};},{}],309:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./track-list");var i=d(n);var o=e("../utils/fn.js");var s=f(o);var a=e("../utils/browser.js");var u=f(a);var l=e("global/document");var c=d(l);function f(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function d(e){return e&&e.__esModule?e:{default:e};}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var y=function(e){v(t,e);function t(){var r,n;var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];p(this,t);var s=void 0;if(u.IS_IE8){s=c["default"].createElement("custom");for(var a in i["default"].prototype){if(a!=="constructor"){s[a]=i["default"].prototype[a];}}for(var l in t.prototype){if(l!=="constructor"){s[l]=t.prototype[l];}}}s=(r=h(this,e.call(this,o,s)),r);return n=s,h(r,n);}t.prototype.addTrack_=function t(r){e.prototype.addTrack_.call(this,r);r.addEventListener("modechange",s.bind(this,function(){this.trigger("change");}));};return t;}(i["default"]);r["default"]=y;},{"../utils/browser.js":317,"../utils/fn.js":322,"./track-list":313,"global/document":89}],310:[function(e,t,r){"use strict";r.__esModule=true;var n=e("global/window");var i=v(n);var o=e("../component");var s=v(o);var a=e("../utils/dom");var u=e("../utils/fn");var l=h(u);var c=e("../utils/obj");var f=h(c);var d=e("../utils/log");var p=v(d);function h(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function v(e){return e&&e.__esModule?e:{default:e};}function y(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var _="vjs-text-track-settings";var b=["#000","Black"];var w=["#00F","Blue"];var T=["#0FF","Cyan"];var j=["#0F0","Green"];var k=["#F0F","Magenta"];var E=["#F00","Red"];var C=["#FFF","White"];var x=["#FF0","Yellow"];var S=["1","Opaque"];var O=["0.5","Semi-Transparent"];var P=["0","Transparent"];var A={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[b,C,E,j,w,x,k,T]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[S,O,P]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[C,b,E,j,w,x,k,T]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function e(t){return t==="1.00"?null:Number(t);}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[S,O]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[P,O,S]}};A.windowColor.options=A.backgroundColor.options;function M(e,t){if(t){e=t(e);}if(e&&e!=="none"){return e;}}function I(e,t){var r=e.options[e.options.selectedIndex].value;return M(r,t);}function L(e,t,r){if(!t){return;}for(var n=0;n<e.options.length;n++){if(M(e.options[n].value,r)===t){e.selectedIndex=n;break;}}}var R=function(e){g(t,e);function t(r,n){y(this,t);var i=m(this,e.call(this,r,n));i.setDefaults();i.hide();i.updateDisplay=l.bind(i,i.updateDisplay);if(n.persistTextTrackSettings===undefined){i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings;}i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings();i.hide();});i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults();i.updateDisplay();});f.each(A,function(e){i.on(i.$(e.selector),"change",i.updateDisplay);});if(i.options_.persistTextTrackSettings){i.restoreSettings();}return i;}t.prototype.createElSelect_=function e(t){var r=this;var n=A[t];var i=n.id.replace("%s",this.id_);return[(0,a.createEl)("label",{className:"vjs-label",textContent:n.label},{for:i}),(0,a.createEl)("select",{id:i},undefined,n.options.map(function(e){return(0,a.createEl)("option",{textContent:r.localize(e[1]),value:e[0]});}))];};t.prototype.createElFgColor_=function e(){var t=(0,a.createEl)("legend",{textContent:this.localize("Text")});var r=this.createElSelect_("color");var n=(0,a.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},undefined,this.createElSelect_("textOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},undefined,[t].concat(r,n));};t.prototype.createElBgColor_=function e(){var t=(0,a.createEl)("legend",{textContent:this.localize("Background")});var r=this.createElSelect_("backgroundColor");var n=(0,a.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},undefined,this.createElSelect_("backgroundOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},undefined,[t].concat(r,n));};t.prototype.createElWinColor_=function e(){var t=(0,a.createEl)("legend",{textContent:this.localize("Window")});var r=this.createElSelect_("windowColor");var n=(0,a.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},undefined,this.createElSelect_("windowOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},undefined,[t].concat(r,n));};t.prototype.createElColors_=function e(){return(0,a.createEl)("div",{className:"vjs-tracksettings-colors"},undefined,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()]);};t.prototype.createElFont_=function e(){var t=(0,a.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},undefined,this.createElSelect_("fontPercent"));var r=(0,a.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},undefined,this.createElSelect_("edgeStyle"));var n=(0,a.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},undefined,this.createElSelect_("fontFamily"));return(0,a.createEl)("div",{className:"vjs-tracksettings-font"},undefined,[t,r,n]);};t.prototype.createElControls_=function e(){var t=(0,a.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")});var r=(0,a.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,a.createEl)("div",{className:"vjs-tracksettings-controls"},undefined,[t,r]);};t.prototype.createEl=function e(){var t=(0,a.createEl)("div",{className:"vjs-tracksettings"},undefined,[this.createElColors_(),this.createElFont_(),this.createElControls_()]);var r=(0,a.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"});var n=(0,a.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."});var i=(0,a.createEl)("div",undefined,{role:"document"},[r,n,t]);return(0,a.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":r.id,"aria-describedby":n.id},i);};t.prototype.getValues=function e(){var t=this;return f.reduce(A,function(e,r,n){var i=I(t.$(r.selector),r.parser);if(i!==undefined){e[n]=i;}return e;},{});};t.prototype.setValues=function e(t){var r=this;f.each(A,function(e,n){L(r.$(e.selector),t[n],e.parser);});};t.prototype.setDefaults=function e(){var t=this;f.each(A,function(e){var r=e.hasOwnProperty("default")?e["default"]:0;t.$(e.selector).selectedIndex=r;});};t.prototype.restoreSettings=function e(){var t=void 0;try{t=JSON.parse(i["default"].localStorage.getItem(_));}catch(e){p["default"].warn(e);}if(t){this.setValues(t);}};t.prototype.saveSettings=function e(){if(!this.options_.persistTextTrackSettings){return;}var t=this.getValues();try{if(Object.keys(t).length){i["default"].localStorage.setItem(_,JSON.stringify(t));}else{i["default"].localStorage.removeItem(_);}}catch(e){p["default"].warn(e);}};t.prototype.updateDisplay=function e(){var t=this.player_.getChild("textTrackDisplay");if(t){t.updateDisplay();}};return t;}(s["default"]);s["default"].registerComponent("TextTrackSettings",R);r["default"]=R;},{"../component":244,"../utils/dom":320,"../utils/fn":322,"../utils/log":325,"../utils/obj":327,"global/window":90}],311:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./text-track-cue-list");var i=T(n);var o=e("../utils/fn.js");var s=w(o);var a=e("./track-enums");var u=e("../utils/log.js");var l=T(u);var c=e("global/window");var f=T(c);var d=e("./track.js");var p=T(d);var h=e("../utils/url.js");var v=e("xhr");var y=T(v);var m=e("../utils/merge-options");var g=T(m);var _=e("../utils/browser.js");var b=w(_);function w(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function T(e){return e&&e.__esModule?e:{default:e};}function j(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var C=function e(t,r){var n=new f["default"].WebVTT.Parser(f["default"],f["default"].vttjs,f["default"].WebVTT.StringDecoder());var i=[];n.oncue=function(e){r.addCue(e);};n.onparsingerror=function(e){i.push(e);};n.onflush=function(){r.trigger({type:"loadeddata",target:r});};n.parse(t);if(i.length>0){if(f["default"].console&&f["default"].console.groupCollapsed){f["default"].console.groupCollapsed("Text Track parsing errors for "+r.src);}i.forEach(function(e){return l["default"].error(e);});if(f["default"].console&&f["default"].console.groupEnd){f["default"].console.groupEnd();}}n.flush();};var x=function e(t,r){var n={uri:t};var i=(0,h.isCrossOrigin)(t);if(i){n.cors=i;}(0,y["default"])(n,s.bind(this,function(e,t,n){if(e){return l["default"].error(e,t);}r.loaded_=true;if(typeof f["default"].WebVTT!=="function"){if(r.tech_){var i=function e(){return C(n,r);};r.tech_.on("vttjsloaded",i);r.tech_.on("vttjserror",function(){l["default"].error("vttjs failed to load, stopping trying to process "+r.src);r.tech_.off("vttjsloaded",i);});}}else{C(n,r);}}));};var S=function(e){E(t,e);function t(){var r,n;var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};j(this,t);if(!o.tech){throw new Error("A tech was not provided.");}var u=(0,g["default"])(o,{kind:a.TextTrackKind[o.kind]||"subtitles",language:o.language||o.srclang||""});var l=a.TextTrackMode[u.mode]||"disabled";var c=u["default"];if(u.kind==="metadata"||u.kind==="chapters"){l="hidden";}var f=(r=k(this,e.call(this,u)),r);f.tech_=u.tech;if(b.IS_IE8){for(var d in t.prototype){if(d!=="constructor"){f[d]=t.prototype[d];}}}f.cues_=[];f.activeCues_=[];var p=new i["default"](f.cues_);var h=new i["default"](f.activeCues_);var v=false;var y=s.bind(f,function(){this.activeCues;if(v){this.trigger("cuechange");v=false;}});if(l!=="disabled"){f.tech_.ready(function(){f.tech_.on("timeupdate",y);},true);}Object.defineProperty(f,"default",{get:function e(){return c;},set:function e(){}});Object.defineProperty(f,"mode",{get:function e(){return l;},set:function e(t){var r=this;if(!a.TextTrackMode[t]){return;}l=t;if(l==="showing"){this.tech_.ready(function(){r.tech_.on("timeupdate",y);},true);}this.trigger("modechange");}});Object.defineProperty(f,"cues",{get:function e(){if(!this.loaded_){return null;}return p;},set:function e(){}});Object.defineProperty(f,"activeCues",{get:function e(){if(!this.loaded_){return null;}if(this.cues.length===0){return h;}var t=this.tech_.currentTime();var r=[];for(var n=0,i=this.cues.length;n<i;n++){var o=this.cues[n];if(o.startTime<=t&&o.endTime>=t){r.push(o);}else if(o.startTime===o.endTime&&o.startTime<=t&&o.startTime+.5>=t){r.push(o);}}v=false;if(r.length!==this.activeCues_.length){v=true;}else{for(var s=0;s<r.length;s++){if(this.activeCues_.indexOf(r[s])===-1){v=true;}}}this.activeCues_=r;h.setCues_(this.activeCues_);return h;},set:function e(){}});if(u.src){f.src=u.src;x(u.src,f);}else{f.loaded_=true;}return n=f,k(r,n);}t.prototype.addCue=function e(t){var r=t;if(f["default"].vttjs&&!(t instanceof f["default"].vttjs.VTTCue)){r=new f["default"].vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var n in t){if(!(n in r)){r[n]=t[n];}}r.id=t.id;r.originalCue_=t;}var i=this.tech_.textTracks();if(i){for(var o=0;o<i.length;o++){if(i[o]!==this){i[o].removeCue(r);}}}this.cues_.push(r);this.cues.setCues_(this.cues_);};t.prototype.removeCue=function e(t){var r=this.cues_.length;while(r--){var n=this.cues_[r];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(r,1);this.cues.setCues_(this.cues_);break;}}};return t;}(p["default"]);S.prototype.allowedEvents_={cuechange:"cuechange"};r["default"]=S;},{"../utils/browser.js":317,"../utils/fn.js":322,"../utils/log.js":325,"../utils/merge-options":326,"../utils/url.js":331,"./text-track-cue-list":306,"./track-enums":312,"./track.js":314,"global/window":90,xhr:371}],312:[function(e,t,r){"use strict";r.__esModule=true;var n=r.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var i=r.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var o=r.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var s=r.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};},{}],313:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../event-target");var i=c(n);var o=e("../utils/browser.js");var s=l(o);var a=e("global/document");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function(e){p(t,e);function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var n;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;f(this,t);var o=d(this,e.call(this));if(!i){i=o;if(s.IS_IE8){i=u["default"].createElement("custom");for(var a in t.prototype){if(a!=="constructor"){i[a]=t.prototype[a];}}}}i.tracks_=[];Object.defineProperty(i,"length",{get:function e(){return this.tracks_.length;}});for(var l=0;l<r.length;l++){i.addTrack_(r[l]);}return n=i,d(o,n);}t.prototype.addTrack_=function e(t){var r=this.tracks_.length;if(!(""+r in this)){Object.defineProperty(this,r,{get:function e(){return this.tracks_[r];}});}if(this.tracks_.indexOf(t)===-1){this.tracks_.push(t);this.trigger({track:t,type:"addtrack"});}};t.prototype.removeTrack_=function e(t){var r=void 0;for(var n=0,i=this.length;n<i;n++){if(this[n]===t){r=this[n];if(r.off){r.off();}this.tracks_.splice(n,1);break;}}if(!r){return;}this.trigger({track:r,type:"removetrack"});};t.prototype.getTrackById=function e(t){var r=null;for(var n=0,i=this.length;n<i;n++){var o=this[n];if(o.id===t){r=o;break;}}return r;};return t;}(i["default"]);h.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var v in h.prototype.allowedEvents_){h.prototype["on"+v]=null;}r["default"]=h;},{"../event-target":281,"../utils/browser.js":317,"global/document":89}],314:[function(e,t,r){"use strict";r.__esModule=true;var n=e("../utils/browser.js");var i=d(n);var o=e("global/document");var s=f(o);var a=e("../utils/guid.js");var u=d(a);var l=e("../event-target");var c=f(l);function f(e){return e&&e.__esModule?e:{default:e};}function d(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function h(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var y=function(e){v(t,e);function t(){var r;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};p(this,t);var o=h(this,e.call(this));var a=o;if(i.IS_IE8){a=s["default"].createElement("custom");for(var l in t.prototype){if(l!=="constructor"){a[l]=t.prototype[l];}}}var c={id:n.id||"vjs_track_"+u.newGUID(),kind:n.kind||"",label:n.label||"",language:n.language||""};var f=function e(t){Object.defineProperty(a,t,{get:function e(){return c[t];},set:function e(){}});};for(var d in c){f(d);}return r=a,h(o,r);}return t;}(c["default"]);r["default"]=y;},{"../event-target":281,"../utils/browser.js":317,"../utils/guid.js":324,"global/document":89}],315:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./track-list");var i=c(n);var o=e("../utils/browser.js");var s=l(o);var a=e("global/document");var u=c(a);function l(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function c(e){return e&&e.__esModule?e:{default:e};}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var h=function e(t,r){for(var n=0;n<t.length;n++){if(r.id===t[n].id){continue;}t[n].selected=false;}};var v=function(e){p(t,e);function t(){var r,n;var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];f(this,t);var a=void 0;for(var l=o.length-1;l>=0;l--){if(o[l].selected){h(o,o[l]);break;}}if(s.IS_IE8){a=u["default"].createElement("custom");for(var c in i["default"].prototype){if(c!=="constructor"){a[c]=i["default"].prototype[c];}}for(var p in t.prototype){if(p!=="constructor"){a[p]=t.prototype[p];}}}a=(r=d(this,e.call(this,o,a)),r);a.changing_=false;Object.defineProperty(a,"selectedIndex",{get:function e(){for(var t=0;t<this.length;t++){if(this[t].selected){return t;}}return-1;},set:function e(){}});return n=a,d(r,n);}t.prototype.addTrack_=function t(r){var n=this;if(r.selected){h(this,r);}e.prototype.addTrack_.call(this,r);if(!r.addEventListener){return;}r.addEventListener("selectedchange",function(){if(n.changing_){return;}n.changing_=true;h(n,r);n.changing_=false;n.trigger("change");});};t.prototype.addTrack=function e(t){this.addTrack_(t);};t.prototype.removeTrack=function t(r){e.prototype.removeTrack_.call(this,r);};return t;}(i["default"]);r["default"]=v;},{"../utils/browser.js":317,"./track-list":313,"global/document":89}],316:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./track-enums");var i=e("./track");var o=f(i);var s=e("../utils/merge-options");var a=f(s);var u=e("../utils/browser.js");var l=c(u);function c(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function f(e){return e&&e.__esModule?e:{default:e};}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return t&&((typeof t==="undefined"?"undefined":_typeof(t))==="object"||typeof t==="function")?t:e;}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var v=function(e){h(t,e);function t(){var r,i;var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};d(this,t);var s=(0,a["default"])(o,{kind:n.VideoTrackKind[o.kind]||""});var u=(r=p(this,e.call(this,s)),r);var c=false;if(l.IS_IE8){for(var f in t.prototype){if(f!=="constructor"){u[f]=t.prototype[f];}}}Object.defineProperty(u,"selected",{get:function e(){return c;},set:function e(t){if(typeof t!=="boolean"||t===c){return;}c=t;this.trigger("selectedchange");}});if(s.selected){u.selected=s.selected;}return i=u,p(r,i);}return t;}(o["default"]);r["default"]=v;},{"../utils/browser.js":317,"../utils/merge-options":326,"./track":314,"./track-enums":312}],317:[function(e,t,r){"use strict";r.__esModule=true;r.BACKGROUND_SIZE_SUPPORTED=r.TOUCH_ENABLED=r.IS_ANY_SAFARI=r.IS_SAFARI=r.IE_VERSION=r.IS_IE8=r.IS_CHROME=r.IS_EDGE=r.IS_FIREFOX=r.IS_NATIVE_ANDROID=r.IS_OLD_ANDROID=r.ANDROID_VERSION=r.IS_ANDROID=r.IOS_VERSION=r.IS_IOS=r.IS_IPOD=r.IS_IPHONE=r.IS_IPAD=undefined;var n=e("./dom");var i=u(n);var o=e("global/window");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}var l=s["default"].navigator&&s["default"].navigator.userAgent||"";var c=/AppleWebKit\/([\d.]+)/i.exec(l);var f=c?parseFloat(c.pop()):null;var d=r.IS_IPAD=/iPad/i.test(l);var p=r.IS_IPHONE=/iPhone/i.test(l)&&!d;var h=r.IS_IPOD=/iPod/i.test(l);var v=r.IS_IOS=p||d||h;var y=r.IOS_VERSION=function(){var e=l.match(/OS (\d+)_/i);if(e&&e[1]){return e[1];}return null;}();var m=r.IS_ANDROID=/Android/i.test(l);var g=r.ANDROID_VERSION=function(){var e=l.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e){return null;}var t=e[1]&&parseFloat(e[1]);var r=e[2]&&parseFloat(e[2]);if(t&&r){return parseFloat(e[1]+"."+e[2]);}else if(t){return t;}return null;}();var _=r.IS_OLD_ANDROID=m&&/webkit/i.test(l)&&g<2.3;var b=r.IS_NATIVE_ANDROID=m&&g<5&&f<537;var w=r.IS_FIREFOX=/Firefox/i.test(l);var T=r.IS_EDGE=/Edge/i.test(l);var j=r.IS_CHROME=!T&&/Chrome/i.test(l);var k=r.IS_IE8=/MSIE\s8\.0/.test(l);var E=r.IE_VERSION=function(){var e=/MSIE\s(\d+)\.\d/.exec(l);var t=e&&parseFloat(e[1]);if(!t&&/Trident\/7.0/i.test(l)&&/rv:11.0/.test(l)){t=11;}return t;}();var C=r.IS_SAFARI=/Safari/i.test(l)&&!j&&!m&&!T;var x=r.IS_ANY_SAFARI=C||v;var S=r.TOUCH_ENABLED=i.isReal()&&("ontouchstart"in s["default"]||s["default"].DocumentTouch&&s["default"].document instanceof s["default"].DocumentTouch);var O=r.BACKGROUND_SIZE_SUPPORTED=i.isReal()&&"backgroundSize"in s["default"].document.createElement("video").style;},{"./dom":320,"global/window":90}],318:[function(e,t,r){"use strict";r.__esModule=true;r.bufferedPercent=i;var n=e("./time-ranges.js");function i(e,t){var r=0;var i=void 0;var o=void 0;if(!t){return 0;}if(!e||!e.length){e=(0,n.createTimeRange)(0,0);}for(var s=0;s<e.length;s++){i=e.start(s);o=e.end(s);if(o>t){o=t;}r+=o-i;}return r/t;}},{"./time-ranges.js":329}],319:[function(e,t,r){"use strict";r.__esModule=true;r["default"]=s;var n=e("global/window");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){if(!e||!t){return"";}if(typeof i["default"].getComputedStyle==="function"){var r=i["default"].getComputedStyle(e);return r?r[t]:"";}return e.currentStyle[t]||"";}},{"global/window":90}],320:[function(e,t,r){"use strict";r.__esModule=true;r.$$=r.$=undefined;var n=m(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);r.isReal=w;r.isEl=T;r.getEl=k;r.createEl=E;r.textContent=C;r.insertElFirst=x;r.getElData=P;r.hasElData=A;r.removeElData=M;r.hasElClass=I;r.addElClass=L;r.removeElClass=R;r.toggleElClass=B;r.setElAttributes=D;r.getElAttributes=N;r.getAttribute=F;r.setAttribute=U;r.removeAttribute=H;r.blockTextSelection=V;r.unblockTextSelection=W;r.findElPosition=q;r.getPointerPosition=z;r.isTextNode=$;r.emptyEl=X;r.normalizeContent=G;r.appendContent=K;r.insertContent=Y;var i=e("global/document");var o=y(i);var s=e("global/window");var a=y(s);var u=e("./guid.js");var l=v(u);var c=e("./log.js");var f=y(c);var d=e("tsml");var p=y(d);var h=e("./obj");function v(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function y(e){return e&&e.__esModule?e:{default:e};}function m(e,t){e.raw=t;return e;}function g(e){return typeof e==="string"&&/\S/.test(e);}function _(e){if(/\s/.test(e)){throw new Error("class has illegal whitespace characters");}}function b(e){return new RegExp("(^|\\s)"+e+"($|\\s)");}function w(){return o["default"]===a["default"].document&&typeof o["default"].createElement!=="undefined";}function T(e){return(0,h.isObject)(e)&&e.nodeType===1;}function j(e){return function(t,r){if(!g(t)){return o["default"][e](null);}if(g(r)){r=o["default"].querySelector(r);}var n=T(r)?r:o["default"];return n[e]&&n[e](t);};}function k(e){if(e.indexOf("#")===0){e=e.slice(1);}return o["default"].getElementById(e);}function E(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"div";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=arguments[3];var s=o["default"].createElement(e);Object.getOwnPropertyNames(t).forEach(function(e){var r=t[e];if(e.indexOf("aria-")!==-1||e==="role"||e==="type"){f["default"].warn((0,p["default"])(n,e,r));s.setAttribute(e,r);}else if(e==="textContent"){C(s,r);}else{s[e]=r;}});Object.getOwnPropertyNames(r).forEach(function(e){s.setAttribute(e,r[e]);});if(i){K(s,i);}return s;}function C(e,t){if(typeof e.textContent==="undefined"){e.innerText=t;}else{e.textContent=t;}return e;}function x(e,t){if(t.firstChild){t.insertBefore(e,t.firstChild);}else{t.appendChild(e);}}var S={};var O="vdata"+new Date().getTime();function P(e){var t=e[O];if(!t){t=e[O]=l.newGUID();}if(!S[t]){S[t]={};}return S[t];}function A(e){var t=e[O];if(!t){return false;}return!!Object.getOwnPropertyNames(S[t]).length;}function M(e){var t=e[O];if(!t){return;}delete S[t];try{delete e[O];}catch(t){if(e.removeAttribute){e.removeAttribute(O);}else{e[O]=null;}}}function I(e,t){_(t);if(e.classList){return e.classList.contains(t);}return b(t).test(e.className);}function L(e,t){if(e.classList){e.classList.add(t);}else if(!I(e,t)){e.className=(e.className+" "+t).trim();}return e;}function R(e,t){if(e.classList){e.classList.remove(t);}else{_(t);e.className=e.className.split(/\s+/).filter(function(e){return e!==t;}).join(" ");}return e;}function B(e,t,r){var n=I(e,t);if(typeof r==="function"){r=r(e,t);}if(typeof r!=="boolean"){r=!n;}if(r===n){return;}if(r){L(e,t);}else{R(e,t);}return e;}function D(e,t){Object.getOwnPropertyNames(t).forEach(function(r){var n=t[r];if(n===null||typeof n==="undefined"||n===false){e.removeAttribute(r);}else{e.setAttribute(r,n===true?"":n);}});}function N(e){var t={};var r=","+"autoplay,controls,loop,muted,default"+",";if(e&&e.attributes&&e.attributes.length>0){var n=e.attributes;for(var i=n.length-1;i>=0;i--){var o=n[i].name;var s=n[i].value;if(typeof e[o]==="boolean"||r.indexOf(","+o+",")!==-1){s=s!==null?true:false;}t[o]=s;}}return t;}function F(e,t){return e.getAttribute(t);}function U(e,t,r){e.setAttribute(t,r);}function H(e,t){e.removeAttribute(t);}function V(){o["default"].body.focus();o["default"].onselectstart=function(){return false;};}function W(){o["default"].onselectstart=function(){return true;};}function q(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode){t=e.getBoundingClientRect();}if(!t){return{left:0,top:0};}var r=o["default"].documentElement;var n=o["default"].body;var i=r.clientLeft||n.clientLeft||0;var s=a["default"].pageXOffset||n.scrollLeft;var u=t.left+s-i;var l=r.clientTop||n.clientTop||0;var c=a["default"].pageYOffset||n.scrollTop;var f=t.top+c-l;return{left:Math.round(u),top:Math.round(f)};}function z(e,t){var r={};var n=q(e);var i=e.offsetWidth;var o=e.offsetHeight;var s=n.top;var a=n.left;var u=t.pageY;var l=t.pageX;if(t.changedTouches){l=t.changedTouches[0].pageX;u=t.changedTouches[0].pageY;}r.y=Math.max(0,Math.min(1,(s-u+o)/o));r.x=Math.max(0,Math.min(1,(l-a)/i));return r;}function $(e){return(0,h.isObject)(e)&&e.nodeType===3;}function X(e){while(e.firstChild){e.removeChild(e.firstChild);}return e;}function G(e){if(typeof e==="function"){e=e();}return(Array.isArray(e)?e:[e]).map(function(e){if(typeof e==="function"){e=e();}if(T(e)||$(e)){return e;}if(typeof e==="string"&&/\S/.test(e)){return o["default"].createTextNode(e);}}).filter(function(e){return e;});}function K(e,t){G(t).forEach(function(t){return e.appendChild(t);});return e;}function Y(e,t){return K(X(e),t);}var J=r.$=j("querySelector");var Q=r.$$=j("querySelectorAll");},{"./guid.js":324,"./log.js":325,"./obj":327,"global/document":89,"global/window":90,tsml:231}],321:[function(e,t,r){"use strict";r.__esModule=true;r.fixEvent=m;r.on=g;r.off=_;r.trigger=b;r.one=w;var n=e("./dom.js");var i=h(n);var o=e("./guid.js");var s=h(o);var a=e("./log.js");var u=p(a);var l=e("global/window");var c=p(l);var f=e("global/document");var d=p(f);function p(e){return e&&e.__esModule?e:{default:e};}function h(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function v(e,t){var r=i.getElData(e);if(r.handlers[t].length===0){delete r.handlers[t];if(e.removeEventListener){e.removeEventListener(t,r.dispatcher,false);}else if(e.detachEvent){e.detachEvent("on"+t,r.dispatcher);}}if(Object.getOwnPropertyNames(r.handlers).length<=0){delete r.handlers;delete r.dispatcher;delete r.disabled;}if(Object.getOwnPropertyNames(r).length===0){i.removeElData(e);}}function y(e,t,r,n){r.forEach(function(r){e(t,r,n);});}function m(e){function t(){return true;}function r(){return false;}if(!e||!e.isPropagationStopped){var n=e||c["default"].event;e={};for(var i in n){if(i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"){if(!(i==="returnValue"&&n.preventDefault)){e[i]=n[i];}}}if(!e.target){e.target=e.srcElement||d["default"];}if(!e.relatedTarget){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement;}e.preventDefault=function(){if(n.preventDefault){n.preventDefault();}e.returnValue=false;n.returnValue=false;e.defaultPrevented=true;};e.defaultPrevented=false;e.stopPropagation=function(){if(n.stopPropagation){n.stopPropagation();}e.cancelBubble=true;n.cancelBubble=true;e.isPropagationStopped=t;};e.isPropagationStopped=r;e.stopImmediatePropagation=function(){if(n.stopImmediatePropagation){n.stopImmediatePropagation();}e.isImmediatePropagationStopped=t;e.stopPropagation();};e.isImmediatePropagationStopped=r;if(e.clientX!==null&&e.clientX!==undefined){var o=d["default"].documentElement;var s=d["default"].body;e.pageX=e.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0);e.pageY=e.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0);}e.which=e.charCode||e.keyCode;if(e.button!==null&&e.button!==undefined){e.button=e.button&1?0:e.button&4?1:e.button&2?2:0;}}return e;}function g(e,t,r){if(Array.isArray(t)){return y(g,e,t,r);}var n=i.getElData(e);if(!n.handlers){n.handlers={};}if(!n.handlers[t]){n.handlers[t]=[];}if(!r.guid){r.guid=s.newGUID();}n.handlers[t].push(r);if(!n.dispatcher){n.disabled=false;n.dispatcher=function(t,r){if(n.disabled){return;}t=m(t);var i=n.handlers[t.type];if(i){var o=i.slice(0);for(var s=0,a=o.length;s<a;s++){if(t.isImmediatePropagationStopped()){break;}else{try{o[s].call(e,t,r);}catch(e){u["default"].error(e);}}}}};}if(n.handlers[t].length===1){if(e.addEventListener){e.addEventListener(t,n.dispatcher,false);}else if(e.attachEvent){e.attachEvent("on"+t,n.dispatcher);}}}function _(e,t,r){if(!i.hasElData(e)){return;}var n=i.getElData(e);if(!n.handlers){return;}if(Array.isArray(t)){return y(_,e,t,r);}var o=function t(r){n.handlers[r]=[];v(e,r);};if(!t){for(var s in n.handlers){o(s);}return;}var a=n.handlers[t];if(!a){return;}if(!r){o(t);return;}if(r.guid){for(var u=0;u<a.length;u++){if(a[u].guid===r.guid){a.splice(u--,1);}}}v(e,t);}function b(e,t,r){var n=i.hasElData(e)?i.getElData(e):{};var o=e.parentNode||e.ownerDocument;if(typeof t==="string"){t={type:t,target:e};}t=m(t);if(n.dispatcher){n.dispatcher.call(e,t,r);}if(o&&!t.isPropagationStopped()&&t.bubbles===true){b.call(null,o,t,r);}else if(!o&&!t.defaultPrevented){var s=i.getElData(t.target);if(t.target[t.type]){s.disabled=true;if(typeof t.target[t.type]==="function"){t.target[t.type]();}s.disabled=false;}}return!t.defaultPrevented;}function w(e,t,r){if(Array.isArray(t)){return y(w,e,t,r);}var n=function n(){_(e,t,n);r.apply(this,arguments);};n.guid=r.guid=r.guid||s.newGUID();g(e,t,n);}},{"./dom.js":320,"./guid.js":324,"./log.js":325,"global/document":89,"global/window":90}],322:[function(e,t,r){"use strict";r.__esModule=true;r.throttle=r.bind=undefined;var n=e("./guid.js");var i=r.bind=function e(t,r,i){if(!r.guid){r.guid=(0,n.newGUID)();}var o=function e(){return r.apply(t,arguments);};o.guid=i?i+"_"+r.guid:r.guid;return o;};var o=r.throttle=function e(t,r){var n=Date.now();var i=function e(){var i=Date.now();if(i-n>=r){t.apply(undefined,arguments);n=i;}};return i;};},{"./guid.js":324}],323:[function(e,t,r){"use strict";r.__esModule=true;function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e;e=e<0?0:e;var r=Math.floor(e%60);var n=Math.floor(e/60%60);var i=Math.floor(e/3600);var o=Math.floor(t/60%60);var s=Math.floor(t/3600);if(isNaN(e)||e===Infinity){i=n=r="-";}i=i>0||s>0?i+":":"";n=((i||o>=10)&&n<10?"0"+n:n)+":";r=r<10?"0"+r:r;return i+n+r;}r["default"]=n;},{}],324:[function(e,t,r){"use strict";r.__esModule=true;r.newGUID=i;var n=1;function i(){return n++;}},{}],325:[function(e,t,r){"use strict";r.__esModule=true;r.logByType=undefined;var n=e("global/window");var i=a(n);var o=e("./browser");var s=e("./obj");function a(e){return e&&e.__esModule?e:{default:e};}var u=void 0;var l=r.logByType=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!!o.IE_VERSION&&o.IE_VERSION<11;if(t!=="log"){r.unshift(t.toUpperCase()+":");}u.history.push(r);r.unshift("VIDEOJS:");var a=i["default"].console&&i["default"].console[t];if(!a){return;}if(n){r=r.map(function(e){if((0,s.isObject)(e)||Array.isArray(e)){try{return JSON.stringify(e);}catch(t){return String(e);}}return String(e);}).join(" ");}if(!a.apply){a(r);}else{a[Array.isArray(r)?"apply":"call"](i["default"].console,r);}};u=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n];}l("log",r);};u.history=[];u.error=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r];}return l("error",t);};u.warn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r];}return l("warn",t);};r["default"]=u;},{"./browser":317,"./obj":327,"global/window":90}],326:[function(e,t,r){"use strict";r.__esModule=true;r["default"]=i;var n=e("./obj");function i(){var e={};for(var t=arguments.length,r=Array(t),o=0;o<t;o++){r[o]=arguments[o];}r.forEach(function(t){if(!t){return;}(0,n.each)(t,function(t,r){if(!(0,n.isPlain)(t)){e[r]=t;return;}if(!(0,n.isPlain)(e[r])){e[r]={};}e[r]=i(e[r],t);});});return e;}},{"./obj":327}],327:[function(e,t,r){"use strict";r.__esModule=true;var n=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof(e);}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof(e);};r.each=s;r.reduce=a;r.assign=u;r.isObject=l;r.isPlain=c;var i=Object.prototype.toString;var o=function e(t){return l(t)?Object.keys(t):[];};function s(e,t){o(e).forEach(function(r){return t(e[r],r);});}function a(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return o(e).reduce(function(r,n){return t(r,e[n],n);},r);}function u(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n];}if(Object.assign){return Object.assign.apply(Object,[e].concat(r));}r.forEach(function(t){if(!t){return;}s(t,function(t,r){e[r]=t;});});return e;}function l(e){return!!e&&(typeof e==="undefined"?"undefined":n(e))==="object";}function c(e){return l(e)&&i.call(e)==="[object Object]"&&e.constructor===Object;}},{}],328:[function(e,t,r){"use strict";r.__esModule=true;r.setTextContent=r.createStyleElement=undefined;var n=e("global/document");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}var s=r.createStyleElement=function e(t){var r=i["default"].createElement("style");r.className=t;return r;};var a=r.setTextContent=function e(t,r){if(t.styleSheet){t.styleSheet.cssText=r;}else{t.textContent=r;}};},{"global/document":89}],329:[function(e,t,r){"use strict";r.__esModule=true;r.createTimeRange=undefined;r.createTimeRanges=l;var n=e("./log.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t,r){if(t<0||t>r){throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+r+").");}}function a(e,t,r,n){if(n===undefined){i["default"].warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument.");n=0;}s(e,n,r.length-1);return r[n][t];}function u(e){if(e===undefined||e.length===0){return{length:0,start:function e(){throw new Error("This TimeRanges object is empty");},end:function e(){throw new Error("This TimeRanges object is empty");}};}return{length:e.length,start:a.bind(null,"start",0,e),end:a.bind(null,"end",1,e)};}function l(e,t){if(Array.isArray(e)){return u(e);}else if(e===undefined||t===undefined){return u();}return u([[e,t]]);}r.createTimeRange=l;},{"./log.js":325}],330:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(typeof e!=="string"){return e;}return e.charAt(0).toUpperCase()+e.slice(1);}r["default"]=n;},{}],331:[function(e,t,r){"use strict";r.__esModule=true;r.isCrossOrigin=r.getFileExtension=r.getAbsoluteURL=r.parseUrl=undefined;var n=e("global/document");var i=a(n);var o=e("global/window");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}var u=r.parseUrl=function e(t){var r=["protocol","hostname","port","pathname","search","hash","host"];var n=i["default"].createElement("a");n.href=t;var o=n.host===""&&n.protocol!=="file:";var s=void 0;if(o){s=i["default"].createElement("div");s.innerHTML='<a href="'+t+'"></a>';n=s.firstChild;s.setAttribute("style","display:none; position:absolute;");i["default"].body.appendChild(s);}var a={};for(var u=0;u<r.length;u++){a[r[u]]=n[r[u]];}if(a.protocol==="http:"){a.host=a.host.replace(/:80$/,"");}if(a.protocol==="https:"){a.host=a.host.replace(/:443$/,"");}if(o){i["default"].body.removeChild(s);}return a;};var l=r.getAbsoluteURL=function e(t){if(!t.match(/^https?:\/\//)){var r=i["default"].createElement("div");r.innerHTML='<a href="'+t+'">x</a>';t=r.firstChild.href;}return t;};var c=r.getFileExtension=function e(t){if(typeof t==="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var n=r.exec(t);if(n){return n.pop().toLowerCase();}}return"";};var f=r.isCrossOrigin=function e(t){var r=s["default"].location;var n=u(t);var i=n.protocol===":"?r.protocol:n.protocol;var o=i+n.host!==r.protocol+r.host;return o;};},{"global/document":89,"global/window":90}],332:[function(e,t,r){"use strict";r.__esModule=true;var n=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof(e);}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof(e);};var i=e("global/window");var o=Z(i);var s=e("global/document");var a=Z(s);var u=e("./setup");var l=Q(u);var c=e("./utils/stylesheet.js");var f=Q(c);var d=e("./component");var p=Z(d);var h=e("./event-target");var v=Z(h);var y=e("./utils/events.js");var m=Q(y);var g=e("./player");var _=Z(g);var b=e("./plugins.js");var w=Z(b);var T=e("./utils/merge-options.js");var j=Z(T);var k=e("./utils/fn.js");var E=Q(k);var C=e("./tracks/text-track.js");var x=Z(C);var S=e("./tracks/audio-track.js");var O=Z(S);var P=e("./tracks/video-track.js");var A=Z(P);var M=e("./utils/time-ranges.js");var I=e("./utils/format-time.js");var L=Z(I);var R=e("./utils/log.js");var B=Z(R);var D=e("./utils/dom.js");var N=Q(D);var F=e("./utils/browser.js");var U=Q(F);var H=e("./utils/url.js");var V=Q(H);var W=e("./utils/obj");var q=e("./utils/computed-style.js");var z=Z(q);var $=e("./extend.js");var X=Z($);var G=e("xhr");var K=Z(G);var Y=e("./tech/tech.js");var J=Z(Y);function Q(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function Z(e){return e&&e.__esModule?e:{default:e};}if(typeof HTMLVideoElement==="undefined"&&N.isReal()){a["default"].createElement("video");a["default"].createElement("audio");a["default"].createElement("track");}function ee(e,t,r){var n=void 0;if(typeof e==="string"){if(e.indexOf("#")===0){e=e.slice(1);}if(ee.getPlayers()[e]){if(t){B["default"].warn('Player "'+e+'" is already initialised. Options will not be applied.');}if(r){ee.getPlayers()[e].ready(r);}return ee.getPlayers()[e];}n=N.getEl(e);}else{n=e;}if(!n||!n.nodeName){throw new TypeError("The element or ID supplied is not valid. (videojs)");}if(n.player||_["default"].players[n.playerId]){return n.player||_["default"].players[n.playerId];}t=t||{};ee.hooks("beforesetup").forEach(function(e){var r=e(n,(0,j["default"])(t));if(!(0,W.isObject)(r)||Array.isArray(r)){B["default"].error("please return an object in beforesetup hooks");return;}t=(0,j["default"])(t,r);});var i=p["default"].getComponent("Player");var o=new i(n,t,r);ee.hooks("setup").forEach(function(e){return e(o);});return o;}ee.hooks_={};ee.hooks=function(e,t){ee.hooks_[e]=ee.hooks_[e]||[];if(t){ee.hooks_[e]=ee.hooks_[e].concat(t);}return ee.hooks_[e];};ee.hook=function(e,t){ee.hooks(e,t);};ee.removeHook=function(e,t){var r=ee.hooks(e).indexOf(t);if(r<=-1){return false;}ee.hooks_[e]=ee.hooks_[e].slice();ee.hooks_[e].splice(r,1);return true;};if(o["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true&&N.isReal()){var te=N.$(".vjs-styles-defaults");if(!te){te=f.createStyleElement("vjs-styles-defaults");var re=N.$("head");if(re){re.insertBefore(te,re.firstChild);}f.setTextContent(te,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ");}}l.autoSetupTimeout(1,ee);ee.VERSION="5.19.2";ee.options=_["default"].prototype.options_;ee.getPlayers=function(){return _["default"].players;};ee.players=_["default"].players;ee.getComponent=p["default"].getComponent;ee.registerComponent=function(e,t){if(J["default"].isTech(t)){B["default"].warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");}p["default"].registerComponent.call(p["default"],e,t);};ee.getTech=J["default"].getTech;ee.registerTech=J["default"].registerTech;ee.browser=U;ee.TOUCH_ENABLED=U.TOUCH_ENABLED;ee.extend=X["default"];ee.mergeOptions=j["default"];ee.bind=E.bind;ee.plugin=w["default"];ee.addLanguage=function(e,t){var r;e=(""+e).toLowerCase();ee.options.languages=(0,j["default"])(ee.options.languages,(r={},r[e]=t,r));return ee.options.languages[e];};ee.log=B["default"];ee.createTimeRange=ee.createTimeRanges=M.createTimeRanges;ee.formatTime=L["default"];ee.parseUrl=V.parseUrl;ee.isCrossOrigin=V.isCrossOrigin;ee.EventTarget=v["default"];ee.on=m.on;ee.one=m.one;ee.off=m.off;ee.trigger=m.trigger;ee.xhr=K["default"];ee.TextTrack=x["default"];ee.AudioTrack=O["default"];ee.VideoTrack=A["default"];ee.isEl=N.isEl;ee.isTextNode=N.isTextNode;ee.createEl=N.createEl;ee.hasClass=N.hasElClass;ee.addClass=N.addElClass;ee.removeClass=N.removeElClass;ee.toggleClass=N.toggleElClass;ee.setAttributes=N.setElAttributes;ee.getAttributes=N.getElAttributes;ee.emptyEl=N.emptyEl;ee.appendContent=N.appendContent;ee.insertContent=N.insertContent;ee.computedStyle=z["default"];if(typeof define==="function"&&define.amd){define("videojs",[],function(){return ee;});}else if((typeof r==="undefined"?"undefined":n(r))==="object"&&(typeof t==="undefined"?"undefined":n(t))==="object"){t.exports=ee;}r["default"]=ee;},{"./component":244,"./event-target":281,"./extend.js":282,"./player":290,"./plugins.js":291,"./setup":295,"./tech/tech.js":301,"./tracks/audio-track.js":303,"./tracks/text-track.js":311,"./tracks/video-track.js":316,"./utils/browser.js":317,"./utils/computed-style.js":319,"./utils/dom.js":320,"./utils/events.js":321,"./utils/fn.js":322,"./utils/format-time.js":323,"./utils/log.js":325,"./utils/merge-options.js":326,"./utils/obj":327,"./utils/stylesheet.js":328,"./utils/time-ranges.js":329,"./utils/url.js":331,"global/document":89,"global/window":90,xhr:371}],333:[function(e,t,r){"use strict";r.__esModule=true;r["default"]=c;var n=e("global/window");var i=l(n);var o=e("global/document");var s=l(o);var a=e("video.js");var u=l(a);function l(e){return e&&e.__esModule?e:{default:e};}function c(e){if(e.ads.cancelPlayTimeout){return;}if(u["default"].browser.IS_IOS&&u["default"].browser.IS_IPHONE&&!e.el_.hasAttribute("playsinline")){var t=e.currentWidth?e.currentWidth():e.width();var r=e.currentHeight?e.currentHeight():e.height();var n=i["default"].getComputedStyle(e.el_).position;var o=i["default"].getComputedStyle(e.el_).top;var a=s["default"].createElement("div");a.style.width=t+"px";a.style.height=r+"px";a.style.background="black";a.style.position=n;a.style.top=o;e.el_.parentNode.insertBefore(a,e.el_);e.el_.style.display="none";e.one(["adstart","adtimeout","adserror","adscanceled","adskip","playing"],function(){e.el_.style.display="block";a.remove();});e.on("fullscreenchange",function(){if(a&&!e.isFullscreen()){e.el_.style.display="block";a.remove();}});}e.ads.cancelPlayTimeout=i["default"].setTimeout(function(){e.ads.cancelPlayTimeout=null;if(!e.paused()){e.pause();}e.ads._cancelledPlay=true;},1);}},{"global/document":89,"global/window":90,"video.js":332}],334:[function(e,t,r){"use strict";r.__esModule=true;r["default"]=s;var n=e("global/window");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e){e.ads.contentSrc=e.currentSrc();var t=function t(){if(e.ads.state!=="ad-playback"){var r=e.currentSrc();if(r!==e.ads.contentSrc){e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:r});e.ads.contentSrc=r;}}};e.on("loadstart",t);i["default"].setTimeout(t,1);}},{"global/window":90}],335:[function(e,t,r){"use strict";r.__esModule=true;r.processMetadataTracks=s;r.setMetadataTrackMode=a;r.getSupportedAdCue=u;r.isSupportedAdCue=l;r.getCueId=c;r.processAdTrack=p;var n=e("video.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){var r=e.textTracks();var n=function r(n){if(n.kind==="metadata"){e.ads.cueTextTracks.setMetadataTrackMode(n);t(e,n);}};for(var i=0;i<r.length;i++){n(r[i]);}r.addEventListener("addtrack",function(e){n(e.track);});}function a(e){return;}function u(e,t){return t;}function l(e,t){return true;}function c(e,t){return t.id;}var f=function e(t,r){return r!==undefined&&t.ads.includedCues[r];};var d=function e(t,r){if(r!==undefined&&r!==""){t.ads.includedCues[r]=true;}};function p(e,t,r,n){e.ads.includedCues={};for(var o=0;o<t.length;o++){var s=t[o];var a=this.getSupportedAdCue(e,s);if(!this.isSupportedAdCue(e,s)){i["default"].log.warn("Skipping as this is not a supported ad cue.",s);return;}var u=this.getCueId(e,s);var l=s.startTime;if(f(e,u)){i["default"].log("Skipping ad already seen with ID "+u);return;}if(n){n(e,a,u,l);}r(e,a,u,l);d(e,u);}}},{"video.js":332}],336:[function(e,t,r){"use strict";r.__esModule=true;var n=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(e){return typeof e==="undefined"?"undefined":_typeof(e);}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e==="undefined"?"undefined":_typeof(e);};r["default"]=p;var i=e("global/window");var o=c(i);var s=e("global/document");var a=c(s);var u=e("video.js");var l=c(u);function c(e){return e&&e.__esModule?e:{default:e};}var f=function e(t,r){if(r){return encodeURIComponent(t);}return t;};var d=function e(t,r,n){if(t&&t[n]){var i=t[n];var o=Object.keys(i);for(var s=0;s<o.length;s++){var a="{mediainfo."+n+"."+o[s]+"}";r[a]=i[o[s]];}}};function p(e,t,r){if(t===undefined){t=false;}var i={};if(r!==undefined){i=r;}i["{player.id}"]=this.options_["data-player"];i["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"";i["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"";i["{mediainfo.description}"]=this.mediainfo?this.mediainfo.description:"";i["{mediainfo.tags}"]=this.mediainfo?this.mediainfo.tags:"";i["{mediainfo.reference_id}"]=this.mediainfo?this.mediainfo.reference_id:"";i["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"";i["{mediainfo.ad_keys}"]=this.mediainfo?this.mediainfo.ad_keys:"";i["{player.duration}"]=this.duration();i["{timestamp}"]=new Date().getTime();i["{document.referrer}"]=a["default"].referrer;i["{window.location.href}"]=o["default"].location.href;i["{random}"]=Math.floor(Math.random()*1e12);d(this.mediainfo,i,"custom_fields");d(this.mediainfo,i,"customFields");for(var s in i){e=e.split(s).join(f(i[s],t));}e=e.replace(/{pageVariable\.([^}]+)}/g,function(e,r){var i=void 0;var s=o["default"];var a=r.split(".");for(var u=0;u<a.length;u++){if(u===a.length-1){i=s[a[u]];}else{s=s[a[u]];}}var c=typeof i==="undefined"?"undefined":n(i);if(i===null){return"null";}else if(i===undefined){l["default"].log.warn('Page variable "'+r+'" not found');return"";}else if(c!=="string"&&c!=="number"&&c!=="boolean"){l["default"].log.warn('Page variable "'+r+'" is not a supported type');return"";}return f(String(i),t);});return e;}},{"global/document":89,"global/window":90,"video.js":332}],337:[function(e,t,r){"use strict";var n=e("global/window");var i=b(n);var o=e("video.js");var s=b(o);var a=e("./redispatch.js");var u=b(a);var l=e("./snapshot.js");var c=_(l);var f=e("./contentupdate.js");var d=b(f);var p=e("./cancelContentPlay.js");var h=b(p);var v=e("./macros.js");var y=b(v);var m=e("./cueTextTracks.js");var g=_(m);function _(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function b(e){return e&&e.__esModule?e:{default:e};}var w=s["default"].getTech("Html5").Events;var T=function e(t){var r=t.$(".vjs-tech");if(r){r.removeAttribute("poster");}};var j={timeout:5e3,prerollTimeout:100,postrollTimeout:100,debug:false,stitchedAds:false};var k=function e(t){var r=this;var n=s["default"].mergeOptions(j,t);var o=w.concat(["firstplay","loadedalldata","playing"]);r.on(o,u["default"]);i["default"].setTimeout(function(){if(!r.ads._hasThereBeenALoadStartDuringPlayerLife&&r.src()!==""){s["default"].log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds "+"after being initialized, but a source is present. This indicates that "+"videojs-contrib-ads was initialized too late. It must be initialized "+"immediately after video.js in the same tick. As a result, some ads will not "+"play and some media events will be incorrect. For more information, see "+"https://github.com/videojs/videojs-contrib-ads#important-note-about-initialization");}},5e3);r.on("ended",function(){if(!r.hasClass("vjs-has-started")){r.addClass("vjs-has-started");}});r.on(["addurationchange","adcanplay"],function(){if(r.ads.snapshot&&r.currentSrc()===r.ads.snapshot.currentSrc){return;}if(!r.ads.isAdPlaying()){return;}r.play();});r.on("nopreroll",function(){r.ads.nopreroll_=true;});r.on("nopostroll",function(){r.ads.nopostroll_=true;});r.on(["ads-ad-started","playing"],function(){r.removeClass("vjs-ad-loading");});r.on("playing",function(){r.ads._cancelledPlay=false;});r.one("loadstart",function(){r.ads._hasThereBeenALoadStartDuringPlayerLife=true;});r.on("loadeddata",function(){r.ads._hasThereBeenALoadedData=true;});r.on("loadedmetadata",function(){r.ads._hasThereBeenALoadedMetaData=true;});r.ads={state:"content-set",disableNextSnapshotRestore:false,_contentEnding:false,_contentHasEnded:false,_hasThereBeenALoadStartDuringPlayerLife:false,_hasThereBeenALoadedData:false,_hasThereBeenALoadedMetaData:false,_inLinearAdMode:false,adType:null,VERSION:"5.0.3",reset:function e(){r.ads.disableNextSnapshotRestore=false;r.ads._contentEnding=false;r.ads._contentHasEnded=false;r.ads.snapshot=null;r.ads.adType=null;r.ads._hasThereBeenALoadedData=false;r.ads._hasThereBeenALoadedMetaData=false;},startLinearAdMode:function e(){if(r.ads.state==="preroll?"||r.ads.state==="content-playback"||r.ads.state==="postroll?"){r.ads._inLinearAdMode=true;r.trigger("adstart");}},endLinearAdMode:function e(){if(r.ads.state==="ad-playback"){r.ads._inLinearAdMode=false;r.trigger("adend");r.removeClass("vjs-ad-loading");}},skipLinearAdMode:function e(){if(r.ads.state!=="ad-playback"){r.trigger("adskip");}},stitchedAds:function e(t){if(t!==undefined){this._stitchedAds=!!t;}return this._stitchedAds;},videoElementRecycled:function e(){if(r.ads.shouldPlayContentBehindAd(r)){return false;}if(!this.snapshot){throw new Error("You cannot use videoElementRecycled while there is no snapshot.");}var t=r.tech_.src()!==this.snapshot.src;var n=r.currentSrc()!==this.snapshot.currentSrc;return t||n;},isLive:function e(t){if(t.duration()===Infinity){return true;}else if(s["default"].browser.IOS_VERSION==="8"&&t.duration()===0){return true;}return false;},shouldPlayContentBehindAd:function e(t){return!s["default"].browser.IS_IOS&&!s["default"].browser.IS_ANDROID&&t.duration()===Infinity;},isInAdMode:function e(){return r.ads.state==="ads-ready?"||r.ads.state==="preroll?"||r.ads.state==="ad-playback"||r.ads.state==="content-resuming";},isContentResuming:function e(){return r.ads.state==="content-resuming";},isAdPlaying:function e(){return this._inLinearAdMode;}};r.ads.stitchedAds(n.stitchedAds);r.ads.cueTextTracks=g;r.ads.adMacroReplacement=y["default"].bind(r);(0,d["default"])(r);r.on("contentupdate",r.ads.reset);var a={"content-set":{events:{adscanceled:function e(){this.state="content-playback";},adsready:function e(){this.state="ads-ready";},play:function e(){this.state="ads-ready?";(0,h["default"])(r);T(r);},adserror:function e(){this.state="content-playback";},adskip:function e(){this.state="content-playback";}}},"ads-ready":{events:{play:function e(){this.state="preroll?";(0,h["default"])(r);},adskip:function e(){this.state="content-playback";},adserror:function e(){this.state="content-playback";}}},"preroll?":{enter:function e(){if(r.ads.nopreroll_){r.trigger("readyforpreroll");i["default"].setTimeout(function(){r.trigger("nopreroll");},1);}else{r.addClass("vjs-ad-loading");r.ads.adTimeoutTimeout=i["default"].setTimeout(function(){r.trigger("adtimeout");},n.prerollTimeout);if(r.ads._hasThereBeenALoadStartDuringPlayerLife){r.trigger("readyforpreroll");}else{r.one("loadstart",function(){r.trigger("readyforpreroll");});}}},leave:function e(){i["default"].clearTimeout(r.ads.adTimeoutTimeout);},events:{play:function e(){(0,h["default"])(r);},adstart:function e(){this.state="ad-playback";r.ads.adType="preroll";},adskip:function e(){this.state="content-playback";},adtimeout:function e(){this.state="content-playback";},adserror:function e(){this.state="content-playback";},nopreroll:function e(){this.state="content-playback";}}},"ads-ready?":{enter:function e(){r.addClass("vjs-ad-loading");r.ads.adTimeoutTimeout=i["default"].setTimeout(function(){r.trigger("adtimeout");},n.timeout);},leave:function e(){i["default"].clearTimeout(r.ads.adTimeoutTimeout);r.removeClass("vjs-ad-loading");},events:{play:function e(){(0,h["default"])(r);},adscanceled:function e(){this.state="content-playback";},adsready:function e(){this.state="preroll?";},adskip:function e(){this.state="content-playback";},adtimeout:function e(){this.state="content-playback";},adserror:function e(){this.state="content-playback";}}},"ad-playback":{enter:function e(){if(!r.ads.shouldPlayContentBehindAd(r)){this.snapshot=c.getPlayerSnapshot(r);}if(r.ads.shouldPlayContentBehindAd(r)){this.preAdVolume_=r.volume();r.volume(0);}r.addClass("vjs-ad-playing");if(r.hasClass("vjs-live")){r.removeClass("vjs-live");}T(r);if(r.ads.cancelPlayTimeout){i["default"].setTimeout(function(){i["default"].clearTimeout(r.ads.cancelPlayTimeout);r.ads.cancelPlayTimeout=null;},1);}},leave:function e(){r.removeClass("vjs-ad-playing");if(r.ads.isLive(r)){r.addClass("vjs-live");}if(!r.ads.shouldPlayContentBehindAd(r)){c.restorePlayerSnapshot(r,this.snapshot);}if(r.ads.shouldPlayContentBehindAd(r)){r.volume(this.preAdVolume_);}},events:{adend:function e(){this.state="content-resuming";r.ads.adType=null;},adserror:function e(){r.ads.endLinearAdMode();}}},"content-resuming":{enter:function e(){if(this._contentHasEnded){i["default"].clearTimeout(r.ads._fireEndedTimeout);r.ads._fireEndedTimeout=i["default"].setTimeout(function(){r.trigger("ended");},1e3);}},leave:function e(){i["default"].clearTimeout(r.ads._fireEndedTimeout);},events:{contentupdate:function e(){this.state="content-set";},contentresumed:function e(){this.state="content-playback";},playing:function e(){this.state="content-playback";},ended:function e(){this.state="content-playback";}}},"postroll?":{enter:function e(){r.ads._contentEnding=true;this.snapshot=c.getPlayerSnapshot(r);if(r.ads.nopostroll_){i["default"].setTimeout(function(){r.ads.state="content-resuming";r.trigger("ended");},1);}else{r.addClass("vjs-ad-loading");r.ads.adTimeoutTimeout=i["default"].setTimeout(function(){r.trigger("adtimeout");},n.postrollTimeout);}},leave:function e(){i["default"].clearTimeout(r.ads.adTimeoutTimeout);r.removeClass("vjs-ad-loading");},events:{adstart:function e(){this.state="ad-playback";r.ads.adType="postroll";},adskip:function e(){this.state="content-resuming";i["default"].setTimeout(function(){r.trigger("ended");},1);},adtimeout:function e(){this.state="content-resuming";i["default"].setTimeout(function(){r.trigger("ended");},1);},adserror:function e(){this.state="content-resuming";i["default"].setTimeout(function(){r.trigger("ended");},1);},contentupdate:function e(){this.state="ads-ready?";}}},"content-playback":{enter:function e(){if(r.ads.cancelPlayTimeout){i["default"].clearTimeout(r.ads.cancelPlayTimeout);r.ads.cancelPlayTimeout=null;}r.trigger({type:"contentplayback",triggerevent:r.ads.triggerevent});if(r.ads._cancelledPlay){if(r.paused()){r.play();}}},events:{adsready:function e(){r.trigger("readyforpreroll");},adstart:function e(){this.state="ad-playback";if(r.ads.adType!=="preroll"){r.ads.adType="midroll";}},contentupdate:function e(){if(!r.ads.shouldPlayContentBehindAd(r)){(0,h["default"])(r);}if(r.paused()){this.state="content-set";}else{this.state="ads-ready?";}},contentended:function e(){if(this._contentHasEnded){this.state="content-resuming";return;}this._contentEnding=false;this._contentHasEnded=true;this.state="postroll?";}}}};var l=function e(t){var i=r.ads.state;var o=a[i].events;if(o){var u=o[t.type];if(u){u.apply(r.ads);}}if(i!==r.ads.state){var l=i;var c=r.ads.state;r.ads.triggerevent=t.type;if(a[l].leave){a[l].leave.apply(r.ads);}if(a[c].enter){a[c].enter.apply(r.ads);}if(n.debug){s["default"].log("ads",r.ads.triggerevent+" triggered: "+l+" -> "+c);}}};r.on(w.concat(["adtimeout","contentupdate","contentplaying","contentended","contentresumed","adstart","adend","adskip","adsready","adserror","adscanceled","nopreroll"]),l);r.on("dispose",function(){if(r.ads.adTimeoutTimeout){i["default"].clearTimeout(r.ads.adTimeoutTimeout);}if(r.ads._fireEndedTimeout){i["default"].clearTimeout(r.ads._fireEndedTimeout);}if(r.ads.cancelPlayTimeout){i["default"].clearTimeout(r.ads.cancelPlayTimeout);}if(r.ads.tryToResumeTimeout_){r.clearTimeout(r.ads.tryToResumeTimeout_);}});if(!r.paused()){l({type:"play"});}};var E=s["default"].registerPlugin||s["default"].plugin;E("ads",k);},{"./cancelContentPlay.js":333,"./contentupdate.js":334,"./cueTextTracks.js":335,"./macros.js":336,"./redispatch.js":338,"./snapshot.js":339,"global/window":90,"video.js":332}],338:[function(e,t,r){"use strict";r.__esModule=true;r["default"]=l;var n=function e(t,r){r.isImmediatePropagationStopped=function(){return true;};r.cancelBubble=true;r.isPropagationStopped=function(){return true;};};var i=function e(t,r,i){n(t,i);t.trigger({type:r+i.type,state:t.ads.state,originalEvent:i});};var o=function e(t,r){if(t.ads.isInAdMode()){if(t.ads.isContentResuming()){if(t.ads._contentEnding){i(t,"content",r);}}else if(t.ads._cancelledPlay){n(t,r);}else{i(t,"ad",r);}}};var s=function e(t,r){if(t.ads.isInAdMode()){if(t.ads.isContentResuming()){return;}i(t,"ad",r);}else{i(t,"content",r);}};var a=function e(t,r){if(r.type==="loadstart"&&!t.ads._hasThereBeenALoadStartDuringPlayerLife||r.type==="loadeddata"&&!t.ads._hasThereBeenALoadedData||r.type==="loadedmetadata"&&!t.ads._hasThereBeenALoadedMetaData){return;}else if(t.ads.isAdPlaying()){i(t,"ad",r);}else if(t.currentSrc()!==t.ads.contentSrc){return;}else{i(t,"content",r);}};var u=function e(t,r){var n=t.ads._cancelledPlay&&!t.ads.isInAdMode();if(t.ads.isAdPlaying()){i(t,"ad",r);}else if(t.ads.isContentResuming()||n){i(t,"content",r);}};function l(e){if(e.type==="playing"){o(this,e);}else if(e.type==="ended"){s(this,e);}else if(e.type==="loadstart"||e.type==="loadeddata"||e.type==="loadedmetadata"){a(this,e);}else if(e.type==="play"){u(this,e);}else if(this.ads.isInAdMode()){if(this.ads.isContentResuming()){i(this,"content",e);}else{i(this,"ad",e);}}}},{}],339:[function(e,t,r){"use strict";r.__esModule=true;r.getPlayerSnapshot=u;r.restorePlayerSnapshot=l;var n=e("global/window");var i=a(n);var o=e("video.js");var s=a(o);function a(e){return e&&e.__esModule?e:{default:e};}function u(e){var t=void 0;if(s["default"].browser.IS_IOS&&e.ads.isLive(e)){if(e.seekable().length>0){t=e.currentTime()-e.seekable().end(0);}else{t=e.currentTime();}}else{t=e.currentTime();}var r=e.$(".vjs-tech");var n=e.remoteTextTracks?e.remoteTextTracks():[];var i=e.textTracks?e.textTracks():[];var o=[];var a=[];var u={ended:e.ended(),currentSrc:e.currentSrc(),src:e.tech_.src(),currentTime:t,type:e.currentType()};if(r){u.nativePoster=r.poster;u.style=r.getAttribute("style");}for(var l=0;l<n.length;l++){var c=n[l];o.push({track:c,mode:c.mode});c.mode="disabled";}u.suppressedRemoteTracks=o;for(var f=0;f<i.length;f++){var d=i[f];a.push({track:d,mode:d.mode});d.mode="disabled";}u.suppressedTracks=a;return u;}function l(e,t){if(e.ads.disableNextSnapshotRestore===true){e.ads.disableNextSnapshotRestore=false;return;}var r=e.$(".vjs-tech");var n=20;var o=t.suppressedRemoteTracks;var a=t.suppressedTracks;var u=void 0;var l=function e(){for(var t=0;t<o.length;t++){u=o[t];u.track.mode=u.mode;}for(var r=0;r<a.length;r++){u=a[r];u.track.mode=u.mode;}};var c=function r(){var n=void 0;if(s["default"].browser.IS_IOS&&e.ads.isLive(e)){if(t.currentTime<0){if(e.seekable().length>0){n=e.seekable().end(0)+t.currentTime;}else{n=e.currentTime();}e.currentTime(n);}}else if(t.ended){e.currentTime(e.duration());}else{e.currentTime(t.currentTime);}if(!t.ended){e.play();}};var f=function t(){e.off("contentcanplay",t);if(e.ads.tryToResumeTimeout_){e.clearTimeout(e.ads.tryToResumeTimeout_);e.ads.tryToResumeTimeout_=null;}r=e.el().querySelector(".vjs-tech");if(r.readyState>1){return c();}if(r.seekable===undefined){return c();}if(r.seekable.length>0){return c();}if(n--){i["default"].setTimeout(t,50);}else{try{c();}catch(e){s["default"].log.warn("Failed to resume the content after an advertisement",e);}}};if(t.nativePoster){r.poster=t.nativePoster;}if("style"in t){r.setAttribute("style",t.style||"");}if(e.ads.videoElementRecycled()){e.one("contentloadedmetadata",l);e.src({src:t.currentSrc,type:t.type});e.one("contentcanplay",f);e.ads.tryToResumeTimeout_=e.setTimeout(f,2e3);}else if(!e.ended()||!t.ended){l();e.play();}}},{"global/window":90,"video.js":332}],340:[function(e,t,r){(function(n){(function(e){if((typeof r==="undefined"?"undefined":_typeof(r))==="object"&&typeof t!=="undefined"){t.exports=e();}else if(typeof define==="function"&&define.amd){define([],e);}else{var i;if(typeof window!=="undefined"){i=window;}else if(typeof n!=="undefined"){i=n;}else if(typeof self!=="undefined"){i=self;}else{i=this;}i.videojs=e();}})(function(){var t,r,i;return function t(r,n,i){function o(a,u){if(!n[a]){if(!r[a]){var l=typeof e=="function"&&e;if(!u&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c;}var f=n[a]={exports:{}};r[a][0].call(f.exports,function(e){var t=r[a][1][e];return o(t?t:e);},f,f.exports,t,r,n,i);}return n[a].exports;}var s=typeof e=="function"&&e;for(var a=0;a<i.length;a++){o(i[a]);}return o;}({1:[function(e,t,r){(function(r){var n=typeof r!=="undefined"?r:typeof window!=="undefined"?window:{};var i=e("min-document");if(typeof document!=="undefined"){t.exports=document;}else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];if(!o){o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i;}t.exports=o;}}).call(this,typeof n!=="undefined"?n:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"min-document":3}],2:[function(e,t,r){(function(e){if(typeof window!=="undefined"){t.exports=window;}else if(typeof e!=="undefined"){t.exports=e;}else if(typeof self!=="undefined"){t.exports=self;}else{t.exports={};}}).call(this,typeof n!=="undefined"?n:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],3:[function(e,t,r){},{}],4:[function(e,t,r){var n=e("../internal/getNative");var i=n(Date,"now");var o=i||function(){return new Date().getTime();};t.exports=o;},{"../internal/getNative":20}],5:[function(e,t,r){var n=e("../lang/isObject"),i=e("../date/now");var o="Expected a function";var s=Math.max;function a(e,t,r){var a,u,l,c,f,d,p,h=0,v=false,y=true;if(typeof e!="function"){throw new TypeError(o);}t=t<0?0:+t||0;if(r===true){var m=true;y=false;}else if(n(r)){m=!!r.leading;v="maxWait"in r&&s(+r.maxWait||0,t);y="trailing"in r?!!r.trailing:y;}function g(){if(d){clearTimeout(d);}if(u){clearTimeout(u);}h=0;u=d=p=undefined;}function _(t,r){if(r){clearTimeout(r);}u=d=p=undefined;if(t){h=i();l=e.apply(f,a);if(!d&&!u){a=f=undefined;}}}function b(){var e=t-(i()-c);if(e<=0||e>t){_(p,u);}else{d=setTimeout(b,e);}}function w(){_(y,d);}function T(){a=arguments;c=i();f=this;p=y&&(d||!m);if(v===false){var r=m&&!d;}else{if(!u&&!m){h=c;}var n=v-(c-h),o=n<=0||n>v;if(o){if(u){u=clearTimeout(u);}h=c;l=e.apply(f,a);}else if(!u){u=setTimeout(w,n);}}if(o&&d){d=clearTimeout(d);}else if(!d&&t!==v){d=setTimeout(b,t);}if(r){o=true;l=e.apply(f,a);}if(o&&!d&&!u){a=f=undefined;}return l;}T.cancel=g;return T;}t.exports=a;},{"../date/now":4,"../lang/isObject":33}],6:[function(e,t,r){var n="Expected a function";var i=Math.max;function o(e,t){if(typeof e!="function"){throw new TypeError(n);}t=i(t===undefined?e.length-1:+t||0,0);return function(){var r=arguments,n=-1,o=i(r.length-t,0),s=Array(o);while(++n<o){s[n]=r[t+n];}switch(t){case 0:return e.call(this,s);case 1:return e.call(this,r[0],s);case 2:return e.call(this,r[0],r[1],s);}var a=Array(t+1);n=-1;while(++n<t){a[n]=r[n];}a[t]=s;return e.apply(this,a);};}t.exports=o;},{}],7:[function(e,t,r){var n=e("./debounce"),i=e("../lang/isObject");var o="Expected a function";function s(e,t,r){var s=true,a=true;if(typeof e!="function"){throw new TypeError(o);}if(r===false){s=false;}else if(i(r)){s="leading"in r?!!r.leading:s;a="trailing"in r?!!r.trailing:a;}return n(e,t,{leading:s,maxWait:+t,trailing:a});}t.exports=s;},{"../lang/isObject":33,"./debounce":5}],8:[function(e,t,r){function n(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n){t[r]=e[r];}return t;}t.exports=n;},{}],9:[function(e,t,r){function n(e,t){var r=-1,n=e.length;while(++r<n){if(t(e[r],r,e)===false){break;}}return e;}t.exports=n;},{}],10:[function(e,t,r){function n(e,t,r){r||(r={});var n=-1,i=t.length;while(++n<i){var o=t[n];r[o]=e[o];}return r;}t.exports=n;},{}],11:[function(e,t,r){var n=e("./createBaseFor");var i=n();t.exports=i;},{"./createBaseFor":18}],12:[function(e,t,r){var n=e("./baseFor"),i=e("../object/keysIn");function o(e,t){return n(e,t,i);}t.exports=o;},{"../object/keysIn":39,"./baseFor":11}],13:[function(e,t,r){var n=e("./arrayEach"),i=e("./baseMergeDeep"),o=e("../lang/isArray"),s=e("./isArrayLike"),a=e("../lang/isObject"),u=e("./isObjectLike"),l=e("../lang/isTypedArray"),c=e("../object/keys");function f(e,t,r,d,p){if(!a(e)){return e;}var h=s(t)&&(o(t)||l(t)),v=h?undefined:c(t);n(v||t,function(n,o){if(v){o=n;n=t[o];}if(u(n)){d||(d=[]);p||(p=[]);i(e,t,o,f,r,d,p);}else{var s=e[o],a=r?r(s,n,o,e,t):undefined,l=a===undefined;if(l){a=n;}if((a!==undefined||h&&!(o in e))&&(l||(a===a?a!==s:s===s))){e[o]=a;}}});return e;}t.exports=f;},{"../lang/isArray":30,"../lang/isObject":33,"../lang/isTypedArray":36,"../object/keys":38,"./arrayEach":9,"./baseMergeDeep":14,"./isArrayLike":21,"./isObjectLike":26}],14:[function(e,t,r){var n=e("./arrayCopy"),i=e("../lang/isArguments"),o=e("../lang/isArray"),s=e("./isArrayLike"),a=e("../lang/isPlainObject"),u=e("../lang/isTypedArray"),l=e("../lang/toPlainObject");function c(e,t,r,c,f,d,p){var h=d.length,v=t[r];while(h--){if(d[h]==v){e[r]=p[h];return;}}var y=e[r],m=f?f(y,v,r,e,t):undefined,g=m===undefined;if(g){m=v;if(s(v)&&(o(v)||u(v))){m=o(y)?y:s(y)?n(y):[];}else if(a(v)||i(v)){m=i(y)?l(y):a(y)?y:{};}else{g=false;}}d.push(v);p.push(m);if(g){e[r]=c(m,v,f,d,p);}else if(m===m?m!==y:y===y){e[r]=m;}}t.exports=c;},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isPlainObject":34,"../lang/isTypedArray":36,"../lang/toPlainObject":37,"./arrayCopy":8,"./isArrayLike":21}],15:[function(e,t,r){var n=e("./toObject");function i(e){return function(t){return t==null?undefined:n(t)[e];};}t.exports=i;},{"./toObject":28}],16:[function(e,t,r){var n=e("../utility/identity");function i(e,t,r){if(typeof e!="function"){return n;}if(t===undefined){return e;}switch(r){case 1:return function(r){return e.call(t,r);};case 3:return function(r,n,i){return e.call(t,r,n,i);};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o);};case 5:return function(r,n,i,o,s){return e.call(t,r,n,i,o,s);};}return function(){return e.apply(t,arguments);};}t.exports=i;},{"../utility/identity":42}],17:[function(e,t,r){var n=e("./bindCallback"),i=e("./isIterateeCall"),o=e("../function/restParam");function s(e){return o(function(t,r){var o=-1,s=t==null?0:r.length,a=s>2?r[s-2]:undefined,u=s>2?r[2]:undefined,l=s>1?r[s-1]:undefined;if(typeof a=="function"){a=n(a,l,5);s-=2;}else{a=typeof l=="function"?l:undefined;s-=a?1:0;}if(u&&i(r[0],r[1],u)){a=s<3?undefined:a;s=1;}while(++o<s){var c=r[o];if(c){e(t,c,a);}}return t;});}t.exports=s;},{"../function/restParam":6,"./bindCallback":16,"./isIterateeCall":24}],18:[function(e,t,r){var n=e("./toObject");function i(e){return function(t,r,i){var o=n(t),s=i(t),a=s.length,u=e?a:-1;while(e?u--:++u<a){var l=s[u];if(r(o[l],l,o)===false){break;}}return t;};}t.exports=i;},{"./toObject":28}],19:[function(e,t,r){var n=e("./baseProperty");var i=n("length");t.exports=i;},{"./baseProperty":15}],20:[function(e,t,r){var n=e("../lang/isNative");function i(e,t){var r=e==null?undefined:e[t];return n(r)?r:undefined;}t.exports=i;},{"../lang/isNative":32}],21:[function(e,t,r){var n=e("./getLength"),i=e("./isLength");function o(e){return e!=null&&i(n(e));}t.exports=o;},{"./getLength":19,"./isLength":25}],22:[function(e,t,r){var n=function(){try{Object({toString:0}+"");}catch(e){return function(){return false;};}return function(e){return typeof e.toString!="function"&&typeof(e+"")=="string";};}();t.exports=n;},{}],23:[function(e,t,r){var n=/^\d+$/;var i=9007199254740991;function o(e,t){e=typeof e=="number"||n.test(e)?+e:-1;t=t==null?i:t;return e>-1&&e%1==0&&e<t;}t.exports=o;},{}],24:[function(e,t,r){var n=e("./isArrayLike"),i=e("./isIndex"),o=e("../lang/isObject");function s(e,t,r){if(!o(r)){return false;}var s=typeof t==="undefined"?"undefined":_typeof(t);if(s=="number"?n(r)&&i(t,r.length):s=="string"&&t in r){var a=r[t];return e===e?e===a:a!==a;}return false;}t.exports=s;},{"../lang/isObject":33,"./isArrayLike":21,"./isIndex":23}],25:[function(e,t,r){var n=9007199254740991;function i(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=n;}t.exports=i;},{}],26:[function(e,t,r){function n(e){return!!e&&(typeof e==="undefined"?"undefined":_typeof(e))=="object";}t.exports=n;},{}],27:[function(e,t,r){var n=e("../lang/isArguments"),i=e("../lang/isArray"),o=e("./isIndex"),s=e("./isLength"),a=e("../lang/isString"),u=e("../object/keysIn");var l=Object.prototype;var c=l.hasOwnProperty;function f(e){var t=u(e),r=t.length,l=r&&e.length;var f=!!l&&s(l)&&(i(e)||n(e)||a(e));var d=-1,p=[];while(++d<r){var h=t[d];if(f&&o(h,l)||c.call(e,h)){p.push(h);}}return p;}t.exports=f;},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isString":35,"../object/keysIn":39,"./isIndex":23,"./isLength":25}],28:[function(e,t,r){var n=e("../lang/isObject"),i=e("../lang/isString"),o=e("../support");function s(e){if(o.unindexedChars&&i(e)){var t=-1,r=e.length,s=Object(e);while(++t<r){s[t]=e.charAt(t);}return s;}return n(e)?e:Object(e);}t.exports=s;},{"../lang/isObject":33,"../lang/isString":35,"../support":41}],29:[function(e,t,r){var n=e("../internal/isArrayLike"),i=e("../internal/isObjectLike");var o=Object.prototype;var s=o.hasOwnProperty;var a=o.propertyIsEnumerable;function u(e){return i(e)&&n(e)&&s.call(e,"callee")&&!a.call(e,"callee");}t.exports=u;},{"../internal/isArrayLike":21,"../internal/isObjectLike":26}],30:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike");var s="[object Array]";var a=Object.prototype;var u=a.toString;var l=n(Array,"isArray");var c=l||function(e){return o(e)&&i(e.length)&&u.call(e)==s;};t.exports=c;},{"../internal/getNative":20,"../internal/isLength":25,"../internal/isObjectLike":26}],31:[function(e,t,r){var n=e("./isObject");var i="[object Function]";var o=Object.prototype;var s=o.toString;function a(e){return n(e)&&s.call(e)==i;}t.exports=a;},{"./isObject":33}],32:[function(e,t,r){var n=e("./isFunction"),i=e("../internal/isHostObject"),o=e("../internal/isObjectLike");var s=/^\[object .+?Constructor\]$/;var a=Object.prototype;var u=Function.prototype.toString;var l=a.hasOwnProperty;var c=RegExp("^"+u.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(e){if(e==null){return false;}if(n(e)){return c.test(u.call(e));}return o(e)&&(i(e)?c:s).test(e);}t.exports=f;},{"../internal/isHostObject":22,"../internal/isObjectLike":26,"./isFunction":31}],33:[function(e,t,r){function n(e){var t=typeof e==="undefined"?"undefined":_typeof(e);return!!e&&(t=="object"||t=="function");}t.exports=n;},{}],34:[function(e,t,r){var n=e("../internal/baseForIn"),i=e("./isArguments"),o=e("../internal/isHostObject"),s=e("../internal/isObjectLike"),a=e("../support");var u="[object Object]";var l=Object.prototype;var c=l.hasOwnProperty;var f=l.toString;function d(e){var t;if(!(s(e)&&f.call(e)==u&&!o(e)&&!i(e))||!c.call(e,"constructor")&&(t=e.constructor,typeof t=="function"&&!(t instanceof t))){return false;}var r;if(a.ownLast){n(e,function(e,t,n){r=c.call(n,t);return false;});return r!==false;}n(e,function(e,t){r=t;});return r===undefined||c.call(e,r);}t.exports=d;},{"../internal/baseForIn":12,"../internal/isHostObject":22,"../internal/isObjectLike":26,"../support":41,"./isArguments":29}],35:[function(e,t,r){var n=e("../internal/isObjectLike");var i="[object String]";var o=Object.prototype;var s=o.toString;function a(e){return typeof e=="string"||n(e)&&s.call(e)==i;}t.exports=a;},{"../internal/isObjectLike":26}],36:[function(e,t,r){var n=e("../internal/isLength"),i=e("../internal/isObjectLike");var o="[object Arguments]",s="[object Array]",a="[object Boolean]",u="[object Date]",l="[object Error]",c="[object Function]",f="[object Map]",d="[object Number]",p="[object Object]",h="[object RegExp]",v="[object Set]",y="[object String]",m="[object WeakMap]";var g="[object ArrayBuffer]",_="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",T="[object Int16Array]",j="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",x="[object Uint32Array]";var S={};S[_]=S[b]=S[w]=S[T]=S[j]=S[k]=S[E]=S[C]=S[x]=true;S[o]=S[s]=S[g]=S[a]=S[u]=S[l]=S[c]=S[f]=S[d]=S[p]=S[h]=S[v]=S[y]=S[m]=false;var O=Object.prototype;var P=O.toString;function A(e){return i(e)&&n(e.length)&&!!S[P.call(e)];}t.exports=A;},{"../internal/isLength":25,"../internal/isObjectLike":26}],37:[function(e,t,r){var n=e("../internal/baseCopy"),i=e("../object/keysIn");function o(e){return n(e,i(e));}t.exports=o;},{"../internal/baseCopy":10,"../object/keysIn":39}],38:[function(e,t,r){var n=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),s=e("../internal/shimKeys"),a=e("../support");var u=n(Object,"keys");var l=!u?s:function(e){var t=e==null?undefined:e.constructor;if(typeof t=="function"&&t.prototype===e||(typeof e=="function"?a.enumPrototypes:i(e))){return s(e);}return o(e)?u(e):[];};t.exports=l;},{"../internal/getNative":20,"../internal/isArrayLike":21,"../internal/shimKeys":27,"../lang/isObject":33,"../support":41}],39:[function(e,t,r){var n=e("../internal/arrayEach"),i=e("../lang/isArguments"),o=e("../lang/isArray"),s=e("../lang/isFunction"),a=e("../internal/isIndex"),u=e("../internal/isLength"),l=e("../lang/isObject"),c=e("../lang/isString"),f=e("../support");var d="[object Array]",p="[object Boolean]",h="[object Date]",v="[object Error]",y="[object Function]",m="[object Number]",g="[object Object]",_="[object RegExp]",b="[object String]";var w=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var T=Error.prototype,j=Object.prototype,k=String.prototype;var E=j.hasOwnProperty;var C=j.toString;var x={};x[d]=x[h]=x[m]={constructor:true,toLocaleString:true,toString:true,valueOf:true};x[p]=x[b]={constructor:true,toString:true,valueOf:true};x[v]=x[y]=x[_]={constructor:true,toString:true};x[g]={constructor:true};n(w,function(e){for(var t in x){if(E.call(x,t)){var r=x[t];r[e]=E.call(r,e);}}});function S(e){if(e==null){return[];}if(!l(e)){e=Object(e);}var t=e.length;t=t&&u(t)&&(o(e)||i(e)||c(e))&&t||0;var r=e.constructor,n=-1,d=s(r)&&r.prototype||j,p=d===e,h=Array(t),y=t>0,m=f.enumErrorProps&&(e===T||e instanceof Error),_=f.enumPrototypes&&s(e);while(++n<t){h[n]=n+"";}for(var S in e){if(!(_&&S=="prototype")&&!(m&&(S=="message"||S=="name"))&&!(y&&a(S,t))&&!(S=="constructor"&&(p||!E.call(e,S)))){h.push(S);}}if(f.nonEnumShadows&&e!==j){var O=e===k?b:e===T?v:C.call(e),P=x[O]||x[g];if(O==g){d=j;}t=w.length;while(t--){S=w[t];var A=P[S];if(!(p&&A)&&(A?E.call(e,S):e[S]!==d[S])){h.push(S);}}}return h;}t.exports=S;},{"../internal/arrayEach":9,"../internal/isIndex":23,"../internal/isLength":25,"../lang/isArguments":29,"../lang/isArray":30,"../lang/isFunction":31,"../lang/isObject":33,"../lang/isString":35,"../support":41}],40:[function(e,t,r){var n=e("../internal/baseMerge"),i=e("../internal/createAssigner");var o=i(n);t.exports=o;},{"../internal/baseMerge":13,"../internal/createAssigner":17}],41:[function(e,t,r){var n=Array.prototype,i=Error.prototype,o=Object.prototype;var s=o.propertyIsEnumerable,a=n.splice;var u={};(function(e){var t=function t(){this.x=e;},r={0:e,length:e},n=[];t.prototype={valueOf:e,y:e};for(var o in new t()){n.push(o);}u.enumErrorProps=s.call(i,"message")||s.call(i,"name");u.enumPrototypes=s.call(t,"prototype");u.nonEnumShadows=!/valueOf/.test(n);u.ownLast=n[0]!="x";u.spliceObjects=(a.call(r,0,1),!r[0]);u.unindexedChars="x"[0]+Object("x")[0]!="xx";})(1,0);t.exports=u;},{}],42:[function(e,t,r){function n(e){return e;}t.exports=n;},{}],43:[function(e,t,r){"use strict";var n=e("object-keys");t.exports=function e(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false;}if(_typeof(Symbol.iterator)==="symbol"){return true;}var t={};var r=Symbol("test");if(typeof r==="string"){return false;}var i=42;t[r]=i;for(r in t){return false;}if(n(t).length!==0){return false;}if(typeof Object.keys==="function"&&Object.keys(t).length!==0){return false;}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(t).length!==0){return false;}var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r){return false;}if(!Object.prototype.propertyIsEnumerable.call(t,r)){return false;}if(typeof Object.getOwnPropertyDescriptor==="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==true){return false;}}return true;};},{"object-keys":49}],44:[function(e,t,r){"use strict";var n=e("object-keys");var i=e("function-bind");var o=function o(e){return typeof e!=="undefined"&&e!==null;};var s=e("./hasSymbols")();var a=Object;var u=i.call(Function.call,Array.prototype.push);var l=i.call(Function.call,Object.prototype.propertyIsEnumerable);t.exports=function e(t,r){if(!o(t)){throw new TypeError("target must be an object");}var i=a(t);var c,f,d,p,h,v,y;for(c=1;c<arguments.length;++c){f=a(arguments[c]);p=n(f);if(s&&Object.getOwnPropertySymbols){h=Object.getOwnPropertySymbols(f);for(d=0;d<h.length;++d){y=h[d];if(l(f,y)){u(p,y);}}}for(d=0;d<p.length;++d){y=p[d];v=f[y];if(l(f,y)){i[y]=v;}}}return i;};},{"./hasSymbols":43,"function-bind":48,"object-keys":49}],45:[function(e,t,r){"use strict";var n=e("define-properties");var i=e("./implementation");var o=e("./polyfill");var s=e("./shim");n(i,{implementation:i,getPolyfill:o,shim:s});t.exports=i;},{"./implementation":44,"./polyfill":51,"./shim":52,"define-properties":46}],46:[function(e,t,r){"use strict";var n=e("object-keys");var i=e("foreach");var o=typeof Symbol==="function"&&_typeof(Symbol())==="symbol";var s=Object.prototype.toString;var a=function a(e){return typeof e==="function"&&s.call(e)==="[object Function]";};var u=function u(){var e={};try{Object.defineProperty(e,"x",{enumerable:false,value:e});for(var t in e){return false;}return e.x===e;}catch(e){return false;}};var l=Object.defineProperty&&u();var c=function c(e,t,r,n){if(t in e&&(!a(n)||!n())){return;}if(l){Object.defineProperty(e,t,{configurable:true,enumerable:false,value:r,writable:true});}else{e[t]=r;}};var f=function f(e,t){var r=arguments.length>2?arguments[2]:{};var s=n(t);if(o){s=s.concat(Object.getOwnPropertySymbols(t));}i(s,function(n){c(e,n,t[n],r[n]);});};f.supportsDescriptors=!!l;t.exports=f;},{foreach:47,"object-keys":49}],47:[function(e,t,r){var n=Object.prototype.hasOwnProperty;var i=Object.prototype.toString;t.exports=function e(t,r,o){if(i.call(r)!=="[object Function]"){throw new TypeError("iterator must be a function");}var s=t.length;if(s===+s){for(var a=0;a<s;a++){r.call(o,t[a],a,t);}}else{for(var u in t){if(n.call(t,u)){r.call(o,t[u],u,t);}}}};},{}],48:[function(e,t,r){var n="Function.prototype.bind called on incompatible ";var i=Array.prototype.slice;var o=Object.prototype.toString;var s="[object Function]";t.exports=function e(t){var r=this;if(typeof r!=="function"||o.call(r)!==s){throw new TypeError(n+r);}var a=i.call(arguments,1);var u=function u(){if(this instanceof d){var e=r.apply(this,a.concat(i.call(arguments)));if(Object(e)===e){return e;}return this;}else{return r.apply(t,a.concat(i.call(arguments)));}};var l=Math.max(0,r.length-a.length);var c=[];for(var f=0;f<l;f++){c.push("$"+f);}var d=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u);if(r.prototype){var p=function e(){};p.prototype=r.prototype;d.prototype=new p();p.prototype=null;}return d;};},{}],49:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;var i=Object.prototype.toString;var o=Array.prototype.slice;var s=e("./isArguments");var a=!{toString:null}.propertyIsEnumerable("toString");var u=function(){}.propertyIsEnumerable("prototype");var l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var c=function c(e){var t=e.constructor;return t&&t.prototype===e;};var f={$console:true,$frame:true,$frameElement:true,$frames:true,$parent:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var d=function(){if(typeof window==="undefined"){return false;}for(var e in window){try{if(!f["$"+e]&&n.call(window,e)&&window[e]!==null&&_typeof(window[e])==="object"){try{c(window[e]);}catch(e){return true;}}}catch(e){return true;}}return false;}();var p=function p(e){if(typeof window==="undefined"||!d){return c(e);}try{return c(e);}catch(e){return false;}};var h=function e(t){var r=t!==null&&(typeof t==="undefined"?"undefined":_typeof(t))==="object";var o=i.call(t)==="[object Function]";var c=s(t);var f=r&&i.call(t)==="[object String]";var d=[];if(!r&&!o&&!c){throw new TypeError("Object.keys called on a non-object");}var h=u&&o;if(f&&t.length>0&&!n.call(t,0)){for(var v=0;v<t.length;++v){d.push(String(v));}}if(c&&t.length>0){for(var y=0;y<t.length;++y){d.push(String(y));}}else{for(var m in t){if(!(h&&m==="prototype")&&n.call(t,m)){d.push(String(m));}}}if(a){var g=p(t);for(var _=0;_<l.length;++_){if(!(g&&l[_]==="constructor")&&n.call(t,l[_])){d.push(l[_]);}}}return d;};h.shim=function e(){if(Object.keys){var t=function(){return(Object.keys(arguments)||"").length===2;}(1,2);if(!t){var r=Object.keys;Object.keys=function e(t){if(s(t)){return r(o.call(t));}else{return r(t);}};}}else{Object.keys=h;}return Object.keys||h;};t.exports=h;},{"./isArguments":50}],50:[function(e,t,r){"use strict";var n=Object.prototype.toString;t.exports=function e(t){var r=n.call(t);var i=r==="[object Arguments]";if(!i){i=r!=="[object Array]"&&t!==null&&(typeof t==="undefined"?"undefined":_typeof(t))==="object"&&typeof t.length==="number"&&t.length>=0&&n.call(t.callee)==="[object Function]";}return i;};},{}],51:[function(e,t,r){"use strict";var n=e("./implementation");var i=function i(){if(!Object.assign){return false;}var e="abcdefghijklmnopqrst";var t=e.split("");var r={};for(var n=0;n<t.length;++n){r[t[n]]=t[n];}var i=Object.assign({},r);var o="";for(var s in i){o+=s;}return e!==o;};var o=function o(){if(!Object.assign||!Object.preventExtensions){return false;}var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy");}catch(t){return e[1]==="y";}};t.exports=function e(){if(!Object.assign){return n;}if(i()){return n;}if(o()){return n;}return Object.assign;};},{"./implementation":44}],52:[function(e,t,r){"use strict";var n=e("define-properties");var i=e("./polyfill");t.exports=function e(){var t=i();n(Object,{assign:t},{assign:function assign(){return Object.assign!==t;}});return t;};},{"./polyfill":51,"define-properties":46}],53:[function(e,t,r){t.exports=n;function n(e,t){var r;var n=null;try{r=JSON.parse(e,t);}catch(e){n=e;}return[n,r];}},{}],54:[function(e,t,r){function n(e){return e.replace(/\n\r?\s*/g,"");}t.exports=function e(t){var r="",i=0;for(;i<arguments.length;i++){r+=n(t[i])+(arguments[i+1]||"");}return r;};},{}],55:[function(e,t,r){"use strict";var n=e("global/window");var i=e("once");var o=e("is-function");var s=e("parse-headers");var a=e("xtend");t.exports=f;f.XMLHttpRequest=n.XMLHttpRequest||p;f.XDomainRequest="withCredentials"in new f.XMLHttpRequest()?f.XMLHttpRequest:n.XDomainRequest;u(["get","put","post","patch","head","delete"],function(e){f[e==="delete"?"del":e]=function(t,r,n){r=c(t,r,n);r.method=e.toUpperCase();return d(r);};});function u(e,t){for(var r=0;r<e.length;r++){t(e[r]);}}function l(e){for(var t in e){if(e.hasOwnProperty(t))return false;}return true;}function c(e,t,r){var n=e;if(o(t)){r=t;if(typeof e==="string"){n={uri:e};}}else{n=a(t,{uri:e});}n.callback=r;return n;}function f(e,t,r){t=c(e,t,r);return d(t);}function d(e){var t=e.callback;if(typeof t==="undefined"){throw new Error("callback argument missing");}t=i(t);function r(){if(c.readyState===4){u();}}function n(){var e=undefined;if(c.response){e=c.response;}else if(c.responseType==="text"||!c.responseType){e=c.responseText||c.responseXML;}if(_){try{e=JSON.parse(e);}catch(e){}}return e;}var o={body:undefined,headers:{},statusCode:0,method:v,url:h,rawRequest:c};function a(e){clearTimeout(b);if(!(e instanceof Error)){e=new Error(""+(e||"Unknown XMLHttpRequest Error"));}e.statusCode=0;t(e,o);}function u(){if(p)return;var r;clearTimeout(b);if(e.useXDR&&c.status===undefined){r=200;}else{r=c.status===1223?204:c.status;}var i=o;var a=null;if(r!==0){i={body:n(),statusCode:r,method:v,headers:{},url:h,rawRequest:c};if(c.getAllResponseHeaders){i.headers=s(c.getAllResponseHeaders());}}else{a=new Error("Internal XMLHttpRequest Error");}t(a,i,i.body);}var c=e.xhr||null;if(!c){if(e.cors||e.useXDR){c=new f.XDomainRequest();}else{c=new f.XMLHttpRequest();}}var d;var p;var h=c.url=e.uri||e.url;var v=c.method=e.method||"GET";var y=e.body||e.data||null;var m=c.headers=e.headers||{};var g=!!e.sync;var _=false;var b;if("json"in e){_=true;m["accept"]||m["Accept"]||(m["Accept"]="application/json");if(v!=="GET"&&v!=="HEAD"){m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json");y=JSON.stringify(e.json);}}c.onreadystatechange=r;c.onload=u;c.onerror=a;c.onprogress=function(){};c.ontimeout=a;c.open(v,h,!g,e.username,e.password);if(!g){c.withCredentials=!!e.withCredentials;}if(!g&&e.timeout>0){b=setTimeout(function(){p=true;c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";a(e);},e.timeout);}if(c.setRequestHeader){for(d in m){if(m.hasOwnProperty(d)){c.setRequestHeader(d,m[d]);}}}else if(e.headers&&!l(e.headers)){throw new Error("Headers cannot be set on an XDomainRequest object");}if("responseType"in e){c.responseType=e.responseType;}if("beforeSend"in e&&typeof e.beforeSend==="function"){e.beforeSend(c);}c.send(y);return c;}function p(){}},{"global/window":2,"is-function":56,once:57,"parse-headers":60,xtend:61}],56:[function(e,t,r){t.exports=i;var n=Object.prototype.toString;function i(e){var t=n.call(e);return t==="[object Function]"||typeof e==="function"&&t!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt);}},{}],57:[function(e,t,r){t.exports=n;n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function value(){return n(this);},configurable:true});});function n(e){var t=false;return function(){if(t)return;t=true;return e.apply(this,arguments);};}},{}],58:[function(e,t,r){var n=e("is-function");t.exports=s;var i=Object.prototype.toString;var o=Object.prototype.hasOwnProperty;function s(e,t,r){if(!n(t)){throw new TypeError("iterator must be a function");}if(arguments.length<3){r=this;}if(i.call(e)==="[object Array]")a(e,t,r);else if(typeof e==="string")u(e,t,r);else l(e,t,r);}function a(e,t,r){for(var n=0,i=e.length;n<i;n++){if(o.call(e,n)){t.call(r,e[n],n,e);}}}function u(e,t,r){for(var n=0,i=e.length;n<i;n++){t.call(r,e.charAt(n),n,e);}}function l(e,t,r){for(var n in e){if(o.call(e,n)){t.call(r,e[n],n,e);}}}},{"is-function":56}],59:[function(e,t,r){r=t.exports=n;function n(e){return e.replace(/^\s*|\s*$/g,"");}r.left=function(e){return e.replace(/^\s*/,"");};r.right=function(e){return e.replace(/\s*$/,"");};},{}],60:[function(e,t,r){var n=e("trim"),i=e("for-each"),o=function o(e){return Object.prototype.toString.call(e)==="[object Array]";};t.exports=function(e){if(!e)return{};var t={};i(n(e).split("\n"),function(e){var r=e.indexOf(":"),i=n(e.slice(0,r)).toLowerCase(),s=n(e.slice(r+1));if(typeof t[i]==="undefined"){t[i]=s;}else if(o(t[i])){t[i].push(s);}else{t[i]=[t[i],s];}});return t;};},{"for-each":58,trim:59}],61:[function(e,t,r){t.exports=i;var n=Object.prototype.hasOwnProperty;function i(){var e={};for(var t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(n.call(r,i)){e[i]=r[i];}}}return e;}},{}],62:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./button.js");var a=n(s);var u=e("./component.js");var l=n(u);var c=function(e){o(t,e);function t(r,n){i(this,t);e.call(this,r,n);}t.prototype.buildCSSClass=function e(){return"vjs-big-play-button";};t.prototype.handleClick=function e(){this.player_.play();};return t;}(a["default"]);c.prototype.controlText_="Play Video";l["default"].registerComponent("BigPlayButton",c);r["default"]=c;t.exports=r["default"];},{"./button.js":63,"./component.js":65}],63:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("./component");var u=i(a);var l=e("./utils/dom.js");var c=n(l);var f=e("./utils/events.js");var d=n(f);var p=e("./utils/fn.js");var h=n(p);var v=e("global/document");var y=i(v);var m=e("object.assign");var g=i(m);var _=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.emitTapEvents();this.on("tap",this.handleClick);this.on("click",this.handleClick);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);}t.prototype.createEl=function t(){var r=arguments.length<=0||arguments[0]===undefined?"button":arguments[0];var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];n=g["default"]({className:this.buildCSSClass(),tabIndex:0},n);i=g["default"]({role:"button",type:"button","aria-live":"polite"},i);var o=e.prototype.createEl.call(this,r,n,i);this.controlTextEl_=c.createEl("span",{className:"vjs-control-text"});o.appendChild(this.controlTextEl_);this.controlText(this.controlText_);return o;};t.prototype.controlText=function e(t){if(!t)return this.controlText_||"Need Text";this.controlText_=t;this.controlTextEl_.innerHTML=this.localize(this.controlText_);return this;};t.prototype.buildCSSClass=function t(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(){};t.prototype.handleFocus=function e(){d.on(y["default"],"keydown",h.bind(this,this.handleKeyPress));};t.prototype.handleKeyPress=function e(t){if(t.which===32||t.which===13){t.preventDefault();this.handleClick(t);}};t.prototype.handleBlur=function e(){d.off(y["default"],"keydown",h.bind(this,this.handleKeyPress));};return t;}(u["default"]);u["default"].registerComponent("Button",_);r["default"]=_;t.exports=r["default"];},{"./component":65,"./utils/dom.js":126,"./utils/events.js":127,"./utils/fn.js":128,"global/document":1,"object.assign":45}],64:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./button");var a=n(s);var u=e("./component");var l=n(u);var c=function(e){o(t,e);function t(r,n){i(this,t);e.call(this,r,n);this.controlText(n&&n.controlText||this.localize("Close"));}t.prototype.buildCSSClass=function t(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(){this.trigger({type:"close",bubbles:false});};return t;}(a["default"]);l["default"].registerComponent("CloseButton",c);r["default"]=c;t.exports=r["default"];},{"./button":63,"./component":65}],65:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}var s=e("global/window");var a=i(s);var u=e("./utils/dom.js");var l=n(u);var c=e("./utils/fn.js");var f=n(c);var d=e("./utils/guid.js");var p=n(d);var h=e("./utils/events.js");var v=n(h);var y=e("./utils/log.js");var m=i(y);var g=e("./utils/to-title-case.js");var _=i(g);var b=e("object.assign");var w=i(b);var T=e("./utils/merge-options.js");var j=i(T);var k=function(){function e(t,r,n){o(this,e);if(!t&&this.play){this.player_=t=this;}else{this.player_=t;}this.options_=j["default"]({},this.options_);r=this.options_=j["default"](this.options_,r);this.id_=r.id||r.el&&r.el.id;if(!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+p.newGUID();}this.name_=r.name||null;if(r.el){this.el_=r.el;}else if(r.createEl!==false){this.el_=this.createEl();}this.children_=[];this.childIndex_={};this.childNameIndex_={};if(r.initChildren!==false){this.initChildren();}this.ready(n);if(r.reportTouchActivity!==false){this.enableTouchActivity();}}e.prototype.dispose=function e(){this.trigger({type:"dispose",bubbles:false});if(this.children_){for(var t=this.children_.length-1;t>=0;t--){if(this.children_[t].dispose){this.children_[t].dispose();}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.off();if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_);}l.removeElData(this.el_);this.el_=null;};e.prototype.player=function e(){return this.player_;};e.prototype.options=function e(t){m["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0");if(!t){return this.options_;}this.options_=j["default"](this.options_,t);return this.options_;};e.prototype.el=function e(){return this.el_;};e.prototype.createEl=function e(t,r,n){return l.createEl(t,r,n);};e.prototype.localize=function e(t){var r=this.player_.language&&this.player_.language();var n=this.player_.languages&&this.player_.languages();if(!r||!n){return t;}var i=n[r];if(i&&i[t]){return i[t];}var o=r.split("-")[0];var s=n[o];if(s&&s[t]){return s[t];}return t;};e.prototype.contentEl=function e(){return this.contentEl_||this.el_;};e.prototype.id=function e(){return this.id_;};e.prototype.name=function e(){return this.name_;};e.prototype.children=function e(){return this.children_;};e.prototype.getChildById=function e(t){return this.childIndex_[t];};e.prototype.getChild=function e(t){return this.childNameIndex_[t];};e.prototype.addChild=function t(r){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=undefined;var o=undefined;if(typeof r==="string"){o=r;if(!n){n={};}if(n===true){m["default"].warn("Initializing a child component with `true` is deprecated. Children should be defined in an array when possible, but if necessary use an object instead of `true`.");n={};}var s=n.componentClass||_["default"](o);n.name=o;var a=e.getComponent(s);if(!a){throw new Error("Component "+s+" does not exist");}if(typeof a!=="function"){return null;}i=new a(this.player_||this,n);}else{i=r;}this.children_.push(i);if(typeof i.id==="function"){this.childIndex_[i.id()]=i;}o=o||i.name&&i.name();if(o){this.childNameIndex_[o]=i;}if(typeof i.el==="function"&&i.el()){this.contentEl().appendChild(i.el());}return i;};e.prototype.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t);}if(!t||!this.children_){return;}var r=false;for(var n=this.children_.length-1;n>=0;n--){if(this.children_[n]===t){r=true;this.children_.splice(n,1);break;}}if(!r){return;}this.childIndex_[t.id()]=null;this.childNameIndex_[t.name()]=null;var i=t.el();if(i&&i.parentNode===this.contentEl()){this.contentEl().removeChild(t.el());}};e.prototype.initChildren=function t(){var r=this;var n=this.options_.children;if(n){(function(){var t=r.options_;var i=function e(n){var i=n.name;var o=n.opts;if(t[i]!==undefined){o=t[i];}if(o===false){return;}if(o===true){o={};}o.playerOptions=r.options_.playerOptions;var s=r.addChild(i,o);if(s){r[i]=s;}};var o=undefined;var s=e.getComponent("Tech");if(Array.isArray(n)){o=n;}else{o=Object.keys(n);}o.concat(Object.keys(r.options_).filter(function(e){return!o.some(function(t){if(typeof t==="string"){return e===t;}else{return e===t.name;}});})).map(function(e){var t=undefined,i=undefined;if(typeof e==="string"){t=e;i=n[t]||r.options_[t]||{};}else{t=e.name;i=e;}return{name:t,opts:i};}).filter(function(t){var r=e.getComponent(t.opts.componentClass||_["default"](t.name));return r&&!s.isTech(r);}).forEach(i);})();}};e.prototype.buildCSSClass=function e(){return"";};e.prototype.on=function e(t,r,n){var i=this;if(typeof t==="string"||Array.isArray(t)){v.on(this.el_,t,f.bind(this,r));}else{(function(){var e=t;var o=r;var s=f.bind(i,n);var a=function t(){return i.off(e,o,s);};a.guid=s.guid;i.on("dispose",a);var u=function e(){return i.off("dispose",a);};u.guid=s.guid;if(t.nodeName){v.on(e,o,s);v.on(e,"dispose",u);}else if(typeof t.on==="function"){e.on(o,s);e.on("dispose",u);}})();}return this;};e.prototype.off=function e(t,r,n){if(!t||typeof t==="string"||Array.isArray(t)){v.off(this.el_,t,r);}else{var i=t;var o=r;var s=f.bind(this,n);this.off("dispose",s);if(t.nodeName){v.off(i,o,s);v.off(i,"dispose",s);}else{i.off(o,s);i.off("dispose",s);}}return this;};e.prototype.one=function e(t,r,n){var i=this,o=arguments;if(typeof t==="string"||Array.isArray(t)){v.one(this.el_,t,f.bind(this,r));}else{(function(){var e=t;var s=r;var a=f.bind(i,n);var u=function t(){i.off(e,s,t);a.apply(null,o);};u.guid=a.guid;i.on(e,s,u);})();}return this;};e.prototype.trigger=function e(t,r){v.trigger(this.el_,t,r);return this;};e.prototype.ready=function e(t){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(t){if(this.isReady_){if(r){t.call(this);}else{this.setTimeout(t,1);}}else{this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(t);}}return this;};e.prototype.triggerReady=function e(){this.isReady_=true;this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[];if(e&&e.length>0){e.forEach(function(e){e.call(this);},this);}this.trigger("ready");},1);};e.prototype.$=function e(t,r){return l.$(t,r||this.contentEl());};e.prototype.$$=function e(t,r){return l.$$(t,r||this.contentEl());};e.prototype.hasClass=function e(t){return l.hasElClass(this.el_,t);};e.prototype.addClass=function e(t){l.addElClass(this.el_,t);return this;};e.prototype.removeClass=function e(t){l.removeElClass(this.el_,t);return this;};e.prototype.toggleClass=function e(t,r){l.toggleElClass(this.el_,t,r);return this;};e.prototype.show=function e(){this.removeClass("vjs-hidden");return this;};e.prototype.hide=function e(){this.addClass("vjs-hidden");return this;};e.prototype.lockShowing=function e(){this.addClass("vjs-lock-showing");return this;};e.prototype.unlockShowing=function e(){this.removeClass("vjs-lock-showing");return this;};e.prototype.width=function e(t,r){return this.dimension("width",t,r);};e.prototype.height=function e(t,r){return this.dimension("height",t,r);};e.prototype.dimensions=function e(t,r){return this.width(t,true).height(r);};e.prototype.dimension=function e(t,r,n){if(r!==undefined){if(r===null||r!==r){r=0;}if((""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1){this.el_.style[t]=r;}else if(r==="auto"){this.el_.style[t]="";}else{this.el_.style[t]=r+"px";}if(!n){this.trigger("resize");}return this;}if(!this.el_){return 0;}var i=this.el_.style[t];var o=i.indexOf("px");if(o!==-1){return parseInt(i.slice(0,o),10);}return parseInt(this.el_["offset"+_["default"](t)],10);};e.prototype.emitTapEvents=function e(){var t=0;var r=null;var n=10;var i=200;var o=undefined;this.on("touchstart",function(e){if(e.touches.length===1){r=w["default"]({},e.touches[0]);t=new Date().getTime();o=true;}});this.on("touchmove",function(e){if(e.touches.length>1){o=false;}else if(r){var t=e.touches[0].pageX-r.pageX;var i=e.touches[0].pageY-r.pageY;var s=Math.sqrt(t*t+i*i);if(s>n){o=false;}}});var s=function e(){o=false;};this.on("touchleave",s);this.on("touchcancel",s);this.on("touchend",function(e){r=null;if(o===true){var n=new Date().getTime()-t;if(n<i){e.preventDefault();this.trigger("tap");}}});};e.prototype.enableTouchActivity=function e(){if(!this.player()||!this.player().reportUserActivity){return;}var t=f.bind(this.player(),this.player().reportUserActivity);var r=undefined;this.on("touchstart",function(){t();this.clearInterval(r);r=this.setInterval(t,250);});var n=function e(n){t();this.clearInterval(r);};this.on("touchmove",t);this.on("touchend",n);this.on("touchcancel",n);};e.prototype.setTimeout=function e(t,r){t=f.bind(this,t);var n=a["default"].setTimeout(t,r);var i=function e(){this.clearTimeout(n);};i.guid="vjs-timeout-"+n;this.on("dispose",i);return n;};e.prototype.clearTimeout=function e(t){a["default"].clearTimeout(t);var r=function e(){};r.guid="vjs-timeout-"+t;this.off("dispose",r);return t;};e.prototype.setInterval=function e(t,r){t=f.bind(this,t);var n=a["default"].setInterval(t,r);var i=function e(){this.clearInterval(n);};i.guid="vjs-interval-"+n;this.on("dispose",i);return n;};e.prototype.clearInterval=function e(t){a["default"].clearInterval(t);var r=function e(){};r.guid="vjs-interval-"+t;this.off("dispose",r);return t;};e.registerComponent=function t(r,n){if(!e.components_){e.components_={};}e.components_[r]=n;return n;};e.getComponent=function t(r){if(e.components_&&e.components_[r]){return e.components_[r];}if(a["default"]&&a["default"].videojs&&a["default"].videojs[r]){m["default"].warn("The "+r+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)");return a["default"].videojs[r];}};e.extend=function t(r){r=r||{};m["default"].warn("Component.extend({}) has been deprecated, use videojs.extend(Component, {}) instead");var n=r.init||r.init||this.prototype.init||this.prototype.init||function(){};var i=function e(){n.apply(this,arguments);};i.prototype=Object.create(this.prototype);i.prototype.constructor=i;i.extend=e.extend;for(var o in r){if(r.hasOwnProperty(o)){i.prototype[o]=r[o];}}return i;};return e;}();k.registerComponent("Component",k);r["default"]=k;t.exports=r["default"];},{"./utils/dom.js":126,"./utils/events.js":127,"./utils/fn.js":128,"./utils/guid.js":130,"./utils/log.js":131,"./utils/merge-options.js":132,"./utils/to-title-case.js":135,"global/window":2,"object.assign":45}],66:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../component.js");var a=n(s);var u=e("./play-toggle.js");var l=n(u);var c=e("./time-controls/current-time-display.js");var f=n(c);var d=e("./time-controls/duration-display.js");var p=n(d);var h=e("./time-controls/time-divider.js");var v=n(h);var y=e("./time-controls/remaining-time-display.js");var m=n(y);var g=e("./live-display.js");var _=n(g);var b=e("./progress-control/progress-control.js");var w=n(b);var T=e("./fullscreen-toggle.js");var j=n(T);var k=e("./volume-control/volume-control.js");var E=n(k);var C=e("./volume-menu-button.js");var x=n(C);var S=e("./mute-toggle.js");var O=n(S);var P=e("./text-track-controls/chapters-button.js");var A=n(P);var M=e("./text-track-controls/subtitles-button.js");var I=n(M);var L=e("./text-track-controls/captions-button.js");var R=n(L);var B=e("./playback-rate-menu/playback-rate-menu-button.js");var D=n(B);var N=e("./spacer-controls/custom-control-spacer.js");var F=n(N);var U=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar"});};return t;}(a["default"]);U.prototype.options_={loadEvent:"play",children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","subtitlesButton","captionsButton","fullscreenToggle"]};a["default"].registerComponent("ControlBar",U);r["default"]=U;t.exports=r["default"];},{"../component.js":65,"./fullscreen-toggle.js":67,"./live-display.js":68,"./mute-toggle.js":69,"./play-toggle.js":70,"./playback-rate-menu/playback-rate-menu-button.js":71,"./progress-control/progress-control.js":76,"./spacer-controls/custom-control-spacer.js":78,"./text-track-controls/captions-button.js":81,"./text-track-controls/chapters-button.js":82,"./text-track-controls/subtitles-button.js":85,"./time-controls/current-time-display.js":88,"./time-controls/duration-display.js":89,"./time-controls/remaining-time-display.js":90,"./time-controls/time-divider.js":91,"./volume-control/volume-control.js":93,"./volume-menu-button.js":95}],67:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../button.js");var a=n(s);var u=e("../component.js");var l=n(u);var c=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.buildCSSClass=function t(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();this.controlText("Non-Fullscreen");}else{this.player_.exitFullscreen();this.controlText("Fullscreen");}};return t;}(a["default"]);c.prototype.controlText_="Fullscreen";l["default"].registerComponent("FullscreenToggle",c);r["default"]=c;t.exports=r["default"];},{"../button.js":63,"../component.js":65}],68:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../component");var u=i(a);var l=e("../utils/dom.js");var c=n(l);var f=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.updateShowing();this.on(this.player(),"durationchange",this.updateShowing);}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=c.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateShowing=function e(){if(this.player().duration()===Infinity){this.show();}else{this.hide();}};return t;}(u["default"]);u["default"].registerComponent("LiveDisplay",f);r["default"]=f;t.exports=r["default"];},{"../component":65,"../utils/dom.js":126}],69:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../button");var u=i(a);var l=e("../component");var c=i(l);var f=e("../utils/dom.js");var d=n(f);var p=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"volumechange",this.update);if(r.tech_&&r.tech_["featuresVolumeControl"]===false){this.addClass("vjs-hidden");}this.on(r,"loadstart",function(){this.update();if(r.tech_["featuresVolumeControl"]===false){this.addClass("vjs-hidden");}else{this.removeClass("vjs-hidden");}});}t.prototype.buildCSSClass=function t(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(){this.player_.muted(this.player_.muted()?false:true);};t.prototype.update=function e(){var t=this.player_.volume(),r=3;if(t===0||this.player_.muted()){r=0;}else if(t<.33){r=1;}else if(t<.67){r=2;}var n=this.player_.muted()?"Unmute":"Mute";var i=this.localize(n);if(this.controlText()!==i){this.controlText(i);}for(var o=0;o<4;o++){d.removeElClass(this.el_,"vjs-vol-"+o);}d.addElClass(this.el_,"vjs-vol-"+r);};return t;}(u["default"]);p.prototype.controlText_="Mute";c["default"].registerComponent("MuteToggle",p);r["default"]=p;t.exports=r["default"];},{"../button":63,"../component":65,"../utils/dom.js":126}],70:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../button.js");var a=n(s);var u=e("../component.js");var l=n(u);var c=function(e){o(t,e);function t(r,n){i(this,t);e.call(this,r,n);this.on(r,"play",this.handlePlay);this.on(r,"pause",this.handlePause);}t.prototype.buildCSSClass=function t(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this);};t.prototype.handleClick=function e(){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};t.prototype.handlePlay=function e(){this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause");};t.prototype.handlePause=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play");};return t;}(a["default"]);c.prototype.controlText_="Play";l["default"].registerComponent("PlayToggle",c);r["default"]=c;t.exports=r["default"];},{"../button.js":63,"../component.js":65}],71:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../menu/menu-button.js");var u=i(a);var l=e("../../menu/menu.js");var c=i(l);var f=e("./playback-rate-menu-item.js");var d=i(f);var p=e("../../component.js");var h=i(p);var v=e("../../utils/dom.js");var y=n(v);var m=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.updateVisibility();this.updateLabel();this.on(r,"loadstart",this.updateVisibility);this.on(r,"ratechange",this.updateLabel);}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this);this.labelEl_=y.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1});r.appendChild(this.labelEl_);return r;};t.prototype.buildCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this);};t.prototype.createMenu=function e(){var t=new c["default"](this.player());var r=this.playbackRates();if(r){for(var n=r.length-1;n>=0;n--){t.addChild(new d["default"](this.player(),{rate:r[n]+"x"}));}}return t;};t.prototype.updateARIAAttributes=function e(){this.el().setAttribute("aria-valuenow",this.player().playbackRate());};t.prototype.handleClick=function e(){var t=this.player().playbackRate();var r=this.playbackRates();var n=r[0];for(var i=0;i<r.length;i++){if(r[i]>t){n=r[i];break;}}this.player().playbackRate(n);};t.prototype.playbackRates=function e(){return this.options_["playbackRates"]||this.options_.playerOptions&&this.options_.playerOptions["playbackRates"];};t.prototype.playbackRateSupported=function e(){return this.player().tech_&&this.player().tech_["featuresPlaybackRate"]&&this.playbackRates()&&this.playbackRates().length>0;};t.prototype.updateVisibility=function e(){if(this.playbackRateSupported()){this.removeClass("vjs-hidden");}else{this.addClass("vjs-hidden");}};t.prototype.updateLabel=function e(){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x";}};return t;}(u["default"]);m.prototype.controlText_="Playback Rate";h["default"].registerComponent("PlaybackRateMenuButton",m);r["default"]=m;t.exports=r["default"];},{"../../component.js":65,"../../menu/menu-button.js":102,"../../menu/menu.js":104,"../../utils/dom.js":126,"./playback-rate-menu-item.js":72}],72:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../../menu/menu-item.js");var a=n(s);var u=e("../../component.js");var l=n(u);var c=function(e){o(t,e);function t(r,n){i(this,t);var o=n["rate"];var s=parseFloat(o,10);n["label"]=o;n["selected"]=s===1;e.call(this,r,n);this.label=o;this.rate=s;this.on(r,"ratechange",this.update);}t.prototype.handleClick=function t(){e.prototype.handleClick.call(this);this.player().playbackRate(this.rate);};t.prototype.update=function e(){this.selected(this.player().playbackRate()===this.rate);};return t;}(a["default"]);c.prototype.contentElType="button";l["default"].registerComponent("PlaybackRateMenuItem",c);r["default"]=c;t.exports=r["default"];},{"../../component.js":65,"../../menu/menu-item.js":103}],73:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../component.js");var u=i(a);var l=e("../../utils/dom.js");var c=n(l);var f=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"progress",this.update);}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"});};t.prototype.update=function e(){var t=this.player_.buffered();var r=this.player_.duration();var n=this.player_.bufferedEnd();var i=this.el_.children;var o=function e(t,r){var n=t/r||0;return(n>=1?1:n)*100+"%";};this.el_.style.width=o(n,r);for(var s=0;s<t.length;s++){var a=t.start(s);var u=t.end(s);var l=i[s];if(!l){l=this.el_.appendChild(c.createEl());}l.style.left=o(a,n);l.style.width=o(u-a,n);}for(var s=i.length;s>t.length;s--){this.el_.removeChild(i[s-1]);}};return t;}(u["default"]);u["default"].registerComponent("LoadProgressBar",f);r["default"]=f;t.exports=r["default"];},{"../../component.js":65,"../../utils/dom.js":126}],74:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../component.js");var u=i(a);var l=e("../../utils/dom.js");var c=n(l);var f=e("../../utils/fn.js");var d=n(f);var p=e("../../utils/format-time.js");var h=i(p);var v=e("lodash-compat/function/throttle");var y=i(v);var m=function(e){s(t,e);function t(r,n){var i=this;o(this,t);e.call(this,r,n);this.update(0,0);r.on("ready",function(){i.on(r.controlBar.progressControl.el(),"mousemove",y["default"](d.bind(i,i.handleMouseMove),25));});}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"});};t.prototype.handleMouseMove=function e(t){var r=this.player_.duration();var n=this.calculateDistance(t)*r;var i=t.pageX-c.findElPosition(this.el().parentNode).left;this.update(n,i);};t.prototype.update=function e(t,r){var n=h["default"](t,this.player_.duration());this.el().style.left=r+"px";this.el().setAttribute("data-current-time",n);};t.prototype.calculateDistance=function e(t){return c.getPointerPosition(this.el().parentNode,t).x;};return t;}(u["default"]);u["default"].registerComponent("MouseTimeDisplay",m);r["default"]=m;t.exports=r["default"];},{"../../component.js":65,"../../utils/dom.js":126,"../../utils/fn.js":128,"../../utils/format-time.js":129,"lodash-compat/function/throttle":7}],75:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../component.js");var u=i(a);var l=e("../../utils/fn.js");var c=n(l);var f=e("../../utils/format-time.js");var d=i(f);var p=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.updateDataAttr();this.on(r,"timeupdate",this.updateDataAttr);r.ready(c.bind(this,this.updateDataAttr));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});};t.prototype.updateDataAttr=function e(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",d["default"](t,this.player_.duration()));};return t;}(u["default"]);u["default"].registerComponent("PlayProgressBar",p);r["default"]=p;t.exports=r["default"];},{"../../component.js":65,"../../utils/fn.js":128,"../../utils/format-time.js":129}],76:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../../component.js");var a=n(s);var u=e("./seek-bar.js");var l=n(u);var c=e("./mouse-time-display.js");var f=n(c);var d=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"});};return t;}(a["default"]);d.prototype.options_={children:["seekBar"]};a["default"].registerComponent("ProgressControl",d);r["default"]=d;t.exports=r["default"];},{"../../component.js":65,"./mouse-time-display.js":74,"./seek-bar.js":77}],77:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../slider/slider.js");var u=i(a);var l=e("../../component.js");var c=i(l);var f=e("./load-progress-bar.js");var d=i(f);var p=e("./play-progress-bar.js");var h=i(p);var v=e("../../utils/fn.js");var y=n(v);var m=e("../../utils/format-time.js");var g=i(m);var _=e("object.assign");var b=i(_);var w=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"timeupdate",this.updateARIAAttributes);r.ready(y.bind(this,this.updateARIAAttributes));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"video progress bar"});};t.prototype.updateARIAAttributes=function e(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",(this.getPercent()*100).toFixed(2));this.el_.setAttribute("aria-valuetext",g["default"](t,this.player_.duration()));};t.prototype.getPercent=function e(){var t=this.player_.currentTime()/this.player_.duration();return t>=1?1:t;};t.prototype.handleMouseDown=function t(r){e.prototype.handleMouseDown.call(this,r);this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();};t.prototype.handleMouseMove=function e(t){var r=this.calculateDistance(t)*this.player_.duration();if(r===this.player_.duration()){r=r-.1;}this.player_.currentTime(r);};t.prototype.handleMouseUp=function t(r){e.prototype.handleMouseUp.call(this,r);this.player_.scrubbing(false);if(this.videoWasPlaying){this.player_.play();}};t.prototype.stepForward=function e(){this.player_.currentTime(this.player_.currentTime()+5);};t.prototype.stepBack=function e(){this.player_.currentTime(this.player_.currentTime()-5);};return t;}(u["default"]);w.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"};w.prototype.playerEvent="timeupdate";c["default"].registerComponent("SeekBar",w);r["default"]=w;t.exports=r["default"];},{"../../component.js":65,"../../slider/slider.js":110,"../../utils/fn.js":128,"../../utils/format-time.js":129,"./load-progress-bar.js":73,"./play-progress-bar.js":75,"object.assign":45}],78:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./spacer.js");var a=n(s);var u=e("../../component.js");var l=n(u);var c=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.buildCSSClass=function t(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this);};t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,{className:this.buildCSSClass()});r.innerHTML="&nbsp;";return r;};return t;}(a["default"]);l["default"].registerComponent("CustomControlSpacer",c);r["default"]=c;t.exports=r["default"];},{"../../component.js":65,"./spacer.js":79}],79:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../../component.js");var a=n(s);var u=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.buildCSSClass=function t(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this);};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()});};return t;}(a["default"]);a["default"].registerComponent("Spacer",u);r["default"]=u;t.exports=r["default"];},{"../../component.js":65}],80:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./text-track-menu-item.js");var a=n(s);var u=e("../../component.js");var l=n(u);var c=function(e){o(t,e);function t(r,n){i(this,t);n["track"]={kind:n["kind"],player:r,label:n["kind"]+" settings",default:false,mode:"disabled"};e.call(this,r,n);this.addClass("vjs-texttrack-settings");}t.prototype.handleClick=function e(){this.player().getChild("textTrackSettings").show();};return t;}(a["default"]);l["default"].registerComponent("CaptionSettingsMenuItem",c);r["default"]=c;t.exports=r["default"];},{"../../component.js":65,"./text-track-menu-item.js":87}],81:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./text-track-button.js");var a=n(s);var u=e("../../component.js");var l=n(u);var c=e("./caption-settings-menu-item.js");var f=n(c);var d=function(e){o(t,e);function t(r,n,o){i(this,t);e.call(this,r,n,o);this.el_.setAttribute("aria-label","Captions Menu");}t.prototype.buildCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this);};t.prototype.update=function t(){var r=2;e.prototype.update.call(this);if(this.player().tech_&&this.player().tech_["featuresNativeTextTracks"]){r=1;}if(this.items&&this.items.length>r){this.show();}else{this.hide();}};t.prototype.createItems=function t(){var r=[];if(!(this.player().tech_&&this.player().tech_["featuresNativeTextTracks"])){r.push(new f["default"](this.player_,{kind:this.kind_}));}return e.prototype.createItems.call(this,r);};return t;}(a["default"]);d.prototype.kind_="captions";d.prototype.controlText_="Captions";l["default"].registerComponent("CaptionsButton",d);r["default"]=d;t.exports=r["default"];},{"../../component.js":65,"./caption-settings-menu-item.js":80,"./text-track-button.js":86}],82:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("./text-track-button.js");var u=i(a);var l=e("../../component.js");var c=i(l);var f=e("./text-track-menu-item.js");var d=i(f);var p=e("./chapters-track-menu-item.js");var h=i(p);var v=e("../../menu/menu.js");var y=i(v);var m=e("../../utils/dom.js");var g=n(m);var _=e("../../utils/fn.js");var b=n(_);var w=e("../../utils/to-title-case.js");var T=i(w);var j=e("global/window");var k=i(j);var E=function(e){s(t,e);function t(r,n,i){o(this,t);e.call(this,r,n,i);this.el_.setAttribute("aria-label","Chapters Menu");}t.prototype.buildCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this);};t.prototype.createItems=function e(){var t=[];var r=this.player_.textTracks();if(!r){return t;}for(var n=0;n<r.length;n++){var i=r[n];if(i["kind"]===this.kind_){t.push(new d["default"](this.player_,{track:i}));}}return t;};t.prototype.createMenu=function e(){var t=this.player_.textTracks()||[];var r=undefined;var n=this.items=[];for(var i=0,o=t.length;i<o;i++){var s=t[i];if(s["kind"]===this.kind_){if(!s.cues){s["mode"]="hidden";k["default"].setTimeout(b.bind(this,function(){this.createMenu();}),100);}else{r=s;break;}}}var a=this.menu;if(a===undefined){a=new y["default"](this.player_);a.contentEl().appendChild(g.createEl("li",{className:"vjs-menu-title",innerHTML:T["default"](this.kind_),tabIndex:-1}));}if(r){var u=r["cues"],l=undefined;for(var i=0,o=u.length;i<o;i++){l=u[i];var c=new h["default"](this.player_,{track:r,cue:l});n.push(c);a.addChild(c);}this.addChild(a);}if(this.items.length>0){this.show();}return a;};return t;}(u["default"]);E.prototype.kind_="chapters";E.prototype.controlText_="Chapters";c["default"].registerComponent("ChaptersButton",E);r["default"]=E;t.exports=r["default"];},{"../../component.js":65,"../../menu/menu.js":104,"../../utils/dom.js":126,"../../utils/fn.js":128,"../../utils/to-title-case.js":135,"./chapters-track-menu-item.js":83,"./text-track-button.js":86,"./text-track-menu-item.js":87,"global/window":2}],83:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../menu/menu-item.js");var u=i(a);var l=e("../../component.js");var c=i(l);var f=e("../../utils/fn.js");var d=n(f);var p=function(e){s(t,e);function t(r,n){o(this,t);var i=n["track"];var s=n["cue"];var a=r.currentTime();n["label"]=s.text;n["selected"]=s["startTime"]<=a&&a<s["endTime"];e.call(this,r,n);this.track=i;this.cue=s;i.addEventListener("cuechange",d.bind(this,this.update));}t.prototype.handleClick=function t(){e.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime);};t.prototype.update=function e(){var t=this.cue;var r=this.player_.currentTime();this.selected(t["startTime"]<=r&&r<t["endTime"]);};return t;}(u["default"]);c["default"].registerComponent("ChaptersTrackMenuItem",p);r["default"]=p;t.exports=r["default"];},{"../../component.js":65,"../../menu/menu-item.js":103,"../../utils/fn.js":128}],84:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./text-track-menu-item.js");var a=n(s);var u=e("../../component.js");var l=n(u);var c=function(e){o(t,e);function t(r,n){i(this,t);n["track"]={kind:n["kind"],player:r,label:n["kind"]+" off",default:false,mode:"disabled"};e.call(this,r,n);this.selected(true);}t.prototype.handleTracksChange=function e(t){var r=this.player().textTracks();var n=true;for(var i=0,o=r.length;i<o;i++){var s=r[i];if(s["kind"]===this.track["kind"]&&s["mode"]==="showing"){n=false;break;}}this.selected(n);};return t;}(a["default"]);l["default"].registerComponent("OffTextTrackMenuItem",c);r["default"]=c;t.exports=r["default"];},{"../../component.js":65,"./text-track-menu-item.js":87}],85:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./text-track-button.js");var a=n(s);var u=e("../../component.js");var l=n(u);var c=function(e){o(t,e);function t(r,n,o){i(this,t);e.call(this,r,n,o);this.el_.setAttribute("aria-label","Subtitles Menu");}t.prototype.buildCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this);};return t;}(a["default"]);c.prototype.kind_="subtitles";c.prototype.controlText_="Subtitles";l["default"].registerComponent("SubtitlesButton",c);r["default"]=c;t.exports=r["default"];},{"../../component.js":65,"./text-track-button.js":86}],86:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../menu/menu-button.js");var u=i(a);var l=e("../../component.js");var c=i(l);var f=e("../../utils/fn.js");var d=n(f);var p=e("./text-track-menu-item.js");var h=i(p);var v=e("./off-text-track-menu-item.js");var y=i(v);var m=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);var i=this.player_.textTracks();if(this.items.length<=1){this.hide();}if(!i){return;}var s=d.bind(this,this.update);i.addEventListener("removetrack",s);i.addEventListener("addtrack",s);this.player_.on("dispose",function(){i.removeEventListener("removetrack",s);i.removeEventListener("addtrack",s);});}t.prototype.createItems=function e(){var t=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];t.push(new y["default"](this.player_,{kind:this.kind_}));var r=this.player_.textTracks();if(!r){return t;}for(var n=0;n<r.length;n++){var i=r[n];if(i["kind"]===this.kind_){t.push(new h["default"](this.player_,{track:i}));}}return t;};return t;}(u["default"]);c["default"].registerComponent("TextTrackButton",m);r["default"]=m;t.exports=r["default"];},{"../../component.js":65,"../../menu/menu-button.js":102,"../../utils/fn.js":128,"./off-text-track-menu-item.js":84,"./text-track-menu-item.js":87}],87:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../menu/menu-item.js");var u=i(a);var l=e("../../component.js");var c=i(l);var f=e("../../utils/fn.js");var d=n(f);var p=e("global/window");var h=i(p);var v=e("global/document");var y=i(v);var m=function(e){s(t,e);function t(r,n){var i=this;o(this,t);var s=n["track"];var a=r.textTracks();n["label"]=s["label"]||s["language"]||"Unknown";n["selected"]=s["default"]||s["mode"]==="showing";e.call(this,r,n);this.track=s;if(a){(function(){var e=d.bind(i,i.handleTracksChange);a.addEventListener("change",e);i.on("dispose",function(){a.removeEventListener("change",e);});})();}if(a&&a.onchange===undefined){(function(){var e=undefined;i.on(["tap","click"],function(){if(_typeof(h["default"].Event)!=="object"){try{e=new h["default"].Event("change");}catch(e){}}if(!e){e=y["default"].createEvent("Event");e.initEvent("change",true,true);}a.dispatchEvent(e);});})();}}t.prototype.handleClick=function t(r){var n=this.track["kind"];var i=this.player_.textTracks();e.prototype.handleClick.call(this,r);if(!i)return;for(var o=0;o<i.length;o++){var s=i[o];if(s["kind"]!==n){continue;}if(s===this.track){s["mode"]="showing";}else{s["mode"]="disabled";}}};t.prototype.handleTracksChange=function e(t){this.selected(this.track["mode"]==="showing");};return t;}(u["default"]);c["default"].registerComponent("TextTrackMenuItem",m);r["default"]=m;t.exports=r["default"];},{"../../component.js":65,"../../menu/menu-item.js":103,"../../utils/fn.js":128,"global/document":1,"global/window":2}],88:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../component.js");var u=i(a);var l=e("../../utils/dom.js");var c=n(l);var f=e("../../utils/format-time.js");var d=i(f);var p=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"timeupdate",this.updateContent);}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});this.contentEl_=c.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>'+"0:00"},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateContent=function e(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();var r=this.localize("Current Time");var n=d["default"](t,this.player_.duration());this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span> "+n;};return t;}(u["default"]);u["default"].registerComponent("CurrentTimeDisplay",p);r["default"]=p;t.exports=r["default"];},{"../../component.js":65,"../../utils/dom.js":126,"../../utils/format-time.js":129}],89:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../component.js");var u=i(a);var l=e("../../utils/dom.js");var c=n(l);var f=e("../../utils/format-time.js");var d=i(f);var p=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"timeupdate",this.updateContent);this.on(r,"loadedmetadata",this.updateContent);}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});this.contentEl_=c.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateContent=function e(){var t=this.player_.duration();if(t){var r=this.localize("Duration Time");var n=d["default"](t);this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span> "+n;}};return t;}(u["default"]);u["default"].registerComponent("DurationDisplay",p);r["default"]=p;t.exports=r["default"];},{"../../component.js":65,"../../utils/dom.js":126,"../../utils/format-time.js":129}],90:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../component.js");var u=i(a);var l=e("../../utils/dom.js");var c=n(l);var f=e("../../utils/format-time.js");var d=i(f);var p=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"timeupdate",this.updateContent);}t.prototype.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});this.contentEl_=c.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"});r.appendChild(this.contentEl_);return r;};t.prototype.updateContent=function e(){if(this.player_.duration()){var t=this.localize("Remaining Time");var r=d["default"](this.player_.remainingTime());this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> -"+r;}};return t;}(u["default"]);u["default"].registerComponent("RemainingTimeDisplay",p);r["default"]=p;t.exports=r["default"];},{"../../component.js":65,"../../utils/dom.js":126,"../../utils/format-time.js":129}],91:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../../component.js");var a=n(s);var u=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"});};return t;}(a["default"]);a["default"].registerComponent("TimeDivider",u);r["default"]=u;t.exports=r["default"];},{"../../component.js":65}],92:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../../slider/slider.js");var u=i(a);var l=e("../../component.js");var c=i(l);var f=e("../../utils/fn.js");var d=n(f);var p=e("./volume-level.js");var h=i(p);var v=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"volumechange",this.updateARIAAttributes);r.ready(d.bind(this,this.updateARIAAttributes));}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"});};t.prototype.handleMouseMove=function e(t){if(this.player_.muted()){this.player_.muted(false);}this.player_.volume(this.calculateDistance(t));};t.prototype.getPercent=function e(){if(this.player_.muted()){return 0;}else{return this.player_.volume();}};t.prototype.stepForward=function e(){this.player_.volume(this.player_.volume()+.1);};t.prototype.stepBack=function e(){this.player_.volume(this.player_.volume()-.1);};t.prototype.updateARIAAttributes=function e(){var t=(this.player_.volume()*100).toFixed(2);this.el_.setAttribute("aria-valuenow",t);this.el_.setAttribute("aria-valuetext",t+"%");};return t;}(u["default"]);v.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};v.prototype.playerEvent="volumechange";c["default"].registerComponent("VolumeBar",v);r["default"]=v;t.exports=r["default"];},{"../../component.js":65,"../../slider/slider.js":110,"../../utils/fn.js":128,"./volume-level.js":94}],93:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../../component.js");var a=n(s);var u=e("./volume-bar.js");var l=n(u);var c=function(e){o(t,e);function t(r,n){i(this,t);e.call(this,r,n);if(r.tech_&&r.tech_["featuresVolumeControl"]===false){this.addClass("vjs-hidden");}this.on(r,"loadstart",function(){if(r.tech_["featuresVolumeControl"]===false){this.addClass("vjs-hidden");}else{this.removeClass("vjs-hidden");}});}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"});};return t;}(a["default"]);c.prototype.options_={children:["volumeBar"]};a["default"].registerComponent("VolumeControl",c);r["default"]=c;t.exports=r["default"];},{"../../component.js":65,"./volume-bar.js":92}],94:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../../component.js");var a=n(s);var u=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'});};return t;}(a["default"]);a["default"].registerComponent("VolumeLevel",u);r["default"]=u;t.exports=r["default"];},{"../../component.js":65}],95:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../button.js");var a=n(s);var u=e("../component.js");var l=n(u);var c=e("../menu/menu.js");var f=n(c);var d=e("../menu/menu-button.js");var p=n(d);var h=e("./mute-toggle.js");var v=n(h);var y=e("./volume-control/volume-bar.js");var m=n(y);var g=function(e){o(t,e);function t(r){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];i(this,t);if(n.inline===undefined){n.inline=true;}if(n.vertical===undefined){if(n.inline){n.vertical=false;}else{n.vertical=true;}}n.volumeBar=n.volumeBar||{};n.volumeBar.vertical=!!n.vertical;e.call(this,r,n);this.on(r,"volumechange",this.volumeUpdate);this.on(r,"loadstart",this.volumeUpdate);function o(){if(r.tech_&&r.tech_["featuresVolumeControl"]===false){this.addClass("vjs-hidden");}else{this.removeClass("vjs-hidden");}}o.call(this);this.on(r,"loadstart",o);this.on(this.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active");});this.on(this.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active");});}t.prototype.buildCSSClass=function t(){var r="";if(!!this.options_.vertical){r="vjs-volume-menu-button-vertical";}else{r="vjs-volume-menu-button-horizontal";}return"vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+r;};t.prototype.createMenu=function e(){var t=new f["default"](this.player_,{contentElType:"div"});var r=new m["default"](this.player_,this.options_.volumeBar);t.addChild(r);this.volumeBar=r;return t;};t.prototype.handleClick=function t(){v["default"].prototype.handleClick.call(this);e.prototype.handleClick.call(this);};return t;}(p["default"]);g.prototype.volumeUpdate=v["default"].prototype.update;g.prototype.controlText_="Mute";l["default"].registerComponent("VolumeMenuButton",g);r["default"]=g;t.exports=r["default"];},{"../button.js":63,"../component.js":65,"../menu/menu-button.js":102,"../menu/menu.js":104,"./mute-toggle.js":69,"./volume-control/volume-bar.js":92}],96:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("./component");var u=i(a);var l=e("./modal-dialog");var c=i(l);var f=e("./utils/dom");var d=n(f);var p=e("./utils/merge-options");var h=i(p);var v=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.on(r,"error",this.open);}t.prototype.buildCSSClass=function t(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this);};t.prototype.content=function e(){var t=this.player().error();return t?this.localize(t.message):"";};return t;}(c["default"]);v.prototype.options_=h["default"](c["default"].prototype.options_,{fillAlways:true,uncloseable:true});u["default"].registerComponent("ErrorDisplay",v);r["default"]=v;t.exports=r["default"];},{"./component":65,"./modal-dialog":105,"./utils/dom":126,"./utils/merge-options":132}],97:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}var i=e("./utils/events.js");var o=n(i);var s=function e(){};s.prototype.allowedEvents_={};s.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=Function.prototype;o.on(this,e,t);this.addEventListener=r;};s.prototype.addEventListener=s.prototype.on;s.prototype.off=function(e,t){o.off(this,e,t);};s.prototype.removeEventListener=s.prototype.off;s.prototype.one=function(e,t){o.one(this,e,t);};s.prototype.trigger=function(e){var t=e.type||e;if(typeof e==="string"){e={type:t};}e=o.fixEvent(e);if(this.allowedEvents_[t]&&this["on"+t]){this["on"+t](e);}o.trigger(this,e);};s.prototype.dispatchEvent=s.prototype.trigger;r["default"]=s;t.exports=r["default"];},{"./utils/events.js":127}],98:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("./utils/log");var o=n(i);var s=function e(t,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof r==="undefined"?"undefined":_typeof(r)));}t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(r){t.super_=r;}};var a=function e(t){var r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var n=function e(){t.apply(this,arguments);};var i={};if((typeof r==="undefined"?"undefined":_typeof(r))==="object"){if(typeof r.init==="function"){o["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead.");r.constructor=r.init;}if(r.constructor!==Object.prototype.constructor){n=r.constructor;}i=r;}else if(typeof r==="function"){n=r;}s(n,t);for(var a in i){if(i.hasOwnProperty(a)){n.prototype[a]=i[a];}}return n;};r["default"]=a;t.exports=r["default"];},{"./utils/log":131}],99:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("global/document");var o=n(i);var s={};var a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var u=a[0];var l=undefined;for(var c=0;c<a.length;c++){if(a[c][1]in o["default"]){l=a[c];break;}}if(l){for(var c=0;c<l.length;c++){s[u[c]]=l[c];}}r["default"]=s;t.exports=r["default"];},{"global/document":1}],100:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("./component");var a=n(s);var u=function(e){o(t,e);function t(){i(this,t);e.apply(this,arguments);}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"});};return t;}(a["default"]);a["default"].registerComponent("LoadingSpinner",u);r["default"]=u;t.exports=r["default"];},{"./component":65}],101:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("object.assign");var o=n(i);var s=function e(t){if(typeof t==="number"){this.code=t;}else if(typeof t==="string"){this.message=t;}else if((typeof t==="undefined"?"undefined":_typeof(t))==="object"){o["default"](this,t);}if(!this.message){this.message=e.defaultMessages[this.code]||"";}};s.prototype.code=0;s.prototype.message="";s.prototype.status=null;s.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];s.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var a=0;a<s.errorTypes.length;a++){s[s.errorTypes[a]]=a;s.prototype[s.errorTypes[a]]=a;}r["default"]=s;t.exports=r["default"];},{"object.assign":45}],102:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../button.js");var u=i(a);var l=e("../component.js");var c=i(l);var f=e("./menu.js");var d=i(f);var p=e("../utils/dom.js");var h=n(p);var v=e("../utils/fn.js");var y=n(v);var m=e("../utils/to-title-case.js");var g=i(m);var _=function(e){s(t,e);function t(r){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];o(this,t);e.call(this,r,n);this.update();this.on("keydown",this.handleKeyPress);this.el_.setAttribute("aria-haspopup",true);this.el_.setAttribute("role","button");}t.prototype.update=function e(){var t=this.createMenu();if(this.menu){this.removeChild(this.menu);}this.menu=t;this.addChild(t);this.buttonPressed_=false;if(this.items&&this.items.length===0){this.hide();}else if(this.items&&this.items.length>1){this.show();}};t.prototype.createMenu=function e(){var t=new d["default"](this.player_);if(this.options_.title){t.contentEl().appendChild(h.createEl("li",{className:"vjs-menu-title",innerHTML:g["default"](this.options_.title),tabIndex:-1}));}this.items=this["createItems"]();if(this.items){for(var r=0;r<this.items.length;r++){t.addItem(this.items[r]);}}return t;};t.prototype.createItems=function e(){};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()});};t.prototype.buildCSSClass=function t(){var r="vjs-menu-button";if(this.options_.inline===true){r+="-inline";}else{r+="-popup";}return"vjs-menu-button "+r+" "+e.prototype.buildCSSClass.call(this);};t.prototype.handleFocus=function e(){};t.prototype.handleBlur=function e(){};t.prototype.handleClick=function e(){this.one("mouseout",y.bind(this,function(){this.menu.unlockShowing();this.el_.blur();}));if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}};t.prototype.handleKeyPress=function e(t){if(t.which===32||t.which===13){if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}t.preventDefault();}else if(t.which===27){if(this.buttonPressed_){this.unpressButton();}t.preventDefault();}};t.prototype.pressButton=function e(){this.buttonPressed_=true;this.menu.lockShowing();this.el_.setAttribute("aria-pressed",true);if(this.items&&this.items.length>0){this.items[0].el().focus();}};t.prototype.unpressButton=function e(){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-pressed",false);};return t;}(u["default"]);c["default"].registerComponent("MenuButton",_);r["default"]=_;t.exports=r["default"];},{"../button.js":63,"../component.js":65,"../utils/dom.js":126,"../utils/fn.js":128,"../utils/to-title-case.js":135,"./menu.js":104}],103:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../button.js");var a=n(s);var u=e("../component.js");var l=n(u);var c=e("object.assign");var f=n(c);var d=function(e){o(t,e);function t(r,n){i(this,t);e.call(this,r,n);this.selected(n["selected"]);}t.prototype.createEl=function t(r,n,i){return e.prototype.createEl.call(this,"li",f["default"]({className:"vjs-menu-item",innerHTML:this.localize(this.options_["label"])},n),i);};t.prototype.handleClick=function e(){this.selected(true);};t.prototype.selected=function e(t){if(t){this.addClass("vjs-selected");this.el_.setAttribute("aria-selected",true);}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-selected",false);}};return t;}(a["default"]);l["default"].registerComponent("MenuItem",d);r["default"]=d;t.exports=r["default"];},{"../button.js":63,"../component.js":65,"object.assign":45}],104:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../component.js");var u=i(a);var l=e("../utils/dom.js");var c=n(l);var f=e("../utils/fn.js");var d=n(f);var p=e("../utils/events.js");var h=n(p);var v=function(e){s(t,e);function t(){o(this,t);e.apply(this,arguments);}t.prototype.addItem=function e(t){this.addChild(t);t.on("click",d.bind(this,function(){this.unlockShowing();}));};t.prototype.createEl=function t(){var r=this.options_.contentElType||"ul";this.contentEl_=c.createEl(r,{className:"vjs-menu-content"});var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});n.appendChild(this.contentEl_);h.on(n,"click",function(e){e.preventDefault();e.stopImmediatePropagation();});return n;};return t;}(u["default"]);u["default"].registerComponent("Menu",v);r["default"]=v;t.exports=r["default"];},{"../component.js":65,"../utils/dom.js":126,"../utils/events.js":127,"../utils/fn.js":128}],105:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("global/document");var u=i(a);var l=e("./utils/dom");var c=n(l);var f=e("./utils/fn");var d=n(f);var p=e("./utils/log");var h=i(p);var v=e("./component");var y=i(v);var m=e("./close-button");var g=i(m);var _="vjs-modal-dialog";var b=27;var w=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=false;this.closeable(!this.options_.uncloseable);this.content(this.options_.content);this.contentEl_=c.createEl("div",{className:_+"-content"},{role:"document"});this.descEl_=c.createEl("p",{className:_+"-description vjs-offscreen",id:this.el().getAttribute("aria-describedby")});c.textContent(this.descEl_,this.description());this.el_.appendChild(this.descEl_);this.el_.appendChild(this.contentEl_);}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"});};t.prototype.buildCSSClass=function t(){return _+" vjs-hidden "+e.prototype.buildCSSClass.call(this);};t.prototype.handleKeyPress=function e(t){if(t.which===b&&this.closeable()){this.close();}};t.prototype.label=function e(){return this.options_.label||this.localize("Modal Window");};t.prototype.description=function e(){var t=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.");}return t;};t.prototype.open=function e(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill();}this.wasPlaying_=!t.paused();if(this.wasPlaying_){t.pause();}if(this.closeable()){this.on(u["default"],"keydown",d.bind(this,this.handleKeyPress));}t.controls(false);this.show();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true;}return this;};t.prototype.opened=function e(t){if(typeof t==="boolean"){this[t?"open":"close"]();}return this.opened_;};t.prototype.close=function e(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_){t.play();}if(this.closeable()){this.off(u["default"],"keydown",d.bind(this,this.handleKeyPress));}t.controls(true);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");if(this.options_.temporary){this.dispose();}}return this;};t.prototype.closeable=function e(t){if(typeof t==="boolean"){var e=this.closeable_=!!t;var r=this.getChild("closeButton");if(e&&!r){var n=this.contentEl_;this.contentEl_=this.el_;r=this.addChild("closeButton");this.contentEl_=n;this.on(r,"close",this.close);}if(!e&&r){this.off(r,"close",this.close);this.removeChild(r);r.dispose();}}return this.closeable_;};t.prototype.fill=function e(){return this.fillWith(this.content());};t.prototype.fillWith=function e(t){var r=this.contentEl();var n=r.parentNode;var i=r.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;n.removeChild(r);this.empty();c.insertContent(r,t);this.trigger("modalfill");if(i){n.insertBefore(r,i);}else{n.appendChild(r);}return this;};t.prototype.empty=function e(){this.trigger("beforemodalempty");c.emptyEl(this.contentEl());this.trigger("modalempty");return this;};t.prototype.content=function e(t){if(typeof t!=="undefined"){this.content_=t;}return this.content_;};return t;}(y["default"]);w.prototype.options_={temporary:true};y["default"].registerComponent("ModalDialog",w);r["default"]=w;t.exports=r["default"];},{"./close-button":64,"./component":65,"./utils/dom":126,"./utils/fn":128,"./utils/log":131,"global/document":1}],106:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("./component.js");var u=i(a);var l=e("global/document");var c=i(l);var f=e("global/window");var d=i(f);var p=e("./utils/events.js");var h=n(p);var v=e("./utils/dom.js");var y=n(v);var m=e("./utils/fn.js");var g=n(m);var _=e("./utils/guid.js");var b=n(_);var w=e("./utils/browser.js");var T=n(w);var j=e("./utils/log.js");var k=i(j);var E=e("./utils/to-title-case.js");var C=i(E);var x=e("./utils/time-ranges.js");var S=e("./utils/buffer.js");var O=e("./utils/stylesheet.js");var P=n(O);var A=e("./fullscreen-api.js");var M=i(A);var I=e("./media-error.js");var L=i(I);var R=e("safe-json-parse/tuple");var B=i(R);var D=e("object.assign");var N=i(D);var F=e("./utils/merge-options.js");var U=i(F);var H=e("./tracks/text-track-list-converter.js");var V=i(H);var W=e("./tech/loader.js");var q=i(W);var z=e("./poster-image.js");var $=i(z);var X=e("./tracks/text-track-display.js");var G=i(X);var K=e("./loading-spinner.js");var Y=i(K);var J=e("./big-play-button.js");var Q=i(J);var Z=e("./control-bar/control-bar.js");var ee=i(Z);var te=e("./error-display.js");var re=i(te);var ne=e("./tracks/text-track-settings.js");var ie=i(ne);var oe=e("./modal-dialog");var se=i(oe);var ae=e("./tech/tech.js");var ue=i(ae);var le=e("./tech/html5.js");var ce=i(le);var fe=function(e){s(t,e);function t(r,n,i){var s=this;o(this,t);r.id=r.id||"vjs_video_"+b.newGUID();n=N["default"](t.getTagSettings(r),n);n.initChildren=false;n.createEl=false;n.reportTouchActivity=false;e.call(this,null,n,i);if(!this.options_||!this.options_.techOrder||!this.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?");}this.tag=r;this.tagAttributes=r&&y.getElAttributes(r);this.language(this.options_.language);if(n.languages){(function(){var e={};Object.getOwnPropertyNames(n.languages).forEach(function(t){e[t.toLowerCase()]=n.languages[t];});s.languages_=e;})();}else{this.languages_=t.prototype.options_.languages;}this.cache_={};this.poster_=n.poster||"";this.controls_=!!n.controls;r.controls=false;this.scrubbing_=false;this.el_=this.createEl();var a=U["default"](this.options_);if(n.plugins){(function(){var e=n.plugins;Object.getOwnPropertyNames(e).forEach(function(t){if(typeof this[t]==="function"){this[t](e[t]);}else{k["default"].error("Unable to find plugin:",t);}},s);})();}this.options_.playerOptions=a;this.initChildren();this.isAudio(r.nodeName.toLowerCase()==="audio");if(this.controls()){this.addClass("vjs-controls-enabled");}else{this.addClass("vjs-controls-disabled");}if(this.isAudio()){this.addClass("vjs-audio");}if(this.flexNotSupported_()){this.addClass("vjs-no-flex");}t.players[this.id_]=this;this.userActive(true);this.reportUserActivity();this.listenForUserActivity_();this.on("fullscreenchange",this.handleFullscreenChange_);this.on("stageclick",this.handleStageClick_);}t.prototype.dispose=function r(){this.trigger("dispose");this.off("dispose");if(this.styleEl_){this.styleEl_.parentNode.removeChild(this.styleEl_);}t.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null;}if(this.el_&&this.el_.player){this.el_.player=null;}if(this.tech_){this.tech_.dispose();}e.prototype.dispose.call(this);};t.prototype.createEl=function t(){var r=this.el_=e.prototype.createEl.call(this,"div");var n=this.tag;n.removeAttribute("width");n.removeAttribute("height");var i=y.getElAttributes(n);Object.getOwnPropertyNames(i).forEach(function(e){if(e==="class"){r.className=i[e];}else{r.setAttribute(e,i[e]);}});n.id+="_html5_api";n.className="vjs-tech";n.player=r.player=this;this.addClass("vjs-paused");this.styleEl_=P.createStyleElement("vjs-styles-dimensions");var o=y.$(".vjs-styles-defaults");var s=y.$("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild);this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);n.initNetworkState_=n.networkState;if(n.parentNode){n.parentNode.insertBefore(r,n);}y.insertElFirst(n,r);this.el_=r;return r;};t.prototype.width=function e(t){return this.dimension("width",t);};t.prototype.height=function e(t){return this.dimension("height",t);};t.prototype.dimension=function e(t,r){var n=t+"_";if(r===undefined){return this[n]||0;}if(r===""){this[n]=undefined;}else{var i=parseFloat(r);if(isNaN(i)){k["default"].error('Improper value "'+r+'" supplied for for '+t);return this;}this[n]=i;}this.updateStyleEl_();return this;};t.prototype.fluid=function e(t){if(t===undefined){return!!this.fluid_;}this.fluid_=!!t;if(t){this.addClass("vjs-fluid");}else{this.removeClass("vjs-fluid");}};t.prototype.aspectRatio=function e(t){if(t===undefined){return this.aspectRatio_;}if(!/^\d+\:\d+$/.test(t)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");}this.aspectRatio_=t;this.fluid(true);this.updateStyleEl_();};t.prototype.updateStyleEl_=function e(){var t=undefined;var r=undefined;var n=undefined;var i=undefined;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){n=this.aspectRatio_;}else if(this.videoWidth()){n=this.videoWidth()+":"+this.videoHeight();}else{n="16:9";}var o=n.split(":");var s=o[1]/o[0];if(this.width_!==undefined){t=this.width_;}else if(this.height_!==undefined){t=this.height_/s;}else{t=this.videoWidth()||300;}if(this.height_!==undefined){r=this.height_;}else{r=t*s;}if(/^[^a-zA-Z]/.test(this.id())){i="dimensions-"+this.id();}else{i=this.id()+"-dimensions";}this.addClass(i);P.setTextContent(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+r+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+s*100+"%;\n      }\n    ");};t.prototype.loadTech_=function e(t,r){if(this.tech_){this.unloadTech_();}if(t!=="Html5"&&this.tag){ue["default"].getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null;}this.techName_=t;this.isReady_=false;var n=N["default"]({nativeControlsForTouch:this.options_.nativeControlsForTouch,source:r,playerId:this.id(),techId:this.id()+"_"+t+"_api",textTracks:this.textTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),"vtt.js":this.options_["vtt.js"]},this.options_[t.toLowerCase()]);if(this.tag){n.tag=this.tag;}if(r){this.currentType_=r.type;if(r.src===this.cache_.src&&this.cache_.currentTime>0){n.startTime=this.cache_.currentTime;}this.cache_.src=r.src;}var i=ue["default"].getTech(t);if(!i){i=u["default"].getComponent(t);}this.tech_=new i(n);this.tech_.ready(g.bind(this,this.handleTechReady_),true);V["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_);this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"canplay",this.handleTechCanPlay_);this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_);this.on(this.tech_,"playing",this.handleTechPlaying_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"seeked",this.handleTechSeeked_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"progress",this.handleTechProgress_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"suspend",this.handleTechSuspend_);this.on(this.tech_,"abort",this.handleTechAbort_);this.on(this.tech_,"emptied",this.handleTechEmptied_);this.on(this.tech_,"stalled",this.handleTechStalled_);this.on(this.tech_,"loadedmetadata",this.handleTechLoadedMetaData_);this.on(this.tech_,"loadeddata",this.handleTechLoadedData_);this.on(this.tech_,"timeupdate",this.handleTechTimeUpdate_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.on(this.tech_,"volumechange",this.handleTechVolumeChange_);this.on(this.tech_,"texttrackchange",this.handleTechTextTrackChange_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_();}if(this.tech_.el().parentNode!==this.el()&&(t!=="Html5"||!this.tag)){y.insertElFirst(this.tech_.el(),this.el());}if(this.tag){this.tag.player=null;this.tag=null;}};t.prototype.unloadTech_=function e(){this.textTracks_=this.textTracks();this.textTracksJson_=V["default"].textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;};t.prototype.addTechControlsListeners_=function e(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_);};t.prototype.removeTechControlsListeners_=function e(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);};t.prototype.handleTechReady_=function e(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume);}this.handleTechPosterChange_();this.handleTechDurationChange_();if(this.tag&&this.options_.autoplay&&this.paused()){delete this.tag.poster;this.play();}};t.prototype.handleTechLoadStart_=function e(){this.removeClass("vjs-ended");this.error(null);if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay");}else{this.hasStarted(false);this.trigger("loadstart");}};t.prototype.hasStarted=function e(t){if(t!==undefined){if(this.hasStarted_!==t){this.hasStarted_=t;if(t){this.addClass("vjs-has-started");this.trigger("firstplay");}else{this.removeClass("vjs-has-started");}}return this;}return!!this.hasStarted_;};t.prototype.handleTechPlay_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play");};t.prototype.handleTechWaiting_=function e(){this.addClass("vjs-waiting");this.trigger("waiting");};t.prototype.handleTechCanPlay_=function e(){this.removeClass("vjs-waiting");this.trigger("canplay");};t.prototype.handleTechCanPlayThrough_=function e(){this.removeClass("vjs-waiting");this.trigger("canplaythrough");};t.prototype.handleTechPlaying_=function e(){this.removeClass("vjs-waiting");this.trigger("playing");};t.prototype.handleTechSeeking_=function e(){this.addClass("vjs-seeking");this.trigger("seeking");};t.prototype.handleTechSeeked_=function e(){this.removeClass("vjs-seeking");this.trigger("seeked");};t.prototype.handleTechFirstPlay_=function e(){if(this.options_.starttime){this.currentTime(this.options_.starttime);}this.addClass("vjs-has-started");this.trigger("firstplay");};t.prototype.handleTechPause_=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause");};t.prototype.handleTechProgress_=function e(){this.trigger("progress");};t.prototype.handleTechEnded_=function e(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play();}else if(!this.paused()){this.pause();}this.trigger("ended");};t.prototype.handleTechDurationChange_=function e(){this.duration(this.techGet_("duration"));};t.prototype.handleTechClick_=function e(t){if(t.button!==0)return;if(this.controls()){if(this.paused()){this.play();}else{this.pause();}}};t.prototype.handleTechTap_=function e(){this.userActive(!this.userActive());};t.prototype.handleTechTouchStart_=function e(){this.userWasActive=this.userActive();};t.prototype.handleTechTouchMove_=function e(){if(this.userWasActive){this.reportUserActivity();}};t.prototype.handleTechTouchEnd_=function e(t){t.preventDefault();};t.prototype.handleFullscreenChange_=function e(){if(this.isFullscreen()){this.addClass("vjs-fullscreen");}else{this.removeClass("vjs-fullscreen");}};t.prototype.handleStageClick_=function e(){this.reportUserActivity();};t.prototype.handleTechFullscreenChange_=function e(t,r){if(r){this.isFullscreen(r.isFullscreen);}this.trigger("fullscreenchange");};t.prototype.handleTechError_=function e(){var t=this.tech_.error();this.error(t&&t.code);};t.prototype.handleTechSuspend_=function e(){this.trigger("suspend");};t.prototype.handleTechAbort_=function e(){this.trigger("abort");};t.prototype.handleTechEmptied_=function e(){this.trigger("emptied");};t.prototype.handleTechStalled_=function e(){this.trigger("stalled");};t.prototype.handleTechLoadedMetaData_=function e(){this.trigger("loadedmetadata");};t.prototype.handleTechLoadedData_=function e(){this.trigger("loadeddata");};t.prototype.handleTechTimeUpdate_=function e(){this.trigger("timeupdate");};t.prototype.handleTechRateChange_=function e(){this.trigger("ratechange");};t.prototype.handleTechVolumeChange_=function e(){this.trigger("volumechange");};t.prototype.handleTechTextTrackChange_=function e(){this.trigger("texttrackchange");};t.prototype.getCache=function e(){return this.cache_;};t.prototype.techCall_=function e(t,r){if(this.tech_&&!this.tech_.isReady_){this.tech_.ready(function(){this[t](r);},true);}else{try{this.tech_[t](r);}catch(e){k["default"](e);throw e;}}};t.prototype.techGet_=function e(t){if(this.tech_&&this.tech_.isReady_){try{return this.tech_[t]();}catch(e){if(this.tech_[t]===undefined){k["default"]("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e);}else{if(e.name==="TypeError"){k["default"]("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;}else{k["default"](e);}}throw e;}}return;};t.prototype.play=function e(){this.techCall_("play");return this;};t.prototype.pause=function e(){this.techCall_("pause");return this;};t.prototype.paused=function e(){return this.techGet_("paused")===false?false:true;};t.prototype.scrubbing=function e(t){if(t!==undefined){this.scrubbing_=!!t;if(t){this.addClass("vjs-scrubbing");}else{this.removeClass("vjs-scrubbing");}return this;}return this.scrubbing_;};t.prototype.currentTime=function e(t){if(t!==undefined){this.techCall_("setCurrentTime",t);return this;}return this.cache_.currentTime=this.techGet_("currentTime")||0;};t.prototype.duration=function e(t){if(t===undefined){return this.cache_.duration||0;}t=parseFloat(t)||0;if(t<0){t=Infinity;}if(t!==this.cache_.duration){this.cache_.duration=t;if(t===Infinity){this.addClass("vjs-live");}else{this.removeClass("vjs-live");}this.trigger("durationchange");}return this;};t.prototype.remainingTime=function e(){return this.duration()-this.currentTime();};t.prototype.buffered=function e(){var e=this.techGet_("buffered");if(!e||!e.length){e=x.createTimeRange(0,0);}return e;};t.prototype.bufferedPercent=function e(){return S.bufferedPercent(this.buffered(),this.duration());};t.prototype.bufferedEnd=function e(){var t=this.buffered(),r=this.duration(),n=t.end(t.length-1);if(n>r){n=r;}return n;};t.prototype.volume=function e(t){var r=undefined;if(t!==undefined){r=Math.max(0,Math.min(1,parseFloat(t)));this.cache_.volume=r;this.techCall_("setVolume",r);return this;}r=parseFloat(this.techGet_("volume"));return isNaN(r)?1:r;};t.prototype.muted=function e(t){if(t!==undefined){this.techCall_("setMuted",t);return this;}return this.techGet_("muted")||false;};t.prototype.supportsFullScreen=function e(){return this.techGet_("supportsFullScreen")||false;};t.prototype.isFullscreen=function e(t){if(t!==undefined){this.isFullscreen_=!!t;return this;}return!!this.isFullscreen_;};t.prototype.requestFullscreen=function e(){var t=M["default"];this.isFullscreen(true);if(t.requestFullscreen){h.on(c["default"],t.fullscreenchange,g.bind(this,function e(r){this.isFullscreen(c["default"][t.fullscreenElement]);if(this.isFullscreen()===false){h.off(c["default"],t.fullscreenchange,e);}this.trigger("fullscreenchange");}));this.el_[t.requestFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen");}else{this.enterFullWindow();this.trigger("fullscreenchange");}return this;};t.prototype.exitFullscreen=function e(){var t=M["default"];this.isFullscreen(false);if(t.requestFullscreen){c["default"][t.exitFullscreen]();}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen");}else{this.exitFullWindow();this.trigger("fullscreenchange");}return this;};t.prototype.enterFullWindow=function e(){this.isFullWindow=true;this.docOrigOverflow=c["default"].documentElement.style.overflow;h.on(c["default"],"keydown",g.bind(this,this.fullWindowOnEscKey));c["default"].documentElement.style.overflow="hidden";y.addElClass(c["default"].body,"vjs-full-window");this.trigger("enterFullWindow");};t.prototype.fullWindowOnEscKey=function e(t){if(t.keyCode===27){if(this.isFullscreen()===true){this.exitFullscreen();}else{this.exitFullWindow();}}};t.prototype.exitFullWindow=function e(){this.isFullWindow=false;h.off(c["default"],"keydown",this.fullWindowOnEscKey);c["default"].documentElement.style.overflow=this.docOrigOverflow;y.removeElClass(c["default"].body,"vjs-full-window");this.trigger("exitFullWindow");};t.prototype.canPlayType=function e(t){var r=undefined;for(var n=0,i=this.options_.techOrder;n<i.length;n++){var o=C["default"](i[n]);var s=ue["default"].getTech(o);if(!s){s=u["default"].getComponent(o);}if(!s){k["default"].error('The "'+o+'" tech is undefined. Skipped browser support check for that tech.');continue;}if(s.isSupported()){r=s.canPlayType(t);if(r){return r;}}}return"";};t.prototype.selectSource=function e(t){var r=this.options_.techOrder.map(C["default"]).map(function(e){return[e,ue["default"].getTech(e)||u["default"].getComponent(e)];}).filter(function(e){var t=e[0];var r=e[1];if(r){return r.isSupported();}k["default"].error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.');return false;});var n=function e(t,r,n){var i=undefined;t.some(function(e){return r.some(function(t){i=n(e,t);if(i){return true;}});});return i;};var i=undefined;var o=function e(t){return function(e,r){return t(r,e);};};var s=function e(t,r){var n=t[0];var i=t[1];if(i.canPlaySource(r)){return{source:r,tech:n};}};if(this.options_.sourceOrder){i=n(t,r,o(s));}else{i=n(r,t,s);}return i||false;};t.prototype.src=function e(t){if(t===undefined){return this.techGet_("src");}var r=ue["default"].getTech(this.techName_);if(!r){r=u["default"].getComponent(this.techName_);}if(Array.isArray(t)){this.sourceList_(t);}else if(typeof t==="string"){this.src({src:t});}else if(t instanceof Object){if(t.type&&!r.canPlaySource(t)){this.sourceList_([t]);}else{this.cache_.src=t.src;this.currentType_=t.type||"";this.ready(function(){if(r.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",t);}else{this.techCall_("src",t.src);}if(this.options_.preload==="auto"){this.load();}if(this.options_.autoplay){this.play();}},true);}}return this;};t.prototype.sourceList_=function e(t){var r=this.selectSource(t);if(r){if(r.tech===this.techName_){this.src(r.source);}else{this.loadTech_(r.tech,r.source);}}else{this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);this.triggerReady();}};t.prototype.load=function e(){this.techCall_("load");return this;};t.prototype.currentSrc=function e(){return this.techGet_("currentSrc")||this.cache_.src||"";};t.prototype.currentType=function e(){return this.currentType_||"";};t.prototype.preload=function e(t){if(t!==undefined){this.techCall_("setPreload",t);this.options_.preload=t;return this;}return this.techGet_("preload");};t.prototype.autoplay=function e(t){if(t!==undefined){this.techCall_("setAutoplay",t);this.options_.autoplay=t;return this;}return this.techGet_("autoplay",t);};t.prototype.loop=function e(t){if(t!==undefined){this.techCall_("setLoop",t);this.options_["loop"]=t;return this;}return this.techGet_("loop");};t.prototype.poster=function e(t){if(t===undefined){return this.poster_;}if(!t){t="";}this.poster_=t;this.techCall_("setPoster",t);this.trigger("posterchange");return this;};t.prototype.handleTechPosterChange_=function e(){if(!this.poster_&&this.tech_&&this.tech_.poster){this.poster_=this.tech_.poster()||"";this.trigger("posterchange");}};t.prototype.controls=function e(t){if(t!==undefined){t=!!t;if(this.controls_!==t){this.controls_=t;if(this.usingNativeControls()){this.techCall_("setControls",t);}if(t){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_();}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_();}}}return this;}return!!this.controls_;};t.prototype.usingNativeControls=function e(t){if(t!==undefined){t=!!t;if(this.usingNativeControls_!==t){this.usingNativeControls_=t;if(t){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols");}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols");}}return this;}return!!this.usingNativeControls_;};t.prototype.error=function e(t){if(t===undefined){return this.error_||null;}if(t===null){this.error_=t;this.removeClass("vjs-error");this.errorDisplay.close();return this;}if(t instanceof L["default"]){this.error_=t;}else{this.error_=new L["default"](t);}this.addClass("vjs-error");k["default"].error("(CODE:"+this.error_.code+" "+L["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return this;};t.prototype.ended=function e(){return this.techGet_("ended");};t.prototype.seeking=function e(){return this.techGet_("seeking");};t.prototype.seekable=function e(){return this.techGet_("seekable");};t.prototype.reportUserActivity=function e(t){this.userActivity_=true;};t.prototype.userActive=function e(t){if(t!==undefined){t=!!t;if(t!==this.userActive_){this.userActive_=t;if(t){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");}else{this.userActivity_=false;if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault();});}this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive");}}return this;}return this.userActive_;};t.prototype.listenForUserActivity_=function e(){var t=undefined,r=undefined,n=undefined;var i=g.bind(this,this.reportUserActivity);var o=function e(t){if(t.screenX!==r||t.screenY!==n){r=t.screenX;n=t.screenY;i();}};var s=function e(){i();this.clearInterval(t);t=this.setInterval(i,250);};var a=function e(r){i();this.clearInterval(t);};this.on("mousedown",s);this.on("mousemove",o);this.on("mouseup",a);this.on("keydown",i);this.on("keyup",i);var u=undefined;var l=this.setInterval(function(){if(this.userActivity_){this.userActivity_=false;this.userActive(true);this.clearTimeout(u);var e=this.options_["inactivityTimeout"];if(e>0){u=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false);}},e);}}},250);};t.prototype.playbackRate=function e(t){if(t!==undefined){this.techCall_("setPlaybackRate",t);return this;}if(this.tech_&&this.tech_["featuresPlaybackRate"]){return this.techGet_("playbackRate");}else{return 1;}};t.prototype.isAudio=function e(t){if(t!==undefined){this.isAudio_=!!t;return this;}return!!this.isAudio_;};t.prototype.networkState=function e(){return this.techGet_("networkState");};t.prototype.readyState=function e(){return this.techGet_("readyState");};t.prototype.textTracks=function e(){return this.tech_&&this.tech_["textTracks"]();};t.prototype.remoteTextTracks=function e(){return this.tech_&&this.tech_["remoteTextTracks"]();};t.prototype.addTextTrack=function e(t,r,n){return this.tech_&&this.tech_["addTextTrack"](t,r,n);};t.prototype.addRemoteTextTrack=function e(t){return this.tech_&&this.tech_["addRemoteTextTrack"](t);};t.prototype.removeRemoteTextTrack=function e(t){this.tech_&&this.tech_["removeRemoteTextTrack"](t);};t.prototype.videoWidth=function e(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0;};t.prototype.videoHeight=function e(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0;};t.prototype.language=function e(t){if(t===undefined){return this.language_;}this.language_=(""+t).toLowerCase();return this;};t.prototype.languages=function e(){return U["default"](t.prototype.options_.languages,this.languages_);};t.prototype.toJSON=function e(){var t=U["default"](this.options_);var r=t.tracks;t.tracks=[];for(var n=0;n<r.length;n++){var i=r[n];i=U["default"](i);i.player=undefined;t.tracks[n]=i;}return t;};t.prototype.createModal=function e(t,r){var n=this;r=r||{};r.content=t||"";var i=new se["default"](n,r);n.addChild(i);i.on("dispose",function(){n.removeChild(i);});return i.open();};t.getTagSettings=function e(t){var r={sources:[],tracks:[]};var n=y.getElAttributes(t);var i=n["data-setup"];if(i!==null){var o=B["default"](i||"{}");var s=o[0];var a=o[1];if(s){k["default"].error(s);}N["default"](n,a);}N["default"](r,n);if(t.hasChildNodes()){var u=t.childNodes;for(var l=0,c=u.length;l<c;l++){var f=u[l];var d=f.nodeName.toLowerCase();if(d==="source"){r.sources.push(y.getElAttributes(f));}else if(d==="track"){r.tracks.push(y.getElAttributes(f));}}}return r;};return t;}(u["default"]);fe.players={};var de=d["default"].navigator;fe.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:c["default"].getElementsByTagName("html")[0].getAttribute("lang")||de.languages&&de.languages[0]||de.userLanguage||de.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this video."};fe.prototype.handleLoadedMetaData_;fe.prototype.handleLoadedData_;fe.prototype.handleUserActive_;fe.prototype.handleUserInactive_;fe.prototype.handleTimeUpdate_;fe.prototype.handleTechEnded_;fe.prototype.handleVolumeChange_;fe.prototype.handleError_;fe.prototype.flexNotSupported_=function(){var e=c["default"].createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style);};u["default"].registerComponent("Player",fe);r["default"]=fe;t.exports=r["default"];},{"./big-play-button.js":62,"./component.js":65,"./control-bar/control-bar.js":66,"./error-display.js":96,"./fullscreen-api.js":99,"./loading-spinner.js":100,"./media-error.js":101,"./modal-dialog":105,"./poster-image.js":108,"./tech/html5.js":113,"./tech/loader.js":114,"./tech/tech.js":115,"./tracks/text-track-display.js":117,"./tracks/text-track-list-converter.js":119,"./tracks/text-track-settings.js":121,"./utils/browser.js":123,"./utils/buffer.js":124,"./utils/dom.js":126,"./utils/events.js":127,"./utils/fn.js":128,"./utils/guid.js":130,"./utils/log.js":131,"./utils/merge-options.js":132,"./utils/stylesheet.js":133,"./utils/time-ranges.js":134,"./utils/to-title-case.js":135,"global/document":1,"global/window":2,"object.assign":45,"safe-json-parse/tuple":53}],107:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("./player.js");var o=n(i);var s=function e(t,r){o["default"].prototype[t]=r;};r["default"]=s;t.exports=r["default"];},{"./player.js":106}],108:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("./button.js");var u=i(a);var l=e("./component.js");var c=i(l);var f=e("./utils/fn.js");var d=n(f);var p=e("./utils/dom.js");var h=n(p);var v=e("./utils/browser.js");var y=n(v);var m=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.update();r.on("posterchange",d.bind(this,this.update));}t.prototype.dispose=function t(){this.player().off("posterchange",this.update);e.prototype.dispose.call(this);};t.prototype.createEl=function e(){var t=h.createEl("div",{className:"vjs-poster",tabIndex:-1});if(!y.BACKGROUND_SIZE_SUPPORTED){this.fallbackImg_=h.createEl("img");t.appendChild(this.fallbackImg_);}return t;};t.prototype.update=function e(){var t=this.player().poster();this.setSrc(t);if(t){this.show();}else{this.hide();}};t.prototype.setSrc=function e(t){if(this.fallbackImg_){this.fallbackImg_.src=t;}else{var r="";if(t){r='url("'+t+'")';}this.el_.style.backgroundImage=r;}};t.prototype.handleClick=function e(){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};return t;}(u["default"]);c["default"].registerComponent("PosterImage",m);r["default"]=m;t.exports=r["default"];},{"./button.js":63,"./component.js":65,"./utils/browser.js":123,"./utils/dom.js":126,"./utils/fn.js":128}],109:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}var o=e("./utils/events.js");var s=i(o);var a=e("global/document");var u=n(a);var l=e("global/window");var c=n(l);var f=false;var d=undefined;var p=function e(){var t=u["default"].getElementsByTagName("video");var r=u["default"].getElementsByTagName("audio");var n=[];if(t&&t.length>0){for(var i=0,o=t.length;i<o;i++){n.push(t[i]);}}if(r&&r.length>0){for(var i=0,o=r.length;i<o;i++){n.push(r[i]);}}if(n&&n.length>0){for(var i=0,o=n.length;i<o;i++){var s=n[i];if(s&&s.getAttribute){if(s["player"]===undefined){var a=s.getAttribute("data-setup");if(a!==null){var l=d(s);}}}else{h(1);break;}}}else if(!f){h(1);}};var h=function e(t,r){d=r;setTimeout(p,t);};if(u["default"].readyState==="complete"){f=true;}else{s.one(c["default"],"load",function(){f=true;});}var v=function e(){return f;};r.autoSetup=p;r.autoSetupTimeout=h;r.hasLoaded=v;},{"./utils/events.js":127,"global/document":1,"global/window":2}],110:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../component.js");var u=i(a);var l=e("../utils/dom.js");var c=n(l);var f=e("global/document");var d=i(f);var p=e("object.assign");var h=i(p);var v=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.bar=this.getChild(this.options_.barName);this.vertical(!!this.options_.vertical);this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);this.on("click",this.handleClick);this.on(r,"controlsvisible",this.update);this.on(r,this.playerEvent,this.update);}t.prototype.createEl=function t(r){var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];n.className=n.className+" vjs-slider";n=h["default"]({tabIndex:0},n);i=h["default"]({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i);return e.prototype.createEl.call(this,r,n,i);};t.prototype.handleMouseDown=function e(t){t.preventDefault();c.blockTextSelection();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(d["default"],"mousemove",this.handleMouseMove);this.on(d["default"],"mouseup",this.handleMouseUp);this.on(d["default"],"touchmove",this.handleMouseMove);this.on(d["default"],"touchend",this.handleMouseUp);this.handleMouseMove(t);};t.prototype.handleMouseMove=function e(){};t.prototype.handleMouseUp=function e(){c.unblockTextSelection();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(d["default"],"mousemove",this.handleMouseMove);this.off(d["default"],"mouseup",this.handleMouseUp);this.off(d["default"],"touchmove",this.handleMouseMove);this.off(d["default"],"touchend",this.handleMouseUp);this.update();};t.prototype.update=function e(){if(!this.el_)return;var t=this.getPercent();var r=this.bar;if(!r)return;if(typeof t!=="number"||t!==t||t<0||t===Infinity){t=0;}var n=(t*100).toFixed(2)+"%";if(this.vertical()){r.el().style.height=n;}else{r.el().style.width=n;}};t.prototype.calculateDistance=function e(t){var r=c.getPointerPosition(this.el_,t);if(this.vertical()){return r.y;}return r.x;};t.prototype.handleFocus=function e(){this.on(d["default"],"keydown",this.handleKeyPress);};t.prototype.handleKeyPress=function e(t){if(t.which===37||t.which===40){t.preventDefault();this.stepBack();}else if(t.which===38||t.which===39){t.preventDefault();this.stepForward();}};t.prototype.handleBlur=function e(){this.off(d["default"],"keydown",this.handleKeyPress);};t.prototype.handleClick=function e(t){t.stopImmediatePropagation();t.preventDefault();};t.prototype.vertical=function e(t){if(t===undefined){return this.vertical_||false;}this.vertical_=!!t;if(this.vertical_){this.addClass("vjs-slider-vertical");}else{this.addClass("vjs-slider-horizontal");}return this;};return t;}(u["default"]);u["default"].registerComponent("Slider",v);r["default"]=v;t.exports=r["default"];},{"../component.js":65,"../utils/dom.js":126,"global/document":1,"object.assign":45}],111:[function(e,t,r){"use strict";r.__esModule=true;function n(e){e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};e.streamFromParts=function(e,t){return e+"&"+t;};e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var r=e.search(/&(?!\w+=)/);var n=undefined;if(r!==-1){n=r+1;}else{r=n=e.lastIndexOf("/")+1;if(r===0){r=n=e.length;}}t.connection=e.substring(0,r);t.stream=e.substring(n,e.length);return t;};e.isStreamingType=function(t){return t in e.streamingFormats;};e.RTMP_RE=/^rtmp[set]?:\/\//i;e.isStreamingSrc=function(t){return e.RTMP_RE.test(t);};e.rtmpSourceHandler={};e.rtmpSourceHandler.canPlayType=function(t){if(e.isStreamingType(t)){return"maybe";}return"";};e.rtmpSourceHandler.canHandleSource=function(t){var r=e.rtmpSourceHandler.canPlayType(t.type);if(r){return r;}if(e.isStreamingSrc(t.src)){return"maybe";}return"";};e.rtmpSourceHandler.handleSource=function(t,r){var n=e.streamToParts(t.src);r["setRtmpConnection"](n.connection);r["setRtmpStream"](n.stream);};e.registerSourceHandler(e.rtmpSourceHandler);return e;}r["default"]=n;t.exports=r["default"];},{}],112:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("./tech");var u=i(a);var l=e("../utils/dom.js");var c=n(l);var f=e("../utils/url.js");var d=n(f);var p=e("../utils/time-ranges.js");var h=e("./flash-rtmp");var v=i(h);var y=e("../component");var m=i(y);var g=e("global/window");var _=i(g);var b=e("object.assign");var w=i(b);var T=_["default"].navigator;var j=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);if(r.source){this.ready(function(){this.setSource(r.source);},true);}if(r.startTime){this.ready(function(){this.load();this.play();this.currentTime(r.startTime);},true);}_["default"].videojs=_["default"].videojs||{};_["default"].videojs.Flash=_["default"].videojs.Flash||{};_["default"].videojs.Flash.onReady=t.onReady;_["default"].videojs.Flash.onEvent=t.onEvent;_["default"].videojs.Flash.onError=t.onError;this.on("seeked",function(){this.lastSeekTarget_=undefined;});}t.prototype.createEl=function e(){var r=this.options_;if(!r.swf){r.swf="//vjs.zencdn.net/swf/5.0.1/video-js.swf";}var n=r.techId;var i=w["default"]({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:r.autoplay,preload:r.preload,loop:r.loop,muted:r.muted},r.flashVars);var o=w["default"]({wmode:"opaque",bgcolor:"#000000"},r.params);var s=w["default"]({id:n,name:n,class:"vjs-tech"},r.attributes);this.el_=t.embed(r.swf,i,o,s);this.el_.tech=this;return this.el_;};t.prototype.play=function e(){if(this.ended()){this.setCurrentTime(0);}this.el_.vjs_play();};t.prototype.pause=function e(){this.el_.vjs_pause();};t.prototype.src=function e(t){if(t===undefined){return this.currentSrc();}return this.setSrc(t);};t.prototype.setSrc=function e(t){t=d.getAbsoluteURL(t);this.el_.vjs_src(t);if(this.autoplay()){var r=this;this.setTimeout(function(){r.play();},0);}};t.prototype.seeking=function e(){return this.lastSeekTarget_!==undefined;};t.prototype.setCurrentTime=function t(r){var n=this.seekable();if(n.length){r=r>n.start(0)?r:n.start(0);r=r<n.end(n.length-1)?r:n.end(n.length-1);this.lastSeekTarget_=r;this.trigger("seeking");this.el_.vjs_setProperty("currentTime",r);e.prototype.setCurrentTime.call(this);}};t.prototype.currentTime=function e(t){if(this.seeking()){return this.lastSeekTarget_||0;}return this.el_.vjs_getProperty("currentTime");};t.prototype.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src;}else{return this.el_.vjs_getProperty("currentSrc");}};t.prototype.load=function e(){this.el_.vjs_load();};t.prototype.poster=function e(){this.el_.vjs_getProperty("poster");};t.prototype.setPoster=function e(){};t.prototype.seekable=function e(){var t=this.duration();if(t===0){return p.createTimeRange();}return p.createTimeRange(0,t);};t.prototype.buffered=function e(){var t=this.el_.vjs_getProperty("buffered");if(t.length===0){return p.createTimeRange();}return p.createTimeRange(t[0][0],t[0][1]);};t.prototype.supportsFullScreen=function e(){return false;};t.prototype.enterFullScreen=function e(){return false;};return t;}(u["default"]);var k=j.prototype;var E="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(",");var C="networkState,readyState,initialTime,duration,startOffsetTime,paused,ended,videoTracks,audioTracks,videoWidth,videoHeight".split(",");function x(e){var t=e.charAt(0).toUpperCase()+e.slice(1);k["set"+t]=function(t){return this.el_.vjs_setProperty(e,t);};}function S(e){k[e]=function(){return this.el_.vjs_getProperty(e);};}for(var O=0;O<E.length;O++){S(E[O]);x(E[O]);}for(var O=0;O<C.length;O++){S(C[O]);}j.isSupported=function(){return j.version()[0]>=10;};u["default"].withSourceHandlers(j);j.nativeSourceHandler={};j.nativeSourceHandler.canPlayType=function(e){if(e in j.formats){return"maybe";}return"";};j.nativeSourceHandler.canHandleSource=function(e){var t;function r(e){var t=d.getFileExtension(e);if(t){return"video/"+t;}return"";}if(!e.type){t=r(e.src);}else{t=e.type.replace(/;.*/,"").toLowerCase();}return j.nativeSourceHandler.canPlayType(t);};j.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src);};j.nativeSourceHandler.dispose=function(){};j.registerSourceHandler(j.nativeSourceHandler);j.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};j.onReady=function(e){var t=c.getEl(e);var r=t&&t.tech;if(r&&r.el()){j.checkReady(r);}};j.checkReady=function(e){if(!e.el()){return;}if(e.el().vjs_getProperty){e.triggerReady();}else{this.setTimeout(function(){j["checkReady"](e);},50);}};j.onEvent=function(e,t){var r=c.getEl(e).tech;r.trigger(t);};j.onError=function(e,t){var r=c.getEl(e).tech;if(t==="srcnotfound"){return r.error(4);}r.error("FLASH: "+t);};j.version=function(){var e="0,0,0";try{e=new _["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}catch(t){try{if(T.mimeTypes["application/x-shockwave-flash"].enabledPlugin){e=(T.plugins["Shockwave Flash 2.0"]||T.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}}catch(e){}}return e.split(",");};j.embed=function(e,t,r,n){var i=j.getEmbedCode(e,t,r,n);var o=c.createEl("div",{innerHTML:i}).childNodes[0];return o;};j.getEmbedCode=function(e,t,r,n){var i='<object type="application/x-shockwave-flash" ';var o="";var s="";var a="";if(t){Object.getOwnPropertyNames(t).forEach(function(e){o+=e+"="+t[e]+"&amp;";});}r=w["default"]({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},r);Object.getOwnPropertyNames(r).forEach(function(e){s+='<param name="'+e+'" value="'+r[e]+'" />';});n=w["default"]({data:e,width:"100%",height:"100%"},n);Object.getOwnPropertyNames(n).forEach(function(e){a+=e+'="'+n[e]+'" ';});return""+i+a+">"+s+"</object>";};v["default"](j);m["default"].registerComponent("Flash",j);u["default"].registerTech("Flash",j);r["default"]=j;t.exports=r["default"];},{"../component":65,"../utils/dom.js":126,"../utils/time-ranges.js":134,"../utils/url.js":136,"./flash-rtmp":111,"./tech":115,"global/window":2,"object.assign":45}],113:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("./tech.js");var u=i(a);var l=e("../component");var c=i(l);var f=e("../utils/dom.js");var d=n(f);var p=e("../utils/url.js");var h=n(p);var v=e("../utils/fn.js");var y=n(v);var m=e("../utils/log.js");var g=i(m);var _=e("../utils/browser.js");var b=n(_);var w=e("global/document");var T=i(w);var j=e("global/window");var k=i(j);var E=e("object.assign");var C=i(E);var x=e("../utils/merge-options.js");var S=i(x);var O=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);var i=r.source;if(i&&(this.el_.currentSrc!==i.src||r.tag&&r.tag.initNetworkState_===3)){this.setSource(i);}else{this.handleLateInit_(this.el_);}if(this.el_.hasChildNodes()){var s=this.el_.childNodes;var a=s.length;var u=[];while(a--){var l=s[a];var c=l.nodeName.toLowerCase();if(c==="track"){if(!this.featuresNativeTextTracks){u.push(l);}else{this.remoteTextTracks().addTrack_(l.track);}}}for(var f=0;f<u.length;f++){this.el_.removeChild(u[f]);}}if(this.featuresNativeTextTracks){this.handleTextTrackChange_=y.bind(this,this.handleTextTrackChange);this.handleTextTrackAdd_=y.bind(this,this.handleTextTrackAdd);this.handleTextTrackRemove_=y.bind(this,this.handleTextTrackRemove);this.proxyNativeTextTracks_();}if(b.TOUCH_ENABLED&&r.nativeControlsForTouch===true||b.IS_IPHONE||b.IS_NATIVE_ANDROID){this.setControls(true);}this.triggerReady();}t.prototype.dispose=function r(){var n=this.el().textTracks;var i=this.textTracks();if(n&&n.removeEventListener){n.removeEventListener("change",this.handleTextTrackChange_);n.removeEventListener("addtrack",this.handleTextTrackAdd_);n.removeEventListener("removetrack",this.handleTextTrackRemove_);}var o=i.length;while(o--){i.removeTrack_(i[o]);}t.disposeMediaElement(this.el_);e.prototype.dispose.call(this);};t.prototype.createEl=function e(){var r=this.options_.tag;if(!r||this["movingMediaElementInDOM"]===false){if(r){var n=r.cloneNode(true);r.parentNode.insertBefore(n,r);t.disposeMediaElement(r);r=n;}else{r=T["default"].createElement("video");var i=this.options_.tag&&d.getElAttributes(this.options_.tag);var o=S["default"]({},i);if(!b.TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete o.controls;}d.setElAttributes(r,C["default"](o,{id:this.options_.techId,class:"vjs-tech"}));}}var s=["autoplay","preload","loop","muted"];for(var a=s.length-1;a>=0;a--){var u=s[a];var l={};if(typeof this.options_[u]!=="undefined"){l[u]=this.options_[u];}d.setElAttributes(r,l);}return r;};t.prototype.handleLateInit_=function e(t){var r=this;if(t.networkState===0||t.networkState===3){return;}if(t.readyState===0){var n=function(){var e=false;var t=function t(){e=true;};r.on("loadstart",t);var n=function t(){if(!e){this.trigger("loadstart");}};r.on("loadedmetadata",n);r.ready(function(){this.off("loadstart",t);this.off("loadedmetadata",n);if(!e){this.trigger("loadstart");}});return{v:undefined};}();if((typeof n==="undefined"?"undefined":_typeof(n))==="object")return n.v;}var i=["loadstart"];i.push("loadedmetadata");if(t.readyState>=2){i.push("loadeddata");}if(t.readyState>=3){i.push("canplay");}if(t.readyState>=4){i.push("canplaythrough");}this.ready(function(){i.forEach(function(e){this.trigger(e);},this);});};t.prototype.proxyNativeTextTracks_=function e(){var t=this.el().textTracks;if(t&&t.addEventListener){t.addEventListener("change",this.handleTextTrackChange_);t.addEventListener("addtrack",this.handleTextTrackAdd_);t.addEventListener("removetrack",this.handleTextTrackRemove_);}};t.prototype.handleTextTrackChange=function e(t){var r=this.textTracks();this.textTracks().trigger({type:"change",target:r,currentTarget:r,srcElement:r});};t.prototype.handleTextTrackAdd=function e(t){this.textTracks().addTrack_(t.track);};t.prototype.handleTextTrackRemove=function e(t){this.textTracks().removeTrack_(t.track);};t.prototype.play=function e(){this.el_.play();};t.prototype.pause=function e(){this.el_.pause();};t.prototype.paused=function e(){return this.el_.paused;};t.prototype.currentTime=function e(){return this.el_.currentTime;};t.prototype.setCurrentTime=function e(t){try{this.el_.currentTime=t;}catch(e){g["default"](e,"Video is not ready. (Video.js)");}};t.prototype.duration=function e(){return this.el_.duration||0;};t.prototype.buffered=function e(){return this.el_.buffered;};t.prototype.volume=function e(){return this.el_.volume;};t.prototype.setVolume=function e(t){this.el_.volume=t;};t.prototype.muted=function e(){return this.el_.muted;};t.prototype.setMuted=function e(t){this.el_.muted=t;};t.prototype.width=function e(){return this.el_.offsetWidth;};t.prototype.height=function e(){return this.el_.offsetHeight;};t.prototype.supportsFullScreen=function e(){if(typeof this.el_.webkitEnterFullScreen==="function"){var t=k["default"].navigator.userAgent;if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t)){return true;}}return false;};t.prototype.enterFullScreen=function e(){var t=this.el_;if("webkitDisplayingFullscreen"in t){this.one("webkitbeginfullscreen",function(){this.one("webkitendfullscreen",function(){this.trigger("fullscreenchange",{isFullscreen:false});});this.trigger("fullscreenchange",{isFullscreen:true});});}if(t.paused&&t.networkState<=t.HAVE_METADATA){this.el_.play();this.setTimeout(function(){t.pause();t.webkitEnterFullScreen();},0);}else{t.webkitEnterFullScreen();}};t.prototype.exitFullScreen=function e(){this.el_.webkitExitFullScreen();};t.prototype.src=function e(t){if(t===undefined){return this.el_.src;}else{this.setSrc(t);}};t.prototype.setSrc=function e(t){this.el_.src=t;};t.prototype.load=function e(){this.el_.load();};t.prototype.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src;}else{return this.el_.currentSrc;}};t.prototype.poster=function e(){return this.el_.poster;};t.prototype.setPoster=function e(t){this.el_.poster=t;};t.prototype.preload=function e(){return this.el_.preload;};t.prototype.setPreload=function e(t){this.el_.preload=t;};t.prototype.autoplay=function e(){return this.el_.autoplay;};t.prototype.setAutoplay=function e(t){this.el_.autoplay=t;};t.prototype.controls=function e(){return this.el_.controls;};t.prototype.setControls=function e(t){this.el_.controls=!!t;};t.prototype.loop=function e(){return this.el_.loop;};t.prototype.setLoop=function e(t){this.el_.loop=t;};t.prototype.error=function e(){return this.el_.error;};t.prototype.seeking=function e(){return this.el_.seeking;};t.prototype.seekable=function e(){return this.el_.seekable;};t.prototype.ended=function e(){return this.el_.ended;};t.prototype.defaultMuted=function e(){return this.el_.defaultMuted;};t.prototype.playbackRate=function e(){return this.el_.playbackRate;};t.prototype.played=function e(){return this.el_.played;};t.prototype.setPlaybackRate=function e(t){this.el_.playbackRate=t;};t.prototype.networkState=function e(){return this.el_.networkState;};t.prototype.readyState=function e(){return this.el_.readyState;};t.prototype.videoWidth=function e(){return this.el_.videoWidth;};t.prototype.videoHeight=function e(){return this.el_.videoHeight;};t.prototype.textTracks=function t(){return e.prototype.textTracks.call(this);};t.prototype.addTextTrack=function t(r,n,i){if(!this["featuresNativeTextTracks"]){return e.prototype.addTextTrack.call(this,r,n,i);}return this.el_.addTextTrack(r,n,i);};t.prototype.addRemoteTextTrack=function t(){var r=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];if(!this["featuresNativeTextTracks"]){return e.prototype.addRemoteTextTrack.call(this,r);}var n=T["default"].createElement("track");if(r["kind"]){n["kind"]=r["kind"];}if(r["label"]){n["label"]=r["label"];}if(r["language"]||r["srclang"]){n["srclang"]=r["language"]||r["srclang"];}if(r["default"]){n["default"]=r["default"];}if(r["id"]){n["id"]=r["id"];}if(r["src"]){n["src"]=r["src"];}this.el().appendChild(n);this.remoteTextTracks().addTrack_(n.track);return n;};t.prototype.removeRemoteTextTrack=function t(r){if(!this["featuresNativeTextTracks"]){return e.prototype.removeRemoteTextTrack.call(this,r);}var n,i;this.remoteTextTracks().removeTrack_(r);n=this.$$("track");i=n.length;while(i--){if(r===n[i]||r===n[i].track){this.el().removeChild(n[i]);}}};return t;}(u["default"]);O.TEST_VID=T["default"].createElement("video");var P=T["default"].createElement("track");P.kind="captions";P.srclang="en";P.label="English";O.TEST_VID.appendChild(P);O.isSupported=function(){try{O.TEST_VID["volume"]=.5;}catch(e){return false;}return!!O.TEST_VID.canPlayType;};u["default"].withSourceHandlers(O);O.nativeSourceHandler={};O.nativeSourceHandler.canPlayType=function(e){try{return O.TEST_VID.canPlayType(e);}catch(e){return"";}};O.nativeSourceHandler.canHandleSource=function(e){var t,r;if(e.type){return O.nativeSourceHandler.canPlayType(e.type);}else if(e.src){r=h.getFileExtension(e.src);return O.nativeSourceHandler.canPlayType("video/"+r);}return"";};O.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src);};O.nativeSourceHandler.dispose=function(){};O.registerSourceHandler(O.nativeSourceHandler);O.canControlVolume=function(){var e=O.TEST_VID.volume;O.TEST_VID.volume=e/2+.1;return e!==O.TEST_VID.volume;};O.canControlPlaybackRate=function(){var e=O.TEST_VID.playbackRate;O.TEST_VID.playbackRate=e/2+.1;return e!==O.TEST_VID.playbackRate;};O.supportsNativeTextTracks=function(){var e;e=!!O.TEST_VID.textTracks;if(e&&O.TEST_VID.textTracks.length>0){e=typeof O.TEST_VID.textTracks[0]["mode"]!=="number";}if(e&&b.IS_FIREFOX){e=false;}if(e&&!("onremovetrack"in O.TEST_VID.textTracks)){e=false;}return e;};O.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"];O.prototype["featuresVolumeControl"]=O.canControlVolume();O.prototype["featuresPlaybackRate"]=O.canControlPlaybackRate();O.prototype["movingMediaElementInDOM"]=!b.IS_IOS;O.prototype["featuresFullscreenResize"]=true;O.prototype["featuresProgressEvents"]=true;O.prototype["featuresNativeTextTracks"]=O.supportsNativeTextTracks();var A=undefined;var M=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;var I=/^video\/mp4/i;O.patchCanPlayType=function(){if(b.ANDROID_VERSION>=4){if(!A){A=O.TEST_VID.constructor.prototype.canPlayType;}O.TEST_VID.constructor.prototype.canPlayType=function(e){if(e&&M.test(e)){return"maybe";}return A.call(this,e);};}if(b.IS_OLD_ANDROID){if(!A){A=O.TEST_VID.constructor.prototype.canPlayType;}O.TEST_VID.constructor.prototype.canPlayType=function(e){if(e&&I.test(e)){return"maybe";}return A.call(this,e);};}};O.unpatchCanPlayType=function(){var e=O.TEST_VID.constructor.prototype.canPlayType;O.TEST_VID.constructor.prototype.canPlayType=A;A=null;return e;};O.patchCanPlayType();O.disposeMediaElement=function(e){if(!e){return;}if(e.parentNode){e.parentNode.removeChild(e);}while(e.hasChildNodes()){e.removeChild(e.firstChild);}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load();}catch(e){}})();}};c["default"].registerComponent("Html5",O);u["default"].registerTech("Html5",O);r["default"]=O;t.exports=r["default"];},{"../component":65,"../utils/browser.js":123,"../utils/dom.js":126,"../utils/fn.js":128,"../utils/log.js":131,"../utils/merge-options.js":132,"../utils/url.js":136,"./tech.js":115,"global/document":1,"global/window":2,"object.assign":45}],114:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function o(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var s=e("../component.js");var a=n(s);var u=e("./tech.js");var l=n(u);var c=e("global/window");var f=n(c);var d=e("../utils/to-title-case.js");var p=n(d);var h=function(e){o(t,e);function t(r,n,o){i(this,t);e.call(this,r,n,o);if(!n.playerOptions["sources"]||n.playerOptions["sources"].length===0){for(var s=0,u=n.playerOptions["techOrder"];s<u.length;s++){var c=p["default"](u[s]);var f=l["default"].getTech(c);if(!c){f=a["default"].getComponent(c);}if(f&&f.isSupported()){r.loadTech_(c);break;}}}else{r.src(n.playerOptions["sources"]);}}return t;}(a["default"]);a["default"].registerComponent("MediaLoader",h);r["default"]=h;t.exports=r["default"];},{"../component.js":65,"../utils/to-title-case.js":135,"./tech.js":115,"global/window":2}],115:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../component");var u=i(a);var l=e("../tracks/text-track");var c=i(l);var f=e("../tracks/text-track-list");var d=i(f);var p=e("../utils/fn.js");var h=n(p);var v=e("../utils/log.js");var y=i(v);var m=e("../utils/time-ranges.js");var g=e("../utils/buffer.js");var _=e("../media-error.js");var b=i(_);var w=e("global/window");var T=i(w);var j=e("global/document");var k=i(j);var E=function(e){s(t,e);function t(){var r=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var n=arguments.length<=1||arguments[1]===undefined?function(){}:arguments[1];o(this,t);r.reportTouchActivity=false;e.call(this,null,r,n);this.hasStarted_=false;this.on("playing",function(){this.hasStarted_=true;});this.on("loadstart",function(){this.hasStarted_=false;});this.textTracks_=r.textTracks;if(!this.featuresProgressEvents){this.manualProgressOn();}if(!this.featuresTimeupdateEvents){this.manualTimeUpdatesOn();}if(r.nativeCaptions===false||r.nativeTextTracks===false){this.featuresNativeTextTracks=false;}if(!this.featuresNativeTextTracks){this.on("ready",this.emulateTextTracks);}this.initTextTrackListeners();this.emitTapEvents();}t.prototype.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress);};t.prototype.manualProgressOff=function e(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange);};t.prototype.trackProgress=function e(){this.stopTrackingProgress();this.progressInterval=this.setInterval(h.bind(this,function(){var e=this.bufferedPercent();if(this.bufferedPercent_!==e){this.trigger("progress");}this.bufferedPercent_=e;if(e===1){this.stopTrackingProgress();}}),500);};t.prototype.onDurationChange=function e(){this.duration_=this.duration();};t.prototype.buffered=function e(){return m.createTimeRange(0,0);};t.prototype.bufferedPercent=function e(){return g.bufferedPercent(this.buffered(),this.duration_);};t.prototype.stopTrackingProgress=function e(){this.clearInterval(this.progressInterval);};t.prototype.manualTimeUpdatesOn=function e(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime);};t.prototype.manualTimeUpdatesOff=function e(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime);};t.prototype.trackCurrentTime=function e(){if(this.currentTimeInterval){this.stopTrackingCurrentTime();}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});},250);};t.prototype.stopTrackingCurrentTime=function e(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});};t.prototype.dispose=function t(){var r=this.textTracks();if(r){var n=r.length;while(n--){this.removeRemoteTextTrack(r[n]);}}if(this.manualProgress){this.manualProgressOff();}if(this.manualTimeUpdates){this.manualTimeUpdatesOff();}e.prototype.dispose.call(this);};t.prototype.error=function e(t){if(t!==undefined){if(t instanceof b["default"]){this.error_=t;}else{this.error_=new b["default"](t);}this.trigger("error");}return this.error_;};t.prototype.played=function e(){if(this.hasStarted_){return m.createTimeRange(0,0);}return m.createTimeRange();};t.prototype.setCurrentTime=function e(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});}};t.prototype.initTextTrackListeners=function e(){var t=h.bind(this,function(){this.trigger("texttrackchange");});var r=this.textTracks();if(!r)return;r.addEventListener("removetrack",t);r.addEventListener("addtrack",t);this.on("dispose",h.bind(this,function(){r.removeEventListener("removetrack",t);r.removeEventListener("addtrack",t);}));};t.prototype.emulateTextTracks=function e(){var t=this;var r=this.textTracks();if(!r){return;}if(!T["default"]["WebVTT"]&&this.el().parentNode!=null){var n=k["default"].createElement("script");n.src=this.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js";this.el().parentNode.appendChild(n);T["default"]["WebVTT"]=true;}var i=function e(){return t.trigger("texttrackchange");};var o=function e(){i();for(var t=0;t<r.length;t++){var n=r[t];n.removeEventListener("cuechange",i);if(n.mode==="showing"){n.addEventListener("cuechange",i);}}};o();r.addEventListener("change",o);this.on("dispose",function(){r.removeEventListener("change",o);});};t.prototype.textTracks=function e(){this.textTracks_=this.textTracks_||new d["default"]();return this.textTracks_;};t.prototype.remoteTextTracks=function e(){this.remoteTextTracks_=this.remoteTextTracks_||new d["default"]();return this.remoteTextTracks_;};t.prototype.addTextTrack=function e(t,r,n){if(!t){throw new Error("TextTrack kind is required but was not provided");}return C(this,t,r,n);};t.prototype.addRemoteTextTrack=function e(t){var r=C(this,t.kind,t.label,t.language,t);this.remoteTextTracks().addTrack_(r);return{track:r};};t.prototype.removeRemoteTextTrack=function e(t){this.textTracks().removeTrack_(t);this.remoteTextTracks().removeTrack_(t);};t.prototype.setPoster=function e(){};t.prototype.canPlayType=function e(){return"";};t.isTech=function e(r){return r.prototype instanceof t||r instanceof t||r===t;};t.registerTech=function e(r,n){if(!t.techs_){t.techs_={};}if(!t.isTech(n)){throw new Error("Tech "+r+" must be a Tech");}t.techs_[r]=n;return n;};t.getTech=function e(r){if(t.techs_&&t.techs_[r]){return t.techs_[r];}if(T["default"]&&T["default"].videojs&&T["default"].videojs[r]){y["default"].warn("The "+r+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return T["default"].videojs[r];}};return t;}(u["default"]);E.prototype.textTracks_;var C=function e(t,r,n,i){var o=arguments.length<=4||arguments[4]===undefined?{}:arguments[4];var s=t.textTracks();o.kind=r;if(n){o.label=n;}if(i){o.language=i;}o.tech=t;var a=new c["default"](o);s.addTrack_(a);return a;};E.prototype.featuresVolumeControl=true;E.prototype.featuresFullscreenResize=false;E.prototype.featuresPlaybackRate=false;E.prototype.featuresProgressEvents=false;E.prototype.featuresTimeupdateEvents=false;E.prototype.featuresNativeTextTracks=false;E.withSourceHandlers=function(e){e.registerSourceHandler=function(t,r){var n=e.sourceHandlers;if(!n){n=e.sourceHandlers=[];}if(r===undefined){r=n.length;}n.splice(r,0,t);};e.canPlayType=function(t){var r=e.sourceHandlers||[];var n=undefined;for(var i=0;i<r.length;i++){n=r[i].canPlayType(t);if(n){return n;}}return"";};e.selectSourceHandler=function(t){var r=e.sourceHandlers||[];var n=undefined;for(var i=0;i<r.length;i++){n=r[i].canHandleSource(t);if(n){return r[i];}}return null;};e.canPlaySource=function(t){var r=e.selectSourceHandler(t);if(r){return r.canHandleSource(t);}return"";};var t=["seekable","duration"];t.forEach(function(e){var t=this[e];if(typeof t!=="function"){return;}this[e]=function(){if(this.sourceHandler_&&this.sourceHandler_[e]){return this.sourceHandler_[e].apply(this.sourceHandler_,arguments);}return t.apply(this,arguments);};},e.prototype);e.prototype.setSource=function(t){var r=e.selectSourceHandler(t);if(!r){if(e.nativeSourceHandler){r=e.nativeSourceHandler;}else{y["default"].error("No source hander found for the current source.");}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);this.currentSource_=t;this.sourceHandler_=r.handleSource(t,this);this.on("dispose",this.disposeSourceHandler);return this;};e.prototype.disposeSourceHandler=function(){if(this.sourceHandler_&&this.sourceHandler_.dispose){this.sourceHandler_.dispose();}};};u["default"].registerComponent("Tech",E);u["default"].registerComponent("MediaTechController",E);E.registerTech("Tech",E);r["default"]=E;t.exports=r["default"];},{"../component":65,"../media-error.js":101,"../tracks/text-track":122,"../tracks/text-track-list":120,"../utils/buffer.js":124,"../utils/fn.js":128,"../utils/log.js":131,"../utils/time-ranges.js":134,"global/document":1,"global/window":2}],116:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}function i(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}var o=e("../utils/browser.js");var s=i(o);var a=e("global/document");var u=n(a);var l=function e(t){var r=this;if(s.IS_IE8){r=u["default"].createElement("custom");for(var n in e.prototype){if(n!=="constructor"){r[n]=e.prototype[n];}}}e.prototype.setCues_.call(r,t);Object.defineProperty(r,"length",{get:function e(){return this.length_;}});if(s.IS_IE8){return r;}};l.prototype.setCues_=function(e){var t=this.length||0;var r=0;var n=e.length;this.cues_=e;this.length_=e.length;var i=function e(t){if(!(""+t in this)){Object.defineProperty(this,""+t,{get:function e(){return this.cues_[t];}});}};if(t<n){r=t;for(;r<n;r++){i.call(this,r);}}};l.prototype.getCueById=function(e){var t=null;for(var r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break;}}return t;};r["default"]=l;t.exports=r["default"];},{"../utils/browser.js":123,"global/document":1}],117:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../component");var u=i(a);var l=e("../menu/menu.js");var c=i(l);var f=e("../menu/menu-item.js");var d=i(f);var p=e("../menu/menu-button.js");var h=i(p);var v=e("../utils/fn.js");var y=n(v);var m=e("global/document");var g=i(m);var _=e("global/window");var b=i(_);var w="#222";var T="#ccc";var j={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};var k=function(e){s(t,e);function t(r,n,i){o(this,t);e.call(this,r,n,i);r.on("loadstart",y.bind(this,this.toggleDisplay));r.on("texttrackchange",y.bind(this,this.updateDisplay));r.ready(y.bind(this,function(){if(r.tech_&&r.tech_["featuresNativeTextTracks"]){this.hide();return;}r.on("fullscreenchange",y.bind(this,this.updateDisplay));var e=this.options_.playerOptions["tracks"]||[];for(var t=0;t<e.length;t++){var n=e[t];this.player_.addRemoteTextTrack(n);}}));}t.prototype.toggleDisplay=function e(){if(this.player_.tech_&&this.player_.tech_["featuresNativeTextTracks"]){this.hide();}else{this.show();}};t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"});};t.prototype.clearDisplay=function e(){if(typeof b["default"]["WebVTT"]==="function"){b["default"]["WebVTT"]["processCues"](b["default"],[],this.el_);}};t.prototype.updateDisplay=function e(){var t=this.player_.textTracks();this.clearDisplay();if(!t){return;}for(var r=0;r<t.length;r++){var n=t[r];if(n["mode"]==="showing"){this.updateForTrack(n);}}};t.prototype.updateForTrack=function e(t){if(typeof b["default"]["WebVTT"]!=="function"||!t["activeCues"]){return;}var r=this.player_["textTrackSettings"].getValues();var n=[];for(var i=0;i<t["activeCues"].length;i++){n.push(t["activeCues"][i]);}b["default"]["WebVTT"]["processCues"](b["default"],t["activeCues"],this.el_);var o=n.length;while(o--){var s=n[o].displayState;if(r.color){s.firstChild.style.color=r.color;}if(r.textOpacity){C(s.firstChild,"color",E(r.color||"#fff",r.textOpacity));}if(r.backgroundColor){s.firstChild.style.backgroundColor=r.backgroundColor;}if(r.backgroundOpacity){C(s.firstChild,"backgroundColor",E(r.backgroundColor||"#000",r.backgroundOpacity));}if(r.windowColor){if(r.windowOpacity){C(s,"backgroundColor",E(r.windowColor,r.windowOpacity));}else{s.style.backgroundColor=r.windowColor;}}if(r.edgeStyle){if(r.edgeStyle==="dropshadow"){s.firstChild.style.textShadow="2px 2px 3px "+w+", 2px 2px 4px "+w+", 2px 2px 5px "+w;}else if(r.edgeStyle==="raised"){s.firstChild.style.textShadow="1px 1px "+w+", 2px 2px "+w+", 3px 3px "+w;}else if(r.edgeStyle==="depressed"){s.firstChild.style.textShadow="1px 1px "+T+", 0 1px "+T+", -1px -1px "+w+", 0 -1px "+w;}else if(r.edgeStyle==="uniform"){s.firstChild.style.textShadow="0 0 4px "+w+", 0 0 4px "+w+", 0 0 4px "+w+", 0 0 4px "+w;}}if(r.fontPercent&&r.fontPercent!==1){var a=b["default"].parseFloat(s.style.fontSize);s.style.fontSize=a*r.fontPercent+"px";s.style.height="auto";s.style.top="auto";s.style.bottom="2px";}if(r.fontFamily&&r.fontFamily!=="default"){if(r.fontFamily==="small-caps"){s.firstChild.style.fontVariant="small-caps";}else{s.firstChild.style.fontFamily=j[r.fontFamily];}}}};return t;}(u["default"]);function E(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")";}function C(e,t,r){try{e.style[t]=r;}catch(e){}}u["default"].registerComponent("TextTrackDisplay",k);r["default"]=k;t.exports=r["default"];},{"../component":65,"../menu/menu-button.js":102,"../menu/menu-item.js":103,"../menu/menu.js":104,"../utils/fn.js":128,"global/document":1,"global/window":2}],118:[function(e,t,r){"use strict";r.__esModule=true;var n={disabled:"disabled",hidden:"hidden",showing:"showing"};var i={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};r.TextTrackMode=n;r.TextTrackKind=i;},{}],119:[function(e,t,r){"use strict";r.__esModule=true;var n=function e(t){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,r,n){if(t[r]){e[r]=t[r];}return e;},{cues:t.cues&&Array.prototype.map.call(t.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id};})});return r;};var i=function e(t){var r=t.$$("track");var i=Array.prototype.map.call(r,function(e){return e.track;});var o=Array.prototype.map.call(r,function(e){var t=n(e.track);if(e.src){t.src=e.src;}return t;});return o.concat(Array.prototype.filter.call(t.textTracks(),function(e){return i.indexOf(e)===-1;}).map(n));};var o=function e(t,r){t.forEach(function(e){var t=r.addRemoteTextTrack(e).track;if(!e.src&&e.cues){e.cues.forEach(function(e){return t.addCue(e);});}});return r.textTracks();};r["default"]={textTracksToJson:i,jsonToTextTracks:o,trackToJson_:n};t.exports=r["default"];},{}],120:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}var o=e("../event-target");var s=i(o);var a=e("../utils/fn.js");var u=n(a);var l=e("../utils/browser.js");var c=n(l);var f=e("global/document");var d=i(f);var p=function e(t){var r=this;if(c.IS_IE8){r=d["default"].createElement("custom");for(var n in e.prototype){if(n!=="constructor"){r[n]=e.prototype[n];}}}t=t||[];r.tracks_=[];Object.defineProperty(r,"length",{get:function e(){return this.tracks_.length;}});for(var i=0;i<t.length;i++){r.addTrack_(t[i]);}if(c.IS_IE8){return r;}};p.prototype=Object.create(s["default"].prototype);p.prototype.constructor=p;p.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var h in p.prototype.allowedEvents_){p.prototype["on"+h]=null;}p.prototype.addTrack_=function(e){var t=this.tracks_.length;if(!(""+t in this)){Object.defineProperty(this,t,{get:function e(){return this.tracks_[t];}});}e.addEventListener("modechange",u.bind(this,function(){this.trigger("change");}));this.tracks_.push(e);this.trigger({type:"addtrack",track:e});};p.prototype.removeTrack_=function(e){var t=null;var r=undefined;for(var n=0,i=this.length;n<i;n++){r=this[n];if(r===e){this.tracks_.splice(n,1);break;}}this.trigger({type:"removetrack",track:r});};p.prototype.getTrackById=function(e){var t=null;for(var r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break;}}return t;};r["default"]=p;t.exports=r["default"];},{"../event-target":97,"../utils/browser.js":123,"../utils/fn.js":128,"global/document":1}],121:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");}}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":_typeof(t)));}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;}var a=e("../component");var u=i(a);var l=e("../utils/events.js");var c=n(l);var f=e("../utils/fn.js");var d=n(f);var p=e("../utils/log.js");var h=i(p);var v=e("safe-json-parse/tuple");var y=i(v);var m=e("global/window");var g=i(m);var _=function(e){s(t,e);function t(r,n){o(this,t);e.call(this,r,n);this.hide();if(n.persistTextTrackSettings===undefined){this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings;}c.on(this.$(".vjs-done-button"),"click",d.bind(this,function(){this.saveSettings();this.hide();}));c.on(this.$(".vjs-default-button"),"click",d.bind(this,function(){this.$(".vjs-fg-color > select").selectedIndex=0;this.$(".vjs-bg-color > select").selectedIndex=0;this.$(".window-color > select").selectedIndex=0;this.$(".vjs-text-opacity > select").selectedIndex=0;this.$(".vjs-bg-opacity > select").selectedIndex=0;this.$(".vjs-window-opacity > select").selectedIndex=0;this.$(".vjs-edge-style select").selectedIndex=0;this.$(".vjs-font-family select").selectedIndex=0;this.$(".vjs-font-percent select").selectedIndex=2;this.updateDisplay();}));c.on(this.$(".vjs-fg-color > select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".vjs-bg-color > select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".window-color > select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".vjs-text-opacity > select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".vjs-bg-opacity > select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".vjs-window-opacity > select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".vjs-font-percent select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".vjs-edge-style select"),"change",d.bind(this,this.updateDisplay));c.on(this.$(".vjs-font-family select"),"change",d.bind(this,this.updateDisplay));if(this.options_.persistTextTrackSettings){this.restoreSettings();}}t.prototype.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:T()});};t.prototype.getValues=function e(){var t=b(this.$(".vjs-edge-style select"));var r=b(this.$(".vjs-font-family select"));var n=b(this.$(".vjs-fg-color > select"));var i=b(this.$(".vjs-text-opacity > select"));var o=b(this.$(".vjs-bg-color > select"));var s=b(this.$(".vjs-bg-opacity > select"));var a=b(this.$(".window-color > select"));var u=b(this.$(".vjs-window-opacity > select"));var l=g["default"]["parseFloat"](b(this.$(".vjs-font-percent > select")));var c={backgroundOpacity:s,textOpacity:i,windowOpacity:u,edgeStyle:t,fontFamily:r,color:n,backgroundColor:o,windowColor:a,fontPercent:l};for(var f in c){if(c[f]===""||c[f]==="none"||f==="fontPercent"&&c[f]===1){delete c[f];}}return c;};t.prototype.setValues=function e(t){w(this.$(".vjs-edge-style select"),t.edgeStyle);w(this.$(".vjs-font-family select"),t.fontFamily);w(this.$(".vjs-fg-color > select"),t.color);w(this.$(".vjs-text-opacity > select"),t.textOpacity);w(this.$(".vjs-bg-color > select"),t.backgroundColor);w(this.$(".vjs-bg-opacity > select"),t.backgroundOpacity);w(this.$(".window-color > select"),t.windowColor);w(this.$(".vjs-window-opacity > select"),t.windowOpacity);var r=t.fontPercent;if(r){r=r.toFixed(2);}w(this.$(".vjs-font-percent > select"),r);};t.prototype.restoreSettings=function e(){var t=y["default"](g["default"].localStorage.getItem("vjs-text-track-settings"));var r=t[0];var n=t[1];if(r){h["default"].error(r);}if(n){this.setValues(n);}};t.prototype.saveSettings=function e(){if(!this.options_.persistTextTrackSettings){return;}var t=this.getValues();try{if(Object.getOwnPropertyNames(t).length>0){g["default"].localStorage.setItem("vjs-text-track-settings",JSON.stringify(t));}else{g["default"].localStorage.removeItem("vjs-text-track-settings");}}catch(e){}};t.prototype.updateDisplay=function e(){var t=this.player_.getChild("textTrackDisplay");if(t){t.updateDisplay();}};return t;}(u["default"]);u["default"].registerComponent("TextTrackSettings",_);function b(e){var t=undefined;if(e.selectedOptions){t=e.selectedOptions[0];}else if(e.options){t=e.options[e.options.selectedIndex];}return t.value;}function w(e,t){if(!t){return;}var r=undefined;for(r=0;r<e.options.length;r++){var n=e.options[r];if(n.value===t){break;}}e.selectedIndex=r;}function T(){var e='<div class="vjs-tracksettings">\n      <div class="vjs-tracksettings-colors">\n        <div class="vjs-fg-color vjs-tracksetting">\n            <label class="vjs-label">Foreground</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-text-opacity vjs-opacity">\n              <select>\n                <option value="">---</option>\n                <option value="1">Opaque</option>\n                <option value="0.5">Semi-Opaque</option>\n              </select>\n            </span>\n        </div> \x3c!-- vjs-fg-color --\x3e\n        <div class="vjs-bg-color vjs-tracksetting">\n            <label class="vjs-label">Background</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-bg-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> \x3c!-- vjs-bg-color --\x3e\n        <div class="window-color vjs-tracksetting">\n            <label class="vjs-label">Window</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-window-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> \x3c!-- vjs-window-color --\x3e\n      </div> \x3c!-- vjs-tracksettings --\x3e\n      <div class="vjs-tracksettings-font">\n        <div class="vjs-font-percent vjs-tracksetting">\n          <label class="vjs-label">Font Size</label>\n          <select>\n            <option value="0.50">50%</option>\n            <option value="0.75">75%</option>\n            <option value="1.00" selected>100%</option>\n            <option value="1.25">125%</option>\n            <option value="1.50">150%</option>\n            <option value="1.75">175%</option>\n            <option value="2.00">200%</option>\n            <option value="3.00">300%</option>\n            <option value="4.00">400%</option>\n          </select>\n        </div> \x3c!-- vjs-font-percent --\x3e\n        <div class="vjs-edge-style vjs-tracksetting">\n          <label class="vjs-label">Text Edge Style</label>\n          <select>\n            <option value="none">None</option>\n            <option value="raised">Raised</option>\n            <option value="depressed">Depressed</option>\n            <option value="uniform">Uniform</option>\n            <option value="dropshadow">Dropshadow</option>\n          </select>\n        </div> \x3c!-- vjs-edge-style --\x3e\n        <div class="vjs-font-family vjs-tracksetting">\n          <label class="vjs-label">Font Family</label>\n          <select>\n            <option value="">Default</option>\n            <option value="monospaceSerif">Monospace Serif</option>\n            <option value="proportionalSerif">Proportional Serif</option>\n            <option value="monospaceSansSerif">Monospace Sans-Serif</option>\n            <option value="proportionalSansSerif">Proportional Sans-Serif</option>\n            <option value="casual">Casual</option>\n            <option value="script">Script</option>\n            <option value="small-caps">Small Caps</option>\n          </select>\n        </div> \x3c!-- vjs-font-family --\x3e\n      </div>\n    </div>\n    <div class="vjs-tracksettings-controls">\n      <button class="vjs-default-button">Defaults</button>\n      <button class="vjs-done-button">Done</button>\n    </div>';return e;}r["default"]=_;t.exports=r["default"];},{"../component":65,"../utils/events.js":127,"../utils/fn.js":128,"../utils/log.js":131,"global/window":2,"safe-json-parse/tuple":53}],122:[function(e,t,r){"use strict";r.__esModule=true;function n(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function i(e){return e&&e.__esModule?e:{default:e};}var o=e("./text-track-cue-list");var s=i(o);var a=e("../utils/fn.js");var u=n(a);var l=e("../utils/guid.js");var c=n(l);var f=e("../utils/browser.js");var d=n(f);var p=e("./text-track-enums");var h=n(p);var v=e("../utils/log.js");var y=i(v);var m=e("../event-target");var g=i(m);var _=e("global/document");var b=i(_);var w=e("global/window");var T=i(w);var j=e("../utils/url.js");var k=e("xhr");var E=i(k);var C=function e(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];if(!t.tech){throw new Error("A tech was not provided.");}var r=this;if(d.IS_IE8){r=b["default"].createElement("custom");for(var n in e.prototype){r[n]=e.prototype[n];}}r.tech_=t.tech;var i=h.TextTrackMode[t["mode"]]||"disabled";var o=h.TextTrackKind[t["kind"]]||"subtitles";var a=t["label"]||"";var l=t["language"]||t["srclang"]||"";var f=t["id"]||"vjs_text_track_"+c.newGUID();if(o==="metadata"||o==="chapters"){i="hidden";}r.cues_=[];r.activeCues_=[];var p=new s["default"](r.cues_);var v=new s["default"](r.activeCues_);var y=false;var m=u.bind(r,function(){this["activeCues"];if(y){this["trigger"]("cuechange");y=false;}});if(i!=="disabled"){r.tech_.on("timeupdate",m);}Object.defineProperty(r,"kind",{get:function e(){return o;},set:Function.prototype});Object.defineProperty(r,"label",{get:function e(){return a;},set:Function.prototype});Object.defineProperty(r,"language",{get:function e(){return l;},set:Function.prototype});Object.defineProperty(r,"id",{get:function e(){return f;},set:Function.prototype});Object.defineProperty(r,"mode",{get:function e(){return i;},set:function e(t){if(!h.TextTrackMode[t]){return;}i=t;if(i==="showing"){this.tech_.on("timeupdate",m);}this.trigger("modechange");}});Object.defineProperty(r,"cues",{get:function e(){if(!this.loaded_){return null;}return p;},set:Function.prototype});Object.defineProperty(r,"activeCues",{get:function e(){if(!this.loaded_){return null;}if(this["cues"].length===0){return v;}var t=this.tech_.currentTime();var r=[];for(var n=0,i=this["cues"].length;n<i;n++){var o=this["cues"][n];if(o["startTime"]<=t&&o["endTime"]>=t){r.push(o);}else if(o["startTime"]===o["endTime"]&&o["startTime"]<=t&&o["startTime"]+.5>=t){r.push(o);}}y=false;if(r.length!==this.activeCues_.length){y=true;}else{for(var n=0;n<r.length;n++){if(O.call(this.activeCues_,r[n])===-1){y=true;}}}this.activeCues_=r;v.setCues_(this.activeCues_);return v;},set:Function.prototype});if(t.src){r.src=t.src;S(t.src,r);}else{r.loaded_=true;}if(d.IS_IE8){return r;}};C.prototype=Object.create(g["default"].prototype);C.prototype.constructor=C;C.prototype.allowedEvents_={cuechange:"cuechange"};C.prototype.addCue=function(e){var t=this.tech_.textTracks();if(t){for(var r=0;r<t.length;r++){if(t[r]!==this){t[r].removeCue(e);}}}this.cues_.push(e);this["cues"].setCues_(this.cues_);};C.prototype.removeCue=function(e){var t=false;for(var r=0,n=this.cues_.length;r<n;r++){var i=this.cues_[r];if(i===e){this.cues_.splice(r,1);t=true;}}if(t){this.cues.setCues_(this.cues_);}};var x=function e(t,r){if(typeof T["default"]["WebVTT"]!=="function"){return T["default"].setTimeout(function(){e(t,r);},25);}var n=new T["default"]["WebVTT"]["Parser"](T["default"],T["default"]["vttjs"],T["default"]["WebVTT"]["StringDecoder"]());n["oncue"]=function(e){r.addCue(e);};n["onparsingerror"]=function(e){y["default"].error(e);};n["parse"](t);n["flush"]();};var S=function e(t,r){var n={uri:t};var i=j.isCrossOrigin(t);if(i){n.cors=i;}E["default"](n,u.bind(this,function(e,t,n){if(e){return y["default"].error(e,t);}r.loaded_=true;x(n,r);}));};var O=function e(t,r){if(this==null){throw new TypeError('"this" is null or not defined');}var n=Object(this);var i=n.length>>>0;if(i===0){return-1;}var o=+r||0;if(Math.abs(o)===Infinity){o=0;}if(o>=i){return-1;}var s=Math.max(o>=0?o:i-Math.abs(o),0);while(s<i){if(s in n&&n[s]===t){return s;}s++;}return-1;};r["default"]=C;t.exports=r["default"];},{"../event-target":97,"../utils/browser.js":123,"../utils/fn.js":128,"../utils/guid.js":130,"../utils/log.js":131,"../utils/url.js":136,"./text-track-cue-list":116,"./text-track-enums":118,"global/document":1,"global/window":2,xhr:55}],123:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("global/document");var o=n(i);var s=e("global/window");var a=n(s);var u=a["default"].navigator.userAgent;var l=/AppleWebKit\/([\d.]+)/i.exec(u);var c=l?parseFloat(l.pop()):null;var f=/iPhone/i.test(u);r.IS_IPHONE=f;var d=/iPad/i.test(u);r.IS_IPAD=d;var p=/iPod/i.test(u);r.IS_IPOD=p;var h=f||d||p;r.IS_IOS=h;var v=function(){var e=u.match(/OS (\d+)_/i);if(e&&e[1]){return e[1];}}();r.IOS_VERSION=v;var y=/Android/i.test(u);r.IS_ANDROID=y;var m=function(){var e=u.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),t,r;if(!e){return null;}t=e[1]&&parseFloat(e[1]);r=e[2]&&parseFloat(e[2]);if(t&&r){return parseFloat(e[1]+"."+e[2]);}else if(t){return t;}else{return null;}}();r.ANDROID_VERSION=m;var g=y&&/webkit/i.test(u)&&m<2.3;r.IS_OLD_ANDROID=g;var _=y&&m<5&&c<537;r.IS_NATIVE_ANDROID=_;var b=/Firefox/i.test(u);r.IS_FIREFOX=b;var w=/Chrome/i.test(u);r.IS_CHROME=w;var T=/MSIE\s8\.0/.test(u);r.IS_IE8=T;var j=!!("ontouchstart"in a["default"]||a["default"].DocumentTouch&&o["default"]instanceof a["default"].DocumentTouch);r.TOUCH_ENABLED=j;var k="backgroundSize"in o["default"].createElement("video").style;r.BACKGROUND_SIZE_SUPPORTED=k;},{"global/document":1,"global/window":2}],124:[function(e,t,r){"use strict";r.__esModule=true;r.bufferedPercent=i;var n=e("./time-ranges.js");function i(e,t){var r=0,i,o;if(!t){return 0;}if(!e||!e.length){e=n.createTimeRange(0,0);}for(var s=0;s<e.length;s++){i=e.start(s);o=e.end(s);if(o>t){o=t;}r+=o-i;}return r/t;}},{"./time-ranges.js":134}],125:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("./log.js");var o=n(i);var s={get:function e(t,r){return t[r];},set:function e(t,r,n){t[r]=n;return true;}};r["default"]=function(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(typeof Proxy==="function"){var r=function(){var r={};Object.keys(t).forEach(function(e){if(s.hasOwnProperty(e)){r[e]=function(){o["default"].warn(t[e]);return s[e].apply(this,arguments);};}});return{v:new Proxy(e,r)};}();if((typeof r==="undefined"?"undefined":_typeof(r))==="object")return r.v;}return e;};t.exports=r["default"];},{"./log.js":131}],126:[function(e,t,r){"use strict";r.__esModule=true;r.getEl=w;r.createEl=T;r.textContent=j;r.insertElFirst=k;r.getElData=x;r.hasElData=S;r.removeElData=O;r.hasElClass=P;r.addElClass=A;r.removeElClass=M;r.toggleElClass=I;r.setElAttributes=L;r.getElAttributes=R;r.blockTextSelection=B;r.unblockTextSelection=D;r.findElPosition=N;r.getPointerPosition=F;r.isEl=U;r.isTextNode=H;r.emptyEl=V;r.normalizeContent=W;r.appendContent=q;r.insertContent=z;var n=s(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function i(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function o(e){return e&&e.__esModule?e:{default:e};}function s(e,t){e.raw=t;return e;}var a=e("global/document");var u=o(a);var l=e("global/window");var c=o(l);var f=e("./guid.js");var d=i(f);var p=e("./log.js");var h=o(p);var v=e("tsml");var y=o(v);function m(e){return typeof e==="string"&&/\S/.test(e);}function g(e){if(/\s/.test(e)){throw new Error("class has illegal whitespace characters");}}function _(e){return new RegExp("(^|\\s)"+e+"($|\\s)");}function b(e){return function(t,r){if(!m(t)){return u["default"][e](null);}if(m(r)){r=u["default"].querySelector(r);}return(U(r)?r:u["default"])[e](t);};}function w(e){if(e.indexOf("#")===0){e=e.slice(1);}return u["default"].getElementById(e);}function T(){var e=arguments.length<=0||arguments[0]===undefined?"div":arguments[0];var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var r=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var i=u["default"].createElement(e);Object.getOwnPropertyNames(t).forEach(function(e){var r=t[e];if(e.indexOf("aria-")!==-1||e==="role"||e==="type"){h["default"].warn(y["default"](n,e,r));i.setAttribute(e,r);}else{i[e]=r;}});Object.getOwnPropertyNames(r).forEach(function(e){var t=r[e];i.setAttribute(e,r[e]);});return i;}function j(e,t){if(typeof e.textContent==="undefined"){e.innerText=t;}else{e.textContent=t;}}function k(e,t){if(t.firstChild){t.insertBefore(e,t.firstChild);}else{t.appendChild(e);}}var E={};var C="vdata"+new Date().getTime();function x(e){var t=e[C];if(!t){t=e[C]=d.newGUID();}if(!E[t]){E[t]={};}return E[t];}function S(e){var t=e[C];if(!t){return false;}return!!Object.getOwnPropertyNames(E[t]).length;}function O(e){var t=e[C];if(!t){return;}delete E[t];try{delete e[C];}catch(t){if(e.removeAttribute){e.removeAttribute(C);}else{e[C]=null;}}}function P(e,t){if(e.classList){return e.classList.contains(t);}else{g(t);return _(t).test(e.className);}}function A(e,t){if(e.classList){e.classList.add(t);}else if(!P(e,t)){e.className=(e.className+" "+t).trim();}return e;}function M(e,t){if(e.classList){e.classList.remove(t);}else{g(t);e.className=e.className.split(/\s+/).filter(function(e){return e!==t;}).join(" ");}return e;}function I(e,t,r){var n=P(e,t);if(typeof r==="function"){r=r(e,t);}if(typeof r!=="boolean"){r=!n;}if(r===n){return;}if(r){A(e,t);}else{M(e,t);}return e;}function L(e,t){Object.getOwnPropertyNames(t).forEach(function(r){var n=t[r];if(n===null||typeof n==="undefined"||n===false){e.removeAttribute(r);}else{e.setAttribute(r,n===true?"":n);}});}function R(e){var t,r,n,i,o;t={};r=","+"autoplay,controls,loop,muted,default"+",";if(e&&e.attributes&&e.attributes.length>0){n=e.attributes;for(var s=n.length-1;s>=0;s--){i=n[s].name;o=n[s].value;if(typeof e[i]==="boolean"||r.indexOf(","+i+",")!==-1){o=o!==null?true:false;}t[i]=o;}}return t;}function B(){u["default"].body.focus();u["default"].onselectstart=function(){return false;};}function D(){u["default"].onselectstart=function(){return true;};}function N(e){var t=undefined;if(e.getBoundingClientRect&&e.parentNode){t=e.getBoundingClientRect();}if(!t){return{left:0,top:0};}var r=u["default"].documentElement;var n=u["default"].body;var i=r.clientLeft||n.clientLeft||0;var o=c["default"].pageXOffset||n.scrollLeft;var s=t.left+o-i;var a=r.clientTop||n.clientTop||0;var l=c["default"].pageYOffset||n.scrollTop;var f=t.top+l-a;return{left:Math.round(s),top:Math.round(f)};}function F(e,t){var r={};var n=N(e);var i=e.offsetWidth;var o=e.offsetHeight;var s=n.top;var a=n.left;var u=t.pageY;var l=t.pageX;if(t.changedTouches){l=t.changedTouches[0].pageX;u=t.changedTouches[0].pageY;}r.y=Math.max(0,Math.min(1,(s-u+o)/o));r.x=Math.max(0,Math.min(1,(l-a)/i));return r;}function U(e){return!!e&&(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e.nodeType===1;}function H(e){return!!e&&(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e.nodeType===3;}function V(e){while(e.firstChild){e.removeChild(e.firstChild);}return e;}function W(e){if(typeof e==="function"){e=e();}return(Array.isArray(e)?e:[e]).map(function(e){if(typeof e==="function"){e=e();}if(U(e)||H(e)){return e;}if(typeof e==="string"&&/\S/.test(e)){return u["default"].createTextNode(e);}}).filter(function(e){return e;});}function q(e,t){W(t).forEach(function(t){return e.appendChild(t);});return e;}function z(e,t){return q(V(e),t);}var $=b("querySelector");r.$=$;var X=b("querySelectorAll");r.$$=X;},{"./guid.js":130,"./log.js":131,"global/document":1,"global/window":2,tsml:54}],127:[function(e,t,r){"use strict";r.__esModule=true;r.on=p;r.off=h;r.trigger=v;r.one=y;r.fixEvent=m;function n(e){return e&&e.__esModule?e:{default:e};}function i(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}var o=e("./dom.js");var s=i(o);var a=e("./guid.js");var u=i(a);var l=e("global/window");var c=n(l);var f=e("global/document");var d=n(f);function p(e,t,r){if(Array.isArray(t)){return _(p,e,t,r);}var n=s.getElData(e);if(!n.handlers)n.handlers={};if(!n.handlers[t])n.handlers[t]=[];if(!r.guid)r.guid=u.newGUID();n.handlers[t].push(r);if(!n.dispatcher){n.disabled=false;n.dispatcher=function(t,r){if(n.disabled)return;t=m(t);var i=n.handlers[t.type];if(i){var o=i.slice(0);for(var s=0,a=o.length;s<a;s++){if(t.isImmediatePropagationStopped()){break;}else{o[s].call(e,t,r);}}}};}if(n.handlers[t].length===1){if(e.addEventListener){e.addEventListener(t,n.dispatcher,false);}else if(e.attachEvent){e.attachEvent("on"+t,n.dispatcher);}}}function h(e,t,r){if(!s.hasElData(e))return;var n=s.getElData(e);if(!n.handlers){return;}if(Array.isArray(t)){return _(h,e,t,r);}var i=function t(r){n.handlers[r]=[];g(e,r);};if(!t){for(var o in n.handlers){i(o);}return;}var a=n.handlers[t];if(!a)return;if(!r){i(t);return;}if(r.guid){for(var u=0;u<a.length;u++){if(a[u].guid===r.guid){a.splice(u--,1);}}}g(e,t);}function v(e,t,r){var n=s.hasElData(e)?s.getElData(e):{};var i=e.parentNode||e.ownerDocument;if(typeof t==="string"){t={type:t,target:e};}t=m(t);if(n.dispatcher){n.dispatcher.call(e,t,r);}if(i&&!t.isPropagationStopped()&&t.bubbles===true){v.call(null,i,t,r);}else if(!i&&!t.defaultPrevented){var o=s.getElData(t.target);if(t.target[t.type]){o.disabled=true;if(typeof t.target[t.type]==="function"){t.target[t.type]();}o.disabled=false;}}return!t.defaultPrevented;}function y(e,t,r){if(Array.isArray(t)){return _(y,e,t,r);}var n=function n(){h(e,t,n);r.apply(this,arguments);};n.guid=r.guid=r.guid||u.newGUID();p(e,t,n);}function m(e){function t(){return true;}function r(){return false;}if(!e||!e.isPropagationStopped){var n=e||c["default"].event;e={};for(var i in n){if(i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"){if(!(i==="returnValue"&&n.preventDefault)){e[i]=n[i];}}}if(!e.target){e.target=e.srcElement||d["default"];}if(!e.relatedTarget){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement;}e.preventDefault=function(){if(n.preventDefault){n.preventDefault();}e.returnValue=false;n.returnValue=false;e.defaultPrevented=true;};e.defaultPrevented=false;e.stopPropagation=function(){if(n.stopPropagation){n.stopPropagation();}e.cancelBubble=true;n.cancelBubble=true;e.isPropagationStopped=t;};e.isPropagationStopped=r;e.stopImmediatePropagation=function(){if(n.stopImmediatePropagation){n.stopImmediatePropagation();}e.isImmediatePropagationStopped=t;e.stopPropagation();};e.isImmediatePropagationStopped=r;if(e.clientX!=null){var o=d["default"].documentElement,s=d["default"].body;e.pageX=e.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0);e.pageY=e.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0);}e.which=e.charCode||e.keyCode;if(e.button!=null){e.button=e.button&1?0:e.button&4?1:e.button&2?2:0;}}return e;}function g(e,t){var r=s.getElData(e);if(r.handlers[t].length===0){delete r.handlers[t];if(e.removeEventListener){e.removeEventListener(t,r.dispatcher,false);}else if(e.detachEvent){e.detachEvent("on"+t,r.dispatcher);}}if(Object.getOwnPropertyNames(r.handlers).length<=0){delete r.handlers;delete r.dispatcher;delete r.disabled;}if(Object.getOwnPropertyNames(r).length===0){s.removeElData(e);}}function _(e,t,r,n){r.forEach(function(r){e(t,r,n);});}},{"./dom.js":126,"./guid.js":130,"global/document":1,"global/window":2}],128:[function(e,t,r){"use strict";r.__esModule=true;var n=e("./guid.js");var i=function e(t,r,i){if(!r.guid){r.guid=n.newGUID();}var o=function e(){return r.apply(t,arguments);};o.guid=i?i+"_"+r.guid:r.guid;return o;};r.bind=i;},{"./guid.js":130}],129:[function(e,t,r){"use strict";r.__esModule=true;function n(e){var t=arguments.length<=1||arguments[1]===undefined?e:arguments[1];return function(){e=e<0?0:e;var r=Math.floor(e%60);var n=Math.floor(e/60%60);var i=Math.floor(e/3600);var o=Math.floor(t/60%60);var s=Math.floor(t/3600);if(isNaN(e)||e===Infinity){i=n=r="-";}i=i>0||s>0?i+":":"";n=((i||o>=10)&&n<10?"0"+n:n)+":";r=r<10?"0"+r:r;return i+n+r;}();}r["default"]=n;t.exports=r["default"];},{}],130:[function(e,t,r){"use strict";r.__esModule=true;r.newGUID=i;var n=1;function i(){return n++;}},{}],131:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("global/window");var o=n(i);var s=function e(){a(null,arguments);};s.history=[];s.error=function(){a("error",arguments);};s.warn=function(){a("warn",arguments);};function a(e,t){var r=Array.prototype.slice.call(t);var n=function e(){};var i=o["default"]["console"]||{log:n,warn:n,error:n};if(e){r.unshift(e.toUpperCase()+":");}else{e="log";}s.history.push(r);r.unshift("VIDEOJS:");if(i[e].apply){i[e].apply(i,r);}else{i[e](r.join(" "));}}r["default"]=s;t.exports=r["default"];},{"global/window":2}],132:[function(e,t,r){"use strict";r.__esModule=true;r["default"]=u;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("lodash-compat/object/merge");var o=n(i);function s(e){return!!e&&(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e.toString()==="[object Object]"&&e.constructor===Object;}var a=function e(t,r){if(!s(r)){return r;}if(!s(t)){return u(r);}};function u(){var e=Array.prototype.slice.call(arguments);e.unshift({});e.push(a);o["default"].apply(null,e);return e[0];}t.exports=r["default"];},{"lodash-compat/object/merge":40}],133:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("global/document");var o=n(i);var s=function e(t){var r=o["default"].createElement("style");r.className=t;return r;};r.createStyleElement=s;var a=function e(t,r){if(t.styleSheet){t.styleSheet.cssText=r;}else{t.textContent=r;}};r.setTextContent=a;},{"global/document":1}],134:[function(e,t,r){"use strict";r.__esModule=true;r.createTimeRanges=s;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("./log.js");var o=n(i);function s(e,t){if(Array.isArray(e)){return a(e);}else if(e===undefined||t===undefined){return a();}return a([[e,t]]);}r.createTimeRange=s;function a(e){if(e===undefined||e.length===0){return{length:0,start:function e(){throw new Error("This TimeRanges object is empty");},end:function e(){throw new Error("This TimeRanges object is empty");}};}return{length:e.length,start:u.bind(null,"start",0,e),end:u.bind(null,"end",1,e)};}function u(e,t,r,n){if(n===undefined){o["default"].warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument.");n=0;}l(e,n,r.length-1);return r[n][t];}function l(e,t,r){if(t<0||t>r){throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+r+").");}}},{"./log.js":131}],135:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e.charAt(0).toUpperCase()+e.slice(1);}r["default"]=n;t.exports=r["default"];},{}],136:[function(e,t,r){"use strict";r.__esModule=true;function n(e){return e&&e.__esModule?e:{default:e};}var i=e("global/document");var o=n(i);var s=e("global/window");var a=n(s);var u=function e(t){var r=["protocol","hostname","port","pathname","search","hash","host"];var n=o["default"].createElement("a");n.href=t;var i=n.host===""&&n.protocol!=="file:";var s=undefined;if(i){s=o["default"].createElement("div");s.innerHTML='<a href="'+t+'"></a>';n=s.firstChild;s.setAttribute("style","display:none; position:absolute;");o["default"].body.appendChild(s);}var a={};for(var u=0;u<r.length;u++){a[r[u]]=n[r[u]];}if(a.protocol==="http:"){a.host=a.host.replace(/:80$/,"");}if(a.protocol==="https:"){a.host=a.host.replace(/:443$/,"");}if(i){o["default"].body.removeChild(s);}return a;};r.parseUrl=u;var l=function e(t){if(!t.match(/^https?:\/\//)){var r=o["default"].createElement("div");r.innerHTML='<a href="'+t+'">x</a>';t=r.firstChild.href;}return t;};r.getAbsoluteURL=l;var c=function e(t){if(typeof t==="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var n=r.exec(t);if(n){return n.pop().toLowerCase();}}return"";};r.getFileExtension=c;var f=function e(t){var r=a["default"].location;var n=u(t);var i=n.protocol===":"?r.protocol:n.protocol;var o=i+n.host!==r.protocol+r.host;return o;};r.isCrossOrigin=f;},{"global/document":1,"global/window":2}],137:[function(e,r,n){"use strict";n.__esModule=true;function i(e){if(e&&e.__esModule){return e;}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r];}}t["default"]=e;return t;}}function o(e){return e&&e.__esModule?e:{default:e};}var s=e("global/document");var a=o(s);var u=e("./setup");var l=i(u);var c=e("./utils/stylesheet.js");var f=i(c);var d=e("./component");var p=o(d);var h=e("./event-target");var v=o(h);var y=e("./utils/events.js");var m=i(y);var g=e("./player");var _=o(g);var b=e("./plugins.js");var w=o(b);var T=e("../../src/js/utils/merge-options.js");var j=o(T);var k=e("./utils/fn.js");var E=i(k);var C=e("./tracks/text-track.js");var x=o(C);var S=e("object.assign");var O=o(S);var P=e("./utils/time-ranges.js");var A=e("./utils/format-time.js");var M=o(A);var I=e("./utils/log.js");var L=o(I);var R=e("./utils/dom.js");var B=i(R);var D=e("./utils/browser.js");var N=i(D);var F=e("./utils/url.js");var U=i(F);var H=e("./extend.js");var V=o(H);var W=e("lodash-compat/object/merge");var q=o(W);var z=e("./utils/create-deprecation-proxy.js");var $=o(z);var X=e("xhr");var G=o(X);var K=e("./tech/tech.js");var Y=o(K);var J=e("./tech/html5.js");var Q=o(J);var Z=e("./tech/flash.js");var ee=o(Z);if(typeof HTMLVideoElement==="undefined"){a["default"].createElement("video");a["default"].createElement("audio");a["default"].createElement("track");}var te=function e(t,r,n){var i;if(typeof t==="string"){if(t.indexOf("#")===0){t=t.slice(1);}if(e.getPlayers()[t]){if(r){L["default"].warn('Player "'+t+'" is already initialised. Options will not be applied.');}if(n){e.getPlayers()[t].ready(n);}return e.getPlayers()[t];}else{i=B.getEl(t);}}else{i=t;}if(!i||!i.nodeName){throw new TypeError("The element or ID supplied is not valid. (videojs)");}return i["player"]||new _["default"](i,r,n);};var re=B.$(".vjs-styles-defaults");if(!re){re=f.createStyleElement("vjs-styles-defaults");var ne=B.$("head");ne.insertBefore(re,ne.firstChild);f.setTextContent(re,"\n    .video-js {\n      width: 300px;\n      height: 150px;\n    }\n\n    .vjs-fluid {\n      padding-top: 56.25%\n    }\n  ");}l.autoSetupTimeout(1,te);te.VERSION="5.3.0";te.options=_["default"].prototype.options_;te.getPlayers=function(){return _["default"].players;};te.players=$["default"](_["default"].players,{get:"Access to videojs.players is deprecated; use videojs.getPlayers instead",set:"Modification of videojs.players is deprecated"});te.getComponent=p["default"].getComponent;te.registerComponent=function(e,t){if(Y["default"].isTech(t)){L["default"].warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");}p["default"].registerComponent.call(p["default"],e,t);};te.getTech=Y["default"].getTech;te.registerTech=Y["default"].registerTech;te.browser=N;te.TOUCH_ENABLED=N.TOUCH_ENABLED;te.extend=V["default"];te.mergeOptions=j["default"];te.bind=E.bind;te.plugin=w["default"];te.addLanguage=function(e,t){var r;e=(""+e).toLowerCase();return q["default"](te.options.languages,(r={},r[e]=t,r))[e];};te.log=L["default"];te.createTimeRange=te.createTimeRanges=P.createTimeRanges;te.formatTime=M["default"];te.parseUrl=U.parseUrl;te.isCrossOrigin=U.isCrossOrigin;te.EventTarget=v["default"];te.on=m.on;te.one=m.one;te.off=m.off;te.trigger=m.trigger;te.xhr=G["default"];te.TextTrack=x["default"];te.isEl=B.isEl;te.isTextNode=B.isTextNode;te.hasClass=B.hasElClass;te.addClass=B.addElClass;te.removeClass=B.removeElClass;te.toggleClass=B.toggleElClass;te.setAttributes=B.setElAttributes;te.getAttributes=B.getElAttributes;te.emptyEl=B.emptyEl;te.appendContent=B.appendContent;te.insertContent=B.insertContent;if(typeof t==="function"&&t["amd"]){t("videojs",[],function(){return te;});}else if((typeof n==="undefined"?"undefined":_typeof(n))==="object"&&(typeof r==="undefined"?"undefined":_typeof(r))==="object"){r["exports"]=te;}n["default"]=te;r.exports=n["default"];},{"../../src/js/utils/merge-options.js":132,"./component":65,"./event-target":97,"./extend.js":98,"./player":106,"./plugins.js":107,"./setup":109,"./tech/flash.js":112,"./tech/html5.js":113,"./tech/tech.js":115,"./tracks/text-track.js":122,"./utils/browser.js":123,"./utils/create-deprecation-proxy.js":125,"./utils/dom.js":126,"./utils/events.js":127,"./utils/fn.js":128,"./utils/format-time.js":129,"./utils/log.js":131,"./utils/stylesheet.js":133,"./utils/time-ranges.js":134,"./utils/url.js":136,"global/document":1,"lodash-compat/object/merge":40,"object.assign":45,xhr:55}]},{},[137])(137);});(function(e){var t=e.vttjs={};var r=t.VTTCue;var n=t.VTTRegion;var i=e.VTTCue;var o=e.VTTRegion;t.shim=function(){t.VTTCue=r;t.VTTRegion=n;};t.restore=function(){t.VTTCue=i;t.VTTRegion=o;};})(this);(function(e,t){var r="auto";var n={"":true,lr:true,rl:true};var i={start:true,middle:true,end:true,left:true,right:true};function o(e){if(typeof e!=="string"){return false;}var t=n[e.toLowerCase()];return t?e.toLowerCase():false;}function s(e){if(typeof e!=="string"){return false;}var t=i[e.toLowerCase()];return t?e.toLowerCase():false;}function a(e){var t=1;for(;t<arguments.length;t++){var r=arguments[t];for(var n in r){e[n]=r[n];}}return e;}function u(e,t,n){var i=this;var u=/MSIE\s8\.0/.test(navigator.userAgent);var l={};if(u){i=document.createElement("custom");}else{l.enumerable=true;}i.hasBeenReset=false;var c="";var f=false;var d=e;var p=t;var h=n;var v=null;var y="";var m=true;var g="auto";var _="start";var b=50;var w="middle";var T=50;var j="middle";Object.defineProperty(i,"id",a({},l,{get:function get(){return c;},set:function set(e){c=""+e;}}));Object.defineProperty(i,"pauseOnExit",a({},l,{get:function get(){return f;},set:function set(e){f=!!e;}}));Object.defineProperty(i,"startTime",a({},l,{get:function get(){return d;},set:function set(e){if(typeof e!=="number"){throw new TypeError("Start time must be set to a number.");}d=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"endTime",a({},l,{get:function get(){return p;},set:function set(e){if(typeof e!=="number"){throw new TypeError("End time must be set to a number.");}p=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"text",a({},l,{get:function get(){return h;},set:function set(e){h=""+e;this.hasBeenReset=true;}}));Object.defineProperty(i,"region",a({},l,{get:function get(){return v;},set:function set(e){v=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"vertical",a({},l,{get:function get(){return y;},set:function set(e){var t=o(e);if(t===false){throw new SyntaxError("An invalid or illegal string was specified.");}y=t;this.hasBeenReset=true;}}));Object.defineProperty(i,"snapToLines",a({},l,{get:function get(){return m;},set:function set(e){m=!!e;this.hasBeenReset=true;}}));Object.defineProperty(i,"line",a({},l,{get:function get(){return g;},set:function set(e){if(typeof e!=="number"&&e!==r){throw new SyntaxError("An invalid number or illegal string was specified.");}g=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"lineAlign",a({},l,{get:function get(){return _;},set:function set(e){var t=s(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.");}_=t;this.hasBeenReset=true;}}));Object.defineProperty(i,"position",a({},l,{get:function get(){return b;},set:function set(e){if(e<0||e>100){throw new Error("Position must be between 0 and 100.");}b=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"positionAlign",a({},l,{get:function get(){return w;},set:function set(e){var t=s(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.");}w=t;this.hasBeenReset=true;}}));Object.defineProperty(i,"size",a({},l,{get:function get(){return T;},set:function set(e){if(e<0||e>100){throw new Error("Size must be between 0 and 100.");}T=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"align",a({},l,{get:function get(){return j;},set:function set(e){var t=s(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.");}j=t;this.hasBeenReset=true;}}));i.displayState=undefined;if(u){return i;}}u.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text);};e.VTTCue=e.VTTCue||u;t.VTTCue=u;})(this,this.vttjs||{});(function(e,t){var r={"":true,up:true};function n(e){if(typeof e!=="string"){return false;}var t=r[e.toLowerCase()];return t?e.toLowerCase():false;}function i(e){return typeof e==="number"&&e>=0&&e<=100;}function o(){var e=100;var t=3;var r=0;var o=100;var s=0;var a=100;var u="";Object.defineProperties(this,{width:{enumerable:true,get:function get(){return e;},set:function set(t){if(!i(t)){throw new Error("Width must be between 0 and 100.");}e=t;}},lines:{enumerable:true,get:function get(){return t;},set:function set(e){if(typeof e!=="number"){throw new TypeError("Lines must be set to a number.");}t=e;}},regionAnchorY:{enumerable:true,get:function get(){return o;},set:function set(e){if(!i(e)){throw new Error("RegionAnchorX must be between 0 and 100.");}o=e;}},regionAnchorX:{enumerable:true,get:function get(){return r;},set:function set(e){if(!i(e)){throw new Error("RegionAnchorY must be between 0 and 100.");}r=e;}},viewportAnchorY:{enumerable:true,get:function get(){return a;},set:function set(e){if(!i(e)){throw new Error("ViewportAnchorY must be between 0 and 100.");}a=e;}},viewportAnchorX:{enumerable:true,get:function get(){return s;},set:function set(e){if(!i(e)){throw new Error("ViewportAnchorX must be between 0 and 100.");}s=e;}},scroll:{enumerable:true,get:function get(){return u;},set:function set(e){var t=n(e);if(t===false){throw new SyntaxError("An invalid or illegal string was specified.");}u=t;}}});}e.VTTRegion=e.VTTRegion||o;t.VTTRegion=o;})(this,this.vttjs||{});(function(e){var t=Object.create||function(){function e(){}return function(t){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.");}e.prototype=t;return new e();};}();function r(e,t){this.name="ParsingError";this.code=e.code;this.message=t||e.message;}r.prototype=t(Error.prototype);r.prototype.constructor=r;r.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function n(e){function t(e,t,r,n){return(e|0)*3600+(t|0)*60+(r|0)+(n|0)/1e3;}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!r){return null;}if(r[3]){return t(r[1],r[2],r[3].replace(":",""),r[4]);}else if(r[1]>59){return t(r[1],r[2],0,r[4]);}else{return t(0,r[1],r[2],r[4]);}}function i(){this.values=t(null);}i.prototype={set:function set(e,t){if(!this.get(e)&&t!==""){this.values[e]=t;}},get:function get(e,t,r){if(r){return this.has(e)?this.values[e]:t[r];}return this.has(e)?this.values[e]:t;},has:function has(e){return e in this.values;},alt:function alt(e,t,r){for(var n=0;n<r.length;++n){if(t===r[n]){this.set(e,t);break;}}},integer:function integer(e,t){if(/^-?\d+$/.test(t)){this.set(e,parseInt(t,10));}},percent:function percent(e,t){var r;if(r=t.match(/^([\d]{1,3})(\.[\d]*)?%$/)){t=parseFloat(t);if(t>=0&&t<=100){this.set(e,t);return true;}}return false;}};function o(e,t,r,n){var i=n?e.split(n):[e];for(var o in i){if(typeof i[o]!=="string"){continue;}var s=i[o].split(r);if(s.length!==2){continue;}var a=s[0];var u=s[1];t(a,u);}}function s(e,t,s){var a=e;function u(){var t=n(e);if(t===null){throw new r(r.Errors.BadTimeStamp,"Malformed timestamp: "+a);}e=e.replace(/^[^\sa-zA-Z-]+/,"");return t;}function l(e,t){var r=new i();o(e,function(e,t){switch(e){case"region":for(var n=s.length-1;n>=0;n--){if(s[n].id===t){r.set(e,s[n].region);break;}}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];r.integer(e,o);r.percent(e,o)?r.set("snapToLines",false):null;r.alt(e,o,["auto"]);if(i.length===2){r.alt("lineAlign",i[1],["start","middle","end"]);}break;case"position":i=t.split(",");r.percent(e,i[0]);if(i.length===2){r.alt("positionAlign",i[1],["start","middle","end"]);}break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"]);break;}},/:/,/\s/);t.region=r.get("region",null);t.vertical=r.get("vertical","");t.line=r.get("line","auto");t.lineAlign=r.get("lineAlign","start");t.snapToLines=r.get("snapToLines",true);t.size=r.get("size",100);t.align=r.get("align","middle");t.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align);t.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align);}function c(){e=e.replace(/^\s+/,"");}c();t.startTime=u();c();if(e.substr(0,3)!=="--\x3e"){throw new r(r.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);}e=e.substr(3);c();t.endTime=u();c();l(e,t);}var a={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""};var u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var l={v:"title",lang:"lang"};var c={rt:"ruby"};function f(e,t){function r(){if(!t){return null;}function e(e){t=t.substr(e.length);return e;}var r=t.match(/^([^<]*)(<[^>]+>?)?/);return e(r[1]?r[1]:r[2]);}function i(e){return a[e];}function o(e){while(g=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)){e=e.replace(g[0],i);}return e;}function s(e,t){return!c[t.localName]||c[t.localName]===e.localName;}function f(t,r){var n=u[t];if(!n){return null;}var i=e.document.createElement(n);i.localName=n;var o=l[t];if(o&&r){i[o]=r.trim();}return i;}var d=e.document.createElement("div"),p=d,h,v=[];while((h=r())!==null){if(h[0]==="<"){if(h[1]==="/"){if(v.length&&v[v.length-1]===h.substr(2).replace(">","")){v.pop();p=p.parentNode;}continue;}var y=n(h.substr(1,h.length-2));var m;if(y){m=e.document.createProcessingInstruction("timestamp",y);p.appendChild(m);continue;}var g=h.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!g){continue;}m=f(g[1],g[3]);if(!m){continue;}if(!s(p,m)){continue;}if(g[2]){m.className=g[2].substr(1).replace("."," ");}v.push(g[1]);p.appendChild(m);p=m;continue;}p.appendChild(e.document.createTextNode(o(h)));}return d;}var d=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];function p(e){var t=[],r="",n;if(!e||!e.childNodes){return"ltr";}function i(e,t){for(var r=t.childNodes.length-1;r>=0;r--){e.push(t.childNodes[r]);}}function o(e){if(!e||!e.length){return null;}var t=e.pop(),r=t.textContent||t.innerText;if(r){var n=r.match(/^.*(\n|\r)/);if(n){e.length=0;return n[0];}return r;}if(t.tagName==="ruby"){return o(e);}if(t.childNodes){i(e,t);return o(e);}}i(t,e);while(r=o(t)){for(var s=0;s<r.length;s++){n=r.charCodeAt(s);for(var a=0;a<d.length;a++){if(d[a]===n){return"rtl";}}}}return"ltr";}function h(e){if(typeof e.line==="number"&&(e.snapToLines||e.line>=0&&e.line<=100)){return e.line;}if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement){return-1;}var t=e.track,r=t.textTrackList,n=0;for(var i=0;i<r.length&&r[i]!==t;i++){if(r[i].mode==="showing"){n++;}}return++n*-1;}function v(){}v.prototype.applyStyles=function(e,t){t=t||this.div;for(var r in e){if(e.hasOwnProperty(r)){t.style[r]=e[r];}}};v.prototype.formatStyle=function(e,t){return e===0?0:e+t;};function y(e,t,r){var n=/MSIE\s8\.0/.test(navigator.userAgent);var i="rgba(255, 255, 255, 1)";var o="rgba(0, 0, 0, 0.8)";if(n){i="rgb(255, 255, 255)";o="rgb(0, 0, 0)";}v.call(this);this.cue=t;this.cueDiv=f(e,t.text);var s={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};if(!n){s.writingMode=t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl";s.unicodeBidi="plaintext";}this.applyStyles(s,this.cueDiv);this.div=e.document.createElement("div");s={textAlign:t.align==="middle"?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"};if(!n){s.direction=p(this.cueDiv);s.writingMode=t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext";}this.applyStyles(s);this.div.appendChild(this.cueDiv);var a=0;switch(t.positionAlign){case"start":a=t.position;break;case"middle":a=t.position-t.size/2;break;case"end":a=t.position-t.size;break;}if(t.vertical===""){this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(t.size,"%")});}else{this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(t.size,"%")});}this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")});};}y.prototype=t(v.prototype);y.prototype.constructor=y;function m(e){var t=/MSIE\s8\.0/.test(navigator.userAgent);var r,n,i,o;if(e.div){n=e.div.offsetHeight;i=e.div.offsetWidth;o=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect();r=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0;}this.left=e.left;this.right=e.right;this.top=e.top||o;this.height=e.height||n;this.bottom=e.bottom||o+(e.height||n);this.width=e.width||i;this.lineHeight=r!==undefined?r:e.lineHeight;if(t&&!this.lineHeight){this.lineHeight=13;}}m.prototype.move=function(e,t){t=t!==undefined?t:this.lineHeight;switch(e){case"+x":this.left+=t;this.right+=t;break;case"-x":this.left-=t;this.right-=t;break;case"+y":this.top+=t;this.bottom+=t;break;case"-y":this.top-=t;this.bottom-=t;break;}};m.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top;};m.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++){if(this.overlaps(e[t])){return true;}}return false;};m.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right;};m.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom;}};m.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),r=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),n=t*r;return n/(this.height*this.width);};m.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width};};m.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0;var r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0;var n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var i={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r};return i;};function g(e,t,r,n){function i(e,t){var i,o=new m(e),s=1;for(var a=0;a<t.length;a++){while(e.overlapsOppositeAxis(r,t[a])||e.within(r)&&e.overlapsAny(n)){e.move(t[a]);}if(e.within(r)){return e;}var u=e.intersectPercentage(r);if(s>u){i=new m(e);s=u;}e=new m(o);}return i||o;}var o=new m(t),s=t.cue,a=h(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"];l="height";break;case"rl":u=["+x","-x"];l="width";break;case"lr":u=["-x","+x"];l="width";break;}var c=o.lineHeight,f=c*Math.round(a),d=r[l]+c,p=u[0];if(Math.abs(f)>d){f=f<0?-1:1;f*=Math.ceil(d/c)*c;}if(a<0){f+=s.vertical===""?r.height:r.width;u=u.reverse();}o.move(p,f);}else{var v=o.lineHeight/r.height*100;switch(s.lineAlign){case"middle":a-=v/2;break;case"end":a-=v;break;}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")});break;}u=["+y","-x","+x","-y"];o=new m(t);}var y=i(o,u);t.move(y.toCSSCompatValues(r));}function _(){}_.StringDecoder=function(){return{decode:function decode(e){if(!e){return"";}if(typeof e!=="string"){throw new Error("Error - expected string data.");}return decodeURIComponent(encodeURIComponent(e));}};};_.convertCueToDOMTree=function(e,t){if(!e||!t){return null;}return f(e,t);};var b=.05;var w="sans-serif";var T="1.5%";_.processCues=function(e,t,r){if(!e||!t||!r){return null;}while(r.firstChild){r.removeChild(r.firstChild);}var n=e.document.createElement("div");n.style.position="absolute";n.style.left="0";n.style.right="0";n.style.top="0";n.style.bottom="0";n.style.margin=T;r.appendChild(n);function i(e){for(var t=0;t<e.length;t++){if(e[t].hasBeenReset||!e[t].displayState){return true;}}return false;}if(!i(t)){for(var o=0;o<t.length;o++){n.appendChild(t[o].displayState);}return;}var s=[],a=m.getSimpleBoxPosition(n),u=Math.round(a.height*b*100)/100;var l={font:u+"px "+w};(function(){var r,i;for(var o=0;o<t.length;o++){i=t[o];r=new y(e,i,l);n.appendChild(r.div);g(e,r,a,s);i.displayState=r.div;s.push(m.getSimpleBoxPosition(r));}})();};_.Parser=function(e,t,r){if(!r){r=t;t={};}if(!t){t={};}this.window=e;this.vttjs=t;this.state="INITIAL";this.buffer="";this.decoder=r||new TextDecoder("utf8");this.regionList=[];};_.Parser.prototype={reportOrThrowError:function reportOrThrowError(e){if(e instanceof r){this.onparsingerror&&this.onparsingerror(e);}else{throw e;}},parse:function parse(e){var t=this;if(e){t.buffer+=t.decoder.decode(e,{stream:true});}function n(){var e=t.buffer;var r=0;while(r<e.length&&e[r]!=="\r"&&e[r]!=="\n"){++r;}var n=e.substr(0,r);if(e[r]==="\r"){++r;}if(e[r]==="\n"){++r;}t.buffer=e.substr(r);return n;}function a(e){var r=new i();o(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(n.length!==2){break;}var o=new i();o.percent("x",n[0]);o.percent("y",n[1]);if(!o.has("x")||!o.has("y")){break;}r.set(e+"X",o.get("x"));r.set(e+"Y",o.get("y"));break;case"scroll":r.alt(e,t,["up"]);break;}},/=/,/\s/);if(r.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion)();n.width=r.get("width",100);n.lines=r.get("lines",3);n.regionAnchorX=r.get("regionanchorX",0);n.regionAnchorY=r.get("regionanchorY",100);n.viewportAnchorX=r.get("viewportanchorX",0);n.viewportAnchorY=r.get("viewportanchorY",100);n.scroll=r.get("scroll","");t.onregion&&t.onregion(n);t.regionList.push({id:r.get("id"),region:n});}}function u(e){o(e,function(e,t){switch(e){case"Region":a(t);break;}},/:/);}try{var l;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer)){return this;}l=n();var c=l.match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0]){throw new r(r.Errors.BadSignature);}t.state="HEADER";}var f=false;while(t.buffer){if(!/\r\n|\n/.test(t.buffer)){return this;}if(!f){l=n();}else{f=false;}switch(t.state){case"HEADER":if(/:/.test(l)){u(l);}else if(!l){t.state="ID";}continue;case"NOTE":if(!l){t.state="ID";}continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){t.state="NOTE";break;}if(!l){continue;}t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");t.state="CUE";if(l.indexOf("--\x3e")===-1){t.cue.id=l;continue;}case"CUE":try{s(l,t.cue,t.regionList);}catch(e){t.reportOrThrowError(e);t.cue=null;t.state="BADCUE";continue;}t.state="CUETEXT";continue;case"CUETEXT":var d=l.indexOf("--\x3e")!==-1;if(!l||d&&(f=true)){t.oncue&&t.oncue(t.cue);t.cue=null;t.state="ID";continue;}if(t.cue.text){t.cue.text+="\n";}t.cue.text+=l;continue;case"BADCUE":if(!l){t.state="ID";}continue;}}}catch(e){t.reportOrThrowError(e);if(t.state==="CUETEXT"&&t.cue&&t.oncue){t.oncue(t.cue);}t.cue=null;t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE";}return this;},flush:function flush(){var e=this;try{e.buffer+=e.decoder.decode();if(e.cue||e.state==="HEADER"){e.buffer+="\n\n";e.parse();}if(e.state==="INITIAL"){throw new r(r.Errors.BadSignature);}}catch(t){e.reportOrThrowError(t);}e.onflush&&e.onflush();return this;}};e.WebVTT=_;})(this,this.vttjs||{});}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],341:[function(e,t,r){(function(n){if(typeof define==="function"&&define["amd"]){define(["video.js","videojs-contrib-ads"],function(e){n(window,document,e);});}else if((typeof r==="undefined"?"undefined":_typeof(r))==="object"&&(typeof t==="undefined"?"undefined":_typeof(t))==="object"){var i=e("video.js");e("videojs-contrib-ads");n(window,document,i);}else{n(window,document,videojs);}})(function(e,r,n){"use strict";var i=function i(e){var t;var r;var n;for(r=1;r<arguments.length;r++){t=arguments[r];for(n in t){if(t.hasOwnProperty(n)){e[n]=t[n];}}}return e;};var o={debug:false,timeout:5e3,prerollTimeout:100,adLabel:"Advertisement",showControlsForJSAds:true};var s=function s(e,t){this.ima=new a(this,e,t);};var a=function a(t,n,s){this.player=t;var a=function(e,t){e.id=this.controlPrefix+t;e.className=this.controlPrefix+t+" "+t;}.bind(this);var u=function u(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi");};var l=function l(e,t){if(u(t).test(e.className)){return e;}return e.className=e.className.trim()+" "+t;};var c=function c(e,t){var r=u(t);if(!r.test(e.className)){return e;}return e.className=e.className.trim().replace(r,"");};var f=function(){this.vjsControls=this.player.getChild("controlBar");this.adContainerDiv=this.vjsControls.el().parentNode.appendChild(r.createElement("div"));a(this.adContainerDiv,"ima-ad-container");this.adContainerDiv.style.position="absolute";this.adContainerDiv.style.zIndex=1111;this.adContainerDiv.addEventListener("mouseenter",T,false);this.adContainerDiv.addEventListener("mouseleave",w,false);d();this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainerDiv,this.contentPlayer);}.bind(this);var d=function(){this.controlsDiv=r.createElement("div");a(this.controlsDiv,"ima-controls-div");this.controlsDiv.style.width="100%";this.countdownDiv=r.createElement("div");a(this.countdownDiv,"ima-countdown-div");this.countdownDiv.innerHTML=this.settings.adLabel;this.countdownDiv.style.display=this.showCountdown?"block":"none";this.seekBarDiv=r.createElement("div");a(this.seekBarDiv,"ima-seek-bar-div");this.seekBarDiv.style.width="100%";this.progressDiv=r.createElement("div");a(this.progressDiv,"ima-progress-div");this.playPauseDiv=r.createElement("div");a(this.playPauseDiv,"ima-play-pause-div");l(this.playPauseDiv,"ima-playing");this.playPauseDiv.addEventListener("click",E,false);this.muteDiv=r.createElement("div");a(this.muteDiv,"ima-mute-div");l(this.muteDiv,"ima-non-muted");this.muteDiv.addEventListener("click",C,false);this.sliderDiv=r.createElement("div");a(this.sliderDiv,"ima-slider-div");this.sliderDiv.addEventListener("mousedown",x,false);this.sliderLevelDiv=r.createElement("div");a(this.sliderLevelDiv,"ima-slider-level-div");this.fullscreenDiv=r.createElement("div");a(this.fullscreenDiv,"ima-fullscreen-div");l(this.fullscreenDiv,"ima-non-fullscreen");this.fullscreenDiv.addEventListener("click",A,false);this.adContainerDiv.appendChild(this.controlsDiv);this.controlsDiv.appendChild(this.countdownDiv);this.controlsDiv.appendChild(this.seekBarDiv);this.controlsDiv.appendChild(this.playPauseDiv);this.controlsDiv.appendChild(this.muteDiv);this.controlsDiv.appendChild(this.sliderDiv);this.controlsDiv.appendChild(this.fullscreenDiv);this.seekBarDiv.appendChild(this.progressDiv);this.sliderDiv.appendChild(this.sliderLevelDiv);}.bind(this);this.initializeAdDisplayContainer=function(){this.adDisplayContainerInitialized=true;this.adDisplayContainer.initialize();}.bind(this);this.requestAds=function(){if(!this.adDisplayContainerInitialized){this.adDisplayContainer.initialize();}var e=new google.ima.AdsRequest();if(this.settings.adTagUrl){e.adTagUrl=this.settings.adTagUrl;}else{e.adsResponse=this.settings.adsResponse;}if(this.settings.forceNonLinearFullSlot){e.forceNonLinearFullSlot=true;}e.linearAdSlotWidth=this.getPlayerWidth();e.linearAdSlotHeight=this.getPlayerHeight();e.nonLinearAdSlotWidth=this.settings.nonLinearWidth||this.getPlayerWidth();e.nonLinearAdSlotHeight=this.settings.nonLinearHeight||this.getPlayerHeight()/3;e.setAdWillAutoPlay(this.settings.adWillAutoPlay);this.adsLoader.requestAds(e);}.bind(this);var p=function(e){this.adsManager=e.getAdsManager(this.contentPlayheadTracker,this.adsRenderingSettings);this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v);this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,y);this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_);this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_);this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,m);this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,g);this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,_);this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,E);this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete_);this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete_);if(!this.autoPlayAdBreaks){try{var t=this.getPlayerWidth();var r=this.getPlayerHeight();this.adsManagerDimensions.width=t;this.adsManagerDimensions.height=r;this.adsManager.init(t,r,google.ima.ViewMode.NORMAL);this.adsManager.setVolume(this.player.muted()?0:this.player.volume());}catch(e){v(e);}}this.player.trigger("adsready");}.bind(this);this.start=function(){e.console.log("WARNING: player.ima.start is deprecated. Use "+"player.ima.startFromReadyCallback instead.");};this.startFromReadyCallback=function(){if(this.autoPlayAdBreaks){try{this.adsManager.init(this.getPlayerWidth(),this.getPlayerHeight(),google.ima.ViewMode.NORMAL);this.adsManager.setVolume(this.player.muted()?0:this.player.volume());this.adsManager.start();}catch(e){v(e);}}}.bind(this);var h=function(t){e.console.log("AdsLoader error: "+t.getError());this.adContainerDiv.style.display="none";if(this.adsManager){this.adsManager.destroy();}this.player.trigger({type:"adserror",data:{AdError:t.getError(),AdErrorEvent:t}});}.bind(this);var v=function(t){var r=t.getError!==undefined?t.getError():t.stack;e.console.log("Ad error: "+r);this.vjsControls.show();this.adsManager.destroy();this.adContainerDiv.style.display="none";this.player.trigger({type:"adserror",data:{AdError:r,AdErrorEvent:t}});}.bind(this);var y=function(e){this.adBreakReadyListener(e);}.bind(this);this.playAdBreak=function(){if(!this.autoPlayAdBreaks){this.adsManager.start();}}.bind(this);this.onContentPauseRequested_=function(e){this.adsActive=true;this.adPlaying=true;this.contentSource=this.player.currentSrc();this.player.off("ended",this.localContentEndedListener);if(e.getAd().getAdPodInfo().getPodIndex()!=-1){this.player.ads.startLinearAdMode();}this.adContainerDiv.style.display="block";var t=e.getAd().getContentType();if(t==="application/javascript"&&!this.settings.showControlsForJSAds){this.controlsDiv.style.display="none";}else{this.controlsDiv.style.display="block";}this.vjsControls.hide();k();this.player.pause();}.bind(this);this.onContentResumeRequested_=function(e){this.adsActive=false;this.adPlaying=false;this.player.on("ended",this.localContentEndedListener);if(this.currentAd==null||this.currentAd.isLinear()){this.adContainerDiv.style.display="none";}this.vjsControls.show();if(!this.currentAd){this.player.ads.endLinearAdMode();}else if(!this.contentComplete&&this.currentAd.getAdPodInfo().getPodIndex()!=-1){this.player.ads.endLinearAdMode();}this.controlsDiv.style.display="none";this.countdownDiv.innerHTML="";}.bind(this);var m=function(e){this.allAdsCompleted=true;this.adContainerDiv.style.display="none";if(this.contentComplete==true){if(this.contentPlayer.src!=this.contentSource){this.player.src(this.contentSource);}for(var t in this.contentAndAdsEndedListeners){this.contentAndAdsEndedListeners[t]();}}}.bind(this);var g=function(e){if(!e.getAd().isLinear()){this.player.play();}}.bind(this);var _=function(e){this.currentAd=e.getAd();if(this.currentAd.isLinear()){this.adTrackingTimer=setInterval(b,250);c(this.adContainerDiv,"bumpable-ima-ad-container");}else{l(this.adContainerDiv,"bumpable-ima-ad-container");}this.adContainerDiv.style.display="block";this.player.trigger("ads-ad-started");}.bind(this);this.onAdComplete_=function(e){if(this.currentAd.isLinear()){clearInterval(this.adTrackingTimer);}}.bind(this);var b=function(){var e=this.adsManager.getRemainingTime();var t=this.currentAd.getDuration();var r=t-e;r=r>0?r:0;var n=false;var i=0;var o;if(this.currentAd.getAdPodInfo()){n=true;o=this.currentAd.getAdPodInfo().getAdPosition();i=this.currentAd.getAdPodInfo().getTotalAds();}var s=Math.floor(e/60);var a=Math.floor(e%60);if(a.toString().length<2){a="0"+a;}var u=": ";if(n&&i>1){u=" ("+o+" of "+i+"): ";}this.countdownDiv.innerHTML=this.settings.adLabel+u+s+":"+a;var l=r/t;var c=l*100;this.progressDiv.style.width=c+"%";}.bind(this);this.getPlayerWidth=function(){var e=getComputedStyle(this.player.el())||{};return parseInt(e.width,10)||this.player.width();}.bind(this);this.getPlayerHeight=function(){var e=getComputedStyle(this.player.el())||{};return parseInt(e.height,10)||this.player.height();}.bind(this);var w=function(){this.controlsDiv.style.height="14px";this.playPauseDiv.style.display="none";this.muteDiv.style.display="none";this.sliderDiv.style.display="none";this.fullscreenDiv.style.display="none";}.bind(this);var T=function(){this.controlsDiv.style.height="37px";this.playPauseDiv.style.display="block";this.muteDiv.style.display="block";this.sliderDiv.style.display="block";this.fullscreenDiv.style.display="block";}.bind(this);var j=function(){l(this.playPauseDiv,"ima-paused");c(this.playPauseDiv,"ima-playing");}.bind(this);var k=function(){l(this.playPauseDiv,"ima-playing");c(this.playPauseDiv,"ima-paused");}.bind(this);var E=function(){if(this.adPlaying){j();this.adsManager.pause();this.adPlaying=false;}else{k();this.adsManager.resume();this.adPlaying=true;}}.bind(this);var C=function(){if(this.adMuted){l(this.muteDiv,"ima-non-muted");c(this.muteDiv,"ima-muted");this.adsManager.setVolume(1);this.player.muted(false);this.adMuted=false;this.sliderLevelDiv.style.width=this.player.volume()*100+"%";}else{l(this.muteDiv,"ima-muted");c(this.muteDiv,"ima-non-muted");this.adsManager.setVolume(0);this.player.muted(true);this.adMuted=true;this.sliderLevelDiv.style.width="0%";}}.bind(this);var x=function x(){r.addEventListener("mouseup",O,false);r.addEventListener("mousemove",S,false);};var S=function S(e){P(e);};var O=function O(e){P(e);r.removeEventListener("mousemove",S);r.removeEventListener("mouseup",O);};var P=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100;t=Math.min(Math.max(t,0),100);this.sliderLevelDiv.style.width=t+"%";this.player.volume(t/100);this.adsManager.setVolume(t/100);if(this.player.volume()==0){l(this.muteDiv,"ima-muted");c(this.muteDiv,"ima-non-muted");this.player.muted(true);this.adMuted=true;}else{l(this.muteDiv,"ima-non-muted");c(this.muteDiv,"ima-muted");this.player.muted(false);this.adMuted=false;}}.bind(this);var A=function(){if(this.player.isFullscreen()){this.player.exitFullscreen();}else{this.player.requestFullscreen();}}.bind(this);var M=function(){if(this.player.isFullscreen()){l(this.fullscreenDiv,"ima-fullscreen");c(this.fullscreenDiv,"ima-non-fullscreen");if(this.adsManager){this.adsManager.resize(e.screen.width,e.screen.height,google.ima.ViewMode.FULLSCREEN);}}else{l(this.fullscreenDiv,"ima-non-fullscreen");c(this.fullscreenDiv,"ima-fullscreen");if(this.adsManager){this.adsManager.resize(this.getPlayerWidth(),this.getPlayerHeight(),google.ima.ViewMode.NORMAL);}}}.bind(this);var I=function(){var e=this.player.muted()?0:this.player.volume();if(this.adsManager){this.adsManager.setVolume(e);}if(e==0){this.adMuted=true;l(this.muteDiv,"ima-muted");c(this.muteDiv,"ima-non-muted");this.sliderLevelDiv.style.width="0%";}else{this.adMuted=false;l(this.muteDiv,"ima-non-muted");c(this.muteDiv,"ima-muted");this.sliderLevelDiv.style.width=e*100+"%";}}.bind(this);var L=function(){this.player.off("loadedmetadata",L);this.player.currentTime(0);}.bind(this);var R=function(){this.player.off("loadedmetadata",R);this.player.currentTime(0);this.player.play();}.bind(this);var B=function(){this.adsActive=false;this.adPlaying=false;this.player.on("ended",this.localContentEndedListener);this.vjsControls.show();this.player.ads.endLinearAdMode();if(this.adTrackingTimer){clearInterval(this.adTrackingTimer);}this.contentPlayheadTracker.currentTime=0;if(this.adsManager){this.adsManager.destroy();this.adsManager=null;}if(this.adsLoader&&!this.contentComplete){this.adsLoader.contentComplete();}this.contentComplete=false;this.allAdsCompleted=false;}.bind(this);this.addEventListener=function(e,t){if(this.adsManager){this.adsManager.addEventListener(e,t);}}.bind(this);this.getAdsManager=function(){return this.adsManager;}.bind(this);this.setContent=function(t,r,n){e.console.log("WARNING: player.ima.setContent is deprecated. Use "+"player.ima.setContentWithAdTag instead.");this.setContentWithAdTag(t,r,n);}.bind(this);this.setContentWithAdTag=function(e,t,r){B();this.settings.adTagUrl=t?t:this.settings.adTagUrl;D(e,r);}.bind(this);this.setContentWithAdsResponse=function(e,t,r){B();this.settings.adsResponse=t?t:this.settings.adsResponse;D(e,r);}.bind(this);this.changeAdTag=function(e){B();this.settings.adTagUrl=e;}.bind(this);var D=function(e,t){if(!!this.player.currentSrc()){this.player.currentTime(0);this.player.pause();}if(e){this.player.src(e);}if(t){this.player.on("loadedmetadata",R);}else{this.player.on("loadedmetadata",L);}}.bind(this);this.addContentEndedListener=function(e){this.contentEndedListeners.push(e);}.bind(this);this.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e);}.bind(this);this.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e;}.bind(this);this.pauseAd=function(){if(this.adsActive&&this.adPlaying){j();this.adsManager.pause();this.adPlaying=false;}}.bind(this);this.resumeAd=function(){if(this.adsActive&&!this.adPlaying){k();this.adsManager.resume();this.adPlaying=true;}}.bind(this);var N=function(){this.updateTimeIntervalHandle=setInterval(F,this.seekCheckInterval);this.seekCheckIntervalHandle=setInterval(U,this.seekCheckInterval);this.resizeCheckIntervalHandle=setInterval(H,this.resizeCheckInterval);}.bind(this);var F=function(){if(!this.contentPlayheadTracker.seeking){this.contentPlayheadTracker.currentTime=this.player.currentTime();}}.bind(this);var U=function(){var e=this.player.currentTime();var t=(e-this.contentPlayheadTracker.previousTime)*1e3;if(Math.abs(t)>this.seekCheckInterval+this.seekThreshold){this.contentPlayheadTracker.seeking=true;}else{this.contentPlayheadTracker.seeking=false;}this.contentPlayheadTracker.previousTime=this.player.currentTime();}.bind(this);var H=function(){var e=this.getPlayerWidth();var t=this.getPlayerHeight();if(this.adsManager&&(e!=this.adsManagerDimensions.width||t!=this.adsManagerDimensions.height)){this.adsManagerDimensions.width=e;this.adsManagerDimensions.height=t;this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL);}}.bind(this);this.setShowCountdown=function(e){this.showCountdown=e;this.countdownDiv.style.display=this.showCountdown?"block":"none";}.bind(this);this.VERSION="0.6.0";this.settings;this.controlPrefix;this.contentPlayer;this.showCountdown;this.autoPlayAdBreaks;this.vjsControls;this.adContainerDiv;this.controlsDiv;this.countdownDiv;this.seekBarDiv;this.progressDiv;this.playPauseDiv;this.muteDiv;this.sliderDiv;this.sliderLevelDiv;this.fullscreenDiv;this.adDisplayContainer;this.adDisplayContainerInitialized=false;this.adsLoader;this.adsManager;this.adsRenderingSettings=null;this.adTagUrl;this.adsResponse;this.currentAd;this.contentTrackingTimer;this.adTrackingTimer;this.adsActive=false;this.adPlaying=false;this.adMuted=false;this.contentComplete=false;this.allAdsCompleted=false;this.updateTimeIntervalHandle;this.seekCheckIntervalHandle;this.seekCheckInterval=1e3;this.resizeCheckIntervalHandle;this.resizeCheckInterval=250;this.seekThreshold=100;this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:false,duration:0};this.adPlayheadTracker={currentTime:0,duration:0,isPod:false,adPosition:0,totalAds:0};this.adsManagerDimensions={width:0,height:0};this.contentEndedListeners=[];this.contentAndAdsEndedListeners=[];this.adBreakReadyListener=undefined;this.contentSource="";this.localContentEndedListener=function(){if(this.adsLoader&&!this.contentComplete){this.adsLoader.contentComplete();this.contentComplete=true;}for(var e in this.contentEndedListeners){this.contentEndedListeners[e]();}if(this.allAdsCompleted){for(var e in this.contentAndAdsEndedListeners){this.contentAndAdsEndedListeners[e]();}}clearInterval(this.updateTimeIntervalHandle);clearInterval(this.seekCheckIntervalHandle);clearInterval(this.resizeCheckIntervalHandle);if(this.player.el()){this.player.one("play",N);}}.bind(this);this.playerDisposedListener=function(){this.contentEndedListeners,this.contentAndAdsEndedListeners=[],[];this.contentComplete=true;this.player.off("ended",this.localContentEndedListener);if(this.player.ads.adTimeoutTimeout){clearTimeout(this.player.ads.adTimeoutTimeout);}var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.adTrackingTimer,this.resizeCheckIntervalHandle];for(var t in e){var r=e[t];if(r){clearInterval(r);}}if(this.adsManager){this.adsManager.destroy();this.adsManager=null;}}.bind(this);this.settings=i({},o,n||{});if(!this.settings["id"]){e.console.log("Error: must provide id of video.js div");return;}this.controlPrefix=this.settings.id+"_"||"";this.contentPlayer=r.getElementById(this.settings["id"]+"_html5_api");if(this.contentPlayer.hasAttribute("autoplay")){this.settings["adWillAutoPlay"]=this.settings["adWillAutoPlay"]||true;}this.showCountdown=true;if(this.settings["showCountdown"]==false){this.showCountdown=false;}this.autoPlayAdBreaks=true;if(this.settings["autoPlayAdBreaks"]==false){this.autoPlayAdBreaks=false;}t.one("play",N);t.on("ended",this.localContentEndedListener);t.on("dispose",this.playerDisposedListener);var V={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout};var W=i({},V,n["contribAdsSettings"]||{});t.ads(W);this.adsRenderingSettings=new google.ima.AdsRenderingSettings();this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=true;if(this.settings["adsRenderingSettings"]){for(var q in this.settings["adsRenderingSettings"]){this.adsRenderingSettings[q]=this.settings["adsRenderingSettings"][q];}}if(this.settings["locale"]){google.ima.settings.setLocale(this.settings["locale"]);}if(this.settings["disableFlashAds"]){google.ima.settings.setDisableFlashAds(this.settings["disableFlashAds"]);}if(this.settings["disableCustomPlaybackForIOS10Plus"]){google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.settings["disableCustomPlaybackForIOS10Plus"]);}f();this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer);this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);if(this.settings.vpaidAllowed==false){this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED);}if(this.settings.vpaidMode){this.adsLoader.getSettings().setVpaidMode(this.settings.vpaidMode);}if(this.settings.locale){this.adsLoader.getSettings().setLocale(this.settings.locale);}if(this.settings.numRedirects){this.adsLoader.getSettings().setNumRedirects(this.settings.numRedirects);}this.adsLoader.getSettings().setPlayerType("videojs-ima");this.adsLoader.getSettings().setPlayerVersion(this.VERSION);this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks);this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,p,false);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,h,false);if(!s){s=this.startFromReadyCallback;}t.on("readyforpreroll",s);t.ready(function(){I();t.on("fullscreenchange",M);t.on("volumechange",I);});};var u=n.registerPlugin||n.plugin;u("ima",s);e.ImaPlugin=a;t.exports=a;});},{"video.js":340,"videojs-contrib-ads":337}],342:[function(e,t,r){(function(){"use strict";var t=null;if(typeof window.videojs==="undefined"&&typeof e==="function"){t=e("video.js");}else{t=window.videojs;}(function(e,t){var r,n={ui:true};var i=t.getComponent("MenuItem");var o=t.extend(i,{constructor:function constructor(e,r){r.selectable=true;i.call(this,e,r);this.src=r.src;e.on("resolutionchange",t.bind(this,this.update));}});o.prototype.handleClick=function(e){i.prototype.handleClick.call(this,e);this.player_.currentResolution(this.options_.label);};o.prototype.update=function(){var e=this.player_.currentResolution();this.selected(this.options_.label===e.label);};i.registerComponent("ResolutionMenuItem",o);var s=t.getComponent("MenuButton");var a=t.extend(s,{constructor:function constructor(e,r){this.label=document.createElement("span");r.label="Quality";s.call(this,e,r);this.el().setAttribute("aria-label","Quality");this.controlText("Quality");if(r.dynamicLabel){t.addClass(this.label,"vjs-resolution-button-label");this.el().appendChild(this.label);}else{var n=document.createElement("span");t.addClass(n,"vjs-menu-icon");this.el().appendChild(n);}e.on("updateSources",t.bind(this,this.update));}});a.prototype.createItems=function(){var e=[];var t=this.sources&&this.sources.label||{};for(var r in t){if(t.hasOwnProperty(r)){e.push(new o(this.player_,{label:r,src:t[r],selected:r===(this.currentSelection?this.currentSelection.label:false)}));}}return e;};a.prototype.update=function(){this.sources=this.player_.getGroupedSrc();this.currentSelection=this.player_.currentResolution();this.label.innerHTML=this.currentSelection?this.currentSelection.label:"";return s.prototype.update.call(this);};a.prototype.buildCSSClass=function(){return s.prototype.buildCSSClass.call(this)+" vjs-resolution-button";};s.registerComponent("ResolutionMenuButton",a);r=function r(e){var r=t.mergeOptions(n,e),i=this,o={},s={},u={};i.updateSrc=function(e){if(!e){return i.src();}e=e.filter(function(e){try{return i.canPlayType(e.type)!=="";}catch(e){return true;}});this.currentSources=e.sort(l);this.groupedSrc=c(this.currentSources);var t=p(this.groupedSrc,this.currentSources);this.currentResolutionState={label:t.label,sources:t.sources};i.trigger("updateSources");i.setSourcesSanitized(t.sources,t.label,r.customSourcePicker,true);i.trigger("resolutionchange");return i;};i.currentResolution=function(e,t){if(e==null||e===this.currentResolutionState.label){return this.currentResolutionState;}if(!this.groupedSrc||!this.groupedSrc.label||!this.groupedSrc.label[e]){return;}var n=this.groupedSrc.label[e];var o=i.currentTime();var s=i.paused();if(!s&&this.player_.options_.bigPlayButton){this.player_.bigPlayButton.hide();}var a="loadeddata";if(this.player_.techName_!=="Youtube"&&this.player_.preload()==="none"&&this.player_.techName_!=="Flash"){a="timeupdate";}i.setSourcesSanitized(n,e,t||r.customSourcePicker).one(a,function(){i.currentTime(o);i.handleTechSeeked_();if(!s){i.play().handleTechSeeked_();}i.trigger("resolutionchange");});return i;};i.getGroupedSrc=function(){return this.groupedSrc;};i.setSourcesSanitized=function(e,t,r,n){this.currentResolutionState={label:t,sources:e};if(typeof r==="function"){return r(i,e,t,n);}i.src(e.map(function(e){return{src:e.src,type:e.type,res:e.res};}));return i;};function l(e,t){if(!e.res||!t.res){return 0;}return+t.res-+e.res;}function c(e){var t={label:{},res:{},type:{}};e.map(function(e){f(t,"label",e);f(t,"res",e);f(t,"type",e);d(t,"label",e);d(t,"res",e);d(t,"type",e);});return t;}function f(e,t,r){if(e[t][r[t]]==null){e[t][r[t]]=[];}}function d(e,t,r){e[t][r[t]].push(r);}function p(e,t){var n=r["default"];var i="";if(n==="high"){n=t[0].res;i=t[0].label;}else if(n==="low"||n==null||!e.res[n]){n=t[t.length-1].res;i=t[t.length-1].label;}else if(e.res[n]){i=e.res[n][0].label;}return{res:n,label:i,sources:e.res[n]};}function h(e){var t={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"auto"}};var n=function n(t,r,_n){e.tech_.ytPlayer.setPlaybackQuality(r[0]._yt);e.trigger("updateSources");return e;};r.customSourcePicker=n;e.tech_.ytPlayer.setPlaybackQuality("auto");e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(r){for(var i in t){if(i.yt===r.data){e.currentResolution(i.label,n);return;}}});e.one("play",function(){var r=e.tech_.ytPlayer.getAvailableQualityLevels();var i=[];r.map(function(r){i.push({src:e.src().src,type:e.src().type,label:t[r].label,res:t[r].res,_yt:t[r].yt});});e.groupedSrc=c(i);var o={label:"auto",res:0,sources:e.groupedSrc.label.auto};this.currentResolutionState={label:o.label,sources:o.sources};e.trigger("updateSources");e.setSourcesSanitized(o.sources,o.label,n);});}i.ready(function(){if(r.ui){var e=new a(i,r);i.controlBar.resolutionSwitcher=i.controlBar.el_.insertBefore(e.el_,i.controlBar.getChild("fullscreenToggle").el_);i.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this);};}if(i.options_.sources.length>1){i.updateSrc(i.options_.sources);}if(i.techName_==="Youtube"){h(i);}});};t.plugin("videoJsResolutionSwitcher",r);})(window,t);})();},{"video.js":332}],343:[function(e,t,r){var n=t.exports={WebVTT:e("./vtt.js").WebVTT,VTTCue:e("./vttcue-extended.js").VTTCue,VTTRegion:e("./vttregion-extended.js").VTTRegion};window.vttjs=n;window.WebVTT=n.WebVTT;var i=n.VTTCue;var o=n.VTTRegion;var s=window.VTTCue;var a=window.VTTRegion;n.shim=function(){window.VTTCue=i;window.VTTRegion=o;};n.restore=function(){window.VTTCue=s;window.VTTRegion=a;};if(!window.VTTCue){n.shim();}},{"./vtt.js":344,"./vttcue-extended.js":345,"./vttregion-extended.js":347}],344:[function(e,t,r){(function(e){var t=Object.create||function(){function e(){}return function(t){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.");}e.prototype=t;return new e();};}();function r(e,t){this.name="ParsingError";this.code=e.code;this.message=t||e.message;}r.prototype=t(Error.prototype);r.prototype.constructor=r;r.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function n(e){function t(e,t,r,n){return(e|0)*3600+(t|0)*60+(r|0)+(n|0)/1e3;}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!r){return null;}if(r[3]){return t(r[1],r[2],r[3].replace(":",""),r[4]);}else if(r[1]>59){return t(r[1],r[2],0,r[4]);}else{return t(0,r[1],r[2],r[4]);}}function i(){this.values=t(null);}i.prototype={set:function set(e,t){if(!this.get(e)&&t!==""){this.values[e]=t;}},get:function get(e,t,r){if(r){return this.has(e)?this.values[e]:t[r];}return this.has(e)?this.values[e]:t;},has:function has(e){return e in this.values;},alt:function alt(e,t,r){for(var n=0;n<r.length;++n){if(t===r[n]){this.set(e,t);break;}}},integer:function integer(e,t){if(/^-?\d+$/.test(t)){this.set(e,parseInt(t,10));}},percent:function percent(e,t){var r;if(r=t.match(/^([\d]{1,3})(\.[\d]*)?%$/)){t=parseFloat(t);if(t>=0&&t<=100){this.set(e,t);return true;}}return false;}};function o(e,t,r,n){var i=n?e.split(n):[e];for(var o in i){if(typeof i[o]!=="string"){continue;}var s=i[o].split(r);if(s.length!==2){continue;}var a=s[0];var u=s[1];t(a,u);}}function s(e,t,s){var a=e;function u(){var t=n(e);if(t===null){throw new r(r.Errors.BadTimeStamp,"Malformed timestamp: "+a);}e=e.replace(/^[^\sa-zA-Z-]+/,"");return t;}function l(e,t){var r=new i();o(e,function(e,t){switch(e){case"region":for(var n=s.length-1;n>=0;n--){if(s[n].id===t){r.set(e,s[n].region);break;}}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];r.integer(e,o);r.percent(e,o)?r.set("snapToLines",false):null;r.alt(e,o,["auto"]);if(i.length===2){r.alt("lineAlign",i[1],["start","middle","end"]);}break;case"position":i=t.split(",");r.percent(e,i[0]);if(i.length===2){r.alt("positionAlign",i[1],["start","middle","end"]);}break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"]);break;}},/:/,/\s/);t.region=r.get("region",null);t.vertical=r.get("vertical","");t.line=r.get("line","auto");t.lineAlign=r.get("lineAlign","start");t.snapToLines=r.get("snapToLines",true);t.size=r.get("size",100);t.align=r.get("align","middle");t.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align);t.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align);}function c(){e=e.replace(/^\s+/,"");}c();t.startTime=u();c();if(e.substr(0,3)!=="--\x3e"){throw new r(r.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);}e=e.substr(3);c();t.endTime=u();c();l(e,t);}var a={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""};var u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var l={v:"title",lang:"lang"};var c={rt:"ruby"};function f(e,t){function r(){if(!t){return null;}function e(e){t=t.substr(e.length);return e;}var r=t.match(/^([^<]*)(<[^>]+>?)?/);return e(r[1]?r[1]:r[2]);}function i(e){return a[e];}function o(e){while(g=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)){e=e.replace(g[0],i);}return e;}function s(e,t){return!c[t.localName]||c[t.localName]===e.localName;}function f(t,r){var n=u[t];if(!n){return null;}var i=e.document.createElement(n);i.localName=n;var o=l[t];if(o&&r){i[o]=r.trim();}return i;}var d=e.document.createElement("div"),p=d,h,v=[];while((h=r())!==null){if(h[0]==="<"){if(h[1]==="/"){if(v.length&&v[v.length-1]===h.substr(2).replace(">","")){v.pop();p=p.parentNode;}continue;}var y=n(h.substr(1,h.length-2));var m;if(y){m=e.document.createProcessingInstruction("timestamp",y);p.appendChild(m);continue;}var g=h.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!g){continue;}m=f(g[1],g[3]);if(!m){continue;}if(!s(p,m)){continue;}if(g[2]){m.className=g[2].substr(1).replace("."," ");}v.push(g[1]);p.appendChild(m);p=m;continue;}p.appendChild(e.document.createTextNode(o(h)));}return d;}var d=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function p(e){for(var t=0;t<d.length;t++){var r=d[t];if(e>=r[0]&&e<=r[1]){return true;}}return false;}function h(e){var t=[],r="",n;if(!e||!e.childNodes){return"ltr";}function i(e,t){for(var r=t.childNodes.length-1;r>=0;r--){e.push(t.childNodes[r]);}}function o(e){if(!e||!e.length){return null;}var t=e.pop(),r=t.textContent||t.innerText;if(r){var n=r.match(/^.*(\n|\r)/);if(n){e.length=0;return n[0];}return r;}if(t.tagName==="ruby"){return o(e);}if(t.childNodes){i(e,t);return o(e);}}i(t,e);while(r=o(t)){for(var s=0;s<r.length;s++){n=r.charCodeAt(s);if(p(n)){return"rtl";}}}return"ltr";}function v(e){if(typeof e.line==="number"&&(e.snapToLines||e.line>=0&&e.line<=100)){return e.line;}if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement){return-1;}var t=e.track,r=t.textTrackList,n=0;for(var i=0;i<r.length&&r[i]!==t;i++){if(r[i].mode==="showing"){n++;}}return++n*-1;}function y(){}y.prototype.applyStyles=function(e,t){t=t||this.div;for(var r in e){if(e.hasOwnProperty(r)){t.style[r]=e[r];}}};y.prototype.formatStyle=function(e,t){return e===0?0:e+t;};function m(e,t,r){var n=/MSIE\s8\.0/.test(navigator.userAgent);var i="rgba(255, 255, 255, 1)";var o="rgba(0, 0, 0, 0.8)";if(n){i="rgb(255, 255, 255)";o="rgb(0, 0, 0)";}y.call(this);this.cue=t;this.cueDiv=f(e,t.text);var s={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};if(!n){s.writingMode=t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl";s.unicodeBidi="plaintext";}this.applyStyles(s,this.cueDiv);this.div=e.document.createElement("div");s={textAlign:t.align==="middle"?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"};if(!n){s.direction=h(this.cueDiv);s.writingMode=t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext";}this.applyStyles(s);this.div.appendChild(this.cueDiv);var a=0;switch(t.positionAlign){case"start":a=t.position;break;case"middle":a=t.position-t.size/2;break;case"end":a=t.position-t.size;break;}if(t.vertical===""){this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(t.size,"%")});}else{this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(t.size,"%")});}this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")});};}m.prototype=t(y.prototype);m.prototype.constructor=m;function g(e){var t=/MSIE\s8\.0/.test(navigator.userAgent);var r,n,i,o;if(e.div){n=e.div.offsetHeight;i=e.div.offsetWidth;o=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect();r=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0;}this.left=e.left;this.right=e.right;this.top=e.top||o;this.height=e.height||n;this.bottom=e.bottom||o+(e.height||n);this.width=e.width||i;this.lineHeight=r!==undefined?r:e.lineHeight;if(t&&!this.lineHeight){this.lineHeight=13;}}g.prototype.move=function(e,t){t=t!==undefined?t:this.lineHeight;switch(e){case"+x":this.left+=t;this.right+=t;break;case"-x":this.left-=t;this.right-=t;break;case"+y":this.top+=t;this.bottom+=t;break;case"-y":this.top-=t;this.bottom-=t;break;}};g.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top;};g.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++){if(this.overlaps(e[t])){return true;}}return false;};g.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right;};g.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom;}};g.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),r=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),n=t*r;return n/(this.height*this.width);};g.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width};};g.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0;var r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0;var n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var i={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r};return i;};function _(e,t,r,n){function i(e,t){var i,o=new g(e),s=1;for(var a=0;a<t.length;a++){while(e.overlapsOppositeAxis(r,t[a])||e.within(r)&&e.overlapsAny(n)){e.move(t[a]);}if(e.within(r)){return e;}var u=e.intersectPercentage(r);if(s>u){i=new g(e);s=u;}e=new g(o);}return i||o;}var o=new g(t),s=t.cue,a=v(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"];l="height";break;case"rl":u=["+x","-x"];l="width";break;case"lr":u=["-x","+x"];l="width";break;}var c=o.lineHeight,f=c*Math.round(a),d=r[l]+c,p=u[0];if(Math.abs(f)>d){f=f<0?-1:1;f*=Math.ceil(d/c)*c;}if(a<0){f+=s.vertical===""?r.height:r.width;u=u.reverse();}o.move(p,f);}else{var h=o.lineHeight/r.height*100;switch(s.lineAlign){case"middle":a-=h/2;break;case"end":a-=h;break;}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")});break;}u=["+y","-x","+x","-y"];o=new g(t);}var y=i(o,u);t.move(y.toCSSCompatValues(r));}function b(){}b.StringDecoder=function(){return{decode:function decode(e){if(!e){return"";}if(typeof e!=="string"){throw new Error("Error - expected string data.");}return decodeURIComponent(encodeURIComponent(e));}};};b.convertCueToDOMTree=function(e,t){if(!e||!t){return null;}return f(e,t);};var w=.05;var T="sans-serif";var j="1.5%";b.processCues=function(e,t,r){if(!e||!t||!r){return null;}while(r.firstChild){r.removeChild(r.firstChild);}var n=e.document.createElement("div");n.style.position="absolute";n.style.left="0";n.style.right="0";n.style.top="0";n.style.bottom="0";n.style.margin=j;r.appendChild(n);function i(e){for(var t=0;t<e.length;t++){if(e[t].hasBeenReset||!e[t].displayState){return true;}}return false;}if(!i(t)){for(var o=0;o<t.length;o++){n.appendChild(t[o].displayState);}return;}var s=[],a=g.getSimpleBoxPosition(n),u=Math.round(a.height*w*100)/100;var l={font:u+"px "+T};(function(){var r,i;for(var o=0;o<t.length;o++){i=t[o];r=new m(e,i,l);n.appendChild(r.div);_(e,r,a,s);i.displayState=r.div;s.push(g.getSimpleBoxPosition(r));}})();};b.Parser=function(e,t,r){if(!r){r=t;t={};}if(!t){t={};}this.window=e;this.vttjs=t;this.state="INITIAL";this.buffer="";this.decoder=r||new TextDecoder("utf8");this.regionList=[];};b.Parser.prototype={reportOrThrowError:function reportOrThrowError(e){if(e instanceof r){this.onparsingerror&&this.onparsingerror(e);}else{throw e;}},parse:function parse(e){var t=this;if(e){t.buffer+=t.decoder.decode(e,{stream:true});}function a(){var e=t.buffer;var r=0;while(r<e.length&&e[r]!=="\r"&&e[r]!=="\n"){++r;}var n=e.substr(0,r);if(e[r]==="\r"){++r;}if(e[r]==="\n"){++r;}t.buffer=e.substr(r);return n;}function u(e){var r=new i();o(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(n.length!==2){break;}var o=new i();o.percent("x",n[0]);o.percent("y",n[1]);if(!o.has("x")||!o.has("y")){break;}r.set(e+"X",o.get("x"));r.set(e+"Y",o.get("y"));break;case"scroll":r.alt(e,t,["up"]);break;}},/=/,/\s/);if(r.has("id")){var n=new(t.vttjs.VTTRegion||t.window.VTTRegion)();n.width=r.get("width",100);n.lines=r.get("lines",3);n.regionAnchorX=r.get("regionanchorX",0);n.regionAnchorY=r.get("regionanchorY",100);n.viewportAnchorX=r.get("viewportanchorX",0);n.viewportAnchorY=r.get("viewportanchorY",100);n.scroll=r.get("scroll","");t.onregion&&t.onregion(n);t.regionList.push({id:r.get("id"),region:n});}}function l(e){var r=new i();o(e,function(e,t){switch(e){case"MPEGT":r.integer(e+"S",t);break;case"LOCA":r.set(e+"L",n(t));break;}},/[^\d]:/,/,/);t.ontimestampmap&&t.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")});}function c(e){if(e.match(/X-TIMESTAMP-MAP/)){o(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":l(t);break;}},/=/);}else{o(e,function(e,t){switch(e){case"Region":u(t);break;}},/:/);}}try{var f;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer)){return this;}f=a();var d=f.match(/^WEBVTT([ \t].*)?$/);if(!d||!d[0]){throw new r(r.Errors.BadSignature);}t.state="HEADER";}var p=false;while(t.buffer){if(!/\r\n|\n/.test(t.buffer)){return this;}if(!p){f=a();}else{p=false;}switch(t.state){case"HEADER":if(/:/.test(f)){c(f);}else if(!f){t.state="ID";}continue;case"NOTE":if(!f){t.state="ID";}continue;case"ID":if(/^NOTE($|[ \t])/.test(f)){t.state="NOTE";break;}if(!f){continue;}t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");t.state="CUE";if(f.indexOf("--\x3e")===-1){t.cue.id=f;continue;}case"CUE":try{s(f,t.cue,t.regionList);}catch(e){t.reportOrThrowError(e);t.cue=null;t.state="BADCUE";continue;}t.state="CUETEXT";continue;case"CUETEXT":var h=f.indexOf("--\x3e")!==-1;if(!f||h&&(p=true)){t.oncue&&t.oncue(t.cue);t.cue=null;t.state="ID";continue;}if(t.cue.text){t.cue.text+="\n";}t.cue.text+=f;continue;case"BADCUE":if(!f){t.state="ID";}continue;}}}catch(e){t.reportOrThrowError(e);if(t.state==="CUETEXT"&&t.cue&&t.oncue){t.oncue(t.cue);}t.cue=null;t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE";}return this;},flush:function flush(){var e=this;try{e.buffer+=e.decoder.decode();if(e.cue||e.state==="HEADER"){e.buffer+="\n\n";e.parse();}if(e.state==="INITIAL"){throw new r(r.Errors.BadSignature);}}catch(t){e.reportOrThrowError(t);}e.onflush&&e.onflush();return this;}};e.WebVTT=b;})(this,this.vttjs||{});},{}],345:[function(e,t,r){if(typeof t!=="undefined"&&t.exports){this.VTTCue=this.VTTCue||e("./vttcue").VTTCue;}(function(e){e.VTTCue.prototype.toJSON=function(){var e={},t=this;Object.keys(this).forEach(function(r){if(r!=="getCueAsHTML"&&r!=="hasBeenReset"&&r!=="displayState"){e[r]=t[r];}});return e;};e.VTTCue.create=function(t){if(!t.hasOwnProperty("startTime")||!t.hasOwnProperty("endTime")||!t.hasOwnProperty("text")){throw new Error("You must at least have start time, end time, and text.");}var r=new e.VTTCue(t.startTime,t.endTime,t.text);for(var n in t){if(r.hasOwnProperty(n)){r[n]=t[n];}}return r;};e.VTTCue.fromJSON=function(e){return this.create(JSON.parse(e));};})(this);},{"./vttcue":346}],346:[function(e,t,r){(function(e,t){var r="auto";var n={"":true,lr:true,rl:true};var i={start:true,middle:true,end:true,left:true,right:true};function o(e){if(typeof e!=="string"){return false;}var t=n[e.toLowerCase()];return t?e.toLowerCase():false;}function s(e){if(typeof e!=="string"){return false;}var t=i[e.toLowerCase()];return t?e.toLowerCase():false;}function a(e){var t=1;for(;t<arguments.length;t++){var r=arguments[t];for(var n in r){e[n]=r[n];}}return e;}function u(e,t,n){var i=this;var u=/MSIE\s8\.0/.test(navigator.userAgent);var l={};if(u){i=document.createElement("custom");}else{l.enumerable=true;}i.hasBeenReset=false;var c="";var f=false;var d=e;var p=t;var h=n;var v=null;var y="";var m=true;var g="auto";var _="start";var b=50;var w="middle";var T=50;var j="middle";Object.defineProperty(i,"id",a({},l,{get:function get(){return c;},set:function set(e){c=""+e;}}));Object.defineProperty(i,"pauseOnExit",a({},l,{get:function get(){return f;},set:function set(e){f=!!e;}}));Object.defineProperty(i,"startTime",a({},l,{get:function get(){return d;},set:function set(e){if(typeof e!=="number"){throw new TypeError("Start time must be set to a number.");}d=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"endTime",a({},l,{get:function get(){return p;},set:function set(e){if(typeof e!=="number"){throw new TypeError("End time must be set to a number.");}p=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"text",a({},l,{get:function get(){return h;},set:function set(e){h=""+e;this.hasBeenReset=true;}}));Object.defineProperty(i,"region",a({},l,{get:function get(){return v;},set:function set(e){v=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"vertical",a({},l,{get:function get(){return y;},set:function set(e){var t=o(e);if(t===false){throw new SyntaxError("An invalid or illegal string was specified.");}y=t;this.hasBeenReset=true;}}));Object.defineProperty(i,"snapToLines",a({},l,{get:function get(){return m;},set:function set(e){m=!!e;this.hasBeenReset=true;}}));Object.defineProperty(i,"line",a({},l,{get:function get(){return g;},set:function set(e){if(typeof e!=="number"&&e!==r){throw new SyntaxError("An invalid number or illegal string was specified.");}g=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"lineAlign",a({},l,{get:function get(){return _;},set:function set(e){var t=s(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.");}_=t;this.hasBeenReset=true;}}));Object.defineProperty(i,"position",a({},l,{get:function get(){return b;},set:function set(e){if(e<0||e>100){throw new Error("Position must be between 0 and 100.");}b=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"positionAlign",a({},l,{get:function get(){return w;},set:function set(e){var t=s(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.");}w=t;this.hasBeenReset=true;}}));Object.defineProperty(i,"size",a({},l,{get:function get(){return T;},set:function set(e){if(e<0||e>100){throw new Error("Size must be between 0 and 100.");}T=e;this.hasBeenReset=true;}}));Object.defineProperty(i,"align",a({},l,{get:function get(){return j;},set:function set(e){var t=s(e);if(!t){throw new SyntaxError("An invalid or illegal string was specified.");}j=t;this.hasBeenReset=true;}}));i.displayState=undefined;if(u){return i;}}u.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text);};e.VTTCue=e.VTTCue||u;t.VTTCue=u;})(this,this.vttjs||{});},{}],347:[function(e,t,r){if(typeof t!=="undefined"&&t.exports){this.VTTRegion=e("./vttregion").VTTRegion;}(function(e){e.VTTRegion.create=function(t){var r=new e.VTTRegion();for(var n in t){if(r.hasOwnProperty(n)){r[n]=t[n];}}return r;};e.VTTRegion.fromJSON=function(e){return this.create(JSON.parse(e));};})(this);},{"./vttregion":348}],348:[function(e,t,r){(function(e,t){var r={"":true,up:true};function n(e){if(typeof e!=="string"){return false;}var t=r[e.toLowerCase()];return t?e.toLowerCase():false;}function i(e){return typeof e==="number"&&e>=0&&e<=100;}function o(){var e=100;var t=3;var r=0;var o=100;var s=0;var a=100;var u="";Object.defineProperties(this,{width:{enumerable:true,get:function get(){return e;},set:function set(t){if(!i(t)){throw new Error("Width must be between 0 and 100.");}e=t;}},lines:{enumerable:true,get:function get(){return t;},set:function set(e){if(typeof e!=="number"){throw new TypeError("Lines must be set to a number.");}t=e;}},regionAnchorY:{enumerable:true,get:function get(){return o;},set:function set(e){if(!i(e)){throw new Error("RegionAnchorX must be between 0 and 100.");}o=e;}},regionAnchorX:{enumerable:true,get:function get(){return r;},set:function set(e){if(!i(e)){throw new Error("RegionAnchorY must be between 0 and 100.");}r=e;}},viewportAnchorY:{enumerable:true,get:function get(){return a;},set:function set(e){if(!i(e)){throw new Error("ViewportAnchorY must be between 0 and 100.");}a=e;}},viewportAnchorX:{enumerable:true,get:function get(){return s;},set:function set(e){if(!i(e)){throw new Error("ViewportAnchorX must be between 0 and 100.");}s=e;}},scroll:{enumerable:true,get:function get(){return u;},set:function set(e){var t=n(e);if(t===false){throw new SyntaxError("An invalid or illegal string was specified.");}u=t;}}});}e.VTTRegion=e.VTTRegion||o;t.VTTRegion=o;})(this,this.vttjs||{});},{}],349:[function(e,t,r){(function(r){var n=e("binary-search");var i=e("events").EventEmitter;var o=e("inherits");var s=e("mp4-stream");var a=e("mp4-box-encoding");var u=e("range-slice-stream");t.exports=l;function l(e){var t=this;i.call(t);t._tracks=[];t._fragmentSequence=1;t._file=e;t._decoder=null;t._findMoov(0);}o(l,i);l.prototype._findMoov=function(e){var t=this;if(t._decoder){t._decoder.destroy();}t._decoder=s.decode();var r=t._file.createReadStream({start:e});r.pipe(t._decoder);t._decoder.once("box",function(n){if(n.type==="moov"){t._decoder.decode(function(e){r.destroy();try{t._processMoov(e);}catch(e){e.message="Cannot parse mp4 file: "+e.message;t.emit("error",e);}});}else{r.destroy();t._findMoov(e+n.length);}});};function c(e,t){var r=this;r._entries=e;r._countName=t||"count";r._index=0;r._offset=0;r.value=r._entries[0];}c.prototype.inc=function(){var e=this;e._offset++;if(e._offset>=e._entries[e._index][e._countName]){e._index++;e._offset=0;}e.value=e._entries[e._index];};l.prototype._processMoov=function(e){var t=this;var n=e.traks;t._tracks=[];t._hasVideo=false;t._hasAudio=false;for(var i=0;i<n.length;i++){var o=n[i];var s=o.mdia.minf.stbl;var u=s.stsd.entries[0];var l=o.mdia.hdlr.handlerType;var d;var p;if(l==="vide"&&u.type==="avc1"){if(t._hasVideo){continue;}t._hasVideo=true;d="avc1";if(u.avcC){d+="."+u.avcC.mimeCodec;}p='video/mp4; codecs="'+d+'"';}else if(l==="soun"&&u.type==="mp4a"){if(t._hasAudio){continue;}t._hasAudio=true;d="mp4a";if(u.esds&&u.esds.mimeCodec){d+="."+u.esds.mimeCodec;}p='audio/mp4; codecs="'+d+'"';}else{continue;}var h=[];var v=0;var y=0;var m=0;var g=0;var _=0;var b=0;var w=new c(s.stts.entries);var T=null;if(s.ctts){T=new c(s.ctts.entries);}var j=0;while(true){var k=s.stsc.entries[_];var E=s.stsz.entries[v];var C=w.value.duration;var x=T?T.value.compositionOffset:0;var S=true;if(s.stss){S=s.stss.entries[j]===v+1;}h.push({size:E,duration:C,dts:b,presentationOffset:x,sync:S,offset:g+s.stco.entries[m]});v++;if(v>=s.stsz.entries.length){break;}y++;g+=E;if(y>=k.samplesPerChunk){y=0;g=0;m++;var O=s.stsc.entries[_+1];if(O&&m+1>=O.firstChunk){_++;}}b+=C;w.inc();T&&T.inc();if(S){j++;}}o.mdia.mdhd.duration=0;o.tkhd.duration=0;var P=k.sampleDescriptionId;var A={type:"moov",mvhd:e.mvhd,traks:[{tkhd:o.tkhd,mdia:{mdhd:o.mdia.mdhd,hdlr:o.mdia.hdlr,elng:o.mdia.elng,minf:{vmhd:o.mdia.minf.vmhd,smhd:o.mdia.minf.smhd,dinf:o.mdia.minf.dinf,stbl:{stsd:s.stsd,stts:f(),ctts:f(),stsc:f(),stsz:f(),stco:f(),stss:f()}}}}],mvex:{mehd:{fragmentDuration:e.mvhd.duration},trexs:[{trackId:o.tkhd.trackId,defaultSampleDescriptionIndex:P,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};t._tracks.push({trackId:o.tkhd.trackId,timeScale:o.mdia.mdhd.timeScale,samples:h,currSample:null,currTime:null,moov:A,mime:p});}if(t._tracks.length===0){t.emit("error",new Error("no playable tracks"));return;}e.mvhd.duration=0;t._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};var M=a.encode(t._ftyp);var I=t._tracks.map(function(e){var t=a.encode(e.moov);return{mime:e.mime,init:r.concat([M,t])};});t.emit("ready",I);};function f(){return{version:0,flags:0,entries:[]};}l.prototype.seek=function(e){var t=this;if(!t._tracks){throw new Error("Not ready yet; wait for 'ready' event");}if(t._fileStream){t._fileStream.destroy();t._fileStream=null;}var r=-1;t._tracks.map(function(n,i){if(n.outStream){n.outStream.destroy();}if(n.inStream){n.inStream.destroy();n.inStream=null;}var o=n.outStream=s.encode();var a=t._generateFragment(i,e);if(!a){return o.finalize();}if(r===-1||a.ranges[0].start<r){r=a.ranges[0].start;}u(a);function u(e){if(o.destroyed)return;o.box(e.moof,function(r){if(r)return t.emit("error",r);if(o.destroyed)return;var s=n.inStream.slice(e.ranges);s.pipe(o.mediaData(e.length,function(e){if(e)return t.emit("error",e);if(o.destroyed)return;var r=t._generateFragment(i);if(!r){return o.finalize();}u(r);}));});}});if(r>=0){var n=t._fileStream=t._file.createReadStream({start:r});t._tracks.forEach(function(e){e.inStream=new u(r,{highWaterMark:1e7});n.pipe(e.inStream);});}return t._tracks.map(function(e){return e.outStream;});};l.prototype._findSampleBefore=function(e,t){var r=this;var i=r._tracks[e];var o=Math.floor(i.timeScale*t);var s=n(i.samples,o,function(e,t){var r=e.dts+e.presentationOffset;return r-t;});if(s===-1){s=0;}else if(s<0){s=-s-2;}while(!i.samples[s].sync){s--;}return s;};var d=1;l.prototype._generateFragment=function(e,t){var r=this;var n=r._tracks[e];var i;if(t!==undefined){i=r._findSampleBefore(e,t);}else{i=n.currSample;}if(i>=n.samples.length)return null;var o=n.samples[i].dts;var s=0;var a=[];for(var u=i;u<n.samples.length;u++){var l=n.samples[u];if(l.sync&&l.dts-o>=n.timeScale*d){break;}s+=l.size;var c=a.length-1;if(c<0||a[c].end!==l.offset){a.push({start:l.offset,end:l.offset+l.size});}else{a[c].end+=l.size;}}n.currSample=u;return{moof:r._generateMoof(e,i,u),ranges:a,length:s};};l.prototype._generateMoof=function(e,t,r){var n=this;var i=n._tracks[e];var o=[];for(var s=t;s<r;s++){var u=i.samples[s];o.push({sampleDuration:u.duration,sampleSize:u.size,sampleFlags:u.sync?33554432:16842752,sampleCompositionTimeOffset:u.presentationOffset});}var l={type:"moof",mfhd:{sequenceNumber:n._fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:i.trackId},tfdt:{baseMediaDecodeTime:i.samples[t].dts},trun:{flags:3841,dataOffset:8,entries:o}}]};l.trafs[0].trun.dataOffset+=a.encodingLength(l);return l;};}).call(this,e("buffer").Buffer);},{"binary-search":7,buffer:41,events:73,inherits:94,"mp4-box-encoding":117,"mp4-stream":120,"range-slice-stream":160}],350:[function(e,t,r){var n=e("mediasource");var i=e("pump");var o=e("./mp4-remuxer");t.exports=s;function s(e,t,r){var i=this;if(!(this instanceof s))return new s(e,t,r);r=r||{};i.detailedError=null;i._elem=t;i._elemWrapper=new n(t);i._waitingFired=false;i._trackMeta=null;i._file=e;i._tracks=null;if(i._elem.preload!=="none"){i._createMuxer();}i._onError=function(e){i.detailedError=i._elemWrapper.detailedError;i.destroy();};i._onWaiting=function(){i._waitingFired=true;if(!i._muxer){i._createMuxer();}else if(i._tracks){i._pump();}};i._elem.addEventListener("waiting",i._onWaiting);i._elem.addEventListener("error",i._onError);}s.prototype._createMuxer=function(){var e=this;e._muxer=new o(e._file);e._muxer.on("ready",function(t){e._tracks=t.map(function(t){var r=e._elemWrapper.createWriteStream(t.mime);r.on("error",function(t){e._elemWrapper.error(t);});var n={muxed:null,mediaSource:r,initFlushed:false,onInitFlushed:null};r.write(t.init,function(e){n.initFlushed=true;if(n.onInitFlushed){n.onInitFlushed(e);}});return n;});if(e._waitingFired||e._elem.preload==="auto"){e._pump();}});e._muxer.on("error",function(t){e._elemWrapper.error(t);});};s.prototype._pump=function(){var e=this;var t=e._muxer.seek(e._elem.currentTime,!e._tracks);e._tracks.forEach(function(r,n){var o=function o(){if(r.muxed){r.muxed.destroy();r.mediaSource=e._elemWrapper.createWriteStream(r.mediaSource);r.mediaSource.on("error",function(t){e._elemWrapper.error(t);});}r.muxed=t[n];i(r.muxed,r.mediaSource);};if(!r.initFlushed){r.onInitFlushed=function(t){if(t){e._elemWrapper.error(t);return;}o();};}else{o();}});};s.prototype.destroy=function(){var e=this;if(e.destroyed){return;}e.destroyed=true;e._elem.removeEventListener("waiting",e._onWaiting);e._elem.removeEventListener("error",e._onError);if(e._tracks){e._tracks.forEach(function(e){e.muxed.destroy();});}e._elem.src="";};},{"./mp4-remuxer":349,mediasource:102,pump:153}],351:[function(e,t,r){(function(r,n){t.exports=E;var i=e("safe-buffer").Buffer;var o=e("simple-concat");var s=e("create-torrent");var a=e("debug")("webtorrent");var u=e("bittorrent-dht/client");var l=e("events").EventEmitter;var c=e("xtend");var f=e("inherits");var d=e("load-ip-set");var p=e("run-parallel");var h=e("parse-torrent");var v=e("path");var y=e("simple-peer");var m=e("randombytes");var g=e("speedometer");var _=e("zero-fill");var b=e("./lib/tcp-pool");var w=e("./lib/torrent");var T=e("./package.json").version;var j=T.match(/([0-9]+)/g).slice(0,2).map(function(e){return _(2,e);}).join("");var k="-WW"+j+"-";f(E,l);function E(e){var t=this;if(!(t instanceof E))return new E(e);l.call(t);if(!e)e={};if(typeof e.peerId==="string"){t.peerId=e.peerId;}else if(i.isBuffer(e.peerId)){t.peerId=e.peerId.toString("hex");}else{t.peerId=i.from(k+m(9).toString("base64")).toString("hex");}t.peerIdBuffer=i.from(t.peerId,"hex");if(typeof e.nodeId==="string"){t.nodeId=e.nodeId;}else if(i.isBuffer(e.nodeId)){t.nodeId=e.nodeId.toString("hex");}else{t.nodeId=m(20).toString("hex");}t.nodeIdBuffer=i.from(t.nodeId,"hex");t._debugId=t.peerId.toString("hex").substring(0,7);t.destroyed=false;t.listening=false;t.torrentPort=e.torrentPort||0;t.dhtPort=e.dhtPort||0;t.tracker=e.tracker!==undefined?e.tracker:{};t.torrents=[];t.maxConns=Number(e.maxConns)||55;t._debug("new webtorrent (peerId %s, nodeId %s, port %s)",t.peerId,t.nodeId,t.torrentPort);if(t.tracker){if(_typeof(t.tracker)!=="object")t.tracker={};if(e.rtcConfig){console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead");t.tracker.rtcConfig=e.rtcConfig;}if(e.wrtc){console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead");t.tracker.wrtc=e.wrtc;}if(n.WRTC&&!t.tracker.wrtc){t.tracker.wrtc=n.WRTC;}}if(typeof b==="function"){t._tcpPool=new b(t);}else{r.nextTick(function(){t._onListening();});}t._downloadSpeed=g();t._uploadSpeed=g();if(e.dht!==false&&typeof u==="function"){t.dht=new u(c({nodeId:t.nodeId},e.dht));t.dht.once("error",function(e){t._destroy(e);});t.dht.once("listening",function(){var e=t.dht.address();if(e)t.dhtPort=e.port;});t.dht.setMaxListeners(0);t.dht.listen(t.dhtPort);}else{t.dht=false;}t.enableWebSeeds=e.webSeeds!==false;if(typeof d==="function"&&e.blocklist!=null){d(e.blocklist,{headers:{"user-agent":"WebTorrent/"+T+" (https://webtorrent.io)"}},function(e,r){if(e)return t.error("Failed to load blocklist: "+e.message);t.blocked=r;o();});}else{r.nextTick(o);}function o(){if(t.destroyed)return;t.ready=true;t.emit("ready");}}E.WEBRTC_SUPPORT=y.WEBRTC_SUPPORT;Object.defineProperty(E.prototype,"downloadSpeed",{get:function get(){return this._downloadSpeed();}});Object.defineProperty(E.prototype,"uploadSpeed",{get:function get(){return this._uploadSpeed();}});Object.defineProperty(E.prototype,"progress",{get:function get(){var e=this.torrents.filter(function(e){return e.progress!==1;});var t=e.reduce(function(e,t){return e+t.downloaded;},0);var r=e.reduce(function(e,t){return e+(t.length||0);},0)||1;return t/r;}});Object.defineProperty(E.prototype,"ratio",{get:function get(){var e=this.torrents.reduce(function(e,t){return e+t.uploaded;},0);var t=this.torrents.reduce(function(e,t){return e+t.received;},0)||1;return e/t;}});E.prototype.get=function(e){var t=this;var r,n;var i=t.torrents.length;if(e instanceof w){for(r=0;r<i;r++){n=t.torrents[r];if(n===e)return n;}}else{var o;try{o=h(e);}catch(e){}if(!o)return null;if(!o.infoHash)throw new Error("Invalid torrent identifier");for(r=0;r<i;r++){n=t.torrents[r];if(n.infoHash===o.infoHash)return n;}}return null;};E.prototype.download=function(e,t,r){console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead");return this.add(e,t,r);};E.prototype.add=function(e,t,r){var n=this;if(n.destroyed)throw new Error("client is destroyed");if(typeof t==="function")return n.add(e,null,t);n._debug("add");t=t?c(t):{};var i=new w(e,n,t);n.torrents.push(i);i.once("_infoHash",o);i.once("ready",s);i.once("close",a);function o(){if(n.destroyed)return;for(var e=0,t=n.torrents.length;e<t;e++){var r=n.torrents[e];if(r.infoHash===i.infoHash&&r!==i){i._destroy(new Error("Cannot add duplicate torrent "+i.infoHash));return;}}}function s(){if(n.destroyed)return;if(typeof r==="function")r(i);n.emit("torrent",i);}function a(){i.removeListener("_infoHash",o);i.removeListener("ready",s);i.removeListener("close",a);}return i;};E.prototype.seed=function(e,t,r){var n=this;if(n.destroyed)throw new Error("client is destroyed");if(typeof t==="function")return n.seed(e,null,t);n._debug("seed");t=t?c(t):{};if(typeof e==="string")t.path=v.dirname(e);if(!t.createdBy)t.createdBy="WebTorrent/"+j;var i=n.add(null,t,u);var a;if(x(e))e=Array.prototype.slice.call(e);if(!Array.isArray(e))e=[e];p(e.map(function(e){return function(t){if(C(e))o(e,t);else t(null,e);};}),function(e,r){if(n.destroyed)return;if(e)return i._destroy(e);s.parseInput(r,t,function(e,o){if(n.destroyed)return;if(e)return i._destroy(e);a=o.map(function(e){return e.getStream;});s(r,t,function(e,t){if(n.destroyed)return;if(e)return i._destroy(e);var r=n.get(t);if(r){i._destroy(new Error("Cannot add duplicate torrent "+r.infoHash));}else{i._onTorrentId(t);}});});});function u(e){var t=[function(t){e.load(a,t);}];if(n.dht){t.push(function(t){e.once("dhtAnnounce",t);});}p(t,function(t){if(n.destroyed)return;if(t)return e._destroy(t);l(e);});}function l(e){n._debug("on seed");if(typeof r==="function")r(e);e.emit("seed");n.emit("seed",e);}return i;};E.prototype.remove=function(e,t){this._debug("remove");var r=this.get(e);if(!r)throw new Error("No torrent with id "+e);this._remove(e,t);};E.prototype._remove=function(e,t){var r=this.get(e);if(!r)return;this.torrents.splice(this.torrents.indexOf(r),1);r.destroy(t);};E.prototype.address=function(){if(!this.listening)return null;return this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0};};E.prototype.destroy=function(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e);};E.prototype._destroy=function(e,t){var r=this;r._debug("client destroy");r.destroyed=true;var n=r.torrents.map(function(e){return function(t){e.destroy(t);};});if(r._tcpPool){n.push(function(e){r._tcpPool.destroy(e);});}if(r.dht){n.push(function(e){r.dht.destroy(e);});}p(n,t);if(e)r.emit("error",e);r.torrents=[];r._tcpPool=null;r.dht=null;};E.prototype._onListening=function(){this._debug("listening");this.listening=true;if(this._tcpPool){var e=this._tcpPool.server.address();if(e)this.torrentPort=e.port;}this.emit("listening");};E.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0];a.apply(null,e);};function C(e){return(typeof e==="undefined"?"undefined":_typeof(e))==="object"&&e!=null&&typeof e.pipe==="function";}function x(e){return typeof FileList!=="undefined"&&e instanceof FileList;}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"./lib/tcp-pool":38,"./lib/torrent":356,"./package.json":369,_process:40,"bittorrent-dht/client":38,"create-torrent":57,debug:69,events:73,inherits:94,"load-ip-set":38,"parse-torrent":149,path:150,randombytes:159,"run-parallel":175,"safe-buffer":177,"simple-concat":179,"simple-peer":181,speedometer:206,xtend:372,"zero-fill":374}],352:[function(e,t,r){t.exports=s;var n=e("debug")("webtorrent:file-stream");var i=e("inherits");var o=e("readable-stream");i(s,o.Readable);function s(e,t){o.Readable.call(this,t);this.destroyed=false;this._torrent=e._torrent;var r=t&&t.start||0;var n=t&&t.end&&t.end<e.length?t.end:e.length-1;var i=e._torrent.pieceLength;this._startPiece=(r+e.offset)/i|0;this._endPiece=(n+e.offset)/i|0;this._piece=this._startPiece;this._offset=r+e.offset-this._startPiece*i;this._missing=n-r+1;this._reading=false;this._notifying=false;this._criticalLength=Math.min(1024*1024/i|0,2);}s.prototype._read=function(){if(this._reading)return;this._reading=true;this._notify();};s.prototype._notify=function(){var e=this;if(!e._reading||e._missing===0)return;if(!e._torrent.bitfield.get(e._piece)){return e._torrent.critical(e._piece,e._piece+e._criticalLength);}if(e._notifying)return;e._notifying=true;var t=e._piece;e._torrent.store.get(t,function(r,i){e._notifying=false;if(e.destroyed)return;if(r)return e._destroy(r);n("read %s (length %s) (err %s)",t,i.length,r&&r.message);if(e._offset){i=i.slice(e._offset);e._offset=0;}if(e._missing<i.length){i=i.slice(0,e._missing);}e._missing-=i.length;n("pushing buffer of length %s",i.length);e._reading=false;e.push(i);if(e._missing===0)e.push(null);});e._piece+=1;};s.prototype.destroy=function(e){this._destroy(null,e);};s.prototype._destroy=function(e,t){if(this.destroyed)return;this.destroyed=true;if(!this._torrent.destroyed){this._torrent.deselect(this._startPiece,this._endPiece,true);}if(e)this.emit("error",e);this.emit("close");if(t)t();};},{debug:69,inherits:94,"readable-stream":367}],353:[function(e,t,r){(function(r){t.exports=p;var n=e("end-of-stream");var i=e("events").EventEmitter;var o=e("./file-stream");var s=e("inherits");var a=e("path");var u=e("render-media");var l=e("readable-stream");var c=e("stream-to-blob");var f=e("stream-to-blob-url");var d=e("stream-with-known-length-to-buffer");s(p,i);function p(e,t){i.call(this);this._torrent=e;this._destroyed=false;this.name=t.name;this.path=t.path;this.length=t.length;this.offset=t.offset;this.done=false;var r=t.offset;var n=r+t.length-1;this._startPiece=r/this._torrent.pieceLength|0;this._endPiece=n/this._torrent.pieceLength|0;if(this.length===0){this.done=true;this.emit("done");}}Object.defineProperty(p.prototype,"downloaded",{get:function get(){if(!this._torrent.bitfield)return 0;var e=0;for(var t=this._startPiece;t<=this._endPiece;++t){if(this._torrent.bitfield.get(t)){e+=this._torrent.pieceLength;}else{var r=this._torrent.pieces[t];e+=r.length-r.missing;}}return e;}});Object.defineProperty(p.prototype,"progress",{get:function get(){return this.length?this.downloaded/this.length:0;}});p.prototype.select=function(e){if(this.length===0)return;this._torrent.select(this._startPiece,this._endPiece,e);};p.prototype.deselect=function(){if(this.length===0)return;this._torrent.deselect(this._startPiece,this._endPiece,false);};p.prototype.createReadStream=function(e){var t=this;if(this.length===0){var i=new l.PassThrough();r.nextTick(function(){i.end();});return i;}var s=new o(t,e);t._torrent.select(s._startPiece,s._endPiece,true,function(){s._notify();});n(s,function(){if(t._destroyed)return;if(!t._torrent.destroyed){t._torrent.deselect(s._startPiece,s._endPiece,true);}});return s;};p.prototype.getBuffer=function(e){d(this.createReadStream(),this.length,e);};p.prototype.getBlob=function(e){if(typeof window==="undefined")throw new Error("browser-only method");c(this.createReadStream(),this._getMimeType(),e);};p.prototype.getBlobURL=function(e){if(typeof window==="undefined")throw new Error("browser-only method");f(this.createReadStream(),this._getMimeType(),e);};p.prototype.appendTo=function(e,t,r){if(typeof window==="undefined")throw new Error("browser-only method");u.append(this,e,t,r);};p.prototype.renderTo=function(e,t,r){if(typeof window==="undefined")throw new Error("browser-only method");u.render(this,e,t,r);};p.prototype._getMimeType=function(){return u.mime[a.extname(this.name).toLowerCase()];};p.prototype._destroy=function(){this._destroyed=true;this._torrent=null;};}).call(this,e("_process"));},{"./file-stream":352,_process:40,"end-of-stream":72,events:73,inherits:94,path:150,"readable-stream":367,"render-media":172,"stream-to-blob":223,"stream-to-blob-url":222,"stream-with-known-length-to-buffer":224}],354:[function(e,t,r){var n=e("unordered-array-remove");var i=e("debug")("webtorrent:peer");var o=e("bittorrent-protocol");var s=e("./webconn");var a=5e3;var u=25e3;var l=25e3;r.createWebRTCPeer=function(e,t){var r=new c(e.id,"webrtc");r.conn=e;r.swarm=t;if(r.conn.connected){r.onConnect();}else{r.conn.once("connect",function(){r.onConnect();});r.conn.once("error",function(e){r.destroy(e);});r.startConnectTimeout();}return r;};r.createTCPIncomingPeer=function(e){var t=e.remoteAddress+":"+e.remotePort;var r=new c(t,"tcpIncoming");r.conn=e;r.addr=t;r.onConnect();return r;};r.createTCPOutgoingPeer=function(e,t){var r=new c(e,"tcpOutgoing");r.addr=e;r.swarm=t;return r;};r.createWebSeedPeer=function(e,t){var r=new c(e,"webSeed");r.swarm=t;r.conn=new s(e,t);r.onConnect();return r;};function c(e,t){var r=this;r.id=e;r.type=t;i("new Peer %s",e);r.addr=null;r.conn=null;r.swarm=null;r.wire=null;r.connected=false;r.destroyed=false;r.timeout=null;r.retries=0;r.sentHandshake=false;}c.prototype.onConnect=function(){var e=this;if(e.destroyed)return;e.connected=true;i("Peer %s connected",e.id);clearTimeout(e.connectTimeout);var t=e.conn;t.once("end",function(){e.destroy();});t.once("close",function(){e.destroy();});t.once("finish",function(){e.destroy();});t.once("error",function(t){e.destroy(t);});var r=e.wire=new o();r.type=e.type;r.once("end",function(){e.destroy();});r.once("close",function(){e.destroy();});r.once("finish",function(){e.destroy();});r.once("error",function(t){e.destroy(t);});r.once("handshake",function(t,r){e.onHandshake(t,r);});e.startHandshakeTimeout();t.pipe(r).pipe(t);if(e.swarm&&!e.sentHandshake)e.handshake();};c.prototype.onHandshake=function(e,t){var r=this;if(!r.swarm)return;if(r.destroyed)return;if(r.swarm.destroyed){return r.destroy(new Error("swarm already destroyed"));}if(e!==r.swarm.infoHash){return r.destroy(new Error("unexpected handshake info hash for this swarm"));}if(t===r.swarm.peerId){return r.destroy(new Error("refusing to connect to ourselves"));}i("Peer %s got handshake %s",r.id,e);clearTimeout(r.handshakeTimeout);r.retries=0;var n=r.addr;if(!n&&r.conn.remoteAddress){n=r.conn.remoteAddress+":"+r.conn.remotePort;}r.swarm._onWire(r.wire,n);if(!r.swarm||r.swarm.destroyed)return;if(!r.sentHandshake)r.handshake();};c.prototype.handshake=function(){var e=this;var t={dht:e.swarm.private?false:!!e.swarm.client.dht};e.wire.handshake(e.swarm.infoHash,e.swarm.client.peerId,t);e.sentHandshake=true;};c.prototype.startConnectTimeout=function(){var e=this;clearTimeout(e.connectTimeout);e.connectTimeout=setTimeout(function(){e.destroy(new Error("connect timeout"));},e.type==="webrtc"?u:a);if(e.connectTimeout.unref)e.connectTimeout.unref();};c.prototype.startHandshakeTimeout=function(){var e=this;clearTimeout(e.handshakeTimeout);e.handshakeTimeout=setTimeout(function(){e.destroy(new Error("handshake timeout"));},l);if(e.handshakeTimeout.unref)e.handshakeTimeout.unref();};c.prototype.destroy=function(e){var t=this;if(t.destroyed)return;t.destroyed=true;t.connected=false;i("destroy %s (error: %s)",t.id,e&&(e.message||e));clearTimeout(t.connectTimeout);clearTimeout(t.handshakeTimeout);var r=t.swarm;var o=t.conn;var s=t.wire;t.swarm=null;t.conn=null;t.wire=null;if(r&&s){n(r.wires,r.wires.indexOf(s));}if(o){o.on("error",f);o.destroy();}if(s)s.destroy();if(r)r.removePeer(t.id);};function f(){}},{"./webconn":357,"bittorrent-protocol":9,debug:69,"unordered-array-remove":235}],355:[function(e,t,r){t.exports=n;function n(e){var t=this;t._torrent=e;t._numPieces=e.pieces.length;t._pieces=[];t._onWire=function(e){t.recalculate();t._initWire(e);};t._onWireHave=function(e){t._pieces[e]+=1;};t._onWireBitfield=function(){t.recalculate();};t._torrent.wires.forEach(function(e){t._initWire(e);});t._torrent.on("wire",t._onWire);t.recalculate();}n.prototype.getRarestPiece=function(e){if(!e)e=i;var t=[];var r=Infinity;for(var n=0;n<this._numPieces;++n){if(!e(n))continue;var o=this._pieces[n];if(o===r){t.push(n);}else if(o<r){t=[n];r=o;}}if(t.length>0){return t[Math.random()*t.length|0];}else{return-1;}};n.prototype.destroy=function(){var e=this;e._torrent.removeListener("wire",e._onWire);e._torrent.wires.forEach(function(t){e._cleanupWireEvents(t);});e._torrent=null;e._pieces=null;e._onWire=null;e._onWireHave=null;e._onWireBitfield=null;};n.prototype._initWire=function(e){var t=this;e._onClose=function(){t._cleanupWireEvents(e);for(var r=0;r<this._numPieces;++r){t._pieces[r]-=e.peerPieces.get(r);}};e.on("have",t._onWireHave);e.on("bitfield",t._onWireBitfield);e.once("close",e._onClose);};n.prototype.recalculate=function(){var e;for(e=0;e<this._numPieces;++e){this._pieces[e]=0;}var t=this._torrent.wires.length;for(e=0;e<t;++e){var r=this._torrent.wires[e];for(var n=0;n<this._numPieces;++n){this._pieces[n]+=r.peerPieces.get(n);}}};n.prototype._cleanupWireEvents=function(e){e.removeListener("have",this._onWireHave);e.removeListener("bitfield",this._onWireBitfield);if(e._onClose)e.removeListener("close",e._onClose);e._onClose=null;};function i(){return true;}},{}],356:[function(e,t,r){(function(r,n){t.exports=K;var i=e("addr-to-ip-port");var o=e("bitfield");var s=e("chunk-store-stream/write");var a=e("debug")("webtorrent:torrent");var u=e("torrent-discovery");var l=e("events").EventEmitter;var c=e("xtend");var f=e("xtend/mutable");var d=e("fs");var p=e("fs-chunk-store");var h=e("simple-get");var v=e("immediate-chunk-store");var y=e("inherits");var m=e("multistream");var g=e("net");var _=e("os");var b=e("run-parallel");var w=e("run-parallel-limit");var T=e("parse-torrent");var j=e("path");var k=e("torrent-piece");var E=e("pump");var C=e("random-iterate");var x=e("simple-sha1");var S=e("speedometer");var O=e("uniq");var P=e("ut_metadata");var A=e("ut_pex");var M=e("./file");var I=e("./peer");var L=e("./rarity-map");var R=e("./server");var B=128*1024;var D=3e4;var N=5e3;var F=3*k.BLOCK_LENGTH;var U=.5;var H=1;var V=1e4;var W=2;var q=2;var z=[1e3,5e3,15e3];var $=e("../package.json").version;var X="WebTorrent/"+$+" (https://webtorrent.io)";var G;try{G=j.join(d.statSync("/tmp")&&"/tmp","webtorrent");}catch(e){G=j.join(typeof _.tmpdir==="function"?_.tmpdir():"/","webtorrent");}y(K,l);function K(e,t,r){l.call(this);this._debugId="unknown infohash";this.client=t;this.announce=r.announce;this.urlList=r.urlList;this.path=r.path;this._store=r.store||p;this._getAnnounceOpts=r.getAnnounceOpts;this.strategy=r.strategy||"sequential";this.maxWebConns=r.maxWebConns||4;this._rechokeNumSlots=r.uploads===false||r.uploads===0?0:+r.uploads||10;this._rechokeOptimisticWire=null;this._rechokeOptimisticTime=0;this._rechokeIntervalId=null;this.ready=false;this.destroyed=false;this.paused=false;this.done=false;this.metadata=null;this.store=null;this.files=[];this.pieces=[];this._amInterested=false;this._selections=[];this._critical=[];this.wires=[];this._queue=[];this._peers={};this._peersLength=0;this.received=0;this.uploaded=0;this._downloadSpeed=S();this._uploadSpeed=S();this._servers=[];this._xsRequests=[];this._fileModtimes=r.fileModtimes;if(e!==null)this._onTorrentId(e);this._debug("new torrent");}Object.defineProperty(K.prototype,"timeRemaining",{get:function get(){if(this.done)return 0;if(this.downloadSpeed===0)return Infinity;return(this.length-this.downloaded)/this.downloadSpeed*1e3;}});Object.defineProperty(K.prototype,"downloaded",{get:function get(){if(!this.bitfield)return 0;var e=0;for(var t=0,r=this.pieces.length;t<r;++t){if(this.bitfield.get(t)){e+=t===r-1?this.lastPieceLength:this.pieceLength;}else{var n=this.pieces[t];e+=n.length-n.missing;}}return e;}});Object.defineProperty(K.prototype,"downloadSpeed",{get:function get(){return this._downloadSpeed();}});Object.defineProperty(K.prototype,"uploadSpeed",{get:function get(){return this._uploadSpeed();}});Object.defineProperty(K.prototype,"progress",{get:function get(){return this.length?this.downloaded/this.length:0;}});Object.defineProperty(K.prototype,"ratio",{get:function get(){return this.uploaded/(this.received||1);}});Object.defineProperty(K.prototype,"numPeers",{get:function get(){return this.wires.length;}});Object.defineProperty(K.prototype,"torrentFileBlobURL",{get:function get(){if(typeof window==="undefined")throw new Error("browser-only property");if(!this.torrentFile)return null;return URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"}));}});Object.defineProperty(K.prototype,"_numQueued",{get:function get(){return this._queue.length+(this._peersLength-this._numConns);}});Object.defineProperty(K.prototype,"_numConns",{get:function get(){var e=this;var t=0;for(var r in e._peers){if(e._peers[r].connected)t+=1;}return t;}});Object.defineProperty(K.prototype,"swarm",{get:function get(){console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead.");return this;}});K.prototype._onTorrentId=function(e){var t=this;if(t.destroyed)return;var n;try{n=T(e);}catch(e){}if(n){t.infoHash=n.infoHash;t._debugId=n.infoHash.toString("hex").substring(0,7);r.nextTick(function(){if(t.destroyed)return;t._onParsedTorrent(n);});}else{T.remote(e,function(e,r){if(t.destroyed)return;if(e)return t._destroy(e);t._onParsedTorrent(r);});}};K.prototype._onParsedTorrent=function(e){var t=this;if(t.destroyed)return;t._processParsedTorrent(e);if(!t.infoHash){return t._destroy(new Error("Malformed torrent data: No info hash"));}if(!t.path)t.path=j.join(G,t.infoHash);t._rechokeIntervalId=setInterval(function(){t._rechoke();},V);if(t._rechokeIntervalId.unref)t._rechokeIntervalId.unref();t.emit("_infoHash",t.infoHash);if(t.destroyed)return;t.emit("infoHash",t.infoHash);if(t.destroyed)return;if(t.client.listening){t._onListening();}else{t.client.once("listening",function(){t._onListening();});}};K.prototype._processParsedTorrent=function(e){this._debugId=e.infoHash.toString("hex").substring(0,7);if(this.announce){e.announce=e.announce.concat(this.announce);}if(this.client.tracker&&n.WEBTORRENT_ANNOUNCE&&!this.private){e.announce=e.announce.concat(n.WEBTORRENT_ANNOUNCE);}if(this.urlList){e.urlList=e.urlList.concat(this.urlList);}O(e.announce);O(e.urlList);f(this,e);this.magnetURI=T.toMagnetURI(e);this.torrentFile=T.toTorrentFile(e);};K.prototype._onListening=function(){var e=this;if(e.discovery||e.destroyed)return;var t=e.client.tracker;if(t){t=c(e.client.tracker,{getAnnounceOpts:function getAnnounceOpts(){var t={uploaded:e.uploaded,downloaded:e.downloaded,left:Math.max(e.length-e.downloaded,0)};if(e.client.tracker.getAnnounceOpts){f(t,e.client.tracker.getAnnounceOpts());}if(e._getAnnounceOpts){f(t,e._getAnnounceOpts());}return t;}});}e.discovery=new u({infoHash:e.infoHash,announce:e.announce,peerId:e.client.peerId,dht:!e.private&&e.client.dht,tracker:t,port:e.client.torrentPort,userAgent:X});e.discovery.on("error",r);e.discovery.on("peer",n);e.discovery.on("trackerAnnounce",i);e.discovery.on("dhtAnnounce",o);e.discovery.on("warning",s);function r(t){e._destroy(t);}function n(t){if(typeof t==="string"&&e.done)return;e.addPeer(t);}function i(){e.emit("trackerAnnounce");if(e.numPeers===0)e.emit("noPeers","tracker");}function o(){e.emit("dhtAnnounce");if(e.numPeers===0)e.emit("noPeers","dht");}function s(t){e.emit("warning",t);}if(e.info){e._onMetadata(e);}else if(e.xs){e._getMetadataFromServer();}};K.prototype._getMetadataFromServer=function(){var e=this;var t=Array.isArray(e.xs)?e.xs:[e.xs];var r=t.map(function(e){return function(t){n(e,t);};});b(r);function n(t,r){if(t.indexOf("http://")!==0&&t.indexOf("https://")!==0){e.emit("warning",new Error("skipping non-http xs param: "+t));return r(null);}var n={url:t,method:"GET",headers:{"user-agent":X}};var i;try{i=h.concat(n,o);}catch(n){e.emit("warning",new Error("skipping invalid url xs param: "+t));return r(null);}e._xsRequests.push(i);function o(n,i,o){if(e.destroyed)return r(null);if(e.metadata)return r(null);if(n){e.emit("warning",new Error("http error from xs param: "+t));return r(null);}if(i.statusCode!==200){e.emit("warning",new Error("non-200 status code "+i.statusCode+" from xs param: "+t));return r(null);}var s;try{s=T(o);}catch(n){}if(!s){e.emit("warning",new Error("got invalid torrent file from xs param: "+t));return r(null);}if(s.infoHash!==e.infoHash){e.emit("warning",new Error("got torrent file with incorrect info hash from xs param: "+t));return r(null);}e._onMetadata(s);r(null);}}};K.prototype._onMetadata=function(e){var t=this;if(t.metadata||t.destroyed)return;t._debug("got metadata");t._xsRequests.forEach(function(e){e.abort();});t._xsRequests=[];var r;if(e&&e.infoHash){r=e;}else{try{r=T(e);}catch(e){return t._destroy(e);}}t._processParsedTorrent(r);t.metadata=t.torrentFile;if(t.client.enableWebSeeds){t.urlList.forEach(function(e){t.addWebSeed(e);});}if(t.pieces.length!==0){t.select(0,t.pieces.length-1,false);}t._rarityMap=new L(t);t.store=new v(new t._store(t.pieceLength,{torrent:{infoHash:t.infoHash},files:t.files.map(function(e){return{path:j.join(t.path,e.path),length:e.length,offset:e.offset};}),length:t.length}));t.files=t.files.map(function(e){return new M(t,e);});t._hashes=t.pieces;t.pieces=t.pieces.map(function(e,r){var n=r===t.pieces.length-1?t.lastPieceLength:t.pieceLength;return new k(n);});t._reservations=t.pieces.map(function(){return[];});t.bitfield=new o(t.pieces.length);t.wires.forEach(function(e){if(e.ut_metadata)e.ut_metadata.setMetadata(t.metadata);t._onWireWithMetadata(e);});t._debug("verifying existing torrent data");if(t._fileModtimes&&t._store===p){t.getFileModtimes(function(e,r){if(e)return t._destroy(e);var n=t.files.map(function(e,n){return r[n]===t._fileModtimes[n];}).every(function(e){return e;});if(n){for(var i=0;i<t.pieces.length;i++){t._markVerified(i);}t._onStore();}else{t._verifyPieces();}});}else{t._verifyPieces();}t.emit("metadata");};K.prototype.getFileModtimes=function(e){var t=this;var r=[];w(t.files.map(function(e,n){return function(i){d.stat(j.join(t.path,e.path),function(e,t){if(e&&e.code!=="ENOENT")return i(e);r[n]=t&&t.mtime.getTime();i(null);});};}),q,function(n){t._debug("done getting file modtimes");e(n,r);});};K.prototype._verifyPieces=function(){var e=this;w(e.pieces.map(function(t,n){return function(t){if(e.destroyed)return t(new Error("torrent is destroyed"));e.store.get(n,function(i,o){if(e.destroyed)return t(new Error("torrent is destroyed"));if(i)return r.nextTick(t,null);x(o,function(r){if(e.destroyed)return t(new Error("torrent is destroyed"));if(r===e._hashes[n]){if(!e.pieces[n])return;e._debug("piece verified %s",n);e._markVerified(n);}else{e._debug("piece invalid %s",n);}t(null);});});};}),q,function(t){if(t)return e._destroy(t);e._debug("done verifying");e._onStore();});};K.prototype._markVerified=function(e){this.pieces[e]=null;this._reservations[e]=null;this.bitfield.set(e,true);};K.prototype._onStore=function(){var e=this;if(e.destroyed)return;e._debug("on store");e.ready=true;e.emit("ready");e._checkDone();e._updateSelections();};K.prototype.destroy=function(e){var t=this;t._destroy(null,e);};K.prototype._destroy=function(e,t){var r=this;if(r.destroyed)return;r.destroyed=true;r._debug("destroy");r.client._remove(r);clearInterval(r._rechokeIntervalId);r._xsRequests.forEach(function(e){e.abort();});if(r._rarityMap){r._rarityMap.destroy();}for(var n in r._peers){r.removePeer(n);}r.files.forEach(function(e){if(e instanceof M)e._destroy();});var i=r._servers.map(function(e){return function(t){e.destroy(t);};});if(r.discovery){i.push(function(e){r.discovery.destroy(e);});}if(r.store){i.push(function(e){r.store.close(e);});}b(i,t);if(e){if(r.listenerCount("error")===0){r.client.emit("error",e);}else{r.emit("error",e);}}r.emit("close");r.client=null;r.files=[];r.discovery=null;r.store=null;r._rarityMap=null;r._peers=null;r._servers=null;r._xsRequests=null;};K.prototype.addPeer=function(e){var t=this;if(t.destroyed)throw new Error("torrent is destroyed");if(!t.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(t.client.blocked){var r;if(typeof e==="string"){var n;try{n=i(e);}catch(r){t._debug("ignoring peer: invalid %s",e);t.emit("invalidPeer",e);return false;}r=n[0];}else if(typeof e.remoteAddress==="string"){r=e.remoteAddress;}if(r&&t.client.blocked.contains(r)){t._debug("ignoring peer: blocked %s",e);if(typeof e!=="string")e.destroy();t.emit("blockedPeer",e);return false;}}var o=!!t._addPeer(e);if(o){t.emit("peer",e);}else{t.emit("invalidPeer",e);}return o;};K.prototype._addPeer=function(e){var t=this;if(t.destroyed){if(typeof e!=="string")e.destroy();return null;}if(typeof e==="string"&&!t._validAddr(e)){t._debug("ignoring peer: invalid %s",e);return null;}var r=e&&e.id||e;if(t._peers[r]){t._debug("ignoring peer: duplicate (%s)",r);if(typeof e!=="string")e.destroy();return null;}if(t.paused){t._debug("ignoring peer: torrent is paused");if(typeof e!=="string")e.destroy();return null;}t._debug("add peer %s",r);var n;if(typeof e==="string"){n=I.createTCPOutgoingPeer(e,t);}else{n=I.createWebRTCPeer(e,t);}t._peers[n.id]=n;t._peersLength+=1;if(typeof e==="string"){t._queue.push(n);t._drain();}return n;};K.prototype.addWebSeed=function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e)){this.emit("warning",new Error("ignoring invalid web seed: "+e));this.emit("invalidPeer",e);return;}if(this._peers[e]){this.emit("warning",new Error("ignoring duplicate web seed: "+e));this.emit("invalidPeer",e);return;}this._debug("add web seed %s",e);var t=I.createWebSeedPeer(e,this);this._peers[t.id]=t;this._peersLength+=1;this.emit("peer",e);};K.prototype._addIncomingPeer=function(e){var t=this;if(t.destroyed)return e.destroy(new Error("torrent is destroyed"));if(t.paused)return e.destroy(new Error("torrent is paused"));this._debug("add incoming peer %s",e.id);t._peers[e.id]=e;t._peersLength+=1;};K.prototype.removePeer=function(e){var t=this;var r=e&&e.id||e;e=t._peers[r];if(!e)return;this._debug("removePeer %s",r);delete t._peers[r];t._peersLength-=1;e.destroy();t._drain();};K.prototype.select=function(e,t,r,n){var i=this;if(i.destroyed)throw new Error("torrent is destroyed");if(e<0||t<e||i.pieces.length<=t){throw new Error("invalid selection ",e,":",t);}r=Number(r)||0;i._debug("select %s-%s (priority %s)",e,t,r);i._selections.push({from:e,to:t,offset:0,priority:r,notify:n||Z});i._selections.sort(function(e,t){return t.priority-e.priority;});i._updateSelections();};K.prototype.deselect=function(e,t,r){var n=this;if(n.destroyed)throw new Error("torrent is destroyed");r=Number(r)||0;n._debug("deselect %s-%s (priority %s)",e,t,r);for(var i=0;i<n._selections.length;++i){var o=n._selections[i];if(o.from===e&&o.to===t&&o.priority===r){n._selections.splice(i,1);break;}}n._updateSelections();};K.prototype.critical=function(e,t){var r=this;if(r.destroyed)throw new Error("torrent is destroyed");r._debug("critical %s-%s",e,t);for(var n=e;n<=t;++n){r._critical[n]=true;}r._updateSelections();};K.prototype._onWire=function(e,t){var n=this;n._debug("got wire %s (%s)",e._debugId,t||"Unknown");e.on("download",function(e){if(n.destroyed)return;n.received+=e;n._downloadSpeed(e);n.client._downloadSpeed(e);n.emit("download",e);n.client.emit("download",e);});e.on("upload",function(e){if(n.destroyed)return;n.uploaded+=e;n._uploadSpeed(e);n.client._uploadSpeed(e);n.emit("upload",e);n.client.emit("upload",e);});n.wires.push(e);if(t){var o=i(t);e.remoteAddress=o[0];e.remotePort=o[1];}if(n.client.dht&&n.client.dht.listening){e.on("port",function(r){if(n.destroyed||n.client.dht.destroyed){return;}if(!e.remoteAddress){return n._debug("ignoring PORT from peer with no address");}if(r===0||r>65536){return n._debug("ignoring invalid PORT from peer");}n._debug("port: %s (from %s)",r,t);n.client.dht.addNode({host:e.remoteAddress,port:r});});}e.on("timeout",function(){n._debug("wire timeout (%s)",t);e.destroy();});e.setTimeout(D,true);e.setKeepAlive(true);e.use(P(n.metadata));e.ut_metadata.on("warning",function(e){n._debug("ut_metadata warning: %s",e.message);});if(!n.metadata){e.ut_metadata.on("metadata",function(e){n._debug("got metadata via ut_metadata");n._onMetadata(e);});e.ut_metadata.fetch();}if(typeof A==="function"&&!n.private){e.use(A());e.ut_pex.on("peer",function(e){if(n.done)return;n._debug("ut_pex: got peer: %s (from %s)",e,t);n.addPeer(e);});e.ut_pex.on("dropped",function(e){var r=n._peers[e];if(r&&!r.connected){n._debug("ut_pex: dropped peer: %s (from %s)",e,t);n.removePeer(e);}});e.once("close",function(){e.ut_pex.reset();});}n.emit("wire",e,t);if(n.metadata){r.nextTick(function(){n._onWireWithMetadata(e);});}};K.prototype._onWireWithMetadata=function(e){var t=this;var r=null;function n(){if(t.destroyed||e.destroyed)return;if(t._numQueued>2*(t._numConns-t.numPeers)&&e.amInterested){e.destroy();}else{r=setTimeout(n,N);if(r.unref)r.unref();}}var i;function o(){if(e.peerPieces.buffer.length!==t.bitfield.buffer.length)return;for(i=0;i<t.pieces.length;++i){if(!e.peerPieces.get(i))return;}e.isSeeder=true;e.choke();}e.on("bitfield",function(){o();t._update();});e.on("have",function(){o();t._update();});e.once("interested",function(){e.unchoke();});e.once("close",function(){clearTimeout(r);});e.on("choke",function(){clearTimeout(r);r=setTimeout(n,N);if(r.unref)r.unref();});e.on("unchoke",function(){clearTimeout(r);t._update();});e.on("request",function(r,n,i,o){if(i>B){return e.destroy();}if(t.pieces[r])return;t.store.get(r,{offset:n,length:i},o);});e.bitfield(t.bitfield);e.interested();if(e.peerExtensions.dht&&t.client.dht&&t.client.dht.listening){e.port(t.client.dht.address().port);}if(e.type!=="webSeed"){r=setTimeout(n,N);if(r.unref)r.unref();}e.isSeeder=false;o();};K.prototype._updateSelections=function(){var e=this;if(!e.ready||e.destroyed)return;r.nextTick(function(){e._gcSelections();});e._updateInterest();e._update();};K.prototype._gcSelections=function(){var e=this;for(var t=0;t<e._selections.length;++t){var r=e._selections[t];var n=r.offset;while(e.bitfield.get(r.from+r.offset)&&r.from+r.offset<r.to){r.offset+=1;}if(n!==r.offset)r.notify();if(r.to!==r.from+r.offset)continue;if(!e.bitfield.get(r.from+r.offset))continue;e._selections.splice(t,1);t-=1;r.notify();e._updateInterest();}if(!e._selections.length)e.emit("idle");};K.prototype._updateInterest=function(){var e=this;var t=e._amInterested;e._amInterested=!!e._selections.length;e.wires.forEach(function(t){if(e._amInterested)t.interested();else t.uninterested();});if(t===e._amInterested)return;if(e._amInterested)e.emit("interested");else e.emit("uninterested");};K.prototype._update=function(){var e=this;if(e.destroyed)return;var t=C(e.wires);var r;while(r=t()){e._updateWire(r);}};K.prototype._updateWire=function(e){var t=this;if(e.peerChoking)return;if(!e.downloaded)return o();var r=Y(e,U);if(e.requests.length>=r)return;var n=Y(e,H);u(false)||u(true);function i(t,r,n,i){return function(o){return o>=t&&o<=r&&!(o in n)&&e.peerPieces.get(o)&&(!i||i(o));};}function o(){if(e.requests.length)return;var r=t._selections.length;while(r--){var n=t._selections[r];var o;if(t.strategy==="rarest"){var s=n.from+n.offset;var a=n.to;var u=a-s+1;var l={};var c=0;var f=i(s,a,l);while(c<u){o=t._rarityMap.getRarestPiece(f);if(o<0)break;if(t._request(e,o,false))return;l[o]=true;c+=1;}}else{for(o=n.to;o>=n.from+n.offset;--o){if(!e.peerPieces.get(o))continue;if(t._request(e,o,false))return;}}}}function s(){var r=e.downloadSpeed()||1;if(r>F)return function(){return true;};var n=Math.max(1,e.requests.length)*k.BLOCK_LENGTH/r;var i=10;var o=0;return function(e){if(!i||t.bitfield.get(e))return true;var s=t.pieces[e].missing;for(;o<t.wires.length;o++){var a=t.wires[o];var u=a.downloadSpeed();if(u<F)continue;if(u<=r)continue;if(!a.peerPieces.get(e))continue;if((s-=u*n)>0)continue;i--;return false;}return true;};}function a(e){var r=e;for(var n=e;n<t._selections.length&&t._selections[n].priority;n++){r=n;}var i=t._selections[e];t._selections[e]=t._selections[r];t._selections[r]=i;}function u(r){if(e.requests.length>=n)return true;var o=s();for(var u=0;u<t._selections.length;u++){var l=t._selections[u];var c;if(t.strategy==="rarest"){var f=l.from+l.offset;var d=l.to;var p=d-f+1;var h={};var v=0;var y=i(f,d,h,o);while(v<p){c=t._rarityMap.getRarestPiece(y);if(c<0)break;while(t._request(e,c,t._critical[c]||r)){}if(e.requests.length<n){h[c]=true;v++;continue;}if(l.priority)a(u);return true;}}else{for(c=l.from+l.offset;c<=l.to;c++){if(!e.peerPieces.get(c)||!o(c))continue;while(t._request(e,c,t._critical[c]||r)){}if(e.requests.length<n)continue;if(l.priority)a(u);return true;}}}return false;}};K.prototype._rechoke=function(){var e=this;if(!e.ready)return;if(e._rechokeOptimisticTime>0)e._rechokeOptimisticTime-=1;else e._rechokeOptimisticWire=null;var t=[];e.wires.forEach(function(r){if(!r.isSeeder&&r!==e._rechokeOptimisticWire){t.push({wire:r,downloadSpeed:r.downloadSpeed(),uploadSpeed:r.uploadSpeed(),salt:Math.random(),isChoked:true});}});t.sort(s);var r=0;var n=0;for(;n<t.length&&r<e._rechokeNumSlots;++n){t[n].isChoked=false;if(t[n].wire.peerInterested)r+=1;}if(!e._rechokeOptimisticWire&&n<t.length&&e._rechokeNumSlots){var i=t.slice(n).filter(function(e){return e.wire.peerInterested;});var o=i[Q(i.length)];if(o){o.isChoked=false;e._rechokeOptimisticWire=o.wire;e._rechokeOptimisticTime=W;}}t.forEach(function(e){if(e.wire.amChoking!==e.isChoked){if(e.isChoked)e.wire.choke();else e.wire.unchoke();}});function s(e,t){if(e.downloadSpeed!==t.downloadSpeed){return t.downloadSpeed-e.downloadSpeed;}if(e.uploadSpeed!==t.uploadSpeed){return t.uploadSpeed-e.uploadSpeed;}if(e.wire.amChoking!==t.wire.amChoking){return e.wire.amChoking?1:-1;}return e.salt-t.salt;}};K.prototype._hotswap=function(e,t){var r=this;var n=e.downloadSpeed();if(n<k.BLOCK_LENGTH)return false;if(!r._reservations[t])return false;var i=r._reservations[t];if(!i){return false;}var o=Infinity;var s;var a;for(a=0;a<i.length;a++){var u=i[a];if(!u||u===e)continue;var l=u.downloadSpeed();if(l>=F)continue;if(2*l>n||l>o)continue;s=u;o=l;}if(!s)return false;for(a=0;a<i.length;a++){if(i[a]===s)i[a]=null;}for(a=0;a<s.requests.length;a++){var c=s.requests[a];if(c.piece!==t)continue;r.pieces[t].cancel(c.offset/k.BLOCK_LENGTH|0);}r.emit("hotswap",s,e,t);return true;};K.prototype._request=function(e,t,n){var i=this;var o=e.requests.length;var s=e.type==="webSeed";if(i.bitfield.get(t))return false;var a=s?Math.min(J(e,H,i.pieceLength),i.maxWebConns):Y(e,H);if(o>=a)return false;var u=i.pieces[t];var l=s?u.reserveRemaining():u.reserve();if(l===-1&&n&&i._hotswap(e,t)){l=s?u.reserveRemaining():u.reserve();}if(l===-1)return false;var c=i._reservations[t];if(!c)c=i._reservations[t]=[];var f=c.indexOf(null);if(f===-1)f=c.length;c[f]=e;var d=u.chunkOffset(l);var p=s?u.chunkLengthRemaining(l):u.chunkLength(l);e.request(t,d,p,function r(n,o){if(i.destroyed)return;if(!i.ready)return i.once("ready",function(){r(n,o);});if(c[f]===e)c[f]=null;if(u!==i.pieces[t])return h();if(n){i._debug("error getting piece %s (offset: %s length: %s) from %s: %s",t,d,p,e.remoteAddress+":"+e.remotePort,n.message);s?u.cancelRemaining(l):u.cancel(l);h();return;}i._debug("got piece %s (offset: %s length: %s) from %s",t,d,p,e.remoteAddress+":"+e.remotePort);if(!u.set(l,o,e))return h();var a=u.flush();x(a,function(e){if(i.destroyed)return;if(e===i._hashes[t]){if(!i.pieces[t])return;i._debug("piece verified %s",t);i.pieces[t]=null;i._reservations[t]=null;i.bitfield.set(t,true);i.store.put(t,a);i.wires.forEach(function(e){e.have(t);});if(i._checkDone()&&!i.destroyed)i.discovery.complete();}else{i.pieces[t]=new k(u.length);i.emit("warning",new Error("Piece "+t+" failed verification"));}h();});});function h(){r.nextTick(function(){i._update();});}return true;};K.prototype._checkDone=function(){var e=this;if(e.destroyed)return;e.files.forEach(function(t){if(t.done)return;for(var r=t._startPiece;r<=t._endPiece;++r){if(!e.bitfield.get(r))return;}t.done=true;t.emit("done");e._debug("file done: "+t.name);});var t=true;for(var r=0;r<e._selections.length;r++){var n=e._selections[r];for(var i=n.from;i<=n.to;i++){if(!e.bitfield.get(i)){t=false;break;}}if(!t)break;}if(!e.done&&t){e.done=true;e._debug("torrent done: "+e.infoHash);e.emit("done");}e._gcSelections();return t;};K.prototype.load=function(e,t){var r=this;if(r.destroyed)throw new Error("torrent is destroyed");if(!r.ready)return r.once("ready",function(){r.load(e,t);});if(!Array.isArray(e))e=[e];if(!t)t=Z;var n=new m(e);var i=new s(r.store,r.pieceLength);E(n,i,function(e){if(e)return t(e);r.pieces.forEach(function(e,t){r.pieces[t]=null;r._reservations[t]=null;r.bitfield.set(t,true);});r._checkDone();t(null);});};K.prototype.createServer=function(e){if(typeof R!=="function")throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");var t=new R(this,e);this._servers.push(t);return t;};K.prototype.pause=function(){if(this.destroyed)return;this._debug("pause");this.paused=true;};K.prototype.resume=function(){if(this.destroyed)return;this._debug("resume");this.paused=false;this._drain();};K.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this.client._debugId+"] ["+this._debugId+"] "+e[0];a.apply(null,e);};K.prototype._drain=function(){var e=this;this._debug("_drain numConns %s maxConns %s",e._numConns,e.client.maxConns);if(typeof g.connect!=="function"||e.destroyed||e.paused||e._numConns>=e.client.maxConns){return;}this._debug("drain (%s queued, %s/%s peers)",e._numQueued,e.numPeers,e.client.maxConns);var t=e._queue.shift();if(!t)return;this._debug("tcp connect attempt to %s",t.addr);var r=i(t.addr);var n={host:r[0],port:r[1]};var o=t.conn=g.connect(n);o.once("connect",function(){t.onConnect();});o.once("error",function(e){t.destroy(e);});t.startConnectTimeout();o.on("close",function(){if(e.destroyed)return;if(t.retries>=z.length){e._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,z.length);return;}var r=z[t.retries];e._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,r,t.retries+1);var n=setTimeout(function r(){var n=e._addPeer(t.addr);if(n)n.retries=t.retries+1;},r);if(n.unref)n.unref();});};K.prototype._validAddr=function(e){var t;try{t=i(e);}catch(e){return false;}var r=t[0];var n=t[1];return n>0&&n<65535&&!(r==="127.0.0.1"&&n===this.client.torrentPort);};function Y(e,t){return 2+Math.ceil(t*e.downloadSpeed()/k.BLOCK_LENGTH);}function J(e,t,r){return 1+Math.ceil(t*e.downloadSpeed()/r);}function Q(e){return Math.random()*e|0;}function Z(){}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"../package.json":369,"./file":353,"./peer":354,"./rarity-map":355,"./server":38,_process:40,"addr-to-ip-port":2,bitfield:8,"chunk-store-stream/write":54,debug:69,events:73,fs:39,"fs-chunk-store":114,"immediate-chunk-store":93,inherits:94,multistream:133,net:38,os:38,"parse-torrent":149,path:150,pump:153,"random-iterate":158,"run-parallel":175,"run-parallel-limit":174,"simple-get":180,"simple-sha1":193,speedometer:206,"torrent-discovery":228,"torrent-piece":229,uniq:234,ut_metadata:238,ut_pex:38,xtend:372,"xtend/mutable":373}],357:[function(e,t,r){t.exports=f;var n=e("bitfield");var i=e("safe-buffer").Buffer;var o=e("debug")("webtorrent:webconn");var s=e("simple-get");var a=e("inherits");var u=e("simple-sha1");var l=e("bittorrent-protocol");var c=e("../package.json").version;a(f,l);function f(e,t){l.call(this);this.url=e;this.webPeerId=u.sync(e);this._torrent=t;this._init();}f.prototype._init=function(){var e=this;e.setKeepAlive(true);e.once("handshake",function(t,r){if(e.destroyed)return;e.handshake(t,e.webPeerId);var i=e._torrent.pieces.length;var o=new n(i);for(var s=0;s<=i;s++){o.set(s,true);}e.bitfield(o);});e.once("interested",function(){o("interested");e.unchoke();});e.on("uninterested",function(){o("uninterested");});e.on("choke",function(){o("choke");});e.on("unchoke",function(){o("unchoke");});e.on("bitfield",function(){o("bitfield");});e.on("request",function(t,r,n,i){o("request pieceIndex=%d offset=%d length=%d",t,r,n);e.httpRequest(t,r,n,i);});};f.prototype.httpRequest=function(e,t,r,n){var a=this;var u=e*a._torrent.pieceLength;var l=u+t;var f=l+r-1;var d=a._torrent.files;var p;if(d.length<=1){p=[{url:a.url,start:l,end:f}];}else{var h=d.filter(function(e){return e.offset<=f&&e.offset+e.length>l;});if(h.length<1){return n(new Error("Could not find file corresponnding to web seed range request"));}p=h.map(function(e){var t=e.offset+e.length-1;var r=a.url+(a.url[a.url.length-1]==="/"?"":"/")+e.path;return{url:r,fileOffsetInRange:Math.max(e.offset-l,0),start:Math.max(l-e.offset,0),end:Math.min(t,f-e.offset)};});}var v=0;var y=false;var m;if(p.length>1){m=i.alloc(r);}p.forEach(function(i){var a=i.url;var u=i.start;var l=i.end;o("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",a,e,t,r,u,l);var f={url:a,method:"GET",headers:{"user-agent":"WebTorrent/"+c+" (https://webtorrent.io)",range:"bytes="+u+"-"+l}};function d(e,t){if(e.statusCode<200||e.statusCode>=300){y=true;return n(new Error("Unexpected HTTP status code "+e.statusCode));}o("Got data of length %d",t.length);if(p.length===1){n(null,t);}else{t.copy(m,i.fileOffsetInRange);if(++v===p.length){n(null,m);}}}s.concat(f,function(e,t,r){if(y)return;if(e){if(typeof window==="undefined"||a.startsWith(window.location.origin+"/")){y=true;return n(e);}return s.head(a,function(t,r){if(y)return;if(t){y=true;return n(t);}if(r.statusCode<200||r.statusCode>=300){y=true;return n(new Error("Unexpected HTTP status code "+r.statusCode));}if(r.url===a){y=true;return n(e);}f.url=r.url;s.concat(f,function(e,t,r){if(y)return;if(e){y=true;return n(e);}d(t,r);});});}d(t,r);});});};f.prototype.destroy=function(){l.prototype.destroy.call(this);this._torrent=null;};},{"../package.json":369,bitfield:8,"bittorrent-protocol":9,debug:69,inherits:94,"safe-buffer":177,"simple-get":180,"simple-sha1":193}],358:[function(e,t,r){arguments[4][10][0].apply(r,arguments);},{dup:10}],359:[function(e,t,r){arguments[4][11][0].apply(r,arguments);},{"./_stream_readable":361,"./_stream_writable":363,"core-util-is":56,dup:11,inherits:94,"process-nextick-args":152}],360:[function(e,t,r){arguments[4][12][0].apply(r,arguments);},{"./_stream_transform":362,"core-util-is":56,dup:12,inherits:94}],361:[function(e,t,r){arguments[4][13][0].apply(r,arguments);},{"./_stream_duplex":359,"./internal/streams/BufferList":364,"./internal/streams/destroy":365,"./internal/streams/stream":366,_process:40,"core-util-is":56,dup:13,events:73,inherits:94,isarray:358,"process-nextick-args":152,"safe-buffer":177,"string_decoder/":368,util:38}],362:[function(e,t,r){arguments[4][14][0].apply(r,arguments);},{"./_stream_duplex":359,"core-util-is":56,dup:14,inherits:94}],363:[function(e,t,r){arguments[4][15][0].apply(r,arguments);},{"./_stream_duplex":359,"./internal/streams/destroy":365,"./internal/streams/stream":366,_process:40,"core-util-is":56,dup:15,inherits:94,"process-nextick-args":152,"safe-buffer":177,"util-deprecate":239}],364:[function(e,t,r){arguments[4][16][0].apply(r,arguments);},{dup:16,"safe-buffer":177}],365:[function(e,t,r){arguments[4][17][0].apply(r,arguments);},{dup:17,"process-nextick-args":152}],366:[function(e,t,r){arguments[4][18][0].apply(r,arguments);},{dup:18,events:73}],367:[function(e,t,r){arguments[4][19][0].apply(r,arguments);},{"./lib/_stream_duplex.js":359,"./lib/_stream_passthrough.js":360,"./lib/_stream_readable.js":361,"./lib/_stream_transform.js":362,"./lib/_stream_writable.js":363,dup:19}],368:[function(e,t,r){arguments[4][20][0].apply(r,arguments);},{dup:20,"safe-buffer":177}],369:[function(e,t,r){t.exports={version:"0.98.19"};},{}],370:[function(e,t,r){t.exports=n;function n(e,t){if(e&&t)return n(e)(t);if(typeof e!=="function")throw new TypeError("need wrapper function");Object.keys(e).forEach(function(t){r[t]=e[t];});return r;function r(){var t=new Array(arguments.length);for(var r=0;r<t.length;r++){t[r]=arguments[r];}var n=e.apply(this,t);var i=t[t.length-1];if(typeof n==="function"&&n!==i){Object.keys(i).forEach(function(e){n[e]=i[e];});}return n;}}},{}],371:[function(e,t,r){"use strict";var n=e("global/window");var i=e("is-function");var o=e("parse-headers");var s=e("xtend");t.exports=c;c.XMLHttpRequest=n.XMLHttpRequest||p;c.XDomainRequest="withCredentials"in new c.XMLHttpRequest()?c.XMLHttpRequest:n.XDomainRequest;a(["get","put","post","patch","head","delete"],function(e){c[e==="delete"?"del":e]=function(t,r,n){r=l(t,r,n);r.method=e.toUpperCase();return f(r);};});function a(e,t){for(var r=0;r<e.length;r++){t(e[r]);}}function u(e){for(var t in e){if(e.hasOwnProperty(t))return false;}return true;}function l(e,t,r){var n=e;if(i(t)){r=t;if(typeof e==="string"){n={uri:e};}}else{n=s(t,{uri:e});}n.callback=r;return n;}function c(e,t,r){t=l(e,t,r);return f(t);}function f(e){if(typeof e.callback==="undefined"){throw new Error("callback argument missing");}var t=false;var r=function r(n,i,o){if(!t){t=true;e.callback(n,i,o);}};function n(){if(f.readyState===4){l();}}function i(){var e=undefined;if(f.response){e=f.response;}else{e=f.responseText||d(f);}if(b){try{e=JSON.parse(e);}catch(e){}}return e;}var s={body:undefined,headers:{},statusCode:0,method:y,url:v,rawRequest:f};function a(e){clearTimeout(w);if(!(e instanceof Error)){e=new Error(""+(e||"Unknown XMLHttpRequest Error"));}e.statusCode=0;return r(e,s);}function l(){if(h)return;var t;clearTimeout(w);if(e.useXDR&&f.status===undefined){t=200;}else{t=f.status===1223?204:f.status;}var n=s;var a=null;if(t!==0){n={body:i(),statusCode:t,method:y,headers:{},url:v,rawRequest:f};if(f.getAllResponseHeaders){n.headers=o(f.getAllResponseHeaders());}}else{a=new Error("Internal XMLHttpRequest Error");}return r(a,n,n.body);}var f=e.xhr||null;if(!f){if(e.cors||e.useXDR){f=new c.XDomainRequest();}else{f=new c.XMLHttpRequest();}}var p;var h;var v=f.url=e.uri||e.url;var y=f.method=e.method||"GET";var m=e.body||e.data||null;var g=f.headers=e.headers||{};var _=!!e.sync;var b=false;var w;if("json"in e){b=true;g["accept"]||g["Accept"]||(g["Accept"]="application/json");if(y!=="GET"&&y!=="HEAD"){g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json");m=JSON.stringify(e.json);}}f.onreadystatechange=n;f.onload=l;f.onerror=a;f.onprogress=function(){};f.ontimeout=a;f.open(y,v,!_,e.username,e.password);if(!_){f.withCredentials=!!e.withCredentials;}if(!_&&e.timeout>0){w=setTimeout(function(){h=true;f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";a(e);},e.timeout);}if(f.setRequestHeader){for(p in g){if(g.hasOwnProperty(p)){f.setRequestHeader(p,g[p]);}}}else if(e.headers&&!u(e.headers)){throw new Error("Headers cannot be set on an XDomainRequest object");}if("responseType"in e){f.responseType=e.responseType;}if("beforeSend"in e&&typeof e.beforeSend==="function"){e.beforeSend(f);}f.send(m);return f;}function d(e){if(e.responseType==="document"){return e.responseXML;}var t=e.status===204&&e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t){return e.responseXML;}return null;}function p(){}},{"global/window":90,"is-function":98,"parse-headers":147,xtend:372}],372:[function(e,t,r){t.exports=i;var n=Object.prototype.hasOwnProperty;function i(){var e={};for(var t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(n.call(r,i)){e[i]=r[i];}}}return e;}},{}],373:[function(e,t,r){t.exports=i;var n=Object.prototype.hasOwnProperty;function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(n.call(r,i)){e[i]=r[i];}}}return e;}},{}],374:[function(e,t,r){t.exports=function e(t,r,n){if(r===undefined){return function(r,n){return e(t,r,n);};}if(n===undefined)n="0";t-=r.toString().length;if(t>0)return new Array(t+(/\./.test(r)?2:1)).join(n)+r;return r+"";};},{}],375:[function(e,t,r){var n=function e(t){this._videojs=t;this._scripts=[{url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",required:false}];};n.prototype.loadDependencies=function t(){var r=this;window.videojs=this._videojs;var n=[];for(var i=0;i<this._scripts.length;i++){n.push(this._loadScript(this._scripts[i]));}return Promise.all(n).then(function(t){var n=e("videojs-resolution-switcher");var i=e("videojs-ima");r._videojs.plugin("ima",function(e,t){this.ima=new i(this,e,t);});}).catch(function(e){console.log(e.stack);throw new Error("Could not load dependency: "+e);});};n.prototype._loadScript=function e(t){return new Promise(function(e,r){var n=document.createElement("script");n.src=t.url;n.onload=function(){e(true);};n.onerror=function(){if(t.required===true){r(n);}else{e(false);}};document.head.appendChild(n);});};t.exports=n;},{"videojs-ima":341,"videojs-resolution-switcher":342}],376:[function(e,t,r){var n=e("webtorrent");var i=function e(){this.torrent=null;this.destroy=function(){return Promise.resolve(true);};};i.prototype.change=function e(t){var r=this;if(this.torrent!==null){this.destroy=function(){return new Promise(function(e,t){try{r.torrent.destroy(function(){r.torrent=null;e(true);});}catch(e){t(e);}});};}return this.destroy().then(function(){r.torrent=new n();return r.torrent.add(t,function(e){return e;});});};i.prototype.isSupported=function e(){return n.WEBRTC_SUPPORT;};t.exports=i;},{webtorrent:351}]},{},[1]);
